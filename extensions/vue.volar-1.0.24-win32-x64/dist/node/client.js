var mu=Object.defineProperty;var wS=Object.getOwnPropertyDescriptor;var CS=Object.getOwnPropertyNames;var bS=Object.prototype.hasOwnProperty;var Mg=(t,e)=>()=>(t&&(e=t(t=0)),e);var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Lg=(t,e)=>{for(var n in e)mu(t,n,{get:e[n],enumerable:!0})},SS=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of CS(e))!bS.call(t,i)&&i!==n&&mu(t,i,{get:()=>e[i],enumerable:!(r=wS(e,i))||r.enumerable});return t};var la=t=>SS(mu({},"__esModule",{value:!0}),t);var lr=b(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var vu;function yu(){if(vu===void 0)throw new Error("No runtime abstraction layer installed");return vu}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");vu=n}t.install=e})(yu||(yu={}));_u.default=yu});var wu=b(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Disposable=void 0;var RS;(function(t){function e(n){return{dispose:n}}t.create=e})(RS=Ks.Disposable||(Ks.Disposable={}))});var Ag=b(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.AbstractMessageBuffer=void 0;var DS=13,TS=10,xS=`\r
`,Cu=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let c=this._chunks[n];r=0;t:for(;r<c.length;){switch(c[r]){case DS:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case TS:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=c.byteLength,n++}if(e!==4)return;let s=this._read(i+r),o=new Map,a=this.toString(s,"ascii").split(xS);if(a.length<2)return o;for(let c=0;c<a.length-2;c++){let u=a[c],l=u.indexOf(":");if(l===-1)throw new Error("Message header must separate key and value using :");let d=u.substr(0,l),p=u.substr(l+1).trim();o.set(d,p)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);n.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};da.AbstractMessageBuffer=Cu});var Hg=b(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});var PS=lr(),jg=require("util"),ti=wu(),qS=Ag(),ji=class extends qS.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return ji.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new jg.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};ji.emptyBuffer=Buffer.allocUnsafe(0);var bu=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ti.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ti.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ti.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ti.Disposable.create(()=>this.stream.off("data",e))}},Su=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ti.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ti.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ti.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},$g=Object.freeze({messageBuffer:Object.freeze({create:t=>new ji(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new jg.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new bu(t),asWritableStream:t=>new Su(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Ru(){return $g}(function(t){function e(){PS.default.install($g)}t.install=e})(Ru||(Ru={}));Du.default=Ru});var $i=b(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.stringArray=Et.array=Et.func=Et.error=Et.number=Et.string=Et.boolean=void 0;function ES(t){return t===!0||t===!1}Et.boolean=ES;function Ug(t){return typeof t=="string"||t instanceof String}Et.string=Ug;function kS(t){return typeof t=="number"||t instanceof Number}Et.number=kS;function OS(t){return t instanceof Error}Et.error=OS;function NS(t){return typeof t=="function"}Et.func=NS;function Wg(t){return Array.isArray(t)}Et.array=Wg;function FS(t){return Wg(t)&&t.every(e=>Ug(e))}Et.stringArray=FS});var Gu=b(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.Message=X.NotificationType9=X.NotificationType8=X.NotificationType7=X.NotificationType6=X.NotificationType5=X.NotificationType4=X.NotificationType3=X.NotificationType2=X.NotificationType1=X.NotificationType0=X.NotificationType=X.RequestType9=X.RequestType8=X.RequestType7=X.RequestType6=X.RequestType5=X.RequestType4=X.RequestType3=X.RequestType2=X.RequestType1=X.RequestType=X.RequestType0=X.AbstractMessageSignature=X.ParameterStructures=X.ResponseError=X.ErrorCodes=void 0;var ni=$i(),Bg;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Bg=X.ErrorCodes||(X.ErrorCodes={}));var Vs=class extends Error{constructor(e,n,r){super(n),this.code=ni.number(e)?e:Bg.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,Vs.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};X.ResponseError=Vs;var yt=class{constructor(e){this.kind=e}static is(e){return e===yt.auto||e===yt.byName||e===yt.byPosition}toString(){return this.kind}};X.ParameterStructures=yt;yt.auto=new yt("auto");yt.byPosition=new yt("byPosition");yt.byName=new yt("byName");var Be=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return yt.auto}};X.AbstractMessageSignature=Be;var Tu=class extends Be{constructor(e){super(e,0)}};X.RequestType0=Tu;var xu=class extends Be{constructor(e,n=yt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};X.RequestType=xu;var Pu=class extends Be{constructor(e,n=yt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};X.RequestType1=Pu;var qu=class extends Be{constructor(e){super(e,2)}};X.RequestType2=qu;var Eu=class extends Be{constructor(e){super(e,3)}};X.RequestType3=Eu;var ku=class extends Be{constructor(e){super(e,4)}};X.RequestType4=ku;var Ou=class extends Be{constructor(e){super(e,5)}};X.RequestType5=Ou;var Nu=class extends Be{constructor(e){super(e,6)}};X.RequestType6=Nu;var Fu=class extends Be{constructor(e){super(e,7)}};X.RequestType7=Fu;var Iu=class extends Be{constructor(e){super(e,8)}};X.RequestType8=Iu;var Mu=class extends Be{constructor(e){super(e,9)}};X.RequestType9=Mu;var Lu=class extends Be{constructor(e,n=yt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};X.NotificationType=Lu;var Au=class extends Be{constructor(e){super(e,0)}};X.NotificationType0=Au;var ju=class extends Be{constructor(e,n=yt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};X.NotificationType1=ju;var $u=class extends Be{constructor(e){super(e,2)}};X.NotificationType2=$u;var Hu=class extends Be{constructor(e){super(e,3)}};X.NotificationType3=Hu;var Uu=class extends Be{constructor(e){super(e,4)}};X.NotificationType4=Uu;var Wu=class extends Be{constructor(e){super(e,5)}};X.NotificationType5=Wu;var Bu=class extends Be{constructor(e){super(e,6)}};X.NotificationType6=Bu;var zu=class extends Be{constructor(e){super(e,7)}};X.NotificationType7=zu;var Ku=class extends Be{constructor(e){super(e,8)}};X.NotificationType8=Ku;var Vu=class extends Be{constructor(e){super(e,9)}};X.NotificationType9=Vu;var IS;(function(t){function e(i){let s=i;return s&&ni.string(s.method)&&(ni.string(s.id)||ni.number(s.id))}t.isRequest=e;function n(i){let s=i;return s&&ni.string(s.method)&&i.id===void 0}t.isNotification=n;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(ni.string(s.id)||ni.number(s.id)||s.id===null)}t.isResponse=r})(IS=X.Message||(X.Message={}))});var Ju=b(dr=>{"use strict";var zg;Object.defineProperty(dr,"__esModule",{value:!0});dr.LRUCache=dr.LinkedMap=dr.Touch=void 0;var jt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(jt=dr.Touch||(dr.Touch={}));var fa=class{constructor(){this[zg]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=jt.None){let r=this._map.get(e);if(r)return n!==jt.None&&this.touch(r,n),r.value}set(e,n,r=jt.None){let i=this._map.get(e);if(i)i.value=n,r!==jt.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case jt.None:this.addItemLast(i);break;case jt.First:this.addItemFirst(i);break;case jt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(zg=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==jt.First&&n!==jt.Last)){if(n===jt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===jt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};dr.LinkedMap=fa;var Xu=class extends fa{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=jt.AsNew){return super.get(e,n)}peek(e){return super.get(e,jt.None)}set(e,n){return super.set(e,n,jt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};dr.LRUCache=Xu});var Ui=b(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.Emitter=ri.Event=void 0;var MS=lr(),LS;(function(t){let e={dispose(){}};t.None=function(){return e}})(LS=ri.Event||(ri.Event={}));var Yu=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{n.push(r[s].apply(i[s],e))}catch(a){(0,MS.default)().console.error(a)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Hi=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new Yu),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=Hi._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ri.Emitter=Hi;Hi._noop=function(){}});var tl=b(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.CancellationTokenSource=ii.CancellationToken=void 0;var AS=lr(),jS=$i(),Qu=Ui(),Zu;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Qu.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Qu.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||jS.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Zu=ii.CancellationToken||(ii.CancellationToken={}));var $S=Object.freeze(function(t,e){let n=(0,AS.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),ha=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?$S:(this._emitter||(this._emitter=new Qu.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},el=class{get token(){return this._token||(this._token=new ha),this._token}cancel(){this._token?this._token.cancel():this._token=Zu.Cancelled}dispose(){this._token?this._token instanceof ha&&this._token.dispose():this._token=Zu.None}};ii.CancellationTokenSource=el});var Kg=b(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.ReadableStreamMessageReader=fr.AbstractMessageReader=fr.MessageReader=void 0;var rl=lr(),Wi=$i(),nl=Ui(),HS;(function(t){function e(n){let r=n;return r&&Wi.func(r.listen)&&Wi.func(r.dispose)&&Wi.func(r.onError)&&Wi.func(r.onClose)&&Wi.func(r.onPartialMessage)}t.is=e})(HS=fr.MessageReader||(fr.MessageReader={}));var pa=class{constructor(){this.errorEmitter=new nl.Emitter,this.closeEmitter=new nl.Emitter,this.partialMessageEmitter=new nl.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Wi.string(e.message)?e.message:"unknown"}`)}};fr.AbstractMessageReader=pa;var il;(function(t){function e(n){let r,i,s,o=new Map,a,c=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,o.set(s.name,s)),n.contentDecoders!==void 0)for(let u of n.contentDecoders)o.set(u.name,u);if(n.contentTypeDecoder!==void 0&&(a=n.contentTypeDecoder,c.set(a.name,a)),n.contentTypeDecoders!==void 0)for(let u of n.contentTypeDecoders)c.set(u.name,u)}return a===void 0&&(a=(0,rl.default)().applicationJson.decoder,c.set(a.name,a)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:c}}t.fromOptions=e})(il||(il={}));var sl=class extends pa{constructor(e,n){super(),this.readable=e,this.options=il.fromOptions(n),this.buffer=(0,rl.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,rl.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};fr.ReadableStreamMessageReader=sl});var Vg=b(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.Semaphore=void 0;var US=lr(),ol=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,US.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ga.Semaphore=ol});var Yg=b(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.WriteableStreamMessageWriter=hr.AbstractMessageWriter=hr.MessageWriter=void 0;var Gg=lr(),Gs=$i(),WS=Vg(),Xg=Ui(),BS="Content-Length: ",Jg=`\r
`,zS;(function(t){function e(n){let r=n;return r&&Gs.func(r.dispose)&&Gs.func(r.onClose)&&Gs.func(r.onError)&&Gs.func(r.write)}t.is=e})(zS=hr.MessageWriter||(hr.MessageWriter={}));var ma=class{constructor(){this.errorEmitter=new Xg.Emitter,this.closeEmitter=new Xg.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Gs.string(e.message)?e.message:"unknown"}`)}};hr.AbstractMessageWriter=ma;var al;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Gg.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Gg.default)().applicationJson.encoder}}t.fromOptions=e})(al||(al={}));var cl=class extends ma{constructor(e,n){super(),this.writable=e,this.options=al.fromOptions(n),this.errorCount=0,this.writeSemaphore=new WS.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(BS,r.byteLength.toString(),Jg),i.push(Jg),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};hr.WriteableStreamMessageWriter=cl});var rm=b(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.createMessageConnection=Z.ConnectionOptions=Z.CancellationStrategy=Z.CancellationSenderStrategy=Z.CancellationReceiverStrategy=Z.ConnectionStrategy=Z.ConnectionError=Z.ConnectionErrors=Z.LogTraceNotification=Z.SetTraceNotification=Z.TraceFormat=Z.TraceValues=Z.Trace=Z.NullLogger=Z.ProgressType=Z.ProgressToken=void 0;var Qg=lr(),pt=$i(),ee=Gu(),Zg=Ju(),Xs=Ui(),ul=tl(),Ys;(function(t){t.type=new ee.NotificationType("$/cancelRequest")})(Ys||(Ys={}));var em;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(em=Z.ProgressToken||(Z.ProgressToken={}));var Js;(function(t){t.type=new ee.NotificationType("$/progress")})(Js||(Js={}));var ll=class{constructor(){}};Z.ProgressType=ll;var dl;(function(t){function e(n){return pt.func(n)}t.is=e})(dl||(dl={}));Z.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Oe;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Oe=Z.Trace||(Z.Trace={}));var KS;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(KS=Z.TraceValues||(Z.TraceValues={}));(function(t){function e(r){if(!pt.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(Oe=Z.Trace||(Z.Trace={}));var On;(function(t){t.Text="text",t.JSON="json"})(On=Z.TraceFormat||(Z.TraceFormat={}));(function(t){function e(n){return pt.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(On=Z.TraceFormat||(Z.TraceFormat={}));var tm;(function(t){t.type=new ee.NotificationType("$/setTrace")})(tm=Z.SetTraceNotification||(Z.SetTraceNotification={}));var fl;(function(t){t.type=new ee.NotificationType("$/logTrace")})(fl=Z.LogTraceNotification||(Z.LogTraceNotification={}));var va;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(va=Z.ConnectionErrors||(Z.ConnectionErrors={}));var Fr=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,Fr.prototype)}};Z.ConnectionError=Fr;var nm;(function(t){function e(n){let r=n;return r&&pt.func(r.cancelUndispatched)}t.is=e})(nm=Z.ConnectionStrategy||(Z.ConnectionStrategy={}));var hl;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new ul.CancellationTokenSource}});function e(n){let r=n;return r&&pt.func(r.createCancellationTokenSource)}t.is=e})(hl=Z.CancellationReceiverStrategy||(Z.CancellationReceiverStrategy={}));var pl;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(Ys.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&pt.func(r.sendCancellation)&&pt.func(r.cleanup)}t.is=e})(pl=Z.CancellationSenderStrategy||(Z.CancellationSenderStrategy={}));var gl;(function(t){t.Message=Object.freeze({receiver:hl.Message,sender:pl.Message});function e(n){let r=n;return r&&hl.is(r.receiver)&&pl.is(r.sender)}t.is=e})(gl=Z.CancellationStrategy||(Z.CancellationStrategy={}));var VS;(function(t){function e(n){let r=n;return r&&(gl.is(r.cancellationStrategy)||nm.is(r.connectionStrategy))}t.is=e})(VS=Z.ConnectionOptions||(Z.ConnectionOptions={}));var Nn;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Nn||(Nn={}));function GS(t,e,n,r){let i=n!==void 0?n:Z.NullLogger,s=0,o=0,a=0,c="2.0",u,l=new Map,d,p=new Map,h=new Map,g,y=new Zg.LinkedMap,_=new Map,S=new Set,T=new Map,C=Oe.Off,D=On.Text,E,W=Nn.New,j=new Xs.Emitter,Q=new Xs.Emitter,re=new Xs.Emitter,ue=new Xs.Emitter,se=new Xs.Emitter,Fe=r&&r.cancellationStrategy?r.cancellationStrategy:gl.Message;function We(w){if(w===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+w.toString()}function ve(w){return w===null?"res-unknown-"+(++a).toString():"res-"+w.toString()}function Ie(){return"not-"+(++o).toString()}function k(w,N){ee.Message.isRequest(N)?w.set(We(N.id),N):ee.Message.isResponse(N)?w.set(ve(N.id),N):w.set(Ie(),N)}function q(w){}function F(){return W===Nn.Listening}function M(){return W===Nn.Closed}function Y(){return W===Nn.Disposed}function ie(){(W===Nn.New||W===Nn.Listening)&&(W=Nn.Closed,Q.fire(void 0))}function G(w){j.fire([w,void 0,void 0])}function Pt(w){j.fire(w)}t.onClose(ie),t.onError(G),e.onClose(ie),e.onError(Pt);function ht(){g||y.size===0||(g=(0,Qg.default)().timer.setImmediate(()=>{g=void 0,qt()}))}function qt(){if(y.size===0)return;let w=y.shift();try{ee.Message.isRequest(w)?Xt(w):ee.Message.isNotification(w)?Ii(w):ee.Message.isResponse(w)?Ws(w):Mi(w)}finally{ht()}}let fn=w=>{try{if(ee.Message.isNotification(w)&&w.method===Ys.type.method){let N=w.params.id,A=We(N),z=y.get(A);if(ee.Message.isRequest(z)){let Ee=r?.connectionStrategy,Ae=Ee&&Ee.cancelUndispatched?Ee.cancelUndispatched(z,q):void 0;if(Ae&&(Ae.error!==void 0||Ae.result!==void 0)){y.delete(A),T.delete(N),Ae.id=z.id,Pn(Ae,w.method,Date.now()),e.write(Ae).catch(()=>i.error("Sending response for canceled message failed."));return}}let qe=T.get(N);if(qe!==void 0){qe.cancel(),Nr(w);return}else S.add(N)}k(y,w)}finally{ht()}};function Xt(w){if(Y())return;function N(me,Me,ye){let m={jsonrpc:c,id:w.id};me instanceof ee.ResponseError?m.error=me.toJson():m.result=me===void 0?null:me,Pn(m,Me,ye),e.write(m).catch(()=>i.error("Sending response failed."))}function A(me,Me,ye){let m={jsonrpc:c,id:w.id,error:me.toJson()};Pn(m,Me,ye),e.write(m).catch(()=>i.error("Sending response failed."))}function z(me,Me,ye){me===void 0&&(me=null);let m={jsonrpc:c,id:w.id,result:me};Pn(m,Me,ye),e.write(m).catch(()=>i.error("Sending response failed."))}Qr(w);let qe=l.get(w.method),Ee,Ae;qe&&(Ee=qe.type,Ae=qe.handler);let Xe=Date.now();if(Ae||u){let me=w.id??String(Date.now()),Me=Fe.receiver.createCancellationTokenSource(me);w.id!==null&&S.has(w.id)&&Me.cancel(),w.id!==null&&T.set(me,Me);try{let ye;if(Ae)if(w.params===void 0){if(Ee!==void 0&&Ee.numberOfParams!==0){A(new ee.ResponseError(ee.ErrorCodes.InvalidParams,`Request ${w.method} defines ${Ee.numberOfParams} params but received none.`),w.method,Xe);return}ye=Ae(Me.token)}else if(Array.isArray(w.params)){if(Ee!==void 0&&Ee.parameterStructures===ee.ParameterStructures.byName){A(new ee.ResponseError(ee.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by name but received parameters by position`),w.method,Xe);return}ye=Ae(...w.params,Me.token)}else{if(Ee!==void 0&&Ee.parameterStructures===ee.ParameterStructures.byPosition){A(new ee.ResponseError(ee.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by position but received parameters by name`),w.method,Xe);return}ye=Ae(w.params,Me.token)}else u&&(ye=u(w.method,w.params,Me.token));let m=ye;ye?m.then?m.then(P=>{T.delete(me),N(P,w.method,Xe)},P=>{T.delete(me),P instanceof ee.ResponseError?A(P,w.method,Xe):P&&pt.string(P.message)?A(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${P.message}`),w.method,Xe):A(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,Xe)}):(T.delete(me),N(ye,w.method,Xe)):(T.delete(me),z(ye,w.method,Xe))}catch(ye){T.delete(me),ye instanceof ee.ResponseError?N(ye,w.method,Xe):ye&&pt.string(ye.message)?A(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${ye.message}`),w.method,Xe):A(new ee.ResponseError(ee.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,Xe)}}else A(new ee.ResponseError(ee.ErrorCodes.MethodNotFound,`Unhandled method ${w.method}`),w.method,Xe)}function Ws(w){if(!Y())if(w.id===null)w.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(w.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let N=w.id,A=_.get(N);if(qn(w,A),A!==void 0){_.delete(N);try{if(w.error){let z=w.error;A.reject(new ee.ResponseError(z.code,z.message,z.data))}else if(w.result!==void 0)A.resolve(w.result);else throw new Error("Should never happen.")}catch(z){z.message?i.error(`Response handler '${A.method}' failed with message: ${z.message}`):i.error(`Response handler '${A.method}' failed unexpectedly.`)}}}}function Ii(w){if(Y())return;let N,A;if(w.method===Ys.type.method){let z=w.params.id;S.delete(z),Nr(w);return}else{let z=p.get(w.method);z&&(A=z.handler,N=z.type)}if(A||d)try{if(Nr(w),A)if(w.params===void 0)N!==void 0&&N.numberOfParams!==0&&N.parameterStructures!==ee.ParameterStructures.byName&&i.error(`Notification ${w.method} defines ${N.numberOfParams} params but received none.`),A();else if(Array.isArray(w.params)){let z=w.params;w.method===Js.type.method&&z.length===2&&em.is(z[0])?A({token:z[0],value:z[1]}):(N!==void 0&&(N.parameterStructures===ee.ParameterStructures.byName&&i.error(`Notification ${w.method} defines parameters by name but received parameters by position`),N.numberOfParams!==w.params.length&&i.error(`Notification ${w.method} defines ${N.numberOfParams} params but received ${z.length} arguments`)),A(...z))}else N!==void 0&&N.parameterStructures===ee.ParameterStructures.byPosition&&i.error(`Notification ${w.method} defines parameters by position but received parameters by name`),A(w.params);else d&&d(w.method,w.params)}catch(z){z.message?i.error(`Notification handler '${w.method}' failed with message: ${z.message}`):i.error(`Notification handler '${w.method}' failed unexpectedly.`)}else re.fire(w)}function Mi(w){if(!w){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(w,null,4)}`);let N=w;if(pt.string(N.id)||pt.number(N.id)){let A=N.id,z=_.get(A);z&&z.reject(new Error("The received response has neither a result nor an error property."))}}function hn(w){if(w!=null)switch(C){case Oe.Verbose:return JSON.stringify(w,null,4);case Oe.Compact:return JSON.stringify(w);default:return}}function Gn(w){if(!(C===Oe.Off||!E))if(D===On.Text){let N;(C===Oe.Verbose||C===Oe.Compact)&&w.params&&(N=`Params: ${hn(w.params)}

`),E.log(`Sending request '${w.method} - (${w.id})'.`,N)}else pn("send-request",w)}function Li(w){if(!(C===Oe.Off||!E))if(D===On.Text){let N;(C===Oe.Verbose||C===Oe.Compact)&&(w.params?N=`Params: ${hn(w.params)}

`:N=`No parameters provided.

`),E.log(`Sending notification '${w.method}'.`,N)}else pn("send-notification",w)}function Pn(w,N,A){if(!(C===Oe.Off||!E))if(D===On.Text){let z;(C===Oe.Verbose||C===Oe.Compact)&&(w.error&&w.error.data?z=`Error data: ${hn(w.error.data)}

`:w.result?z=`Result: ${hn(w.result)}

`:w.error===void 0&&(z=`No result returned.

`)),E.log(`Sending response '${N} - (${w.id})'. Processing request took ${Date.now()-A}ms`,z)}else pn("send-response",w)}function Qr(w){if(!(C===Oe.Off||!E))if(D===On.Text){let N;(C===Oe.Verbose||C===Oe.Compact)&&w.params&&(N=`Params: ${hn(w.params)}

`),E.log(`Received request '${w.method} - (${w.id})'.`,N)}else pn("receive-request",w)}function Nr(w){if(!(C===Oe.Off||!E||w.method===fl.type.method))if(D===On.Text){let N;(C===Oe.Verbose||C===Oe.Compact)&&(w.params?N=`Params: ${hn(w.params)}

`:N=`No parameters provided.

`),E.log(`Received notification '${w.method}'.`,N)}else pn("receive-notification",w)}function qn(w,N){if(!(C===Oe.Off||!E))if(D===On.Text){let A;if((C===Oe.Verbose||C===Oe.Compact)&&(w.error&&w.error.data?A=`Error data: ${hn(w.error.data)}

`:w.result?A=`Result: ${hn(w.result)}

`:w.error===void 0&&(A=`No result returned.

`)),N){let z=w.error?` Request failed: ${w.error.message} (${w.error.code}).`:"";E.log(`Received response '${N.method} - (${w.id})' in ${Date.now()-N.timerStart}ms.${z}`,A)}else E.log(`Received response ${w.id} without active response promise.`,A)}else pn("receive-response",w)}function pn(w,N){if(!E||C===Oe.Off)return;let A={isLSPMessage:!0,type:w,message:N,timestamp:Date.now()};E.log(A)}function vt(){if(M())throw new Fr(va.Closed,"Connection is closed.");if(Y())throw new Fr(va.Disposed,"Connection is disposed.")}function Bs(){if(F())throw new Fr(va.AlreadyListening,"Connection is already listening")}function rn(){if(!F())throw new Error("Call listen() first.")}function En(w){return w===void 0?null:w}function Ai(w){if(w!==null)return w}function Zr(w){return w!=null&&!Array.isArray(w)&&typeof w=="object"}function ei(w,N){switch(w){case ee.ParameterStructures.auto:return Zr(N)?Ai(N):[En(N)];case ee.ParameterStructures.byName:if(!Zr(N))throw new Error("Received parameters by name but param is not an object literal.");return Ai(N);case ee.ParameterStructures.byPosition:return[En(N)];default:throw new Error(`Unknown parameter structure ${w.toString()}`)}}function kn(w,N){let A,z=w.numberOfParams;switch(z){case 0:A=void 0;break;case 1:A=ei(w.parameterStructures,N[0]);break;default:A=[];for(let qe=0;qe<N.length&&qe<z;qe++)A.push(En(N[qe]));if(N.length<z)for(let qe=N.length;qe<z;qe++)A.push(null);break}return A}let Xn={sendNotification:(w,...N)=>{vt();let A,z;if(pt.string(w)){A=w;let Ee=N[0],Ae=0,Xe=ee.ParameterStructures.auto;ee.ParameterStructures.is(Ee)&&(Ae=1,Xe=Ee);let me=N.length,Me=me-Ae;switch(Me){case 0:z=void 0;break;case 1:z=ei(Xe,N[Ae]);break;default:if(Xe===ee.ParameterStructures.byName)throw new Error(`Received ${Me} parameters for 'by Name' notification parameter structure.`);z=N.slice(Ae,me).map(ye=>En(ye));break}}else{let Ee=N;A=w.method,z=kn(w,Ee)}let qe={jsonrpc:c,method:A,params:z};return Li(qe),e.write(qe).catch(()=>i.error("Sending notification failed."))},onNotification:(w,N)=>{vt();let A;return pt.func(w)?d=w:N&&(pt.string(w)?(A=w,p.set(w,{type:void 0,handler:N})):(A=w.method,p.set(w.method,{type:w,handler:N}))),{dispose:()=>{A!==void 0?p.delete(A):d=void 0}}},onProgress:(w,N,A)=>{if(h.has(N))throw new Error(`Progress handler for token ${N} already registered`);return h.set(N,A),{dispose:()=>{h.delete(N)}}},sendProgress:(w,N,A)=>Xn.sendNotification(Js.type,{token:N,value:A}),onUnhandledProgress:ue.event,sendRequest:(w,...N)=>{vt(),rn();let A,z,qe;if(pt.string(w)){A=w;let me=N[0],Me=N[N.length-1],ye=0,m=ee.ParameterStructures.auto;ee.ParameterStructures.is(me)&&(ye=1,m=me);let P=N.length;ul.CancellationToken.is(Me)&&(P=P-1,qe=Me);let B=P-ye;switch(B){case 0:z=void 0;break;case 1:z=ei(m,N[ye]);break;default:if(m===ee.ParameterStructures.byName)throw new Error(`Received ${B} parameters for 'by Name' request parameter structure.`);z=N.slice(ye,P).map(fe=>En(fe));break}}else{let me=N;A=w.method,z=kn(w,me);let Me=w.numberOfParams;qe=ul.CancellationToken.is(me[Me])?me[Me]:void 0}let Ee=s++,Ae;return qe&&(Ae=qe.onCancellationRequested(()=>{let me=Fe.sender.sendCancellation(Xn,Ee);return me===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Ee}`),Promise.resolve()):me.catch(()=>{i.log(`Sending cancellation messages for id ${Ee} failed`)})})),new Promise((me,Me)=>{let ye={jsonrpc:c,id:Ee,method:A,params:z},m=fe=>{me(fe),Fe.sender.cleanup(Ee),Ae?.dispose()},P=fe=>{Me(fe),Fe.sender.cleanup(Ee),Ae?.dispose()},B={method:A,timerStart:Date.now(),resolve:m,reject:P};Gn(ye);try{e.write(ye).catch(()=>i.error("Sending request failed."))}catch(fe){B.reject(new ee.ResponseError(ee.ErrorCodes.MessageWriteError,fe.message?fe.message:"Unknown reason")),B=null}B&&_.set(Ee,B)})},onRequest:(w,N)=>{vt();let A=null;return dl.is(w)?(A=void 0,u=w):pt.string(w)?(A=null,N!==void 0&&(A=w,l.set(w,{handler:N,type:void 0}))):N!==void 0&&(A=w.method,l.set(w.method,{type:w,handler:N})),{dispose:()=>{A!==null&&(A!==void 0?l.delete(A):u=void 0)}}},hasPendingResponse:()=>_.size>0,trace:async(w,N,A)=>{let z=!1,qe=On.Text;A!==void 0&&(pt.boolean(A)?z=A:(z=A.sendNotification||!1,qe=A.traceFormat||On.Text)),C=w,D=qe,C===Oe.Off?E=void 0:E=N,z&&!M()&&!Y()&&await Xn.sendNotification(tm.type,{value:Oe.toString(w)})},onError:j.event,onClose:Q.event,onUnhandledNotification:re.event,onDispose:se.event,end:()=>{e.end()},dispose:()=>{if(Y())return;W=Nn.Disposed,se.fire(void 0);let w=new ee.ResponseError(ee.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let N of _.values())N.reject(w);_=new Map,T=new Map,S=new Set,y=new Zg.LinkedMap,pt.func(e.dispose)&&e.dispose(),pt.func(t.dispose)&&t.dispose()},listen:()=>{vt(),Bs(),W=Nn.Listening,t.listen(fn)},inspect:()=>{(0,Qg.default)().console.log("inspect")}};return Xn.onNotification(fl.type,w=>{if(C===Oe.Off||!E)return;let N=C===Oe.Verbose||C===Oe.Compact;E.log(w.message,N?w.verbose:void 0)}),Xn.onNotification(Js.type,w=>{let N=h.get(w.token);N?N(w.value):ue.fire(w)}),Xn}Z.createMessageConnection=GS});var _l=b(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.TraceFormat=O.TraceValues=O.Trace=O.ProgressType=O.ProgressToken=O.createMessageConnection=O.NullLogger=O.ConnectionOptions=O.ConnectionStrategy=O.WriteableStreamMessageWriter=O.AbstractMessageWriter=O.MessageWriter=O.ReadableStreamMessageReader=O.AbstractMessageReader=O.MessageReader=O.CancellationToken=O.CancellationTokenSource=O.Emitter=O.Event=O.Disposable=O.LRUCache=O.Touch=O.LinkedMap=O.ParameterStructures=O.NotificationType9=O.NotificationType8=O.NotificationType7=O.NotificationType6=O.NotificationType5=O.NotificationType4=O.NotificationType3=O.NotificationType2=O.NotificationType1=O.NotificationType0=O.NotificationType=O.ErrorCodes=O.ResponseError=O.RequestType9=O.RequestType8=O.RequestType7=O.RequestType6=O.RequestType5=O.RequestType4=O.RequestType3=O.RequestType2=O.RequestType1=O.RequestType0=O.RequestType=O.Message=O.RAL=void 0;O.CancellationStrategy=O.CancellationSenderStrategy=O.CancellationReceiverStrategy=O.ConnectionError=O.ConnectionErrors=O.LogTraceNotification=O.SetTraceNotification=void 0;var je=Gu();Object.defineProperty(O,"Message",{enumerable:!0,get:function(){return je.Message}});Object.defineProperty(O,"RequestType",{enumerable:!0,get:function(){return je.RequestType}});Object.defineProperty(O,"RequestType0",{enumerable:!0,get:function(){return je.RequestType0}});Object.defineProperty(O,"RequestType1",{enumerable:!0,get:function(){return je.RequestType1}});Object.defineProperty(O,"RequestType2",{enumerable:!0,get:function(){return je.RequestType2}});Object.defineProperty(O,"RequestType3",{enumerable:!0,get:function(){return je.RequestType3}});Object.defineProperty(O,"RequestType4",{enumerable:!0,get:function(){return je.RequestType4}});Object.defineProperty(O,"RequestType5",{enumerable:!0,get:function(){return je.RequestType5}});Object.defineProperty(O,"RequestType6",{enumerable:!0,get:function(){return je.RequestType6}});Object.defineProperty(O,"RequestType7",{enumerable:!0,get:function(){return je.RequestType7}});Object.defineProperty(O,"RequestType8",{enumerable:!0,get:function(){return je.RequestType8}});Object.defineProperty(O,"RequestType9",{enumerable:!0,get:function(){return je.RequestType9}});Object.defineProperty(O,"ResponseError",{enumerable:!0,get:function(){return je.ResponseError}});Object.defineProperty(O,"ErrorCodes",{enumerable:!0,get:function(){return je.ErrorCodes}});Object.defineProperty(O,"NotificationType",{enumerable:!0,get:function(){return je.NotificationType}});Object.defineProperty(O,"NotificationType0",{enumerable:!0,get:function(){return je.NotificationType0}});Object.defineProperty(O,"NotificationType1",{enumerable:!0,get:function(){return je.NotificationType1}});Object.defineProperty(O,"NotificationType2",{enumerable:!0,get:function(){return je.NotificationType2}});Object.defineProperty(O,"NotificationType3",{enumerable:!0,get:function(){return je.NotificationType3}});Object.defineProperty(O,"NotificationType4",{enumerable:!0,get:function(){return je.NotificationType4}});Object.defineProperty(O,"NotificationType5",{enumerable:!0,get:function(){return je.NotificationType5}});Object.defineProperty(O,"NotificationType6",{enumerable:!0,get:function(){return je.NotificationType6}});Object.defineProperty(O,"NotificationType7",{enumerable:!0,get:function(){return je.NotificationType7}});Object.defineProperty(O,"NotificationType8",{enumerable:!0,get:function(){return je.NotificationType8}});Object.defineProperty(O,"NotificationType9",{enumerable:!0,get:function(){return je.NotificationType9}});Object.defineProperty(O,"ParameterStructures",{enumerable:!0,get:function(){return je.ParameterStructures}});var ml=Ju();Object.defineProperty(O,"LinkedMap",{enumerable:!0,get:function(){return ml.LinkedMap}});Object.defineProperty(O,"LRUCache",{enumerable:!0,get:function(){return ml.LRUCache}});Object.defineProperty(O,"Touch",{enumerable:!0,get:function(){return ml.Touch}});var XS=wu();Object.defineProperty(O,"Disposable",{enumerable:!0,get:function(){return XS.Disposable}});var im=Ui();Object.defineProperty(O,"Event",{enumerable:!0,get:function(){return im.Event}});Object.defineProperty(O,"Emitter",{enumerable:!0,get:function(){return im.Emitter}});var sm=tl();Object.defineProperty(O,"CancellationTokenSource",{enumerable:!0,get:function(){return sm.CancellationTokenSource}});Object.defineProperty(O,"CancellationToken",{enumerable:!0,get:function(){return sm.CancellationToken}});var vl=Kg();Object.defineProperty(O,"MessageReader",{enumerable:!0,get:function(){return vl.MessageReader}});Object.defineProperty(O,"AbstractMessageReader",{enumerable:!0,get:function(){return vl.AbstractMessageReader}});Object.defineProperty(O,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return vl.ReadableStreamMessageReader}});var yl=Yg();Object.defineProperty(O,"MessageWriter",{enumerable:!0,get:function(){return yl.MessageWriter}});Object.defineProperty(O,"AbstractMessageWriter",{enumerable:!0,get:function(){return yl.AbstractMessageWriter}});Object.defineProperty(O,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return yl.WriteableStreamMessageWriter}});var kt=rm();Object.defineProperty(O,"ConnectionStrategy",{enumerable:!0,get:function(){return kt.ConnectionStrategy}});Object.defineProperty(O,"ConnectionOptions",{enumerable:!0,get:function(){return kt.ConnectionOptions}});Object.defineProperty(O,"NullLogger",{enumerable:!0,get:function(){return kt.NullLogger}});Object.defineProperty(O,"createMessageConnection",{enumerable:!0,get:function(){return kt.createMessageConnection}});Object.defineProperty(O,"ProgressToken",{enumerable:!0,get:function(){return kt.ProgressToken}});Object.defineProperty(O,"ProgressType",{enumerable:!0,get:function(){return kt.ProgressType}});Object.defineProperty(O,"Trace",{enumerable:!0,get:function(){return kt.Trace}});Object.defineProperty(O,"TraceValues",{enumerable:!0,get:function(){return kt.TraceValues}});Object.defineProperty(O,"TraceFormat",{enumerable:!0,get:function(){return kt.TraceFormat}});Object.defineProperty(O,"SetTraceNotification",{enumerable:!0,get:function(){return kt.SetTraceNotification}});Object.defineProperty(O,"LogTraceNotification",{enumerable:!0,get:function(){return kt.LogTraceNotification}});Object.defineProperty(O,"ConnectionErrors",{enumerable:!0,get:function(){return kt.ConnectionErrors}});Object.defineProperty(O,"ConnectionError",{enumerable:!0,get:function(){return kt.ConnectionError}});Object.defineProperty(O,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return kt.CancellationReceiverStrategy}});Object.defineProperty(O,"CancellationSenderStrategy",{enumerable:!0,get:function(){return kt.CancellationSenderStrategy}});Object.defineProperty(O,"CancellationStrategy",{enumerable:!0,get:function(){return kt.CancellationStrategy}});var JS=lr();O.RAL=JS.default});var ai=b(Te=>{"use strict";var YS=Te&&Te.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),QS=Te&&Te.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&YS(e,t,n)};Object.defineProperty(Te,"__esModule",{value:!0});Te.createMessageConnection=Te.createServerSocketTransport=Te.createClientSocketTransport=Te.createServerPipeTransport=Te.createClientPipeTransport=Te.generateRandomPipeName=Te.StreamMessageWriter=Te.StreamMessageReader=Te.SocketMessageWriter=Te.SocketMessageReader=Te.IPCMessageWriter=Te.IPCMessageReader=void 0;var Bi=Hg();Bi.default.install();var Yn=_l(),om=require("path"),ZS=require("os"),e0=require("crypto"),wa=require("net");QS(_l(),Te);var wl=class extends Yn.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Yn.Disposable.create(()=>this.process.off("message",e))}};Te.IPCMessageReader=wl;var Cl=class extends Yn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Te.IPCMessageWriter=Cl;var si=class extends Yn.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,Bi.default)().stream.asReadableStream(e),n)}};Te.SocketMessageReader=si;var oi=class extends Yn.WriteableStreamMessageWriter{constructor(e,n){super((0,Bi.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Te.SocketMessageWriter=oi;var ya=class extends Yn.ReadableStreamMessageReader{constructor(e,n){super((0,Bi.default)().stream.asReadableStream(e),n)}};Te.StreamMessageReader=ya;var _a=class extends Yn.WriteableStreamMessageWriter{constructor(e,n){super((0,Bi.default)().stream.asWritableStream(e),n)}};Te.StreamMessageWriter=_a;var am=process.env.XDG_RUNTIME_DIR,t0=new Map([["linux",107],["darwin",103]]);function n0(){let t=(0,e0.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;am?e=om.join(am,`vscode-ipc-${t}.sock`):e=om.join(ZS.tmpdir(),`vscode-${t}.sock`);let n=t0.get(process.platform);return n!==void 0&&e.length>=n&&(0,Bi.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}Te.generateRandomPipeName=n0;function r0(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,wa.createServer)(a=>{o.close(),n([new si(a,e),new oi(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}Te.createClientPipeTransport=r0;function i0(t,e="utf-8"){let n=(0,wa.createConnection)(t);return[new si(n,e),new oi(n,e)]}Te.createServerPipeTransport=i0;function s0(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,wa.createServer)(a=>{o.close(),n([new si(a,e),new oi(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}Te.createClientSocketTransport=s0;function o0(t,e="utf-8"){let n=(0,wa.createConnection)(t,"127.0.0.1");return[new si(n,e),new oi(n,e)]}Te.createServerSocketTransport=o0;function a0(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function c0(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function u0(t,e,n,r){n||(n=Yn.NullLogger);let i=a0(t)?new ya(t):t,s=c0(e)?new _a(e):e;return Yn.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Yn.createMessageConnection)(i,s,n,r)}Te.createMessageConnection=u0});var bl=b((PF,cm)=>{"use strict";cm.exports=ai()});var qa={};Lg(qa,{AnnotatedTextEdit:()=>pr,ChangeAnnotation:()=>ci,ChangeAnnotationIdentifier:()=>St,CodeAction:()=>nd,CodeActionContext:()=>td,CodeActionKind:()=>ed,CodeActionTriggerKind:()=>io,CodeDescription:()=>Ol,CodeLens:()=>rd,Color:()=>Sa,ColorInformation:()=>Tl,ColorPresentation:()=>xl,Command:()=>ui,CompletionItem:()=>Ul,CompletionItemKind:()=>Ml,CompletionItemLabelDetails:()=>Hl,CompletionItemTag:()=>Al,CompletionList:()=>Wl,CreateFile:()=>zi,DeleteFile:()=>Vi,Diagnostic:()=>eo,DiagnosticRelatedInformation:()=>Ra,DiagnosticSeverity:()=>El,DiagnosticTag:()=>kl,DocumentHighlight:()=>Gl,DocumentHighlightKind:()=>Vl,DocumentLink:()=>sd,DocumentSymbol:()=>Zl,DocumentUri:()=>Sl,EOL:()=>d0,FoldingRange:()=>ql,FoldingRangeKind:()=>Pl,FormattingOptions:()=>id,Hover:()=>Bl,InlayHint:()=>pd,InlayHintKind:()=>xa,InlayHintLabelPart:()=>Pa,InlineValueContext:()=>hd,InlineValueEvaluatableExpression:()=>fd,InlineValueText:()=>ld,InlineValueVariableLookup:()=>dd,InsertReplaceEdit:()=>jl,InsertTextFormat:()=>Ll,InsertTextMode:()=>$l,Location:()=>Zs,LocationLink:()=>Dl,MarkedString:()=>ro,MarkupContent:()=>Gi,MarkupKind:()=>Ta,OptionalVersionedTextDocumentIdentifier:()=>no,ParameterInformation:()=>zl,Position:()=>gn,Range:()=>nt,RenameFile:()=>Ki,SelectionRange:()=>od,SemanticTokenModifiers:()=>cd,SemanticTokenTypes:()=>ad,SemanticTokens:()=>ud,SignatureInformation:()=>Kl,SymbolInformation:()=>Yl,SymbolKind:()=>Xl,SymbolTag:()=>Jl,TextDocument:()=>md,TextDocumentEdit:()=>to,TextDocumentIdentifier:()=>Nl,TextDocumentItem:()=>Il,TextEdit:()=>Qn,URI:()=>ba,VersionedTextDocumentIdentifier:()=>Fl,WorkspaceChange:()=>l0,WorkspaceEdit:()=>Da,WorkspaceFolder:()=>gd,WorkspaceSymbol:()=>Ql,integer:()=>Rl,uinteger:()=>Qs});var Sl,ba,Rl,Qs,gn,nt,Zs,Dl,Sa,Tl,xl,Pl,ql,Ra,El,kl,Ol,eo,ui,Qn,ci,St,pr,to,zi,Ki,Vi,Da,Ca,um,l0,Nl,Fl,no,Il,Ta,Gi,Ml,Ll,Al,jl,$l,Hl,Ul,Wl,ro,Bl,zl,Kl,Vl,Gl,Xl,Jl,Yl,Ql,Zl,ed,io,td,nd,rd,id,sd,od,ad,cd,ud,ld,dd,fd,hd,xa,Pa,pd,gd,d0,md,f0,x,Ea=Mg(()=>{"use strict";(function(t){function e(n){return typeof n=="string"}t.is=e})(Sl||(Sl={}));(function(t){function e(n){return typeof n=="string"}t.is=e})(ba||(ba={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(Rl||(Rl={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(Qs||(Qs={}));(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=Qs.MAX_VALUE),i===Number.MAX_VALUE&&(i=Qs.MAX_VALUE),{line:r,character:i}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&x.uinteger(i.line)&&x.uinteger(i.character)}t.is=n})(gn||(gn={}));(function(t){function e(r,i,s,o){if(x.uinteger(r)&&x.uinteger(i)&&x.uinteger(s)&&x.uinteger(o))return{start:gn.create(r,i),end:gn.create(s,o)};if(gn.is(r)&&gn.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(s,", ").concat(o,"]"))}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&gn.is(i.start)&&gn.is(i.end)}t.is=n})(nt||(nt={}));(function(t){function e(r,i){return{uri:r,range:i}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&nt.is(i.range)&&(x.string(i.uri)||x.undefined(i.uri))}t.is=n})(Zs||(Zs={}));(function(t){function e(r,i,s,o){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&nt.is(i.targetRange)&&x.string(i.targetUri)&&nt.is(i.targetSelectionRange)&&(nt.is(i.originSelectionRange)||x.undefined(i.originSelectionRange))}t.is=n})(Dl||(Dl={}));(function(t){function e(r,i,s,o){return{red:r,green:i,blue:s,alpha:o}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&x.numberRange(i.red,0,1)&&x.numberRange(i.green,0,1)&&x.numberRange(i.blue,0,1)&&x.numberRange(i.alpha,0,1)}t.is=n})(Sa||(Sa={}));(function(t){function e(r,i){return{range:r,color:i}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&nt.is(i.range)&&Sa.is(i.color)}t.is=n})(Tl||(Tl={}));(function(t){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&x.string(i.label)&&(x.undefined(i.textEdit)||Qn.is(i))&&(x.undefined(i.additionalTextEdits)||x.typedArray(i.additionalTextEdits,Qn.is))}t.is=n})(xl||(xl={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Pl||(Pl={}));(function(t){function e(r,i,s,o,a,c){var u={startLine:r,endLine:i};return x.defined(s)&&(u.startCharacter=s),x.defined(o)&&(u.endCharacter=o),x.defined(a)&&(u.kind=a),x.defined(c)&&(u.collapsedText=c),u}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&x.uinteger(i.startLine)&&x.uinteger(i.startLine)&&(x.undefined(i.startCharacter)||x.uinteger(i.startCharacter))&&(x.undefined(i.endCharacter)||x.uinteger(i.endCharacter))&&(x.undefined(i.kind)||x.string(i.kind))}t.is=n})(ql||(ql={}));(function(t){function e(r,i){return{location:r,message:i}}t.create=e;function n(r){var i=r;return x.defined(i)&&Zs.is(i.location)&&x.string(i.message)}t.is=n})(Ra||(Ra={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(El||(El={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(kl||(kl={}));(function(t){function e(n){var r=n;return x.objectLiteral(r)&&x.string(r.href)}t.is=e})(Ol||(Ol={}));(function(t){function e(r,i,s,o,a,c){var u={range:r,message:i};return x.defined(s)&&(u.severity=s),x.defined(o)&&(u.code=o),x.defined(a)&&(u.source=a),x.defined(c)&&(u.relatedInformation=c),u}t.create=e;function n(r){var i,s=r;return x.defined(s)&&nt.is(s.range)&&x.string(s.message)&&(x.number(s.severity)||x.undefined(s.severity))&&(x.integer(s.code)||x.string(s.code)||x.undefined(s.code))&&(x.undefined(s.codeDescription)||x.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(x.string(s.source)||x.undefined(s.source))&&(x.undefined(s.relatedInformation)||x.typedArray(s.relatedInformation,Ra.is))}t.is=n})(eo||(eo={}));(function(t){function e(r,i){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a={title:r,command:i};return x.defined(s)&&s.length>0&&(a.arguments=s),a}t.create=e;function n(r){var i=r;return x.defined(i)&&x.string(i.title)&&x.string(i.command)}t.is=n})(ui||(ui={}));(function(t){function e(s,o){return{range:s,newText:o}}t.replace=e;function n(s,o){return{range:{start:s,end:s},newText:o}}t.insert=n;function r(s){return{range:s,newText:""}}t.del=r;function i(s){var o=s;return x.objectLiteral(o)&&x.string(o.newText)&&nt.is(o.range)}t.is=i})(Qn||(Qn={}));(function(t){function e(r,i,s){var o={label:r};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&x.string(i.label)&&(x.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(x.string(i.description)||i.description===void 0)}t.is=n})(ci||(ci={}));(function(t){function e(n){var r=n;return x.string(r)}t.is=e})(St||(St={}));(function(t){function e(s,o,a){return{range:s,newText:o,annotationId:a}}t.replace=e;function n(s,o,a){return{range:{start:s,end:s},newText:o,annotationId:a}}t.insert=n;function r(s,o){return{range:s,newText:"",annotationId:o}}t.del=r;function i(s){var o=s;return Qn.is(o)&&(ci.is(o.annotationId)||St.is(o.annotationId))}t.is=i})(pr||(pr={}));(function(t){function e(r,i){return{textDocument:r,edits:i}}t.create=e;function n(r){var i=r;return x.defined(i)&&no.is(i.textDocument)&&Array.isArray(i.edits)}t.is=n})(to||(to={}));(function(t){function e(r,i,s){var o={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&x.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||x.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||x.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||St.is(i.annotationId))}t.is=n})(zi||(zi={}));(function(t){function e(r,i,s,o){var a={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(a.options=s),o!==void 0&&(a.annotationId=o),a}t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&x.string(i.oldUri)&&x.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||x.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||x.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||St.is(i.annotationId))}t.is=n})(Ki||(Ki={}));(function(t){function e(r,i,s){var o={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&x.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||x.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||x.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||St.is(i.annotationId))}t.is=n})(Vi||(Vi={}));(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return x.string(i.kind)?zi.is(i)||Ki.is(i)||Vi.is(i):to.is(i)}))}t.is=e})(Da||(Da={}));Ca=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return t.prototype.insert=function(e,n,r){var i,s;if(r===void 0?i=Qn.insert(e,n):St.is(r)?(s=r,i=pr.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=pr.insert(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.replace=function(e,n,r){var i,s;if(r===void 0?i=Qn.replace(e,n):St.is(r)?(s=r,i=pr.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=pr.replace(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Qn.del(e):St.is(n)?(i=n,r=pr.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=pr.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),um=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(St.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),l0=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new um(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(to.is(r)){var i=new Ca(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Ca(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(no.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],s={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(s),r=new Ca(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Ca(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new um,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ci.is(n)||St.is(n)?i=n:r=n;var s,o;if(i===void 0?s=zi.create(e,r):(o=St.is(i)?i:this._changeAnnotations.manage(i),s=zi.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;ci.is(r)||St.is(r)?s=r:i=r;var o,a;if(s===void 0?o=Ki.create(e,n,i):(a=St.is(s)?s:this._changeAnnotations.manage(s),o=Ki.create(e,n,i,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ci.is(n)||St.is(n)?i=n:r=n;var s,o;if(i===void 0?s=Vi.create(e,r):(o=St.is(i)?i:this._changeAnnotations.manage(i),s=Vi.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t}();(function(t){function e(r){return{uri:r}}t.create=e;function n(r){var i=r;return x.defined(i)&&x.string(i.uri)}t.is=n})(Nl||(Nl={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return x.defined(i)&&x.string(i.uri)&&x.integer(i.version)}t.is=n})(Fl||(Fl={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return x.defined(i)&&x.string(i.uri)&&(i.version===null||x.integer(i.version))}t.is=n})(no||(no={}));(function(t){function e(r,i,s,o){return{uri:r,languageId:i,version:s,text:o}}t.create=e;function n(r){var i=r;return x.defined(i)&&x.string(i.uri)&&x.string(i.languageId)&&x.integer(i.version)&&x.string(i.text)}t.is=n})(Il||(Il={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}t.is=e})(Ta||(Ta={}));(function(t){function e(n){var r=n;return x.objectLiteral(n)&&Ta.is(r.kind)&&x.string(r.value)}t.is=e})(Gi||(Gi={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Ml||(Ml={}));(function(t){t.PlainText=1,t.Snippet=2})(Ll||(Ll={}));(function(t){t.Deprecated=1})(Al||(Al={}));(function(t){function e(r,i,s){return{newText:r,insert:i,replace:s}}t.create=e;function n(r){var i=r;return i&&x.string(i.newText)&&nt.is(i.insert)&&nt.is(i.replace)}t.is=n})(jl||(jl={}));(function(t){t.asIs=1,t.adjustIndentation=2})($l||($l={}));(function(t){function e(n){var r=n;return r&&(x.string(r.detail)||r.detail===void 0)&&(x.string(r.description)||r.description===void 0)}t.is=e})(Hl||(Hl={}));(function(t){function e(n){return{label:n}}t.create=e})(Ul||(Ul={}));(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}t.create=e})(Wl||(Wl={}));(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(r){var i=r;return x.string(i)||x.objectLiteral(i)&&x.string(i.language)&&x.string(i.value)}t.is=n})(ro||(ro={}));(function(t){function e(n){var r=n;return!!r&&x.objectLiteral(r)&&(Gi.is(r.contents)||ro.is(r.contents)||x.typedArray(r.contents,ro.is))&&(n.range===void 0||nt.is(n.range))}t.is=e})(Bl||(Bl={}));(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}t.create=e})(zl||(zl={}));(function(t){function e(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o={label:n};return x.defined(r)&&(o.documentation=r),x.defined(i)?o.parameters=i:o.parameters=[],o}t.create=e})(Kl||(Kl={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(Vl||(Vl={}));(function(t){function e(n,r){var i={range:n};return x.number(r)&&(i.kind=r),i}t.create=e})(Gl||(Gl={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Xl||(Xl={}));(function(t){t.Deprecated=1})(Jl||(Jl={}));(function(t){function e(n,r,i,s,o){var a={name:n,kind:r,location:{uri:s,range:i}};return o&&(a.containerName=o),a}t.create=e})(Yl||(Yl={}));(function(t){function e(n,r,i,s){return s!==void 0?{name:n,kind:r,location:{uri:i,range:s}}:{name:n,kind:r,location:{uri:i}}}t.create=e})(Ql||(Ql={}));(function(t){function e(r,i,s,o,a,c){var u={name:r,detail:i,kind:s,range:o,selectionRange:a};return c!==void 0&&(u.children=c),u}t.create=e;function n(r){var i=r;return i&&x.string(i.name)&&x.number(i.kind)&&nt.is(i.range)&&nt.is(i.selectionRange)&&(i.detail===void 0||x.string(i.detail))&&(i.deprecated===void 0||x.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=n})(Zl||(Zl={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(ed||(ed={}));(function(t){t.Invoked=1,t.Automatic=2})(io||(io={}));(function(t){function e(r,i,s){var o={diagnostics:r};return i!=null&&(o.only=i),s!=null&&(o.triggerKind=s),o}t.create=e;function n(r){var i=r;return x.defined(i)&&x.typedArray(i.diagnostics,eo.is)&&(i.only===void 0||x.typedArray(i.only,x.string))&&(i.triggerKind===void 0||i.triggerKind===io.Invoked||i.triggerKind===io.Automatic)}t.is=n})(td||(td={}));(function(t){function e(r,i,s){var o={title:r},a=!0;return typeof i=="string"?(a=!1,o.kind=i):ui.is(i)?o.command=i:o.edit=i,a&&s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return i&&x.string(i.title)&&(i.diagnostics===void 0||x.typedArray(i.diagnostics,eo.is))&&(i.kind===void 0||x.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ui.is(i.command))&&(i.isPreferred===void 0||x.boolean(i.isPreferred))&&(i.edit===void 0||Da.is(i.edit))}t.is=n})(nd||(nd={}));(function(t){function e(r,i){var s={range:r};return x.defined(i)&&(s.data=i),s}t.create=e;function n(r){var i=r;return x.defined(i)&&nt.is(i.range)&&(x.undefined(i.command)||ui.is(i.command))}t.is=n})(rd||(rd={}));(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}t.create=e;function n(r){var i=r;return x.defined(i)&&x.uinteger(i.tabSize)&&x.boolean(i.insertSpaces)}t.is=n})(id||(id={}));(function(t){function e(r,i,s){return{range:r,target:i,data:s}}t.create=e;function n(r){var i=r;return x.defined(i)&&nt.is(i.range)&&(x.undefined(i.target)||x.string(i.target))}t.is=n})(sd||(sd={}));(function(t){function e(r,i){return{range:r,parent:i}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&nt.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=n})(od||(od={}));(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(ad||(ad={}));(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(cd||(cd={}));(function(t){function e(n){var r=n;return x.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(ud||(ud={}));(function(t){function e(r,i){return{range:r,text:i}}t.create=e;function n(r){var i=r;return i!=null&&nt.is(i.range)&&x.string(i.text)}t.is=n})(ld||(ld={}));(function(t){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}t.create=e;function n(r){var i=r;return i!=null&&nt.is(i.range)&&x.boolean(i.caseSensitiveLookup)&&(x.string(i.variableName)||i.variableName===void 0)}t.is=n})(dd||(dd={}));(function(t){function e(r,i){return{range:r,expression:i}}t.create=e;function n(r){var i=r;return i!=null&&nt.is(i.range)&&(x.string(i.expression)||i.expression===void 0)}t.is=n})(fd||(fd={}));(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}t.create=e;function n(r){var i=r;return x.defined(i)&&nt.is(r.stoppedLocation)}t.is=n})(hd||(hd={}));(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}t.is=e})(xa||(xa={}));(function(t){function e(r){return{value:r}}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&(i.tooltip===void 0||x.string(i.tooltip)||Gi.is(i.tooltip))&&(i.location===void 0||Zs.is(i.location))&&(i.command===void 0||ui.is(i.command))}t.is=n})(Pa||(Pa={}));(function(t){function e(r,i,s){var o={position:r,label:i};return s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return x.objectLiteral(i)&&gn.is(i.position)&&(x.string(i.label)||x.typedArray(i.label,Pa.is))&&(i.kind===void 0||xa.is(i.kind))&&i.textEdits===void 0||x.typedArray(i.textEdits,Qn.is)&&(i.tooltip===void 0||x.string(i.tooltip)||Gi.is(i.tooltip))&&(i.paddingLeft===void 0||x.boolean(i.paddingLeft))&&(i.paddingRight===void 0||x.boolean(i.paddingRight))}t.is=n})(pd||(pd={}));(function(t){function e(n){var r=n;return x.objectLiteral(r)&&ba.is(r.uri)&&x.string(r.name)}t.is=e})(gd||(gd={}));d0=[`
`,`\r
`,"\r"];(function(t){function e(s,o,a,c){return new f0(s,o,a,c)}t.create=e;function n(s){var o=s;return!!(x.defined(o)&&x.string(o.uri)&&(x.undefined(o.languageId)||x.string(o.languageId))&&x.uinteger(o.lineCount)&&x.func(o.getText)&&x.func(o.positionAt)&&x.func(o.offsetAt))}t.is=n;function r(s,o){for(var a=s.getText(),c=i(o,function(g,y){var _=g.range.start.line-y.range.start.line;return _===0?g.range.start.character-y.range.start.character:_}),u=a.length,l=c.length-1;l>=0;l--){var d=c[l],p=s.offsetAt(d.range.start),h=s.offsetAt(d.range.end);if(h<=u)a=a.substring(0,p)+d.newText+a.substring(h,a.length);else throw new Error("Overlapping edit");u=p}return a}t.applyEdits=r;function i(s,o){if(s.length<=1)return s;var a=s.length/2|0,c=s.slice(0,a),u=s.slice(a);i(c,o),i(u,o);for(var l=0,d=0,p=0;l<c.length&&d<u.length;){var h=o(c[l],u[d]);h<=0?s[p++]=c[l++]:s[p++]=u[d++]}for(;l<c.length;)s[p++]=c[l++];for(;d<u.length;)s[p++]=u[d++];return s}})(md||(md={}));f0=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var s=n.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return gn.create(0,e);for(;r<i;){var s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}var o=r-1;return gn.create(o,e-n[o])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}();(function(t){var e=Object.prototype.toString;function n(h){return typeof h<"u"}t.defined=n;function r(h){return typeof h>"u"}t.undefined=r;function i(h){return h===!0||h===!1}t.boolean=i;function s(h){return e.call(h)==="[object String]"}t.string=s;function o(h){return e.call(h)==="[object Number]"}t.number=o;function a(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}t.numberRange=a;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}t.uinteger=u;function l(h){return e.call(h)==="[object Function]"}t.func=l;function d(h){return h!==null&&typeof h=="object"}t.objectLiteral=d;function p(h,g){return Array.isArray(h)&&h.every(g)}t.typedArray=p})(x||(x={}))});var Je=b($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.ProtocolNotificationType=$t.ProtocolNotificationType0=$t.ProtocolRequestType=$t.ProtocolRequestType0=$t.RegistrationType=$t.MessageDirection=void 0;var Xi=ai(),h0;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(h0=$t.MessageDirection||($t.MessageDirection={}));var vd=class{constructor(e){this.method=e}};$t.RegistrationType=vd;var yd=class extends Xi.RequestType0{constructor(e){super(e)}};$t.ProtocolRequestType0=yd;var _d=class extends Xi.RequestType{constructor(e){super(e,Xi.ParameterStructures.byName)}};$t.ProtocolRequestType=_d;var wd=class extends Xi.NotificationType0{constructor(e){super(e)}};$t.ProtocolNotificationType0=wd;var Cd=class extends Xi.NotificationType{constructor(e){super(e,Xi.ParameterStructures.byName)}};$t.ProtocolNotificationType=Cd});var ka=b(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.objectLiteral=at.typedArray=at.stringArray=at.array=at.func=at.error=at.number=at.string=at.boolean=void 0;function p0(t){return t===!0||t===!1}at.boolean=p0;function lm(t){return typeof t=="string"||t instanceof String}at.string=lm;function g0(t){return typeof t=="number"||t instanceof Number}at.number=g0;function m0(t){return t instanceof Error}at.error=m0;function v0(t){return typeof t=="function"}at.func=v0;function dm(t){return Array.isArray(t)}at.array=dm;function y0(t){return dm(t)&&t.every(e=>lm(e))}at.stringArray=y0;function _0(t,e){return Array.isArray(t)&&t.every(e)}at.typedArray=_0;function w0(t){return t!==null&&typeof t=="object"}at.objectLiteral=w0});var hm=b(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.ImplementationRequest=void 0;var fm=Je(),C0;(function(t){t.method="textDocument/implementation",t.messageDirection=fm.MessageDirection.clientToServer,t.type=new fm.ProtocolRequestType(t.method)})(C0=so.ImplementationRequest||(so.ImplementationRequest={}))});var gm=b(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.TypeDefinitionRequest=void 0;var pm=Je(),b0;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=pm.MessageDirection.clientToServer,t.type=new pm.ProtocolRequestType(t.method)})(b0=oo.TypeDefinitionRequest||(oo.TypeDefinitionRequest={}))});var mm=b(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.DidChangeWorkspaceFoldersNotification=Ir.WorkspaceFoldersRequest=void 0;var Oa=Je(),S0;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Oa.MessageDirection.serverToClient,t.type=new Oa.ProtocolRequestType0(t.method)})(S0=Ir.WorkspaceFoldersRequest||(Ir.WorkspaceFoldersRequest={}));var R0;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Oa.MessageDirection.clientToServer,t.type=new Oa.ProtocolNotificationType(t.method)})(R0=Ir.DidChangeWorkspaceFoldersNotification||(Ir.DidChangeWorkspaceFoldersNotification={}))});var ym=b(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.ConfigurationRequest=void 0;var vm=Je(),D0;(function(t){t.method="workspace/configuration",t.messageDirection=vm.MessageDirection.serverToClient,t.type=new vm.ProtocolRequestType(t.method)})(D0=ao.ConfigurationRequest||(ao.ConfigurationRequest={}))});var _m=b(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ColorPresentationRequest=Mr.DocumentColorRequest=void 0;var Na=Je(),T0;(function(t){t.method="textDocument/documentColor",t.messageDirection=Na.MessageDirection.clientToServer,t.type=new Na.ProtocolRequestType(t.method)})(T0=Mr.DocumentColorRequest||(Mr.DocumentColorRequest={}));var x0;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Na.MessageDirection.clientToServer,t.type=new Na.ProtocolRequestType(t.method)})(x0=Mr.ColorPresentationRequest||(Mr.ColorPresentationRequest={}))});var Cm=b(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.FoldingRangeRequest=void 0;var wm=Je(),P0;(function(t){t.method="textDocument/foldingRange",t.messageDirection=wm.MessageDirection.clientToServer,t.type=new wm.ProtocolRequestType(t.method)})(P0=co.FoldingRangeRequest||(co.FoldingRangeRequest={}))});var Sm=b(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.DeclarationRequest=void 0;var bm=Je(),q0;(function(t){t.method="textDocument/declaration",t.messageDirection=bm.MessageDirection.clientToServer,t.type=new bm.ProtocolRequestType(t.method)})(q0=uo.DeclarationRequest||(uo.DeclarationRequest={}))});var Dm=b(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.SelectionRangeRequest=void 0;var Rm=Je(),E0;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Rm.MessageDirection.clientToServer,t.type=new Rm.ProtocolRequestType(t.method)})(E0=lo.SelectionRangeRequest||(lo.SelectionRangeRequest={}))});var Tm=b(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.WorkDoneProgressCancelNotification=Fn.WorkDoneProgressCreateRequest=Fn.WorkDoneProgress=void 0;var k0=ai(),Fa=Je(),O0;(function(t){t.type=new k0.ProgressType;function e(n){return n===t.type}t.is=e})(O0=Fn.WorkDoneProgress||(Fn.WorkDoneProgress={}));var N0;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Fa.MessageDirection.serverToClient,t.type=new Fa.ProtocolRequestType(t.method)})(N0=Fn.WorkDoneProgressCreateRequest||(Fn.WorkDoneProgressCreateRequest={}));var F0;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Fa.MessageDirection.clientToServer,t.type=new Fa.ProtocolNotificationType(t.method)})(F0=Fn.WorkDoneProgressCancelNotification||(Fn.WorkDoneProgressCancelNotification={}))});var xm=b(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.CallHierarchyOutgoingCallsRequest=In.CallHierarchyIncomingCallsRequest=In.CallHierarchyPrepareRequest=void 0;var Ji=Je(),I0;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Ji.MessageDirection.clientToServer,t.type=new Ji.ProtocolRequestType(t.method)})(I0=In.CallHierarchyPrepareRequest||(In.CallHierarchyPrepareRequest={}));var M0;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Ji.MessageDirection.clientToServer,t.type=new Ji.ProtocolRequestType(t.method)})(M0=In.CallHierarchyIncomingCallsRequest||(In.CallHierarchyIncomingCallsRequest={}));var L0;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Ji.MessageDirection.clientToServer,t.type=new Ji.ProtocolRequestType(t.method)})(L0=In.CallHierarchyOutgoingCallsRequest||(In.CallHierarchyOutgoingCallsRequest={}))});var Pm=b(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.SemanticTokensRefreshRequest=ct.SemanticTokensRangeRequest=ct.SemanticTokensDeltaRequest=ct.SemanticTokensRequest=ct.SemanticTokensRegistrationType=ct.TokenFormat=void 0;var gr=Je(),A0;(function(t){t.Relative="relative"})(A0=ct.TokenFormat||(ct.TokenFormat={}));var Ia;(function(t){t.method="textDocument/semanticTokens",t.type=new gr.RegistrationType(t.method)})(Ia=ct.SemanticTokensRegistrationType||(ct.SemanticTokensRegistrationType={}));var j0;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method),t.registrationMethod=Ia.method})(j0=ct.SemanticTokensRequest||(ct.SemanticTokensRequest={}));var $0;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method),t.registrationMethod=Ia.method})($0=ct.SemanticTokensDeltaRequest||(ct.SemanticTokensDeltaRequest={}));var H0;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType(t.method),t.registrationMethod=Ia.method})(H0=ct.SemanticTokensRangeRequest||(ct.SemanticTokensRangeRequest={}));var U0;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=gr.MessageDirection.clientToServer,t.type=new gr.ProtocolRequestType0(t.method)})(U0=ct.SemanticTokensRefreshRequest||(ct.SemanticTokensRefreshRequest={}))});var Em=b(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.ShowDocumentRequest=void 0;var qm=Je(),W0;(function(t){t.method="window/showDocument",t.messageDirection=qm.MessageDirection.serverToClient,t.type=new qm.ProtocolRequestType(t.method)})(W0=fo.ShowDocumentRequest||(fo.ShowDocumentRequest={}))});var Om=b(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.LinkedEditingRangeRequest=void 0;var km=Je(),B0;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=km.MessageDirection.clientToServer,t.type=new km.ProtocolRequestType(t.method)})(B0=ho.LinkedEditingRangeRequest||(ho.LinkedEditingRangeRequest={}))});var Nm=b(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.WillDeleteFilesRequest=Ye.DidDeleteFilesNotification=Ye.DidRenameFilesNotification=Ye.WillRenameFilesRequest=Ye.DidCreateFilesNotification=Ye.WillCreateFilesRequest=Ye.FileOperationPatternKind=void 0;var mn=Je(),z0;(function(t){t.file="file",t.folder="folder"})(z0=Ye.FileOperationPatternKind||(Ye.FileOperationPatternKind={}));var K0;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(K0=Ye.WillCreateFilesRequest||(Ye.WillCreateFilesRequest={}));var V0;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolNotificationType(t.method)})(V0=Ye.DidCreateFilesNotification||(Ye.DidCreateFilesNotification={}));var G0;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(G0=Ye.WillRenameFilesRequest||(Ye.WillRenameFilesRequest={}));var X0;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolNotificationType(t.method)})(X0=Ye.DidRenameFilesNotification||(Ye.DidRenameFilesNotification={}));var J0;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolNotificationType(t.method)})(J0=Ye.DidDeleteFilesNotification||(Ye.DidDeleteFilesNotification={}));var Y0;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=mn.MessageDirection.clientToServer,t.type=new mn.ProtocolRequestType(t.method)})(Y0=Ye.WillDeleteFilesRequest||(Ye.WillDeleteFilesRequest={}))});var Im=b(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.MonikerRequest=Mn.MonikerKind=Mn.UniquenessLevel=void 0;var Fm=Je(),Q0;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Q0=Mn.UniquenessLevel||(Mn.UniquenessLevel={}));var Z0;(function(t){t.$import="import",t.$export="export",t.local="local"})(Z0=Mn.MonikerKind||(Mn.MonikerKind={}));var eR;(function(t){t.method="textDocument/moniker",t.messageDirection=Fm.MessageDirection.clientToServer,t.type=new Fm.ProtocolRequestType(t.method)})(eR=Mn.MonikerRequest||(Mn.MonikerRequest={}))});var Mm=b(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.TypeHierarchySubtypesRequest=Ln.TypeHierarchySupertypesRequest=Ln.TypeHierarchyPrepareRequest=void 0;var Yi=Je(),tR;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Yi.MessageDirection.clientToServer,t.type=new Yi.ProtocolRequestType(t.method)})(tR=Ln.TypeHierarchyPrepareRequest||(Ln.TypeHierarchyPrepareRequest={}));var nR;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Yi.MessageDirection.clientToServer,t.type=new Yi.ProtocolRequestType(t.method)})(nR=Ln.TypeHierarchySupertypesRequest||(Ln.TypeHierarchySupertypesRequest={}));var rR;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Yi.MessageDirection.clientToServer,t.type=new Yi.ProtocolRequestType(t.method)})(rR=Ln.TypeHierarchySubtypesRequest||(Ln.TypeHierarchySubtypesRequest={}))});var Lm=b(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.InlineValueRefreshRequest=Lr.InlineValueRequest=void 0;var Ma=Je(),iR;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Ma.MessageDirection.clientToServer,t.type=new Ma.ProtocolRequestType(t.method)})(iR=Lr.InlineValueRequest||(Lr.InlineValueRequest={}));var sR;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Ma.MessageDirection.clientToServer,t.type=new Ma.ProtocolRequestType0(t.method)})(sR=Lr.InlineValueRefreshRequest||(Lr.InlineValueRefreshRequest={}))});var Am=b(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.InlayHintRefreshRequest=An.InlayHintResolveRequest=An.InlayHintRequest=void 0;var Qi=Je(),oR;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Qi.MessageDirection.clientToServer,t.type=new Qi.ProtocolRequestType(t.method)})(oR=An.InlayHintRequest||(An.InlayHintRequest={}));var aR;(function(t){t.method="inlayHint/resolve",t.messageDirection=Qi.MessageDirection.clientToServer,t.type=new Qi.ProtocolRequestType(t.method)})(aR=An.InlayHintResolveRequest||(An.InlayHintResolveRequest={}));var cR;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Qi.MessageDirection.clientToServer,t.type=new Qi.ProtocolRequestType0(t.method)})(cR=An.InlayHintRefreshRequest||(An.InlayHintRefreshRequest={}))});var $m=b(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.DiagnosticRefreshRequest=Rt.WorkspaceDiagnosticRequest=Rt.DocumentDiagnosticRequest=Rt.DocumentDiagnosticReportKind=Rt.DiagnosticServerCancellationData=void 0;var jm=ai(),uR=ka(),Zi=Je(),lR;(function(t){function e(n){let r=n;return r&&uR.boolean(r.retriggerRequest)}t.is=e})(lR=Rt.DiagnosticServerCancellationData||(Rt.DiagnosticServerCancellationData={}));var dR;(function(t){t.Full="full",t.Unchanged="unchanged"})(dR=Rt.DocumentDiagnosticReportKind||(Rt.DocumentDiagnosticReportKind={}));var fR;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Zi.MessageDirection.clientToServer,t.type=new Zi.ProtocolRequestType(t.method),t.partialResult=new jm.ProgressType})(fR=Rt.DocumentDiagnosticRequest||(Rt.DocumentDiagnosticRequest={}));var hR;(function(t){t.method="workspace/diagnostic",t.messageDirection=Zi.MessageDirection.clientToServer,t.type=new Zi.ProtocolRequestType(t.method),t.partialResult=new jm.ProgressType})(hR=Rt.WorkspaceDiagnosticRequest||(Rt.WorkspaceDiagnosticRequest={}));var pR;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Zi.MessageDirection.clientToServer,t.type=new Zi.ProtocolRequestType0(t.method)})(pR=Rt.DiagnosticRefreshRequest||(Rt.DiagnosticRefreshRequest={}))});var Wm=b(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.DidCloseNotebookDocumentNotification=Se.DidSaveNotebookDocumentNotification=Se.DidChangeNotebookDocumentNotification=Se.NotebookCellArrayChange=Se.DidOpenNotebookDocumentNotification=Se.NotebookDocumentSyncRegistrationType=Se.NotebookDocument=Se.NotebookCell=Se.ExecutionSummary=Se.NotebookCellKind=void 0;var po=(Ea(),la(qa)),jn=ka(),Zn=Je(),Hm;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(Hm=Se.NotebookCellKind||(Se.NotebookCellKind={}));var Um;(function(t){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}t.create=e;function n(i){let s=i;return jn.objectLiteral(s)&&po.uinteger.is(s.executionOrder)&&(s.success===void 0||jn.boolean(s.success))}t.is=n;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=r})(Um=Se.ExecutionSummary||(Se.ExecutionSummary={}));var bd;(function(t){function e(s,o){return{kind:s,document:o}}t.create=e;function n(s){let o=s;return jn.objectLiteral(o)&&Hm.is(o.kind)&&po.DocumentUri.is(o.document)&&(o.metadata===void 0||jn.objectLiteral(o.metadata))}t.is=n;function r(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!Um.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}t.diff=r;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),c=Array.isArray(o);if(a!==c)return!1;if(a&&c){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++)if(!i(s[u],o[u]))return!1}if(jn.objectLiteral(s)&&jn.objectLiteral(o)){let u=Object.keys(s),l=Object.keys(o);if(u.length!==l.length||(u.sort(),l.sort(),!i(u,l)))return!1;for(let d=0;d<u.length;d++){let p=u[d];if(!i(s[p],o[p]))return!1}}return!0}})(bd=Se.NotebookCell||(Se.NotebookCell={}));var gR;(function(t){function e(r,i,s,o){return{uri:r,notebookType:i,version:s,cells:o}}t.create=e;function n(r){let i=r;return jn.objectLiteral(i)&&jn.string(i.uri)&&po.integer.is(i.version)&&jn.typedArray(i.cells,bd.is)}t.is=n})(gR=Se.NotebookDocument||(Se.NotebookDocument={}));var go;(function(t){t.method="notebookDocument/sync",t.messageDirection=Zn.MessageDirection.clientToServer,t.type=new Zn.RegistrationType(t.method)})(go=Se.NotebookDocumentSyncRegistrationType||(Se.NotebookDocumentSyncRegistrationType={}));var mR;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=Zn.MessageDirection.clientToServer,t.type=new Zn.ProtocolNotificationType(t.method),t.registrationMethod=go.method})(mR=Se.DidOpenNotebookDocumentNotification||(Se.DidOpenNotebookDocumentNotification={}));var vR;(function(t){function e(r){let i=r;return jn.objectLiteral(i)&&po.uinteger.is(i.start)&&po.uinteger.is(i.deleteCount)&&(i.cells===void 0||jn.typedArray(i.cells,bd.is))}t.is=e;function n(r,i,s){let o={start:r,deleteCount:i};return s!==void 0&&(o.cells=s),o}t.create=n})(vR=Se.NotebookCellArrayChange||(Se.NotebookCellArrayChange={}));var yR;(function(t){t.method="notebookDocument/didChange",t.messageDirection=Zn.MessageDirection.clientToServer,t.type=new Zn.ProtocolNotificationType(t.method),t.registrationMethod=go.method})(yR=Se.DidChangeNotebookDocumentNotification||(Se.DidChangeNotebookDocumentNotification={}));var _R;(function(t){t.method="notebookDocument/didSave",t.messageDirection=Zn.MessageDirection.clientToServer,t.type=new Zn.ProtocolNotificationType(t.method),t.registrationMethod=go.method})(_R=Se.DidSaveNotebookDocumentNotification||(Se.DidSaveNotebookDocumentNotification={}));var wR;(function(t){t.method="notebookDocument/didClose",t.messageDirection=Zn.MessageDirection.clientToServer,t.type=new Zn.ProtocolNotificationType(t.method),t.registrationMethod=go.method})(wR=Se.DidCloseNotebookDocumentNotification||(Se.DidCloseNotebookDocumentNotification={}))});var Qm=b(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.WorkspaceSymbolRequest=v.CodeActionResolveRequest=v.CodeActionRequest=v.DocumentSymbolRequest=v.DocumentHighlightRequest=v.ReferencesRequest=v.DefinitionRequest=v.SignatureHelpRequest=v.SignatureHelpTriggerKind=v.HoverRequest=v.CompletionResolveRequest=v.CompletionRequest=v.CompletionTriggerKind=v.PublishDiagnosticsNotification=v.WatchKind=v.RelativePattern=v.FileChangeType=v.DidChangeWatchedFilesNotification=v.WillSaveTextDocumentWaitUntilRequest=v.WillSaveTextDocumentNotification=v.TextDocumentSaveReason=v.DidSaveTextDocumentNotification=v.DidCloseTextDocumentNotification=v.DidChangeTextDocumentNotification=v.TextDocumentContentChangeEvent=v.DidOpenTextDocumentNotification=v.TextDocumentSyncKind=v.TelemetryEventNotification=v.LogMessageNotification=v.ShowMessageRequest=v.ShowMessageNotification=v.MessageType=v.DidChangeConfigurationNotification=v.ExitNotification=v.ShutdownRequest=v.InitializedNotification=v.InitializeErrorCodes=v.InitializeRequest=v.WorkDoneProgressOptions=v.TextDocumentRegistrationOptions=v.StaticRegistrationOptions=v.PositionEncodingKind=v.FailureHandlingKind=v.ResourceOperationKind=v.UnregistrationRequest=v.RegistrationRequest=v.DocumentSelector=v.NotebookCellTextDocumentFilter=v.NotebookDocumentFilter=v.TextDocumentFilter=void 0;v.TypeHierarchySubtypesRequest=v.TypeHierarchyPrepareRequest=v.MonikerRequest=v.MonikerKind=v.UniquenessLevel=v.WillDeleteFilesRequest=v.DidDeleteFilesNotification=v.WillRenameFilesRequest=v.DidRenameFilesNotification=v.WillCreateFilesRequest=v.DidCreateFilesNotification=v.FileOperationPatternKind=v.LinkedEditingRangeRequest=v.ShowDocumentRequest=v.SemanticTokensRegistrationType=v.SemanticTokensRefreshRequest=v.SemanticTokensRangeRequest=v.SemanticTokensDeltaRequest=v.SemanticTokensRequest=v.TokenFormat=v.CallHierarchyPrepareRequest=v.CallHierarchyOutgoingCallsRequest=v.CallHierarchyIncomingCallsRequest=v.WorkDoneProgressCancelNotification=v.WorkDoneProgressCreateRequest=v.WorkDoneProgress=v.SelectionRangeRequest=v.DeclarationRequest=v.FoldingRangeRequest=v.ColorPresentationRequest=v.DocumentColorRequest=v.ConfigurationRequest=v.DidChangeWorkspaceFoldersNotification=v.WorkspaceFoldersRequest=v.TypeDefinitionRequest=v.ImplementationRequest=v.ApplyWorkspaceEditRequest=v.ExecuteCommandRequest=v.PrepareRenameRequest=v.RenameRequest=v.PrepareSupportDefaultBehavior=v.DocumentOnTypeFormattingRequest=v.DocumentRangeFormattingRequest=v.DocumentFormattingRequest=v.DocumentLinkResolveRequest=v.DocumentLinkRequest=v.CodeLensRefreshRequest=v.CodeLensResolveRequest=v.CodeLensRequest=v.WorkspaceSymbolResolveRequest=void 0;v.DidCloseNotebookDocumentNotification=v.DidSaveNotebookDocumentNotification=v.DidChangeNotebookDocumentNotification=v.NotebookCellArrayChange=v.DidOpenNotebookDocumentNotification=v.NotebookDocumentSyncRegistrationType=v.NotebookDocument=v.NotebookCell=v.ExecutionSummary=v.NotebookCellKind=v.DiagnosticRefreshRequest=v.WorkspaceDiagnosticRequest=v.DocumentDiagnosticRequest=v.DocumentDiagnosticReportKind=v.DiagnosticServerCancellationData=v.InlayHintRefreshRequest=v.InlayHintResolveRequest=v.InlayHintRequest=v.InlineValueRefreshRequest=v.InlineValueRequest=v.TypeHierarchySupertypesRequest=void 0;var L=Je(),Bm=(Ea(),la(qa)),Dt=ka(),CR=hm();Object.defineProperty(v,"ImplementationRequest",{enumerable:!0,get:function(){return CR.ImplementationRequest}});var bR=gm();Object.defineProperty(v,"TypeDefinitionRequest",{enumerable:!0,get:function(){return bR.TypeDefinitionRequest}});var zm=mm();Object.defineProperty(v,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return zm.WorkspaceFoldersRequest}});Object.defineProperty(v,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return zm.DidChangeWorkspaceFoldersNotification}});var SR=ym();Object.defineProperty(v,"ConfigurationRequest",{enumerable:!0,get:function(){return SR.ConfigurationRequest}});var Km=_m();Object.defineProperty(v,"DocumentColorRequest",{enumerable:!0,get:function(){return Km.DocumentColorRequest}});Object.defineProperty(v,"ColorPresentationRequest",{enumerable:!0,get:function(){return Km.ColorPresentationRequest}});var RR=Cm();Object.defineProperty(v,"FoldingRangeRequest",{enumerable:!0,get:function(){return RR.FoldingRangeRequest}});var DR=Sm();Object.defineProperty(v,"DeclarationRequest",{enumerable:!0,get:function(){return DR.DeclarationRequest}});var TR=Dm();Object.defineProperty(v,"SelectionRangeRequest",{enumerable:!0,get:function(){return TR.SelectionRangeRequest}});var Sd=Tm();Object.defineProperty(v,"WorkDoneProgress",{enumerable:!0,get:function(){return Sd.WorkDoneProgress}});Object.defineProperty(v,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Sd.WorkDoneProgressCreateRequest}});Object.defineProperty(v,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Sd.WorkDoneProgressCancelNotification}});var Rd=xm();Object.defineProperty(v,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Rd.CallHierarchyIncomingCallsRequest}});Object.defineProperty(v,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Rd.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(v,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Rd.CallHierarchyPrepareRequest}});var es=Pm();Object.defineProperty(v,"TokenFormat",{enumerable:!0,get:function(){return es.TokenFormat}});Object.defineProperty(v,"SemanticTokensRequest",{enumerable:!0,get:function(){return es.SemanticTokensRequest}});Object.defineProperty(v,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return es.SemanticTokensDeltaRequest}});Object.defineProperty(v,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return es.SemanticTokensRangeRequest}});Object.defineProperty(v,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return es.SemanticTokensRefreshRequest}});Object.defineProperty(v,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return es.SemanticTokensRegistrationType}});var xR=Em();Object.defineProperty(v,"ShowDocumentRequest",{enumerable:!0,get:function(){return xR.ShowDocumentRequest}});var PR=Om();Object.defineProperty(v,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return PR.LinkedEditingRangeRequest}});var li=Nm();Object.defineProperty(v,"FileOperationPatternKind",{enumerable:!0,get:function(){return li.FileOperationPatternKind}});Object.defineProperty(v,"DidCreateFilesNotification",{enumerable:!0,get:function(){return li.DidCreateFilesNotification}});Object.defineProperty(v,"WillCreateFilesRequest",{enumerable:!0,get:function(){return li.WillCreateFilesRequest}});Object.defineProperty(v,"DidRenameFilesNotification",{enumerable:!0,get:function(){return li.DidRenameFilesNotification}});Object.defineProperty(v,"WillRenameFilesRequest",{enumerable:!0,get:function(){return li.WillRenameFilesRequest}});Object.defineProperty(v,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return li.DidDeleteFilesNotification}});Object.defineProperty(v,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return li.WillDeleteFilesRequest}});var Dd=Im();Object.defineProperty(v,"UniquenessLevel",{enumerable:!0,get:function(){return Dd.UniquenessLevel}});Object.defineProperty(v,"MonikerKind",{enumerable:!0,get:function(){return Dd.MonikerKind}});Object.defineProperty(v,"MonikerRequest",{enumerable:!0,get:function(){return Dd.MonikerRequest}});var Td=Mm();Object.defineProperty(v,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Td.TypeHierarchyPrepareRequest}});Object.defineProperty(v,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Td.TypeHierarchySubtypesRequest}});Object.defineProperty(v,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Td.TypeHierarchySupertypesRequest}});var Vm=Lm();Object.defineProperty(v,"InlineValueRequest",{enumerable:!0,get:function(){return Vm.InlineValueRequest}});Object.defineProperty(v,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Vm.InlineValueRefreshRequest}});var xd=Am();Object.defineProperty(v,"InlayHintRequest",{enumerable:!0,get:function(){return xd.InlayHintRequest}});Object.defineProperty(v,"InlayHintResolveRequest",{enumerable:!0,get:function(){return xd.InlayHintResolveRequest}});Object.defineProperty(v,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return xd.InlayHintRefreshRequest}});var mo=$m();Object.defineProperty(v,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return mo.DiagnosticServerCancellationData}});Object.defineProperty(v,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return mo.DocumentDiagnosticReportKind}});Object.defineProperty(v,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return mo.DocumentDiagnosticRequest}});Object.defineProperty(v,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return mo.WorkspaceDiagnosticRequest}});Object.defineProperty(v,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return mo.DiagnosticRefreshRequest}});var er=Wm();Object.defineProperty(v,"NotebookCellKind",{enumerable:!0,get:function(){return er.NotebookCellKind}});Object.defineProperty(v,"ExecutionSummary",{enumerable:!0,get:function(){return er.ExecutionSummary}});Object.defineProperty(v,"NotebookCell",{enumerable:!0,get:function(){return er.NotebookCell}});Object.defineProperty(v,"NotebookDocument",{enumerable:!0,get:function(){return er.NotebookDocument}});Object.defineProperty(v,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return er.NotebookDocumentSyncRegistrationType}});Object.defineProperty(v,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return er.DidOpenNotebookDocumentNotification}});Object.defineProperty(v,"NotebookCellArrayChange",{enumerable:!0,get:function(){return er.NotebookCellArrayChange}});Object.defineProperty(v,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return er.DidChangeNotebookDocumentNotification}});Object.defineProperty(v,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return er.DidSaveNotebookDocumentNotification}});Object.defineProperty(v,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return er.DidCloseNotebookDocumentNotification}});var Gm;(function(t){function e(n){let r=n;return Dt.string(r.language)||Dt.string(r.scheme)||Dt.string(r.pattern)}t.is=e})(Gm=v.TextDocumentFilter||(v.TextDocumentFilter={}));var Xm;(function(t){function e(n){let r=n;return Dt.objectLiteral(r)&&(Dt.string(r.notebookType)||Dt.string(r.scheme)||Dt.string(r.pattern))}t.is=e})(Xm=v.NotebookDocumentFilter||(v.NotebookDocumentFilter={}));var Jm;(function(t){function e(n){let r=n;return Dt.objectLiteral(r)&&(Dt.string(r.notebook)||Xm.is(r.notebook))&&(r.language===void 0||Dt.string(r.language))}t.is=e})(Jm=v.NotebookCellTextDocumentFilter||(v.NotebookCellTextDocumentFilter={}));var Ym;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Dt.string(r)&&!Gm.is(r)&&!Jm.is(r))return!1;return!0}t.is=e})(Ym=v.DocumentSelector||(v.DocumentSelector={}));var qR;(function(t){t.method="client/registerCapability",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolRequestType(t.method)})(qR=v.RegistrationRequest||(v.RegistrationRequest={}));var ER;(function(t){t.method="client/unregisterCapability",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolRequestType(t.method)})(ER=v.UnregistrationRequest||(v.UnregistrationRequest={}));var kR;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(kR=v.ResourceOperationKind||(v.ResourceOperationKind={}));var OR;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(OR=v.FailureHandlingKind||(v.FailureHandlingKind={}));var NR;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(NR=v.PositionEncodingKind||(v.PositionEncodingKind={}));var FR;(function(t){function e(n){let r=n;return r&&Dt.string(r.id)&&r.id.length>0}t.hasId=e})(FR=v.StaticRegistrationOptions||(v.StaticRegistrationOptions={}));var IR;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Ym.is(r.documentSelector))}t.is=e})(IR=v.TextDocumentRegistrationOptions||(v.TextDocumentRegistrationOptions={}));var MR;(function(t){function e(r){let i=r;return Dt.objectLiteral(i)&&(i.workDoneProgress===void 0||Dt.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&Dt.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(MR=v.WorkDoneProgressOptions||(v.WorkDoneProgressOptions={}));var LR;(function(t){t.method="initialize",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(LR=v.InitializeRequest||(v.InitializeRequest={}));var AR;(function(t){t.unknownProtocolVersion=1})(AR=v.InitializeErrorCodes||(v.InitializeErrorCodes={}));var jR;(function(t){t.method="initialized",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(jR=v.InitializedNotification||(v.InitializedNotification={}));var $R;(function(t){t.method="shutdown",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType0(t.method)})($R=v.ShutdownRequest||(v.ShutdownRequest={}));var HR;(function(t){t.method="exit",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType0(t.method)})(HR=v.ExitNotification||(v.ExitNotification={}));var UR;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(UR=v.DidChangeConfigurationNotification||(v.DidChangeConfigurationNotification={}));var WR;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(WR=v.MessageType||(v.MessageType={}));var BR;(function(t){t.method="window/showMessage",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolNotificationType(t.method)})(BR=v.ShowMessageNotification||(v.ShowMessageNotification={}));var zR;(function(t){t.method="window/showMessageRequest",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolRequestType(t.method)})(zR=v.ShowMessageRequest||(v.ShowMessageRequest={}));var KR;(function(t){t.method="window/logMessage",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolNotificationType(t.method)})(KR=v.LogMessageNotification||(v.LogMessageNotification={}));var VR;(function(t){t.method="telemetry/event",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolNotificationType(t.method)})(VR=v.TelemetryEventNotification||(v.TelemetryEventNotification={}));var GR;(function(t){t.None=0,t.Full=1,t.Incremental=2})(GR=v.TextDocumentSyncKind||(v.TextDocumentSyncKind={}));var XR;(function(t){t.method="textDocument/didOpen",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(XR=v.DidOpenTextDocumentNotification||(v.DidOpenTextDocumentNotification={}));var JR;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(JR=v.TextDocumentContentChangeEvent||(v.TextDocumentContentChangeEvent={}));var YR;(function(t){t.method="textDocument/didChange",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(YR=v.DidChangeTextDocumentNotification||(v.DidChangeTextDocumentNotification={}));var QR;(function(t){t.method="textDocument/didClose",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(QR=v.DidCloseTextDocumentNotification||(v.DidCloseTextDocumentNotification={}));var ZR;(function(t){t.method="textDocument/didSave",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(ZR=v.DidSaveTextDocumentNotification||(v.DidSaveTextDocumentNotification={}));var eD;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(eD=v.TextDocumentSaveReason||(v.TextDocumentSaveReason={}));var tD;(function(t){t.method="textDocument/willSave",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(tD=v.WillSaveTextDocumentNotification||(v.WillSaveTextDocumentNotification={}));var nD;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(nD=v.WillSaveTextDocumentWaitUntilRequest||(v.WillSaveTextDocumentWaitUntilRequest={}));var rD;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolNotificationType(t.method)})(rD=v.DidChangeWatchedFilesNotification||(v.DidChangeWatchedFilesNotification={}));var iD;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(iD=v.FileChangeType||(v.FileChangeType={}));var sD;(function(t){function e(n){let r=n;return Dt.objectLiteral(r)&&(Bm.URI.is(r.baseUri)||Bm.WorkspaceFolder.is(r.baseUri))&&Dt.string(r.pattern)}t.is=e})(sD=v.RelativePattern||(v.RelativePattern={}));var oD;(function(t){t.Create=1,t.Change=2,t.Delete=4})(oD=v.WatchKind||(v.WatchKind={}));var aD;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolNotificationType(t.method)})(aD=v.PublishDiagnosticsNotification||(v.PublishDiagnosticsNotification={}));var cD;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(cD=v.CompletionTriggerKind||(v.CompletionTriggerKind={}));var uD;(function(t){t.method="textDocument/completion",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(uD=v.CompletionRequest||(v.CompletionRequest={}));var lD;(function(t){t.method="completionItem/resolve",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(lD=v.CompletionResolveRequest||(v.CompletionResolveRequest={}));var dD;(function(t){t.method="textDocument/hover",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(dD=v.HoverRequest||(v.HoverRequest={}));var fD;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(fD=v.SignatureHelpTriggerKind||(v.SignatureHelpTriggerKind={}));var hD;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(hD=v.SignatureHelpRequest||(v.SignatureHelpRequest={}));var pD;(function(t){t.method="textDocument/definition",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(pD=v.DefinitionRequest||(v.DefinitionRequest={}));var gD;(function(t){t.method="textDocument/references",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(gD=v.ReferencesRequest||(v.ReferencesRequest={}));var mD;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(mD=v.DocumentHighlightRequest||(v.DocumentHighlightRequest={}));var vD;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(vD=v.DocumentSymbolRequest||(v.DocumentSymbolRequest={}));var yD;(function(t){t.method="textDocument/codeAction",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(yD=v.CodeActionRequest||(v.CodeActionRequest={}));var _D;(function(t){t.method="codeAction/resolve",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(_D=v.CodeActionResolveRequest||(v.CodeActionResolveRequest={}));var wD;(function(t){t.method="workspace/symbol",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(wD=v.WorkspaceSymbolRequest||(v.WorkspaceSymbolRequest={}));var CD;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(CD=v.WorkspaceSymbolResolveRequest||(v.WorkspaceSymbolResolveRequest={}));var bD;(function(t){t.method="textDocument/codeLens",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(bD=v.CodeLensRequest||(v.CodeLensRequest={}));var SD;(function(t){t.method="codeLens/resolve",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(SD=v.CodeLensResolveRequest||(v.CodeLensResolveRequest={}));var RD;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolRequestType0(t.method)})(RD=v.CodeLensRefreshRequest||(v.CodeLensRefreshRequest={}));var DD;(function(t){t.method="textDocument/documentLink",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(DD=v.DocumentLinkRequest||(v.DocumentLinkRequest={}));var TD;(function(t){t.method="documentLink/resolve",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(TD=v.DocumentLinkResolveRequest||(v.DocumentLinkResolveRequest={}));var xD;(function(t){t.method="textDocument/formatting",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(xD=v.DocumentFormattingRequest||(v.DocumentFormattingRequest={}));var PD;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(PD=v.DocumentRangeFormattingRequest||(v.DocumentRangeFormattingRequest={}));var qD;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(qD=v.DocumentOnTypeFormattingRequest||(v.DocumentOnTypeFormattingRequest={}));var ED;(function(t){t.Identifier=1})(ED=v.PrepareSupportDefaultBehavior||(v.PrepareSupportDefaultBehavior={}));var kD;(function(t){t.method="textDocument/rename",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(kD=v.RenameRequest||(v.RenameRequest={}));var OD;(function(t){t.method="textDocument/prepareRename",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(OD=v.PrepareRenameRequest||(v.PrepareRenameRequest={}));var ND;(function(t){t.method="workspace/executeCommand",t.messageDirection=L.MessageDirection.clientToServer,t.type=new L.ProtocolRequestType(t.method)})(ND=v.ExecuteCommandRequest||(v.ExecuteCommandRequest={}));var FD;(function(t){t.method="workspace/applyEdit",t.messageDirection=L.MessageDirection.serverToClient,t.type=new L.ProtocolRequestType("workspace/applyEdit")})(FD=v.ApplyWorkspaceEditRequest||(v.ApplyWorkspaceEditRequest={}))});var ev=b(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.createProtocolConnection=void 0;var Zm=ai();function ID(t,e,n,r){return Zm.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Zm.createMessageConnection)(t,e,n,r)}La.createProtocolConnection=ID});var tv=b(Ht=>{"use strict";var MD=Ht&&Ht.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Aa=Ht&&Ht.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&MD(e,t,n)};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.LSPErrorCodes=Ht.createProtocolConnection=void 0;Aa(ai(),Ht);Aa((Ea(),la(qa)),Ht);Aa(Je(),Ht);Aa(Qm(),Ht);var LD=ev();Object.defineProperty(Ht,"createProtocolConnection",{enumerable:!0,get:function(){return LD.createProtocolConnection}});var AD;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(AD=Ht.LSPErrorCodes||(Ht.LSPErrorCodes={}))});var ne=b(tr=>{"use strict";var jD=tr&&tr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),nv=tr&&tr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&jD(e,t,n)};Object.defineProperty(tr,"__esModule",{value:!0});tr.createProtocolConnection=void 0;var $D=bl();nv(bl(),tr);nv(tv(),tr);function HD(t,e,n,r){return(0,$D.createMessageConnection)(t,e,n,r)}tr.createProtocolConnection=HD});var rv=b(ut=>{Object.defineProperty(ut,"__esModule",{value:!0});ut.ParseSFCRequest=ut.GetConvertAttrCasingEditsRequest=ut.GetConvertTagCasingEditsRequest=ut.DetectNameCasingRequest=ut.GetComponentMeta=ut.GetVueCompilerOptionsRequest=void 0;var ts=ne(),UD;(function(t){t.type=new ts.RequestType("volar/vueCompilerOptions")})(UD=ut.GetVueCompilerOptionsRequest||(ut.GetVueCompilerOptionsRequest={}));var WD;(function(t){t.type=new ts.RequestType("volar/meta")})(WD=ut.GetComponentMeta||(ut.GetComponentMeta={}));var BD;(function(t){t.type=new ts.RequestType("volar/detectTagCasing")})(BD=ut.DetectNameCasingRequest||(ut.DetectNameCasingRequest={}));var zD;(function(t){t.type=new ts.RequestType("volar/convertTagNameCasing")})(zD=ut.GetConvertTagCasingEditsRequest||(ut.GetConvertTagCasingEditsRequest={}));var KD;(function(t){t.type=new ts.RequestType("volar/convertAttrNameCasing")})(KD=ut.GetConvertAttrCasingEditsRequest||(ut.GetConvertAttrCasingEditsRequest={}));var VD;(function(t){t.type=new ts.RequestType("volar/parseSfc")})(VD=ut.ParseSFCRequest||(ut.ParseSFCRequest={}))});var sv=b(iv=>{Object.defineProperty(iv,"__esModule",{value:!0})});var Pd=b(he=>{Object.defineProperty(he,"__esModule",{value:!0});he.ReportStats=he.GetVirtualFileRequest=he.GetVirtualFileNamesRequest=he.ReloadProjectNotification=he.WriteVirtualFilesNotification=he.AutoInsertRequest=he.GetMatchTsConfigRequest=he.FindFileReferenceRequest=he.FsReadDirectoryRequest=he.FsReadFileRequest=he.FsStatRequest=he.ShowReferencesNotification=void 0;var vn=ne(),GD;(function(t){t.type=new vn.NotificationType("vue.findReferences")})(GD=he.ShowReferencesNotification||(he.ShowReferencesNotification={}));var XD;(function(t){t.type=new vn.RequestType("fs/stat")})(XD=he.FsStatRequest||(he.FsStatRequest={}));var JD;(function(t){t.type=new vn.RequestType("fs/readFile")})(JD=he.FsReadFileRequest||(he.FsReadFileRequest={}));var YD;(function(t){t.type=new vn.RequestType("fs/readDirectory")})(YD=he.FsReadDirectoryRequest||(he.FsReadDirectoryRequest={}));var QD;(function(t){t.type=new vn.RequestType("vue/findFileReference")})(QD=he.FindFileReferenceRequest||(he.FindFileReferenceRequest={}));var ZD;(function(t){t.type=new vn.RequestType("volar/tsconfig")})(ZD=he.GetMatchTsConfigRequest||(he.GetMatchTsConfigRequest={}));var eT;(function(t){t.type=new vn.RequestType("vue/autoInsert")})(eT=he.AutoInsertRequest||(he.AutoInsertRequest={}));var tT;(function(t){t.type=new vn.NotificationType("volar.action.writeVirtualFiles")})(tT=he.WriteVirtualFilesNotification||(he.WriteVirtualFilesNotification={}));var nT;(function(t){t.type=new vn.NotificationType("volar.action.reloadProject")})(nT=he.ReloadProjectNotification||(he.ReloadProjectNotification={}));var rT;(function(t){t.type=new vn.RequestType("vue/virtualFileNames")})(rT=he.GetVirtualFileNamesRequest||(he.GetVirtualFileNamesRequest={}));var iT;(function(t){t.type=new vn.RequestType("vue/virtualFile")})(iT=he.GetVirtualFileRequest||(he.GetVirtualFileRequest={}));var sT;(function(t){t.type=new vn.NotificationType0("vue/stats")})(sT=he.ReportStats||(he.ReportStats={}))});var qd=b(Ar=>{Object.defineProperty(Ar,"__esModule",{value:!0});Ar.DiagnosticModel=Ar.ServerMode=void 0;var oT;(function(t){t[t.Semantic=0]="Semantic",t[t.Syntactic=2]="Syntactic"})(oT=Ar.ServerMode||(Ar.ServerMode={}));var aT;(function(t){t[t.None=0]="None",t[t.Push=1]="Push",t[t.Pull=2]="Pull"})(aT=Ar.DiagnosticModel||(Ar.DiagnosticModel={}))});var av=b(ov=>{Object.defineProperty(ov,"__esModule",{value:!0})});var cv=b(sn=>{var cT=sn&&sn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),uT=sn&&sn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&cT(e,t,n)};Object.defineProperty(sn,"__esModule",{value:!0});sn.AttrNameCasing=sn.TagNameCasing=void 0;var lT;(function(t){t[t.Kebab=0]="Kebab",t[t.Pascal=1]="Pascal"})(lT=sn.TagNameCasing||(sn.TagNameCasing={}));var dT;(function(t){t[t.Kebab=0]="Kebab",t[t.Camel=1]="Camel"})(dT=sn.AttrNameCasing||(sn.AttrNameCasing={}));uT(av(),sn)});var mr=b($n=>{var fT=$n&&$n.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),vo=$n&&$n.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&fT(e,t,n)};Object.defineProperty($n,"__esModule",{value:!0});vo(rv(),$n);vo(sv(),$n);vo(Pd(),$n);vo(qd(),$n);vo(cv(),$n)});var yn=b(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.asPromise=rt.thenable=rt.typedArray=rt.stringArray=rt.array=rt.func=rt.error=rt.number=rt.string=rt.boolean=void 0;function hT(t){return t===!0||t===!1}rt.boolean=hT;function uv(t){return typeof t=="string"||t instanceof String}rt.string=uv;function pT(t){return typeof t=="number"||t instanceof Number}rt.number=pT;function gT(t){return t instanceof Error}rt.error=gT;function lv(t){return typeof t=="function"}rt.func=lv;function dv(t){return Array.isArray(t)}rt.array=dv;function mT(t){return dv(t)&&t.every(e=>uv(e))}rt.stringArray=mT;function vT(t,e){return Array.isArray(t)&&t.every(e)}rt.typedArray=vT;function fv(t){return t&&lv(t.then)}rt.thenable=fv;function yT(t){return t instanceof Promise?t:fv(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}rt.asPromise=yT});var wo=b(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.forEach=Ot.mapAsync=Ot.map=Ot.clearTestMode=Ot.setTestMode=Ot.Semaphore=Ot.Delayer=void 0;var _o=ne(),Ed=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,_o.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Ot.Delayer=Ed;var kd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,_o.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Ot.Semaphore=kd;var Od=!1;function _T(){Od=!0}Ot.setTestMode=_T;function wT(){Od=!1}Ot.clearTestMode=wT;var hv=15,yo=class{constructor(e=hv){this.yieldAfter=Od===!0?Math.max(e,2):Math.max(e,hv),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function CT(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new yo(r?.yieldAfter);function o(c){s.start();for(let u=c;u<t.length;u++)if(i[u]=e(t[u]),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,_o.RAL)().timer.setImmediate(()=>{c(o(a))})});return i}Ot.map=CT;async function bT(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new yo(r?.yieldAfter);async function o(c){s.start();for(let u=c;u<t.length;u++)if(i[u]=await e(t[u],n),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=await o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,_o.RAL)().timer.setImmediate(()=>{c(o(a))})});return i}Ot.mapAsync=bT;async function ST(t,e,n,r){if(t.length===0)return;let i=new yo(r?.yieldAfter);function s(a){i.start();for(let c=a;c<t.length;c++)if(e(t[c]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),c+1;return-1}let o=s(0);for(;o!==-1&&!(n!==void 0&&n.isCancellationRequested);)o=await new Promise(a=>{(0,_o.RAL)().timer.setImmediate(()=>{a(s(o))})})}Ot.forEach=ST});var Id=b(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var RT=require("vscode"),Nd=class extends RT.CompletionItem{constructor(e){super(e)}};Fd.default=Nd});var Ad=b(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});var DT=require("vscode"),Md=class extends DT.CodeLens{constructor(e){super(e)}};Ld.default=Md});var Hd=b($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var TT=require("vscode"),jd=class extends TT.DocumentLink{constructor(e,n){super(e,n)}};$d.default=jd});var Bd=b(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});var xT=require("vscode"),Ud=class extends xT.CodeAction{constructor(e,n){super(e),this.data=n}};Wd.default=Ud});var Vd=b(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.ProtocolDiagnostic=di.DiagnosticCode=void 0;var PT=require("vscode"),zd=yn(),qT;(function(t){function e(n){let r=n;return r!=null&&(zd.number(r.value)||zd.string(r.value))&&zd.string(r.target)}t.is=e})(qT=di.DiagnosticCode||(di.DiagnosticCode={}));var Kd=class extends PT.Diagnostic{constructor(e,n,r,i){super(e,n,r),this.data=i,this.hasDiagnosticCode=!1}};di.ProtocolDiagnostic=Kd});var Jd=b(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});var ET=require("vscode"),Gd=class extends ET.CallHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};Xd.default=Gd});var Zd=b(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var kT=require("vscode"),Yd=class extends kT.TypeHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};Qd.default=Yd});var nf=b(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});var ja=require("vscode"),ef=class extends ja.SymbolInformation{constructor(e,n,r,i,s){let o=!(i instanceof ja.Uri);super(e,n,r,o?i:new ja.Location(i,new ja.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};tf.default=ef});var of=b(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var OT=require("vscode"),rf=class extends OT.InlayHint{constructor(e,n,r){super(e,n,r)}};sf.default=rf});var mv=b($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.createConverter=void 0;var lt=require("vscode"),ce=ne(),ns=yn(),pv=wo(),NT=Id(),FT=Ad(),IT=Hd(),MT=Bd(),gv=Vd(),LT=Jd(),AT=Zd(),jT=nf(),$T=of(),af;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(af||(af={}));function HT(t){let n=t||(m=>m.toString());function r(m){return n(m)}function i(m){return{uri:n(m.uri)}}function s(m){return{uri:n(m.uri),languageId:m.languageId,version:m.version,text:m.getText()}}function o(m){return{uri:n(m.uri),version:m.version}}function a(m){return{textDocument:s(m)}}function c(m){let P=m;return!!P.document&&!!P.contentChanges}function u(m){let P=m;return!!P.uri&&!!P.version}function l(m){if(u(m))return{textDocument:{uri:n(m.uri),version:m.version},contentChanges:[{text:m.getText()}]};if(c(m)){let P=m.document;return{textDocument:{uri:n(P.uri),version:P.version},contentChanges:m.contentChanges.map(fe=>{let De=fe.range;return{range:{start:{line:De.start.line,character:De.start.character},end:{line:De.end.line,character:De.end.character}},rangeLength:fe.rangeLength,text:fe.text}})}}else throw Error("Unsupported text document change parameter")}function d(m){return{textDocument:i(m)}}function p(m,P=!1){let B={textDocument:i(m)};return P&&(B.text=m.getText()),B}function h(m){switch(m){case lt.TextDocumentSaveReason.Manual:return ce.TextDocumentSaveReason.Manual;case lt.TextDocumentSaveReason.AfterDelay:return ce.TextDocumentSaveReason.AfterDelay;case lt.TextDocumentSaveReason.FocusOut:return ce.TextDocumentSaveReason.FocusOut}return ce.TextDocumentSaveReason.Manual}function g(m){return{textDocument:i(m.document),reason:h(m.reason)}}function y(m){return{files:m.files.map(P=>({uri:n(P)}))}}function _(m){return{files:m.files.map(P=>({oldUri:n(P.oldUri),newUri:n(P.newUri)}))}}function S(m){return{files:m.files.map(P=>({uri:n(P)}))}}function T(m){return{files:m.files.map(P=>({uri:n(P)}))}}function C(m){return{files:m.files.map(P=>({oldUri:n(P.oldUri),newUri:n(P.newUri)}))}}function D(m){return{files:m.files.map(P=>({uri:n(P)}))}}function E(m,P){return{textDocument:i(m),position:Ie(P)}}function W(m){switch(m){case lt.CompletionTriggerKind.TriggerCharacter:return ce.CompletionTriggerKind.TriggerCharacter;case lt.CompletionTriggerKind.TriggerForIncompleteCompletions:return ce.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ce.CompletionTriggerKind.Invoked}}function j(m,P,B){return{textDocument:i(m),position:Ie(P),context:{triggerKind:W(B.triggerKind),triggerCharacter:B.triggerCharacter}}}function Q(m){switch(m){case lt.SignatureHelpTriggerKind.Invoke:return ce.SignatureHelpTriggerKind.Invoked;case lt.SignatureHelpTriggerKind.TriggerCharacter:return ce.SignatureHelpTriggerKind.TriggerCharacter;case lt.SignatureHelpTriggerKind.ContentChange:return ce.SignatureHelpTriggerKind.ContentChange}}function re(m){return{label:m.label}}function ue(m){return m.map(re)}function se(m){return{label:m.label,parameters:ue(m.parameters)}}function Fe(m){return m.map(se)}function We(m){return m===void 0?m:{signatures:Fe(m.signatures),activeSignature:m.activeSignature,activeParameter:m.activeParameter}}function ve(m,P,B){return{textDocument:i(m),position:Ie(P),context:{isRetrigger:B.isRetrigger,triggerCharacter:B.triggerCharacter,triggerKind:Q(B.triggerKind),activeSignatureHelp:We(B.activeSignatureHelp)}}}function Ie(m){return{line:m.line,character:m.character}}function k(m){return m==null?m:{line:m.line>ce.uinteger.MAX_VALUE?ce.uinteger.MAX_VALUE:m.line,character:m.character>ce.uinteger.MAX_VALUE?ce.uinteger.MAX_VALUE:m.character}}function q(m,P){return pv.map(m,k,P)}function F(m){return m==null?m:{start:k(m.start),end:k(m.end)}}function M(m){return m==null?m:ce.Location.create(r(m.uri),F(m.range))}function Y(m){switch(m){case lt.DiagnosticSeverity.Error:return ce.DiagnosticSeverity.Error;case lt.DiagnosticSeverity.Warning:return ce.DiagnosticSeverity.Warning;case lt.DiagnosticSeverity.Information:return ce.DiagnosticSeverity.Information;case lt.DiagnosticSeverity.Hint:return ce.DiagnosticSeverity.Hint}}function ie(m){if(!m)return;let P=[];for(let B of m){let fe=G(B);fe!==void 0&&P.push(fe)}return P.length>0?P:void 0}function G(m){switch(m){case lt.DiagnosticTag.Unnecessary:return ce.DiagnosticTag.Unnecessary;case lt.DiagnosticTag.Deprecated:return ce.DiagnosticTag.Deprecated;default:return}}function Pt(m){return{message:m.message,location:M(m.location)}}function ht(m){return m.map(Pt)}function qt(m){if(m!=null)return ns.number(m)||ns.string(m)?m:{value:m.value,target:r(m.target)}}function fn(m){let P=ce.Diagnostic.create(F(m.range),m.message),B=m instanceof gv.ProtocolDiagnostic?m:void 0;B!==void 0&&B.data!==void 0&&(P.data=B.data);let fe=qt(m.code);return gv.DiagnosticCode.is(fe)?B!==void 0&&B.hasDiagnosticCode?P.code=fe:(P.code=fe.value,P.codeDescription={href:fe.target}):P.code=fe,ns.number(m.severity)&&(P.severity=Y(m.severity)),Array.isArray(m.tags)&&(P.tags=ie(m.tags)),m.relatedInformation&&(P.relatedInformation=ht(m.relatedInformation)),m.source&&(P.source=m.source),P}function Xt(m,P){return m==null?m:pv.map(m,fn,P)}function Ws(m,P){switch(m){case"$string":return P;case ce.MarkupKind.PlainText:return{kind:m,value:P};case ce.MarkupKind.Markdown:return{kind:m,value:P.value};default:return`Unsupported Markup content received. Kind is: ${m}`}}function Ii(m){switch(m){case lt.CompletionItemTag.Deprecated:return ce.CompletionItemTag.Deprecated}}function Mi(m){if(m===void 0)return m;let P=[];for(let B of m){let fe=Ii(B);fe!==void 0&&P.push(fe)}return P}function hn(m,P){return P!==void 0?P:m+1}function Gn(m,P=!1){let B,fe;ns.string(m.label)?B=m.label:(B=m.label.label,P&&(m.label.detail!==void 0||m.label.description!==void 0)&&(fe={detail:m.label.detail,description:m.label.description}));let De={label:B};fe!==void 0&&(De.labelDetails=fe);let Ct=m instanceof NT.default?m:void 0;m.detail&&(De.detail=m.detail),m.documentation&&(!Ct||Ct.documentationFormat==="$string"?De.documentation=m.documentation:De.documentation=Ws(Ct.documentationFormat,m.documentation)),m.filterText&&(De.filterText=m.filterText),Li(De,m),ns.number(m.kind)&&(De.kind=hn(m.kind,Ct&&Ct.originalItemKind)),m.sortText&&(De.sortText=m.sortText),m.additionalTextEdits&&(De.additionalTextEdits=Nr(m.additionalTextEdits)),m.commitCharacters&&(De.commitCharacters=m.commitCharacters.slice()),m.command&&(De.command=kn(m.command)),(m.preselect===!0||m.preselect===!1)&&(De.preselect=m.preselect);let ur=Mi(m.tags);if(Ct){if(Ct.data!==void 0&&(De.data=Ct.data),Ct.deprecated===!0||Ct.deprecated===!1){if(Ct.deprecated===!0&&ur!==void 0&&ur.length>0){let zs=ur.indexOf(lt.CompletionItemTag.Deprecated);zs!==-1&&ur.splice(zs,1)}De.deprecated=Ct.deprecated}Ct.insertTextMode!==void 0&&(De.insertTextMode=Ct.insertTextMode)}return ur!==void 0&&ur.length>0&&(De.tags=ur),De.insertTextMode===void 0&&m.keepWhitespace===!0&&(De.insertTextMode=ce.InsertTextMode.adjustIndentation),De}function Li(m,P){let B=ce.InsertTextFormat.PlainText,fe,De;P.textEdit?(fe=P.textEdit.newText,De=P.textEdit.range):P.insertText instanceof lt.SnippetString?(B=ce.InsertTextFormat.Snippet,fe=P.insertText.value):fe=P.insertText,P.range&&(De=P.range),m.insertTextFormat=B,P.fromEdit&&fe!==void 0&&De!==void 0?m.textEdit=Pn(fe,De):m.insertText=fe}function Pn(m,P){return af.is(P)?ce.InsertReplaceEdit.create(m,F(P.inserting),F(P.replacing)):{newText:m,range:F(P)}}function Qr(m){return{range:F(m.range),newText:m.newText}}function Nr(m){return m==null?m:m.map(Qr)}function qn(m){return m<=lt.SymbolKind.TypeParameter?m+1:ce.SymbolKind.Property}function pn(m){return m}function vt(m){return m.map(pn)}function Bs(m,P,B){return{textDocument:i(m),position:Ie(P),context:{includeDeclaration:B.includeDeclaration}}}async function rn(m,P){let B=ce.CodeAction.create(m.title);if(m instanceof MT.default&&m.data!==void 0&&(B.data=m.data),m.kind!==void 0&&(B.kind=Zr(m.kind)),m.diagnostics!==void 0&&(B.diagnostics=await Xt(m.diagnostics,P)),m.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return m.command!==void 0&&(B.command=kn(m.command)),m.isPreferred!==void 0&&(B.isPreferred=m.isPreferred),m.disabled!==void 0&&(B.disabled={reason:m.disabled.reason}),B}async function En(m,P){if(m==null)return m;let B;return m.only&&ns.string(m.only.value)&&(B=[m.only.value]),ce.CodeActionContext.create(await Xt(m.diagnostics,P),B,Ai(m.triggerKind))}function Ai(m){switch(m){case lt.CodeActionTriggerKind.Invoke:return ce.CodeActionTriggerKind.Invoked;case lt.CodeActionTriggerKind.Automatic:return ce.CodeActionTriggerKind.Automatic;default:return}}function Zr(m){if(m!=null)return m.value}function ei(m){return m==null?m:ce.InlineValueContext.create(m.frameId,F(m.stoppedLocation))}function kn(m){let P=ce.Command.create(m.title,m.command);return m.arguments&&(P.arguments=m.arguments),P}function Xn(m){let P=ce.CodeLens.create(F(m.range));return m.command&&(P.command=kn(m.command)),m instanceof FT.default&&m.data&&(P.data=m.data),P}function w(m,P){let B={tabSize:m.tabSize,insertSpaces:m.insertSpaces};return P.trimTrailingWhitespace&&(B.trimTrailingWhitespace=!0),P.trimFinalNewlines&&(B.trimFinalNewlines=!0),P.insertFinalNewline&&(B.insertFinalNewline=!0),B}function N(m){return{textDocument:i(m)}}function A(m){return{textDocument:i(m)}}function z(m){let P=ce.DocumentLink.create(F(m.range));m.target&&(P.target=r(m.target)),m.tooltip!==void 0&&(P.tooltip=m.tooltip);let B=m instanceof IT.default?m:void 0;return B&&B.data&&(P.data=B.data),P}function qe(m){return{textDocument:i(m)}}function Ee(m){let P={name:m.name,kind:qn(m.kind),uri:r(m.uri),range:F(m.range),selectionRange:F(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(P.detail=m.detail),m.tags!==void 0&&(P.tags=vt(m.tags)),m instanceof LT.default&&m.data!==void 0&&(P.data=m.data),P}function Ae(m){let P={name:m.name,kind:qn(m.kind),uri:r(m.uri),range:F(m.range),selectionRange:F(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(P.detail=m.detail),m.tags!==void 0&&(P.tags=vt(m.tags)),m instanceof AT.default&&m.data!==void 0&&(P.data=m.data),P}function Xe(m){let P=m instanceof jT.default?{name:m.name,kind:qn(m.kind),location:m.hasRange?M(m.location):{uri:n(m.location.uri)},data:m.data}:{name:m.name,kind:qn(m.kind),location:M(m.location)};return m.tags!==void 0&&(P.tags=vt(m.tags)),m.containerName!==""&&(P.containerName=m.containerName),P}function me(m){let P=typeof m.label=="string"?m.label:m.label.map(Me),B=ce.InlayHint.create(k(m.position),P);return m.kind!==void 0&&(B.kind=m.kind),m.textEdits!==void 0&&(B.textEdits=Nr(m.textEdits)),m.tooltip!==void 0&&(B.tooltip=ye(m.tooltip)),m.paddingLeft!==void 0&&(B.paddingLeft=m.paddingLeft),m.paddingRight!==void 0&&(B.paddingRight=m.paddingRight),m instanceof $T.default&&m.data!==void 0&&(B.data=m.data),B}function Me(m){let P=ce.InlayHintLabelPart.create(m.value);return m.location!==void 0&&(P.location=M(m.location)),m.command!==void 0&&(P.command=kn(m.command)),m.tooltip!==void 0&&(P.tooltip=ye(m.tooltip)),P}function ye(m){return typeof m=="string"?m:{kind:ce.MarkupKind.Markdown,value:m.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:l,asCloseTextDocumentParams:d,asSaveTextDocumentParams:p,asWillSaveTextDocumentParams:g,asDidCreateFilesParams:y,asDidRenameFilesParams:_,asDidDeleteFilesParams:S,asWillCreateFilesParams:T,asWillRenameFilesParams:C,asWillDeleteFilesParams:D,asTextDocumentPositionParams:E,asCompletionParams:j,asSignatureHelpParams:ve,asWorkerPosition:Ie,asRange:F,asPosition:k,asPositions:q,asLocation:M,asDiagnosticSeverity:Y,asDiagnosticTag:G,asDiagnostic:fn,asDiagnostics:Xt,asCompletionItem:Gn,asTextEdit:Qr,asSymbolKind:qn,asSymbolTag:pn,asSymbolTags:vt,asReferenceParams:Bs,asCodeAction:rn,asCodeActionContext:En,asInlineValueContext:ei,asCommand:kn,asCodeLens:Xn,asFormattingOptions:w,asDocumentSymbolParams:N,asCodeLensParams:A,asDocumentLink:z,asDocumentLinkParams:qe,asCallHierarchyItem:Ee,asTypeHierarchyItem:Ae,asInlayHint:me,asWorkspaceSymbol:Xe}}$a.createConverter=HT});var _v=b(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.createConverter=void 0;var H=require("vscode"),te=ne(),_n=yn(),xe=wo(),UT=Id(),WT=Ad(),BT=Hd(),zT=Bd(),vv=Vd(),KT=Jd(),VT=Zd(),GT=nf(),XT=of(),yv=ne(),Ha;(function(t){function e(n){let r=n;return r&&_n.string(r.language)&&_n.string(r.value)}t.is=e})(Ha||(Ha={}));function JT(t,e,n){let i=t||(f=>H.Uri.parse(f));function s(f){return i(f)}function o(f){let R=[];for(let I of f)if(typeof I=="string")R.push(I);else if(yv.NotebookCellTextDocumentFilter.is(I))if(typeof I.notebook=="string")R.push({notebookType:I.notebook,language:I.language});else{let J=I.notebook.notebookType??"*";R.push({notebookType:J,scheme:I.notebook.scheme,pattern:I.notebook.pattern,language:I.language})}else yv.TextDocumentFilter.is(I)&&R.push({language:I.language,scheme:I.scheme,pattern:I.pattern});return R}async function a(f,R){return xe.map(f,u,R)}function c(f){let R=new Array(f.length);for(let I=0;I<f.length;I++)R[I]=u(f[I]);return R}function u(f){let R=new vv.ProtocolDiagnostic(g(f.range),f.message,_(f.severity),f.data);if(f.code!==void 0){if(typeof f.code=="string"||typeof f.code=="number")te.CodeDescription.is(f.codeDescription)?R.code={value:f.code,target:s(f.codeDescription.href)}:R.code=f.code;else if(vv.DiagnosticCode.is(f.code)){R.hasDiagnosticCode=!0;let I=f.code;R.code={value:I.value,target:s(I.target)}}}return f.source&&(R.source=f.source),f.relatedInformation&&(R.relatedInformation=l(f.relatedInformation)),Array.isArray(f.tags)&&(R.tags=d(f.tags)),R}function l(f){let R=new Array(f.length);for(let I=0;I<f.length;I++){let J=f[I];R[I]=new H.DiagnosticRelatedInformation(G(J.location),J.message)}return R}function d(f){if(!f)return;let R=[];for(let I of f){let J=p(I);J!==void 0&&R.push(J)}return R.length>0?R:void 0}function p(f){switch(f){case te.DiagnosticTag.Unnecessary:return H.DiagnosticTag.Unnecessary;case te.DiagnosticTag.Deprecated:return H.DiagnosticTag.Deprecated;default:return}}function h(f){return f?new H.Position(f.line,f.character):void 0}function g(f){return f?new H.Range(f.start.line,f.start.character,f.end.line,f.end.character):void 0}async function y(f,R){return xe.map(f,I=>new H.Range(I.start.line,I.start.character,I.end.line,I.end.character),R)}function _(f){if(f==null)return H.DiagnosticSeverity.Error;switch(f){case te.DiagnosticSeverity.Error:return H.DiagnosticSeverity.Error;case te.DiagnosticSeverity.Warning:return H.DiagnosticSeverity.Warning;case te.DiagnosticSeverity.Information:return H.DiagnosticSeverity.Information;case te.DiagnosticSeverity.Hint:return H.DiagnosticSeverity.Hint}return H.DiagnosticSeverity.Error}function S(f){if(_n.string(f))return C(f);if(Ha.is(f))return C().appendCodeblock(f.value,f.language);if(Array.isArray(f)){let R=[];for(let I of f){let J=C();Ha.is(I)?J.appendCodeblock(I.value,I.language):J.appendMarkdown(I),R.push(J)}return R}else return C(f)}function T(f){if(_n.string(f))return f;switch(f.kind){case te.MarkupKind.Markdown:return C(f.value);case te.MarkupKind.PlainText:return f.value;default:return`Unsupported Markup content received. Kind is: ${f.kind}`}}function C(f){let R;if(f===void 0||typeof f=="string")R=new H.MarkdownString(f);else switch(f.kind){case te.MarkupKind.Markdown:R=new H.MarkdownString(f.value);break;case te.MarkupKind.PlainText:R=new H.MarkdownString,R.appendText(f.value);break;default:R=new H.MarkdownString,R.appendText(`Unsupported Markup content received. Kind is: ${f.kind}`);break}return R.isTrusted=e,R.supportHtml=n,R}function D(f){if(f)return new H.Hover(S(f.contents),g(f.range))}async function E(f,R,I){if(!f)return;if(Array.isArray(f))return xe.map(f,Jn=>ue(Jn,R),I);let J=f,{defaultRange:Jt,commitCharacters:bt}=W(J,R),ke=await xe.map(J.items,Jn=>ue(Jn,bt,Jt,J.itemDefaults?.insertTextMode,J.itemDefaults?.insertTextFormat,J.itemDefaults?.data),I);return new H.CompletionList(ke,J.isIncomplete)}function W(f,R){let I=f.itemDefaults?.editRange,J=f.itemDefaults?.commitCharacters??R;return te.Range.is(I)?{defaultRange:g(I),commitCharacters:J}:I!==void 0?{defaultRange:{inserting:g(I.insert),replacing:g(I.replace)},commitCharacters:J}:{defaultRange:void 0,commitCharacters:J}}function j(f){return te.CompletionItemKind.Text<=f&&f<=te.CompletionItemKind.TypeParameter?[f-1,void 0]:[H.CompletionItemKind.Text,f]}function Q(f){switch(f){case te.CompletionItemTag.Deprecated:return H.CompletionItemTag.Deprecated}}function re(f){if(f==null)return[];let R=[];for(let I of f){let J=Q(I);J!==void 0&&R.push(J)}return R}function ue(f,R,I,J,Jt,bt){let ke=re(f.tags),Jn=se(f),Le=new UT.default(Jn);f.detail&&(Le.detail=f.detail),f.documentation&&(Le.documentation=T(f.documentation),Le.documentationFormat=_n.string(f.documentation)?"$string":f.documentation.kind),f.filterText&&(Le.filterText=f.filterText);let ua=Fe(f,I,Jt);if(ua&&(Le.insertText=ua.text,Le.range=ua.range,Le.fromEdit=ua.fromEdit),_n.number(f.kind)){let[_S,Ig]=j(f.kind);Le.kind=_S,Ig&&(Le.originalItemKind=Ig)}f.sortText&&(Le.sortText=f.sortText),f.additionalTextEdits&&(Le.additionalTextEdits=k(f.additionalTextEdits));let Ng=f.commitCharacters!==void 0?_n.stringArray(f.commitCharacters)?f.commitCharacters:void 0:R;Ng&&(Le.commitCharacters=Ng.slice()),f.command&&(Le.command=vt(f.command)),(f.deprecated===!0||f.deprecated===!1)&&(Le.deprecated=f.deprecated,f.deprecated===!0&&ke.push(H.CompletionItemTag.Deprecated)),(f.preselect===!0||f.preselect===!1)&&(Le.preselect=f.preselect);let Fg=f.data??bt;Fg!==void 0&&(Le.data=Fg),ke.length>0&&(Le.tags=ke);let gu=f.insertTextMode??J;return gu!==void 0&&(Le.insertTextMode=gu,gu===te.InsertTextMode.asIs&&(Le.keepWhitespace=!0)),Le}function se(f){return te.CompletionItemLabelDetails.is(f.labelDetails)?{label:f.label,detail:f.labelDetails.detail,description:f.labelDetails.description}:f.label}function Fe(f,R,I){let J=f.insertTextFormat??I;if(f.textEdit!==void 0||R!==void 0){let[Jt,bt]=f.textEdit!==void 0?We(f.textEdit):[R,f.textEditText??f.label];return J===te.InsertTextFormat.Snippet?{text:new H.SnippetString(bt),range:Jt,fromEdit:!0}:{text:bt,range:Jt,fromEdit:!0}}else return f.insertText?J===te.InsertTextFormat.Snippet?{text:new H.SnippetString(f.insertText),fromEdit:!1}:{text:f.insertText,fromEdit:!1}:void 0}function We(f){return te.InsertReplaceEdit.is(f)?[{inserting:g(f.insert),replacing:g(f.replace)},f.newText]:[g(f.range),f.newText]}function ve(f){if(f)return new H.TextEdit(g(f.range),f.newText)}async function Ie(f,R){if(f)return xe.map(f,ve,R)}function k(f){if(!f)return;let R=new Array(f.length);for(let I=0;I<f.length;I++)R[I]=ve(f[I]);return R}async function q(f,R){if(!f)return;let I=new H.SignatureHelp;return _n.number(f.activeSignature)?I.activeSignature=f.activeSignature:I.activeSignature=0,_n.number(f.activeParameter)?I.activeParameter=f.activeParameter:I.activeParameter=0,f.signatures&&(I.signatures=await F(f.signatures,R)),I}async function F(f,R){return xe.mapAsync(f,M,R)}async function M(f,R){let I=new H.SignatureInformation(f.label);return f.documentation!==void 0&&(I.documentation=T(f.documentation)),f.parameters!==void 0&&(I.parameters=await Y(f.parameters,R)),f.activeParameter!==void 0&&(I.activeParameter=f.activeParameter),I}function Y(f,R){return xe.map(f,ie,R)}function ie(f){let R=new H.ParameterInformation(f.label);return f.documentation&&(R.documentation=T(f.documentation)),R}function G(f){return f?new H.Location(i(f.uri),g(f.range)):void 0}async function Pt(f,R){if(f)return fn(f,R)}async function ht(f,R){if(f)return fn(f,R)}function qt(f){if(!f)return;let R={targetUri:i(f.targetUri),targetRange:g(f.targetRange),originSelectionRange:g(f.originSelectionRange),targetSelectionRange:g(f.targetSelectionRange)};if(!R.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return R}async function fn(f,R){if(f)if(_n.array(f)){if(f.length===0)return[];if(te.LocationLink.is(f[0])){let I=f;return xe.map(I,qt,R)}else{let I=f;return xe.map(I,G,R)}}else return te.LocationLink.is(f)?[qt(f)]:G(f)}async function Xt(f,R){if(f)return xe.map(f,G,R)}async function Ws(f,R){if(f)return xe.map(f,Ii,R)}function Ii(f){let R=new H.DocumentHighlight(g(f.range));return _n.number(f.kind)&&(R.kind=Mi(f.kind)),R}function Mi(f){switch(f){case te.DocumentHighlightKind.Text:return H.DocumentHighlightKind.Text;case te.DocumentHighlightKind.Read:return H.DocumentHighlightKind.Read;case te.DocumentHighlightKind.Write:return H.DocumentHighlightKind.Write}return H.DocumentHighlightKind.Text}async function hn(f,R){if(f)return xe.map(f,Qr,R)}function Gn(f){return f<=te.SymbolKind.TypeParameter?f-1:H.SymbolKind.Property}function Li(f){switch(f){case te.SymbolTag.Deprecated:return H.SymbolTag.Deprecated;default:return}}function Pn(f){if(f==null)return;let R=[];for(let I of f){let J=Li(I);J!==void 0&&R.push(J)}return R.length===0?void 0:R}function Qr(f){let R=f.data,I=f.location,J=I.range===void 0||R!==void 0?new GT.default(f.name,Gn(f.kind),f.containerName??"",I.range===void 0?i(I.uri):new H.Location(i(f.location.uri),g(I.range)),R):new H.SymbolInformation(f.name,Gn(f.kind),f.containerName??"",new H.Location(i(f.location.uri),g(I.range)));return pn(J,f),J}async function Nr(f,R){if(f!=null)return xe.map(f,qn,R)}function qn(f){let R=new H.DocumentSymbol(f.name,f.detail||"",Gn(f.kind),g(f.range),g(f.selectionRange));if(pn(R,f),f.children!==void 0&&f.children.length>0){let I=[];for(let J of f.children)I.push(qn(J));R.children=I}return R}function pn(f,R){f.tags=Pn(R.tags),R.deprecated&&(f.tags?f.tags.includes(H.SymbolTag.Deprecated)||(f.tags=f.tags.concat(H.SymbolTag.Deprecated)):f.tags=[H.SymbolTag.Deprecated])}function vt(f){let R={title:f.title,command:f.command};return f.arguments&&(R.arguments=f.arguments),R}async function Bs(f,R){if(f)return xe.map(f,vt,R)}let rn=new Map;rn.set(te.CodeActionKind.Empty,H.CodeActionKind.Empty),rn.set(te.CodeActionKind.QuickFix,H.CodeActionKind.QuickFix),rn.set(te.CodeActionKind.Refactor,H.CodeActionKind.Refactor),rn.set(te.CodeActionKind.RefactorExtract,H.CodeActionKind.RefactorExtract),rn.set(te.CodeActionKind.RefactorInline,H.CodeActionKind.RefactorInline),rn.set(te.CodeActionKind.RefactorRewrite,H.CodeActionKind.RefactorRewrite),rn.set(te.CodeActionKind.Source,H.CodeActionKind.Source),rn.set(te.CodeActionKind.SourceOrganizeImports,H.CodeActionKind.SourceOrganizeImports);function En(f){if(f==null)return;let R=rn.get(f);if(R)return R;let I=f.split(".");R=H.CodeActionKind.Empty;for(let J of I)R=R.append(J);return R}function Ai(f){if(f!=null)return f.map(R=>En(R))}async function Zr(f,R){if(f==null)return;let I=new zT.default(f.title,f.data);return f.kind!==void 0&&(I.kind=En(f.kind)),f.diagnostics!==void 0&&(I.diagnostics=c(f.diagnostics)),f.edit!==void 0&&(I.edit=await w(f.edit,R)),f.command!==void 0&&(I.command=vt(f.command)),f.isPreferred!==void 0&&(I.isPreferred=f.isPreferred),f.disabled!==void 0&&(I.disabled={reason:f.disabled.reason}),I}function ei(f,R){return xe.mapAsync(f,async I=>te.Command.is(I)?vt(I):Zr(I,R),R)}function kn(f){if(!f)return;let R=new WT.default(g(f.range));return f.command&&(R.command=vt(f.command)),f.data!==void 0&&f.data!==null&&(R.data=f.data),R}async function Xn(f,R){if(f)return xe.map(f,kn,R)}async function w(f,R){if(!f)return;let I=new Map;if(f.changeAnnotations!==void 0){let bt=f.changeAnnotations;await xe.forEach(Object.keys(bt),ke=>{let Jn=N(bt[ke]);I.set(ke,Jn)},R)}let J=bt=>{if(bt!==void 0)return I.get(bt)},Jt=new H.WorkspaceEdit;if(f.documentChanges){let bt=f.documentChanges;await xe.forEach(bt,ke=>{if(te.CreateFile.is(ke))Jt.createFile(i(ke.uri),ke.options,J(ke.annotationId));else if(te.RenameFile.is(ke))Jt.renameFile(i(ke.oldUri),i(ke.newUri),ke.options,J(ke.annotationId));else if(te.DeleteFile.is(ke))Jt.deleteFile(i(ke.uri),ke.options,J(ke.annotationId));else if(te.TextDocumentEdit.is(ke)){let Jn=i(ke.textDocument.uri);for(let Le of ke.edits)te.AnnotatedTextEdit.is(Le)?Jt.replace(Jn,g(Le.range),Le.newText,J(Le.annotationId)):Jt.replace(Jn,g(Le.range),Le.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(ke,void 0,4)}`)},R)}else if(f.changes){let bt=f.changes;await xe.forEach(Object.keys(bt),ke=>{Jt.set(i(ke),k(bt[ke]))},R)}return Jt}function N(f){if(f!==void 0)return{label:f.label,needsConfirmation:!!f.needsConfirmation,description:f.description}}function A(f){let R=g(f.range),I=f.target?s(f.target):void 0,J=new BT.default(R,I);return f.tooltip!==void 0&&(J.tooltip=f.tooltip),f.data!==void 0&&f.data!==null&&(J.data=f.data),J}async function z(f,R){if(f)return xe.map(f,A,R)}function qe(f){return new H.Color(f.red,f.green,f.blue,f.alpha)}function Ee(f){return new H.ColorInformation(g(f.range),qe(f.color))}async function Ae(f,R){if(f)return xe.map(f,Ee,R)}function Xe(f){let R=new H.ColorPresentation(f.label);return R.additionalTextEdits=k(f.additionalTextEdits),f.textEdit&&(R.textEdit=ve(f.textEdit)),R}async function me(f,R){if(f)return xe.map(f,Xe,R)}function Me(f){if(f)switch(f){case te.FoldingRangeKind.Comment:return H.FoldingRangeKind.Comment;case te.FoldingRangeKind.Imports:return H.FoldingRangeKind.Imports;case te.FoldingRangeKind.Region:return H.FoldingRangeKind.Region}}function ye(f){return new H.FoldingRange(f.startLine,f.endLine,Me(f.kind))}async function m(f,R){if(f)return xe.map(f,ye,R)}function P(f){return new H.SelectionRange(g(f.range),f.parent?P(f.parent):void 0)}async function B(f,R){return Array.isArray(f)?xe.map(f,P,R):[]}function fe(f){return te.InlineValueText.is(f)?new H.InlineValueText(g(f.range),f.text):te.InlineValueVariableLookup.is(f)?new H.InlineValueVariableLookup(g(f.range),f.variableName,f.caseSensitiveLookup):new H.InlineValueEvaluatableExpression(g(f.range),f.expression)}async function De(f,R){return Array.isArray(f)?xe.map(f,fe,R):[]}async function Ct(f,R){let I=typeof f.label=="string"?f.label:await xe.map(f.label,ur,R),J=new XT.default(h(f.position),I);return f.kind!==void 0&&(J.kind=f.kind),f.textEdits!==void 0&&(J.textEdits=await Ie(f.textEdits,R)),f.tooltip!==void 0&&(J.tooltip=zs(f.tooltip)),f.paddingLeft!==void 0&&(J.paddingLeft=f.paddingLeft),f.paddingRight!==void 0&&(J.paddingRight=f.paddingRight),f.data!==void 0&&(J.data=f.data),J}function ur(f){let R=new H.InlayHintLabelPart(f.value);return f.location!==void 0&&(R.location=G(f.location)),f.tooltip!==void 0&&(R.tooltip=zs(f.tooltip)),f.command!==void 0&&(R.command=vt(f.command)),R}function zs(f){return typeof f=="string"?f:C(f)}async function cS(f,R){if(Array.isArray(f))return xe.mapAsync(f,Ct,R)}function ca(f){if(f===null)return;let R=new KT.default(Gn(f.kind),f.name,f.detail||"",s(f.uri),g(f.range),g(f.selectionRange),f.data);return f.tags!==void 0&&(R.tags=Pn(f.tags)),R}async function uS(f,R){if(f!==null)return xe.map(f,ca,R)}async function qg(f,R){return new H.CallHierarchyIncomingCall(ca(f.from),await y(f.fromRanges,R))}async function lS(f,R){if(f!==null)return xe.mapAsync(f,qg,R)}async function Eg(f,R){return new H.CallHierarchyOutgoingCall(ca(f.to),await y(f.fromRanges,R))}async function dS(f,R){if(f!==null)return xe.mapAsync(f,Eg,R)}async function fS(f,R){if(f!=null)return new H.SemanticTokens(new Uint32Array(f.data),f.resultId)}function kg(f){return new H.SemanticTokensEdit(f.start,f.deleteCount,f.data!==void 0?new Uint32Array(f.data):void 0)}async function hS(f,R){if(f!=null)return new H.SemanticTokensEdits(f.edits.map(kg),f.resultId)}function pS(f){return f}async function gS(f,R){if(f!=null)return new H.LinkedEditingRanges(await y(f.ranges,R),mS(f.wordPattern))}function mS(f){if(f!=null)return new RegExp(f)}function Og(f){if(f===null)return;let R=new VT.default(Gn(f.kind),f.name,f.detail||"",s(f.uri),g(f.range),g(f.selectionRange),f.data);return f.tags!==void 0&&(R.tags=Pn(f.tags)),R}async function vS(f,R){if(f!==null)return xe.map(f,Og,R)}function yS(f){if(_n.string(f))return f;if(te.RelativePattern.is(f)){if(te.URI.is(f.baseUri))return new H.RelativePattern(s(f.baseUri),f.pattern);if(te.WorkspaceFolder.is(f.baseUri)){let R=H.workspace.getWorkspaceFolder(s(f.baseUri.uri));return R!==void 0?new H.RelativePattern(R,f.pattern):void 0}}}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:u,asRange:g,asRanges:y,asPosition:h,asDiagnosticSeverity:_,asDiagnosticTag:p,asHover:D,asCompletionResult:E,asCompletionItem:ue,asTextEdit:ve,asTextEdits:Ie,asSignatureHelp:q,asSignatureInformations:F,asSignatureInformation:M,asParameterInformations:Y,asParameterInformation:ie,asDeclarationResult:Pt,asDefinitionResult:ht,asLocation:G,asReferences:Xt,asDocumentHighlights:Ws,asDocumentHighlight:Ii,asDocumentHighlightKind:Mi,asSymbolKind:Gn,asSymbolTag:Li,asSymbolTags:Pn,asSymbolInformations:hn,asSymbolInformation:Qr,asDocumentSymbols:Nr,asDocumentSymbol:qn,asCommand:vt,asCommands:Bs,asCodeAction:Zr,asCodeActionKind:En,asCodeActionKinds:Ai,asCodeActionResult:ei,asCodeLens:kn,asCodeLenses:Xn,asWorkspaceEdit:w,asDocumentLink:A,asDocumentLinks:z,asFoldingRangeKind:Me,asFoldingRange:ye,asFoldingRanges:m,asColor:qe,asColorInformation:Ee,asColorInformations:Ae,asColorPresentation:Xe,asColorPresentations:me,asSelectionRange:P,asSelectionRanges:B,asInlineValue:fe,asInlineValues:De,asInlayHint:Ct,asInlayHints:cS,asSemanticTokensLegend:pS,asSemanticTokens:fS,asSemanticTokensEdit:kg,asSemanticTokensEdits:hS,asCallHierarchyItem:ca,asCallHierarchyItems:uS,asCallHierarchyIncomingCall:qg,asCallHierarchyIncomingCalls:lS,asCallHierarchyOutgoingCall:Eg,asCallHierarchyOutgoingCalls:dS,asLinkedEditingRanges:gS,asTypeHierarchyItem:Og,asTypeHierarchyItems:vS,asGlobPattern:yS}}Ua.createConverter=JT});var Qe=b(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.generateUuid=wn.parse=wn.isUUID=wn.v4=wn.empty=void 0;var Co=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},le=class extends Co{constructor(){super([le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),"-",le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),"-","4",le._randomHex(),le._randomHex(),le._randomHex(),"-",le._oneOf(le._timeHighBits),le._randomHex(),le._randomHex(),le._randomHex(),"-",le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return le._oneOf(le._chars)}};le._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];le._timeHighBits=["8","9","a","b"];wn.empty=new Co("00000000-0000-0000-0000-000000000000");function wv(){return new le}wn.v4=wv;var YT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Cv(t){return YT.test(t)}wn.isUUID=Cv;function QT(t){if(!Cv(t))throw new Error("invalid uuid");return new Co(t)}wn.parse=QT;function ZT(){return wv().asHex()}wn.generateUuid=ZT});var uf=b(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.ProgressPart=void 0;var bv=require("vscode"),Sv=ne(),Rv=yn(),cf=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Sv.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&bv.window.withProgress({location:bv.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Sv.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&Rv.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Rv.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Wa.ProgressPart=cf});var be=b(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.WorkspaceFeature=dt.TextDocumentLanguageFeature=dt.TextDocumentEventFeature=dt.DynamicDocumentFeature=dt.DynamicFeature=dt.StaticFeature=dt.ensure=dt.LSPCancellationError=void 0;var fi=require("vscode"),lf=ne(),Ut=yn(),Dv=Qe(),df=class extends fi.CancellationError{constructor(e){super(),this.data=e}};dt.LSPCancellationError=df;function ex(t,e){return t[e]===void 0&&(t[e]={}),t[e]}dt.ensure=ex;var tx;(function(t){function e(n){let r=n;return r!=null&&Ut.func(r.fillClientCapabilities)&&Ut.func(r.initialize)&&Ut.func(r.getState)&&Ut.func(r.dispose)&&(r.fillInitializeParams===void 0||Ut.func(r.fillInitializeParams))}t.is=e})(tx=dt.StaticFeature||(dt.StaticFeature={}));var nx;(function(t){function e(n){let r=n;return r!=null&&Ut.func(r.fillClientCapabilities)&&Ut.func(r.initialize)&&Ut.func(r.getState)&&Ut.func(r.dispose)&&(r.fillInitializeParams===void 0||Ut.func(r.fillInitializeParams))&&Ut.func(r.register)&&Ut.func(r.unregister)&&r.registrationType!==void 0}t.is=e})(nx=dt.DynamicFeature||(dt.DynamicFeature={}));var bo=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),n=0;for(let i of e){n++;for(let s of fi.workspace.textDocuments)if(fi.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=n>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};dt.DynamicDocumentFeature=bo;var ff=class extends bo{constructor(e,n,r,i,s,o,a){super(e),this._event=n,this._type=r,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new fi.EventEmitter}static textDocumentFilter(e,n){for(let r of e)if(fi.languages.match(r,n)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(n=>{this.callback(n).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let n=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i).catch(),this.notificationSent(r,this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>n(i)):n(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(fi.languages.match(n,e)>0)return{send:r=>this.callback(r)}}};dt.TextDocumentEventFeature=ff;var hf=class extends bo{constructor(e,n){super(e),this._registrationType=n,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let n=e.data.registerOptions.documentSelector;n!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(n))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(lf.TextDocumentRegistrationOptions.is(n)){let r=lf.StaticRegistrationOptions.hasId(n)?n.id:Dv.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(Ut.boolean(n)&&n===!0||lf.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=Ut.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[Dv.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return Ut.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&fi.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};dt.TextDocumentLanguageFeature=hf;var pf=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};dt.WorkspaceFeature=pf});var xv=b((RI,Tv)=>{Tv.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);rx(i)?n.push.apply(n,i):n.push(i)}return n};var rx=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var Ov=b((DI,kv)=>{"use strict";kv.exports=qv;function qv(t,e,n){t instanceof RegExp&&(t=Pv(t,n)),e instanceof RegExp&&(e=Pv(e,n));var r=Ev(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Pv(t,e){var n=e.match(t);return n?n[0]:null}qv.range=Ev;function Ev(t,e,n){var r,i,s,o,a,c=n.indexOf(t),u=n.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(t===e)return[c,u];for(r=[],s=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(t,l+1)):r.length==1?a=[r.pop(),u]:(i=r.pop(),i<s&&(s=i,o=u),u=n.indexOf(e,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[s,o])}return a}});var $v=b((TI,jv)=>{var ix=xv(),Nv=Ov();jv.exports=ax;var Fv="\0SLASH"+Math.random()+"\0",Iv="\0OPEN"+Math.random()+"\0",mf="\0CLOSE"+Math.random()+"\0",Mv="\0COMMA"+Math.random()+"\0",Lv="\0PERIOD"+Math.random()+"\0";function gf(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function sx(t){return t.split("\\\\").join(Fv).split("\\{").join(Iv).split("\\}").join(mf).split("\\,").join(Mv).split("\\.").join(Lv)}function ox(t){return t.split(Fv).join("\\").split(Iv).join("{").split(mf).join("}").split(Mv).join(",").split(Lv).join(".")}function Av(t){if(!t)return[""];var e=[],n=Nv("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=Av(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function ax(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),rs(sx(t),!0).map(ox)):[]}function cx(t){return"{"+t+"}"}function ux(t){return/^-?0\d/.test(t)}function lx(t,e){return t<=e}function dx(t,e){return t>=e}function rs(t,e){var n=[],r=Nv("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),o=i||s,a=r.body.indexOf(",")>=0;if(!o&&!a)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+mf+r.post,rs(t)):[t];var c;if(o)c=r.body.split(/\.\./);else if(c=Av(r.body),c.length===1&&(c=rs(c[0],!1).map(cx),c.length===1)){var l=r.post.length?rs(r.post,!1):[""];return l.map(function(se){return r.pre+c[0]+se})}var u=r.pre,l=r.post.length?rs(r.post,!1):[""],d;if(o){var p=gf(c[0]),h=gf(c[1]),g=Math.max(c[0].length,c[1].length),y=c.length==3?Math.abs(gf(c[2])):1,_=lx,S=h<p;S&&(y*=-1,_=dx);var T=c.some(ux);d=[];for(var C=p;_(C,h);C+=y){var D;if(s)D=String.fromCharCode(C),D==="\\"&&(D="");else if(D=String(C),T){var E=g-D.length;if(E>0){var W=new Array(E+1).join("0");C<0?D="-"+W+D.slice(1):D=W+D}}d.push(D)}}else d=ix(c,function(ue){return rs(ue,!1)});for(var j=0;j<d.length;j++)for(var Q=0;Q<l.length;Q++){var re=u+d[j]+l[Q];(!e||o||re)&&n.push(re)}return n}});var Ka=b((xI,zv)=>{zv.exports=on;on.Minimatch=Tt;var So=function(){try{return require("path")}catch{}}()||{sep:"/"};on.sep=So.sep;var _f=on.GLOBSTAR=Tt.GLOBSTAR={},fx=$v(),Hv={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},vf="[^/]",yf=vf+"*?",hx="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",px="(?:(?!(?:\\/|^)\\.).)*?",Uv=gx("().*{}+?[]^$\\!");function gx(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var Wv=/\/+/;on.filter=mx;function mx(t,e){return e=e||{},function(n,r,i){return on(n,t,e)}}function jr(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}on.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return on;var e=on,n=function(i,s,o){return e(i,s,jr(t,o))};return n.Minimatch=function(i,s){return new e.Minimatch(i,jr(t,s))},n.Minimatch.defaults=function(i){return e.defaults(jr(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,jr(t,s))},n.defaults=function(i){return e.defaults(jr(t,i))},n.makeRe=function(i,s){return e.makeRe(i,jr(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,jr(t,s))},n.match=function(r,i,s){return e.match(r,i,jr(t,s))},n};Tt.defaults=function(t){return on.defaults(t).Minimatch};function on(t,e,n){return za(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new Tt(e,n).match(t)}function Tt(t,e){if(!(this instanceof Tt))return new Tt(t,e);za(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&So.sep!=="/"&&(t=t.split(So.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Tt.prototype.debug=function(){};Tt.prototype.make=vx;function vx(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(Wv)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}Tt.prototype.parseNegate=yx;function yx(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}on.braceExpand=function(t,e){return Bv(t,e)};Tt.prototype.braceExpand=Bv;function Bv(t,e){return e||(this instanceof Tt?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,za(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:fx(t)}var _x=1024*64,za=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>_x)throw new TypeError("pattern is too long")};Tt.prototype.parse=wx;var Ba={};function wx(t,e){za(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return _f;if(t==="")return"";var r="",i=!!n.nocase,s=!1,o=[],a=[],c,u=!1,l=-1,d=-1,p=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=this;function g(){if(c){switch(c){case"*":r+=yf,i=!0;break;case"?":r+=vf,i=!0;break;default:r+="\\"+c;break}h.debug("clearStateChar %j %j",c,r),c=!1}}for(var y=0,_=t.length,S;y<_&&(S=t.charAt(y));y++){if(this.debug("%s	%s %s %j",t,y,r,S),s&&Uv[S]){r+="\\"+S,s=!1;continue}switch(S){case"/":return!1;case"\\":g(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,y,r,S),u){this.debug("  in class"),S==="!"&&y===d+1&&(S="^"),r+=S;continue}h.debug("call clearStateChar %j",c),g(),c=S,n.noext&&g();continue;case"(":if(u){r+="(";continue}if(!c){r+="\\(";continue}o.push({type:c,start:y-1,reStart:r.length,open:Hv[c].open,close:Hv[c].close}),r+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,r),c=!1;continue;case")":if(u||!o.length){r+="\\)";continue}g(),i=!0;var T=o.pop();r+=T.close,T.type==="!"&&a.push(T),T.reEnd=r.length;continue;case"|":if(u||!o.length||s){r+="\\|",s=!1;continue}g(),r+="|";continue;case"[":if(g(),u){r+="\\"+S;continue}u=!0,d=y,l=r.length,r+=S;continue;case"]":if(y===d+1||!u){r+="\\"+S,s=!1;continue}var C=t.substring(d+1,y);try{RegExp("["+C+"]")}catch{var D=this.parse(C,Ba);r=r.substr(0,l)+"\\["+D[0]+"\\]",i=i||D[1],u=!1;continue}i=!0,u=!1,r+=S;continue;default:g(),s?s=!1:Uv[S]&&!(S==="^"&&u)&&(r+="\\"),r+=S}}for(u&&(C=t.substr(d+1),D=this.parse(C,Ba),r=r.substr(0,l)+"\\["+D[0],i=i||D[1]),T=o.pop();T;T=o.pop()){var E=r.slice(T.reStart+T.open.length);this.debug("setting tail",r,T),E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Y,ie,G){return G||(G="\\"),ie+ie+G+"|"}),this.debug(`tail=%j
   %s`,E,E,T,r);var W=T.type==="*"?yf:T.type==="?"?vf:"\\"+T.type;i=!0,r=r.slice(0,T.reStart)+W+"\\("+E}g(),s&&(r+="\\\\");var j=!1;switch(r.charAt(0)){case"[":case".":case"(":j=!0}for(var Q=a.length-1;Q>-1;Q--){var re=a[Q],ue=r.slice(0,re.reStart),se=r.slice(re.reStart,re.reEnd-8),Fe=r.slice(re.reEnd-8,re.reEnd),We=r.slice(re.reEnd);Fe+=We;var ve=ue.split("(").length-1,Ie=We;for(y=0;y<ve;y++)Ie=Ie.replace(/\)[+*?]?/,"");We=Ie;var k="";We===""&&e!==Ba&&(k="$");var q=ue+se+We+k+Fe;r=q}if(r!==""&&i&&(r="(?=.)"+r),j&&(r=p+r),e===Ba)return[r,i];if(!i)return bx(t);var F=n.nocase?"i":"";try{var M=new RegExp("^"+r+"$",F)}catch{return new RegExp("$.")}return M._glob=t,M._src=r,M}on.makeRe=function(t,e){return new Tt(t,e||{}).makeRe()};Tt.prototype.makeRe=Cx;function Cx(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?yf:e.dot?hx:px,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===_f?n:typeof o=="string"?Sx(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}on.match=function(t,e,n){n=n||{};var r=new Tt(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};Tt.prototype.match=function(e,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;So.sep!=="/"&&(e=e.split(So.sep).join("/")),e=e.split(Wv),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<i.length;o++){var a=i[o],c=e;r.matchBase&&a.length===1&&(c=[s]);var u=this.matchOne(c,a,n);if(u)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};Tt.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,a=e.length;i<o&&s<a;i++,s++){this.debug("matchOne loop");var c=e[s],u=t[i];if(this.debug(e,c,u),c===!1)return!1;if(c===_f){this.debug("GLOBSTAR",[e,c,u]);var l=i,d=s+1;if(d===a){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;l<o;){var p=t[l];if(this.debug(`
globstar while`,t,l,e,d,p),this.matchOne(t.slice(l),e.slice(d),n))return this.debug("globstar found match!",l,o,p),!0;if(p==="."||p===".."||!r.dot&&p.charAt(0)==="."){this.debug("dot detected!",t,l,e,d);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,l,e,d),l===o))}var h;if(typeof c=="string"?(h=u===c,this.debug("string match",c,u,h)):(h=u.match(c),this.debug("pattern match",c,u,h)),!h)return!1}if(i===o&&s===a)return!0;if(i===o)return n;if(s===a)return i===o-1&&t[i]==="";throw new Error("wtf?")};function bx(t){return t.replace(/\\(.)/g,"$1")}function Sx(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var xf=b(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.DiagnosticFeature=nr.DiagnosticPullMode=nr.vsdiag=void 0;var Rx=Ka(),pe=require("vscode"),it=ne(),Dx=Qe(),wf=be();function Va(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Hn;(function(t){let e;(function(n){n.full="full",n.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(Hn=nr.vsdiag||(nr.vsdiag={}));var Cf;(function(t){t.onType="onType",t.onSave="onSave"})(Cf=nr.DiagnosticPullMode||(nr.DiagnosticPullMode={}));var Nt;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(Nt||(Nt={}));var hi=class{constructor(){this.open=new Set,this._onOpen=new pe.EventEmitter,this._onClose=new pe.EventEmitter,hi.fillTabResources(this.open);let e=n=>{if(n.closed.length===0&&n.opened.length===0)return;let r=this.open,i=new Set;hi.fillTabResources(i);let s=new Set,o=new Set(i);for(let a of r.values())i.has(a)?o.delete(a):s.add(a);if(this.open=i,s.size>0){let a=new Set;for(let c of s)a.add(pe.Uri.parse(c));this._onClose.fire(a)}if(o.size>0){let a=new Set;for(let c of o)a.add(pe.Uri.parse(c));this._onOpen.fire(a)}};pe.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=pe.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof pe.Uri?pe.window.activeTextEditor?.document.uri===e:pe.window.activeTextEditor?.document===e}isVisible(e){let n=e instanceof pe.Uri?e:e.uri;return this.open.has(n.toString())}getTabResources(){let e=new Set;return hi.fillTabResources(new Set,e),e}static fillTabResources(e,n){let r=e??new Set;for(let i of pe.window.tabGroups.all)for(let s of i.tabs){let o=s.input,a;o instanceof pe.TabInputText?a=o.uri:o instanceof pe.TabInputTextDiff&&(a=o.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),n!==void 0&&n.add(a))}}},_t;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(_t||(_t={}));var bf=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,n,r){let i=e===_t.document?this.documentPullStates:this.workspacePullStates,[s,o,a]=n instanceof pe.Uri?[n.toString(),n,r]:[n.uri.toString(),n.uri,n.version],c=i.get(s);return c===void 0&&(c={document:o,pulledVersion:a,resultId:void 0},i.set(s,c)),c}update(e,n,r,i){let s=e===_t.document?this.documentPullStates:this.workspacePullStates,[o,a,c,u]=n instanceof pe.Uri?[n.toString(),n,r,i]:[n.uri.toString(),n.uri,n.version,r],l=s.get(o);l===void 0?(l={document:a,pulledVersion:c,resultId:u},s.set(o,l)):(l.pulledVersion=c,l.resultId=u)}unTrack(e,n){let r=n instanceof pe.Uri?n.toString():n.uri.toString();(e===_t.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,n){let r=n instanceof pe.Uri?n.toString():n.uri.toString();return(e===_t.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,n){let r=n instanceof pe.Uri?n.toString():n.uri.toString();return(e===_t.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[n,r]of this.workspacePullStates)this.documentPullStates.has(n)&&(r=this.documentPullStates.get(n)),r.resultId!==void 0&&e.push({uri:n,value:r.resultId});return e}},Sf=class{constructor(e,n,r){this.client=e,this.tabs=n,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new pe.EventEmitter,this.provider=this.createProvider(),this.diagnostics=pe.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new bf,this.workspaceErrorCounter=0}knows(e,n){return this.documentStates.tracks(e,n)}forget(e,n){this.documentStates.unTrack(e,n)}pull(e,n){if(this.isDisposed)return;let r=e instanceof pe.Uri?e:e.uri;this.pullAsync(e).then(()=>{n&&n()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,n){if(this.isDisposed)return;let r=e instanceof pe.Uri,i=r?e:e.uri,s=i.toString();n=r?n:e.version;let o=this.openRequests.get(s),a=r?this.documentStates.track(_t.document,e,n):this.documentStates.track(_t.document,e);if(o===void 0){let c=new pe.CancellationTokenSource;this.openRequests.set(s,{state:Nt.active,document:e,version:n,tokenSource:c});let u,l;try{u=await this.provider.provideDiagnostics(e,a.resultId,c.token)??{kind:Hn.DocumentDiagnosticReportKind.full,items:[]}}catch(d){if(d instanceof wf.LSPCancellationError&&it.DiagnosticServerCancellationData.is(d.data)&&d.data.retriggerRequest===!1&&(l={state:Nt.outDated,document:e}),l===void 0&&d instanceof pe.CancellationError)l={state:Nt.reschedule,document:e};else throw d}if(l=l??this.openRequests.get(s),l===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(_t.document,e);return}if(l.state===Nt.outDated)return;u!==void 0&&(u.kind===Hn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,u.items),a.pulledVersion=n,a.resultId=u.resultId),l.state===Nt.reschedule&&this.pull(e)}else o.state===Nt.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:Nt.reschedule,document:o.document})):o.state===Nt.outDated&&this.openRequests.set(s,{state:Nt.reschedule,document:o.document})}forgetDocument(e){let n=e instanceof pe.Uri?e:e.uri,r=n.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:Nt.reschedule,document:e}):this.pull(e,()=>{this.forget(_t.document,e)}):(i!==void 0&&(i.state===Nt.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:Nt.outDated,document:e})),this.diagnostics.delete(n),this.forget(_t.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,it.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof wf.LSPCancellationError)&&!it.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,it.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new pe.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(n=>({uri:this.client.protocol2CodeConverter.asUri(n.uri),value:n.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,n=>{if(!(!n||this.isDisposed))for(let r of n.items)r.kind===Hn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(_t.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(_t.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(n,r,i)=>{let s=(a,c,u)=>{let l={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof pe.Uri?a:a.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:Hn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(it.DocumentDiagnosticRequest.type,l,u).then(async d=>d==null||this.isDisposed||u.isCancellationRequested?{kind:Hn.DocumentDiagnosticReportKind.full,items:[]}:d.kind===it.DocumentDiagnosticReportKind.Full?{kind:Hn.DocumentDiagnosticReportKind.full,resultId:d.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(d.items,u)}:{kind:Hn.DocumentDiagnosticReportKind.unChanged,resultId:d.resultId},d=>this.client.handleFailedRequest(it.DocumentDiagnosticRequest.type,u,d,{kind:Hn.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(n,r,i,s):s(n,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(n,r,i)=>{let s=async u=>u.kind===it.DocumentDiagnosticReportKind.Full?{kind:Hn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version,items:await this.client.protocol2CodeConverter.asDiagnostics(u.items,r)}:{kind:Hn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version},o=u=>{let l=[];for(let d of u)l.push({uri:this.client.code2ProtocolConverter.asUri(d.uri),value:d.value});return l},a=(u,l)=>{let d=(0,Dx.generateUuid)(),p=this.client.onProgress(it.WorkspaceDiagnosticRequest.partialResult,d,async g=>{if(g==null){i(null);return}let y={items:[]};for(let _ of g.items)try{y.items.push(await s(_))}catch(S){this.client.error("Converting workspace diagnostics failed.",S)}i(y)}),h={identifier:this.options.identifier,previousResultIds:o(u),partialResultToken:d};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(it.WorkspaceDiagnosticRequest.type,h,l).then(async g=>{if(l.isCancellationRequested)return{items:[]};let y={items:[]};for(let _ of g.items)y.items.push(await s(_));return p.dispose(),i(y),{items:[]}},g=>(p.dispose(),this.client.handleFailedRequest(it.DocumentDiagnosticRequest.type,l,g,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(n,r,i,a):a(n,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,n]of this.openRequests)n.state===Nt.active&&n.tokenSource.cancel(),this.openRequests.set(e,{state:Nt.outDated,document:n.document});this.diagnostics.dispose()}},Rf=class{constructor(e){this.diagnosticRequestor=e,this.documents=new it.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let n=e instanceof pe.Uri?e.toString():e.uri.toString();this.documents.has(n)||(this.documents.set(n,e,it.Touch.Last),this.trigger())}remove(e){let n=e instanceof pe.Uri?e.toString():e.uri.toString();this.documents.has(n)&&(this.documents.delete(n),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,it.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let n=e instanceof pe.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e),this.documents.set(n,e,it.Touch.Last),e===this.endDocument&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},Df=class{constructor(e,n,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),o=[],a=g=>{let y=r.documentSelector;if(i.match!==void 0)return i.match(y,g);for(let _ of y)if(it.TextDocumentFilter.is(_)){if(typeof _=="string"||_.language!==void 0&&_.language!=="*"||_.scheme!==void 0&&_.scheme!=="*"&&_.scheme!==g.scheme)return!1;if(_.pattern!==void 0){let S=new Rx.Minimatch(_.pattern,{noext:!0});if(!S.makeRe()||!S.match(g.fsPath))return!1}}return!0},c=g=>g instanceof pe.Uri?a(g):pe.languages.match(s,g)>0&&n.isVisible(g),u=g=>g instanceof pe.Uri?this.activeTextDocument?.uri.toString()===g.toString():this.activeTextDocument===g;this.diagnosticRequestor=new Sf(e,n,r),this.backgroundScheduler=new Rf(this.diagnosticRequestor);let l=g=>{!c(g)||!r.interFileDependencies||u(g)||this.backgroundScheduler.add(g)};this.activeTextDocument=pe.window.activeTextEditor?.document,pe.window.onDidChangeActiveTextEditor(g=>{let y=this.activeTextDocument;this.activeTextDocument=g?.document,y!==void 0&&l(y),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let d=e.getFeature(it.DidOpenTextDocumentNotification.method);o.push(d.onNotificationSent(g=>{let y=g.original;c(y)&&this.diagnosticRequestor.pull(y,()=>{l(y)})}));let p=new Set;for(let g of pe.workspace.textDocuments)c(g)&&(this.diagnosticRequestor.pull(g,()=>{l(g)}),p.add(g.uri.toString()));if(i.onTabs===!0)for(let g of n.getTabResources())!p.has(g.toString())&&c(g)&&this.diagnosticRequestor.pull(g,()=>{l(g)});if(n.onOpen(g=>{for(let y of g)c(y)&&!this.diagnosticRequestor.knows(_t.document,y)&&this.diagnosticRequestor.pull(y,()=>{l(y)})}),i.onChange===!0){let g=e.getFeature(it.DidChangeTextDocumentNotification.method);o.push(g.onNotificationSent(async y=>{let _=y.original.document;(i.filter===void 0||!i.filter(_,Cf.onType))&&this.diagnosticRequestor.knows(_t.document,_)&&y.original.contentChanges.length>0&&this.diagnosticRequestor.pull(_,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let g=e.getFeature(it.DidSaveTextDocumentNotification.method);o.push(g.onNotificationSent(y=>{let _=y.original;(i.filter===void 0||!i.filter(_,Cf.onSave))&&this.diagnosticRequestor.knows(_t.document,_)&&this.diagnosticRequestor.pull(y.original,()=>{this.backgroundScheduler.trigger()})}))}let h=e.getFeature(it.DidCloseTextDocumentNotification.method);o.push(h.onNotificationSent(g=>{this.cleanUpDocument(g.original)})),n.onClose(g=>{for(let y of g)this.cleanUpDocument(y)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let g of pe.workspace.textDocuments)c(g)&&this.diagnosticRequestor.pull(g)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=pe.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(_t.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Tf=class extends wf.TextDocumentLanguageFeature{constructor(e){super(e,it.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let n=Va(Va(e,"textDocument"),"diagnostic");n.dynamicRegistration=!0,n.relatedDocumentSupport=!1,Va(Va(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,n){this._client.onRequest(it.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(n,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new hi);let n=new Df(this._client,this.tabs,e);return[n.disposable,n]}};nr.DiagnosticFeature=Tf});var Gv=b(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.NotebookDocumentSyncFeature=void 0;var Ft=require("vscode"),Tx=Ka(),vr=ne(),xx=Qe(),Kv=yn();function Vv(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var is;(function(t){let e;(function(n){function r(p,h){return{version:p.version,uri:h.asUri(p.uri)}}n.asVersionedNotebookDocumentIdentifier=r;function i(p,h,g){let y=vr.NotebookDocument.create(g.asUri(p.uri),p.notebookType,p.version,s(h,g));return Object.keys(p.metadata).length>0&&(y.metadata=o(p.metadata)),y}n.asNotebookDocument=i;function s(p,h){return p.map(g=>a(g,h))}n.asNotebookCells=s;function o(p){return u(new Set,p)}n.asMetadata=o;function a(p,h){let g=vr.NotebookCell.create(c(p.kind),h.asUri(p.document.uri));return Object.keys(p.metadata).length>0&&(g.metadata=o(p.metadata)),p.executionSummary!==void 0&&Kv.number(p.executionSummary.executionOrder)&&Kv.boolean(p.executionSummary.success)&&(g.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),g}n.asNotebookCell=a;function c(p){switch(p){case Ft.NotebookCellKind.Markup:return vr.NotebookCellKind.Markup;case Ft.NotebookCellKind.Code:return vr.NotebookCellKind.Code}}function u(p,h){if(p.has(h))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(h)){let g=[];for(let y of h)if(y!==null&&typeof y=="object"||Array.isArray(y))g.push(u(p,y));else{if(y instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");g.push(y)}return g}else{let g=Object.keys(h),y=Object.create(null);for(let _ of g){let S=h[_];if(S!==null&&typeof S=="object"||Array.isArray(S))y[_]=u(p,S);else{if(S instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");y[_]=S}}return y}}function l(p,h){let g=h.asChangeTextDocumentParams(p);return{document:g.textDocument,changes:g.contentChanges}}n.asTextContentChange=l;function d(p,h){let g=Object.create(null);if(p.metadata&&(g.metadata=t.c2p.asMetadata(p.metadata)),p.cells!==void 0){let y=Object.create(null),_=p.cells;_.structure&&(y.structure={array:{start:_.structure.array.start,deleteCount:_.structure.array.deleteCount,cells:_.structure.array.cells!==void 0?_.structure.array.cells.map(S=>t.c2p.asNotebookCell(S,h)):void 0},didOpen:_.structure.didOpen!==void 0?_.structure.didOpen.map(S=>h.asOpenTextDocumentParams(S.document).textDocument):void 0,didClose:_.structure.didClose!==void 0?_.structure.didClose.map(S=>h.asCloseTextDocumentParams(S.document).textDocument):void 0}),_.data!==void 0&&(y.data=_.data.map(S=>t.c2p.asNotebookCell(S,h))),_.textContent!==void 0&&(y.textContent=_.textContent.map(S=>t.c2p.asTextContentChange(S,h))),Object.keys(y).length>0&&(g.cells=y)}return g}n.asNotebookDocumentChangeEvent=d})(e=t.c2p||(t.c2p={}))})(is||(is={}));var Pf;(function(t){function e(a,c,u){let l=a.length,d=c.length,p=0;for(;p<d&&p<l&&n(a[p],c[p],u);)p++;if(p<d&&p<l){let h=l-1,g=d-1;for(;h>=0&&g>=0&&n(a[h],c[g],u);)h--,g--;let y=h+1-p,_=p===g+1?void 0:c.slice(p,g+1);return _!==void 0?{start:p,deleteCount:y,cells:_}:{start:p,deleteCount:y}}else return p<d?{start:p,deleteCount:0,cells:c.slice(p)}:p<l?{start:p,deleteCount:l-p}:void 0}t.computeDiff=e;function n(a,c,u=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!r(a.executionSummary,c.executionSummary)?!1:!u||u&&s(a.metadata,c.metadata)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&i(a.timing,c.timing)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function s(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;let u=Array.isArray(a),l=Array.isArray(c);if(u!==l)return!1;if(u&&l){if(a.length!==c.length)return!1;for(let d=0;d<a.length;d++)if(!s(a[d],c[d]))return!1}if(o(a)&&o(c)){let d=Object.keys(a),p=Object.keys(c);if(d.length!==p.length||(d.sort(),p.sort(),!s(d,p)))return!1;for(let h=0;h<d.length;h++){let g=d[h];if(!s(a[g],c[g]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}t.isObjectLiteral=o})(Pf||(Pf={}));var qf;(function(t){function e(n,r){if(typeof n=="string")return n==="*"||r.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&r.notebookType!==n.notebookType)return!1;let i=r.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&i.scheme!==n.scheme)return!1;if(n.pattern!==void 0){let s=new Tx.Minimatch(n.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}t.matchNotebook=e})(qf||(qf={}));var Ga;(function(t){function e(r){let i=r.notebookSelector,s=[];for(let o of i){let a=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",c=typeof o.notebook=="string"?void 0:o.notebook?.scheme,u=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(let l of o.cells)s.push(n(a,c,u,l.language));else s.push(n(a,c,u,void 0))}return s}t.asDocumentSelector=e;function n(r,i,s,o){return i===void 0&&s===void 0?{notebook:r,language:o}:{notebook:{notebookType:r,scheme:i,pattern:s},language:o}}})(Ga||(Ga={}));var Xa;(function(t){function e(n){return{cells:n,uris:new Set(n.map(r=>r.document.uri.toString()))}}t.create=e})(Xa||(Xa={}));var ss=class{constructor(e,n){this.client=e,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Ga.asDocumentSelector(n)),Ft.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of Ft.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);Ft.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&Ft.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),Ft.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of Ft.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Ft.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,n){if(Ft.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,n);if(r!==void 0){let s=r.uris.has(n.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(e,n){Ft.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,n){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=n.document.uri,s=r.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let o=r.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,n=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(n!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,n);i!==void 0&&this.doSendChange(i,n).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(e,n).catch(()=>{})}}didChangeNotebookDocument(e){let n=e.notebook,r=this.notebookSyncInfo.get(n.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(n);if(i===void 0)return;this.didOpen(n,i,r)}else{let i=this.getMatchingCells(n);if(i===void 0){this.didClose(n,r);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,n=this.notebookSyncInfo.get(e.uri.toString())){if(n===void 0)return;let r=e.getCells().filter(i=>n.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let n=this.getMatchingCells(e);if(n!==void 0)return this.doSendOpen(e,n)}async doSendOpen(e,n){let r=async(s,o)=>{let a=is.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),c=o.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(vr.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Xa.create(n)),i?.didOpen!==void 0?i.didOpen(e,n,r):r(e,n)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,n=this.getMatchingCells(e.notebook)){let r=async s=>{try{await this.client.sendNotification(vr.DidChangeNotebookDocumentNotification.type,{notebookDocument:is.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:is.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Xa.create(n??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let n=async i=>{try{await this.client.sendNotification(vr.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,n):n(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,n){let r=async(s,o)=>{try{await this.client.sendNotification(vr.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,n,r):r(e,n)}asNotebookDocumentChangeEvent(e,n,r,i){if(n!==void 0&&n.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};n?.metadata!==void 0&&(s.metadata=is.c2p.asMetadata(n.metadata));let o;if(n?.cellChanges!==void 0&&n.cellChanges.length>0){let a=[];o=new Set(i.map(c=>c.document.uri.toString()));for(let c of n.cellChanges)o.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if((n?.contentChanges!==void 0&&n.contentChanges.length>0||n===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,c=i,u=Pf.computeDiff(a,c,!1),l,d;if(u!==void 0){l=u.cells===void 0?new Map:new Map(u.cells.map(g=>[g.document.uri.toString(),g])),d=u.deleteCount===0?new Map:new Map(a.slice(u.start,u.start+u.deleteCount).map(g=>[g.document.uri.toString(),g]));for(let g of Array.from(d.keys()))l.has(g)&&(d.delete(g),l.delete(g));s.cells=s.cells??{};let p=[],h=[];if(l.size>0||d.size>0){for(let g of l.values())p.push(g);for(let g of d.values())h.push(g)}s.cells.structure={array:u,didOpen:p,didClose:h}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,n=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||qf.matchNotebook(r.notebook,e)){let i=this.filterCells(e,n,r.cells);return i.length===0?void 0:i}}}cellMatches(e,n){let r=this.getMatchingCells(e,[n]);return r!==void 0&&r[0]===n}filterCells(e,n,r){let i=r!==void 0?n.filter(s=>{let o=s.document.languageId;return r.some(a=>a.language==="*"||o===a.language)}):n;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},yr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=vr.NotebookDocumentSyncRegistrationType.type,Ft.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==yr.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof ss&&s.didOpenNotebookCellTextDocument(r,i)}),Ft.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;let r=n.document;if(r.uri.scheme!==yr.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let s of this.registrations.values())s instanceof ss&&s.didChangeNotebookCellTextDocument(i,n)}),Ft.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==yr.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof ss&&s.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let n=e.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let n=Vv(Vv(e,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(e){let n=e.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Ga.asDocumentSelector(n)))}initialize(e){let n=e.notebookDocumentSync;if(n===void 0)return;let r=n.id??xx.generateUuid();this.register({id:r,registerOptions:n})}register(e){let n=new ss(this.client,e.registerOptions);this.registrations.set(e.id,n)}unregister(e){let n=this.registrations.get(e);n&&n.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==yr.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Ft.languages.match(this.dedicatedChannel,e)>0)return!0;for(let n of this.registrations.values())if(n.handles(e))return!0;return!1}getProvider(e){for(let n of this.registrations.values())if(n.handles(e.document))return n}findNotebookDocumentAndCell(e){let n=e.uri.toString();for(let r of Ft.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===n)return[r,i];return[void 0,void 0]}};Ja.NotebookDocumentSyncFeature=yr;yr.CellScheme="vscode-notebook-cell"});var Jv=b($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.SyncConfigurationFeature=$r.toJSONObject=$r.ConfigurationFeature=void 0;var os=require("vscode"),Ro=ne(),Px=yn(),qx=Qe(),Xv=be(),Ef=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Ro.ConfigurationRequest.type,(n,r)=>{let i=o=>{let a=[];for(let c of o.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=pi(os.workspace.getConfiguration(void 0,e).get(n));else{let s=os.workspace.getConfiguration(n.substr(0,i),e);s&&(r=pi(s.get(n.substr(i+1))))}}else{let i=os.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=pi(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};$r.ConfigurationFeature=Ef;function pi(t){if(t){if(Array.isArray(t))return t.map(pi);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=pi(t[n]));return e}}return t}$r.toJSONObject=pi;var kf=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Ro.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Xv.ensure)((0,Xv.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:qx.generateUuid(),registerOptions:{section:e}})}register(e){let n=os.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){let r;if(Px.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(a=>n.affectsConfiguration(a)))return;let i=async o=>o===void 0?this._client.sendNotification(Ro.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Ro.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(r,i):i(r)).catch(o=>{this._client.error(`Sending notification ${Ro.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function n(s,o){let a=s;for(let c=0;c<o.length-1;c++){let u=a[o[c]];u||(u=Object.create(null),a[o[c]]=u),a=u}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),c=null;if(a>=0?c=os.workspace.getConfiguration(o.substr(0,a),r).get(o.substr(a+1)):c=os.workspace.getConfiguration(void 0,r).get(o),c){let u=e[s].split(".");n(i,u)[u[u.length-1]]=pi(c)}}return i}};$r.SyncConfigurationFeature=kf});var Yv=b(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.DidSaveTextDocumentFeature=Yt.WillSaveWaitUntilFeature=Yt.WillSaveFeature=Yt.DidChangeTextDocumentFeature=Yt.DidCloseTextDocumentFeature=Yt.DidOpenTextDocumentFeature=void 0;var Cn=require("vscode"),gt=ne(),Ze=be(),Ex=wo(),as=Qe(),Of=class extends Ze.TextDocumentEventFeature{constructor(e,n){super(e,Cn.workspace.onDidOpenTextDocument,gt.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,Ze.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,Ze.ensure)((0,Ze.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:as.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return gt.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);Cn.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&Cn.languages.match(n,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(r,o):o(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.set(e.uri.toString(),e)}};Yt.DidOpenTextDocumentFeature=Of;var Nf=class extends Ze.TextDocumentEventFeature{constructor(e,n){super(e,Cn.workspace.onDidCloseTextDocument,gt.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),r=>r,Ze.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get registrationType(){return gt.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,Ze.ensure)((0,Ze.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:as.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(Cn.languages.match(n,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};Yt.DidCloseTextDocumentFeature=Nf;var Ff=class extends Ze.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new Cn.EventEmitter}get registrationType(){return gt.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,Ze.ensure)((0,Ze.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==gt.TextDocumentSyncKind.None&&this.register({id:as.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Cn.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let n=[];for(let r of this._changeData.values())if(Cn.languages.match(r.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let i=this._client.middleware;if(r.syncKind===gt.TextDocumentSyncKind.Incremental){let s=async o=>{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(o);await this._client.sendNotification(gt.DidChangeTextDocumentNotification.type,a),this.notificationSent(o,gt.DidChangeTextDocumentNotification.type,a)};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}else if(r.syncKind===gt.TextDocumentSyncKind.Full){let s=async o=>{let a=async c=>{let u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c.document);await this._client.sendNotification(gt.DidChangeTextDocumentNotification.type,u),this.notificationSent(c,gt.DidChangeTextDocumentNotification.type,u)};return this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>a(o))):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new Ex.Delayer(200)},this._changeDelayer.delayer.trigger(()=>a(o),-1))};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}}return Promise.all(n).then(void 0,r=>{throw this._client.error(`Sending document notification ${gt.DidChangeTextDocumentNotification.type.method} failed`,r),r})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if(Cn.languages.match(n.documentSelector,e)>0)return{send:r=>this.callback(r)}}};Yt.DidChangeTextDocumentFeature=Ff;var If=class extends Ze.TextDocumentEventFeature{constructor(e){super(e,Cn.workspace.onWillSaveTextDocument,gt.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,r)=>Ze.TextDocumentEventFeature.textDocumentFilter(n,r.document))}get registrationType(){return gt.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=(0,Ze.ensure)((0,Ze.ensure)(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:as.generateUuid(),registerOptions:{documentSelector:n}})}};Yt.WillSaveFeature=If;var Mf=class extends Ze.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return gt.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=(0,Ze.ensure)((0,Ze.ensure)(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:as.generateUuid(),registerOptions:{documentSelector:n}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Cn.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(Ze.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let n=this._client.middleware,r=i=>this._client.sendRequest(gt.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};Yt.WillSaveWaitUntilFeature=Mf;var Lf=class extends Ze.TextDocumentEventFeature{constructor(e){super(e,Cn.workspace.onDidSaveTextDocument,gt.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,Ze.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return gt.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,Ze.ensure)((0,Ze.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:as.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}};Yt.DidSaveTextDocumentFeature=Lf});var Qv=b(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.CompletionItemFeature=void 0;var kx=require("vscode"),_e=ne(),Af=be(),Ox=Qe(),Nx=[_e.CompletionItemKind.Text,_e.CompletionItemKind.Method,_e.CompletionItemKind.Function,_e.CompletionItemKind.Constructor,_e.CompletionItemKind.Field,_e.CompletionItemKind.Variable,_e.CompletionItemKind.Class,_e.CompletionItemKind.Interface,_e.CompletionItemKind.Module,_e.CompletionItemKind.Property,_e.CompletionItemKind.Unit,_e.CompletionItemKind.Value,_e.CompletionItemKind.Enum,_e.CompletionItemKind.Keyword,_e.CompletionItemKind.Snippet,_e.CompletionItemKind.Color,_e.CompletionItemKind.File,_e.CompletionItemKind.Reference,_e.CompletionItemKind.Folder,_e.CompletionItemKind.EnumMember,_e.CompletionItemKind.Constant,_e.CompletionItemKind.Struct,_e.CompletionItemKind.Event,_e.CompletionItemKind.Operator,_e.CompletionItemKind.TypeParameter],jf=class extends Af.TextDocumentLanguageFeature{constructor(e){super(e,_e.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let n=(0,Af.ensure)((0,Af.ensure)(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[_e.MarkupKind.Markdown,_e.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[_e.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[_e.InsertTextMode.asIs,_e.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=_e.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:Nx},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);r&&this.register({id:Ox.generateUuid(),registerOptions:r})}registerLanguageProvider(e,n){this.labelDetailsSupport.set(n,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(a,c,u,l)=>{let d=this._client,p=this._client.middleware,h=(g,y,_,S)=>d.sendRequest(_e.CompletionRequest.type,d.code2ProtocolConverter.asCompletionParams(g,y,_),S).then(T=>S.isCancellationRequested?null:d.protocol2CodeConverter.asCompletionResult(T,i,S),T=>d.handleFailedRequest(_e.CompletionRequest.type,S,T,null));return p.provideCompletionItem?p.provideCompletionItem(a,c,l,u,h):h(a,c,l,u)},resolveCompletionItem:e.resolveProvider?(a,c)=>{let u=this._client,l=this._client.middleware,d=(p,h)=>u.sendRequest(_e.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(p,!!this.labelDetailsSupport.get(n)),h).then(g=>h.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(g),g=>u.handleFailedRequest(_e.CompletionResolveRequest.type,h,g,p));return l.resolveCompletionItem?l.resolveCompletionItem(a,c,d):d(a,c)}:void 0};return[kx.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...r),o]}};Ya.CompletionItemFeature=jf});var Zv=b(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.HoverFeature=void 0;var Fx=require("vscode"),Do=ne(),$f=be(),Ix=Qe(),Hf=class extends $f.TextDocumentLanguageFeature{constructor(e){super(e,Do.HoverRequest.type)}fillClientCapabilities(e){let n=(0,$f.ensure)((0,$f.ensure)(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[Do.MarkupKind.Markdown,Do.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);r&&this.register({id:Ix.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideHover:(i,s,o)=>{let a=this._client,c=(l,d,p)=>a.sendRequest(Do.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asHover(h),h=>a.handleFailedRequest(Do.HoverRequest.type,p,h,null)),u=a.middleware;return u.provideHover?u.provideHover(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return Fx.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Qa.HoverFeature=Hf});var ey=b(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.DefinitionFeature=void 0;var Mx=require("vscode"),Uf=ne(),Wf=be(),Lx=Qe(),Bf=class extends Wf.TextDocumentLanguageFeature{constructor(e){super(e,Uf.DefinitionRequest.type)}fillClientCapabilities(e){let n=(0,Wf.ensure)((0,Wf.ensure)(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);r&&this.register({id:Lx.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDefinition:(i,s,o)=>{let a=this._client,c=(l,d,p)=>a.sendRequest(Uf.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(h,p),h=>a.handleFailedRequest(Uf.DefinitionRequest.type,p,h,null)),u=a.middleware;return u.provideDefinition?u.provideDefinition(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return Mx.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Za.DefinitionFeature=Bf});var ny=b(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.SignatureHelpFeature=void 0;var ty=require("vscode"),To=ne(),zf=be(),Ax=Qe(),Kf=class extends zf.TextDocumentLanguageFeature{constructor(e){super(e,To.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=(0,zf.ensure)((0,zf.ensure)(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[To.MarkupKind.Markdown,To.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);r&&this.register({id:Ax.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(r,i,s,o)=>{let a=this._client,c=(l,d,p,h)=>a.sendRequest(To.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(l,d,p),h).then(g=>h.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(g,h),g=>a.handleFailedRequest(To.SignatureHelpRequest.type,h,g,null)),u=a.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(r,i,o,s,c):c(r,i,o,s)}};return[this.registerProvider(e,n),n]}registerProvider(e,n){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return ty.languages.registerSignatureHelpProvider(r,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return ty.languages.registerSignatureHelpProvider(r,n,i)}}};ec.SignatureHelpFeature=Kf});var ry=b(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.DocumentHighlightFeature=void 0;var jx=require("vscode"),Vf=ne(),Gf=be(),$x=Qe(),Xf=class extends Gf.TextDocumentLanguageFeature{constructor(e){super(e,Vf.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,Gf.ensure)((0,Gf.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);r&&this.register({id:$x.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentHighlights:(i,s,o)=>{let a=this._client,c=(l,d,p)=>a.sendRequest(Vf.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(h,p),h=>a.handleFailedRequest(Vf.DocumentHighlightRequest.type,p,h,null)),u=a.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(i,s,o,c):c(i,s,o)}};return[jx.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};tc.DocumentHighlightFeature=Xf});var Qf=b(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.DocumentSymbolFeature=rr.SupportedSymbolTags=rr.SupportedSymbolKinds=void 0;var Hx=require("vscode"),Pe=ne(),Jf=be(),Ux=Qe();rr.SupportedSymbolKinds=[Pe.SymbolKind.File,Pe.SymbolKind.Module,Pe.SymbolKind.Namespace,Pe.SymbolKind.Package,Pe.SymbolKind.Class,Pe.SymbolKind.Method,Pe.SymbolKind.Property,Pe.SymbolKind.Field,Pe.SymbolKind.Constructor,Pe.SymbolKind.Enum,Pe.SymbolKind.Interface,Pe.SymbolKind.Function,Pe.SymbolKind.Variable,Pe.SymbolKind.Constant,Pe.SymbolKind.String,Pe.SymbolKind.Number,Pe.SymbolKind.Boolean,Pe.SymbolKind.Array,Pe.SymbolKind.Object,Pe.SymbolKind.Key,Pe.SymbolKind.Null,Pe.SymbolKind.EnumMember,Pe.SymbolKind.Struct,Pe.SymbolKind.Event,Pe.SymbolKind.Operator,Pe.SymbolKind.TypeParameter];rr.SupportedSymbolTags=[Pe.SymbolTag.Deprecated];var Yf=class extends Jf.TextDocumentLanguageFeature{constructor(e){super(e,Pe.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,Jf.ensure)((0,Jf.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:rr.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:rr.SupportedSymbolTags},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);r&&this.register({id:Ux.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentSymbols:(s,o)=>{let a=this._client,c=(l,d)=>a.sendRequest(Pe.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(l),d).then(async p=>{if(d.isCancellationRequested||p===void 0||p===null)return null;if(p.length===0)return[];{let h=p[0];return Pe.DocumentSymbol.is(h)?await a.protocol2CodeConverter.asDocumentSymbols(p,d):await a.protocol2CodeConverter.asSymbolInformations(p,d)}},p=>a.handleFailedRequest(Pe.DocumentSymbolRequest.type,d,p,null)),u=a.middleware;return u.provideDocumentSymbols?u.provideDocumentSymbols(s,o,c):c(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[Hx.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,i),r]}};rr.DocumentSymbolFeature=Yf});var sy=b(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.WorkspaceSymbolFeature=void 0;var Wx=require("vscode"),xo=ne(),Zf=be(),iy=Qf(),Bx=Qe(),eh=class extends Zf.WorkspaceFeature{constructor(e){super(e,xo.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=(0,Zf.ensure)((0,Zf.ensure)(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:iy.SupportedSymbolKinds},n.tagSupport={valueSet:iy.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:Bx.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(xo.WorkspaceSymbolRequest.type,{query:c},u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(l,u),l=>s.handleFailedRequest(xo.WorkspaceSymbolRequest.type,u,l,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,o):o(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(xo.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(l),l=>s.handleFailedRequest(xo.WorkspaceSymbolResolveRequest.type,u,l,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,o):o(r,i)}:void 0};return[Wx.languages.registerWorkspaceSymbolProvider(n),n]}};nc.WorkspaceSymbolFeature=eh});var oy=b(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.ReferencesFeature=void 0;var zx=require("vscode"),th=ne(),nh=be(),Kx=Qe(),rh=class extends nh.TextDocumentLanguageFeature{constructor(e){super(e,th.ReferencesRequest.type)}fillClientCapabilities(e){(0,nh.ensure)((0,nh.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);r&&this.register({id:Kx.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideReferences:(i,s,o,a)=>{let c=this._client,u=(d,p,h,g)=>c.sendRequest(th.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(d,p,h),g).then(y=>g.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(y,g),y=>c.handleFailedRequest(th.ReferencesRequest.type,g,y,null)),l=c.middleware;return l.provideReferences?l.provideReferences(i,s,o,a,u):u(i,s,o,a)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return zx.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};rc.ReferencesFeature=rh});var ay=b(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.CodeActionFeature=void 0;var Vx=require("vscode"),an=ne(),Gx=Qe(),ih=be(),sh=class extends ih.TextDocumentLanguageFeature{constructor(e){super(e,an.CodeActionRequest.type)}fillClientCapabilities(e){let n=(0,ih.ensure)((0,ih.ensure)(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[an.CodeActionKind.Empty,an.CodeActionKind.QuickFix,an.CodeActionKind.Refactor,an.CodeActionKind.RefactorExtract,an.CodeActionKind.RefactorInline,an.CodeActionKind.RefactorRewrite,an.CodeActionKind.Source,an.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);r&&this.register({id:Gx.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideCodeActions:(i,s,o,a)=>{let c=this._client,u=async(d,p,h,g)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(p),context:await c.code2ProtocolConverter.asCodeActionContext(h,g)};return c.sendRequest(an.CodeActionRequest.type,y,g).then(_=>g.isCancellationRequested||_===null||_===void 0?null:c.protocol2CodeConverter.asCodeActionResult(_,g),_=>c.handleFailedRequest(an.CodeActionRequest.type,g,_,null))},l=c.middleware;return l.provideCodeActions?l.provideCodeActions(i,s,o,a,u):u(i,s,o,a)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.middleware,c=async(u,l)=>o.sendRequest(an.CodeActionResolveRequest.type,await o.code2ProtocolConverter.asCodeAction(u,l),l).then(d=>l.isCancellationRequested?u:o.protocol2CodeConverter.asCodeAction(d,l),d=>o.handleFailedRequest(an.CodeActionResolveRequest.type,l,d,u));return a.resolveCodeAction?a.resolveCodeAction(i,s,c):c(i,s)}:void 0};return[Vx.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};ic.CodeActionFeature=sh});var uy=b(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.CodeLensFeature=void 0;var cy=require("vscode"),cs=ne(),Xx=Qe(),Po=be(),oh=class extends Po.TextDocumentLanguageFeature{constructor(e){super(e,cs.CodeLensRequest.type)}fillClientCapabilities(e){(0,Po.ensure)((0,Po.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Po.ensure)((0,Po.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(cs.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);i&&this.register({id:Xx.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new cy.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,o)=>{let a=this._client,c=(l,d)=>a.sendRequest(cs.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(l),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(p,d),p=>a.handleFailedRequest(cs.CodeLensRequest.type,d,p,null)),u=a.middleware;return u.provideCodeLenses?u.provideCodeLenses(s,o,c):c(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let a=this._client,c=(l,d)=>a.sendRequest(cs.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(l),d).then(p=>d.isCancellationRequested?l:a.protocol2CodeConverter.asCodeLens(p),p=>a.handleFailedRequest(cs.CodeLensResolveRequest.type,d,p,l)),u=a.middleware;return u.resolveCodeLens?u.resolveCodeLens(s,o,c):c(s,o)}:void 0};return[cy.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};sc.CodeLensFeature=oh});var ly=b(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.DocumentOnTypeFormattingFeature=Hr.DocumentRangeFormattingFeature=Hr.DocumentFormattingFeature=void 0;var oc=require("vscode"),_r=ne(),lh=Qe(),wr=be(),qo;(function(t){function e(n){let r=oc.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(qo||(qo={}));var ah=class extends wr.TextDocumentLanguageFeature{constructor(e){super(e,_r.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,wr.ensure)((0,wr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);r&&this.register({id:lh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentFormattingEdits:(i,s,o)=>{let a=this._client,c=(l,d,p)=>{let h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),options:a.code2ProtocolConverter.asFormattingOptions(d,qo.fromConfiguration(l))};return a.sendRequest(_r.DocumentFormattingRequest.type,h,p).then(g=>p.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(g,p),g=>a.handleFailedRequest(_r.DocumentFormattingRequest.type,p,g,null))},u=a.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(i,s,o,c):c(i,s,o)}};return[oc.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Hr.DocumentFormattingFeature=ah;var ch=class extends wr.TextDocumentLanguageFeature{constructor(e){super(e,_r.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,wr.ensure)((0,wr.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);r&&this.register({id:lh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,s,o,a)=>{let c=this._client,u=(d,p,h,g)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(p),options:c.code2ProtocolConverter.asFormattingOptions(h,qo.fromConfiguration(d))};return c.sendRequest(_r.DocumentRangeFormattingRequest.type,y,g).then(_=>g.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(_,g),_=>c.handleFailedRequest(_r.DocumentRangeFormattingRequest.type,g,_,null))},l=c.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(i,s,o,a,u):u(i,s,o,a)}};return[oc.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Hr.DocumentRangeFormattingFeature=ch;var uh=class extends wr.TextDocumentLanguageFeature{constructor(e){super(e,_r.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,wr.ensure)((0,wr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);r&&this.register({id:lh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideOnTypeFormattingEdits:(s,o,a,c,u)=>{let l=this._client,d=(h,g,y,_,S)=>{let T={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(h),position:l.code2ProtocolConverter.asPosition(g),ch:y,options:l.code2ProtocolConverter.asFormattingOptions(_,qo.fromConfiguration(h))};return l.sendRequest(_r.DocumentOnTypeFormattingRequest.type,T,S).then(C=>S.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(C,S),C=>l.handleFailedRequest(_r.DocumentOnTypeFormattingRequest.type,S,C,null))},p=l.middleware;return p.provideOnTypeFormattingEdits?p.provideOnTypeFormattingEdits(s,o,a,c,u,d):d(s,o,a,c,u)}},i=e.moreTriggerCharacter||[];return[oc.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.firstTriggerCharacter,...i),r]}};Hr.DocumentOnTypeFormattingFeature=uh});var fy=b(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.RenameFeature=void 0;var Jx=require("vscode"),gi=ne(),Yx=Qe(),dy=yn(),dh=be(),fh=class extends dh.TextDocumentLanguageFeature{constructor(e){super(e,gi.RenameRequest.type)}fillClientCapabilities(e){let n=(0,dh.ensure)((0,dh.ensure)(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=gi.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);r&&(dy.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:Yx.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n=e.documentSelector,r={provideRenameEdits:(i,s,o,a)=>{let c=this._client,u=(d,p,h,g)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),position:c.code2ProtocolConverter.asPosition(p),newName:h};return c.sendRequest(gi.RenameRequest.type,y,g).then(_=>g.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(_,g),_=>c.handleFailedRequest(gi.RenameRequest.type,g,_,null,!1))},l=c.middleware;return l.provideRenameEdits?l.provideRenameEdits(i,s,o,a,u):u(i,s,o,a)},prepareRename:e.prepareProvider?(i,s,o)=>{let a=this._client,c=(l,d,p)=>{let h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),position:a.code2ProtocolConverter.asPosition(d)};return a.sendRequest(gi.PrepareRenameRequest.type,h,p).then(g=>p.isCancellationRequested?null:gi.Range.is(g)?a.protocol2CodeConverter.asRange(g):this.isDefaultBehavior(g)?g.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):g&&gi.Range.is(g.range)?{range:a.protocol2CodeConverter.asRange(g.range),placeholder:g.placeholder}:Promise.reject(new Error("The element can't be renamed.")),g=>{throw typeof g.message=="string"?new Error(g.message):new Error("The element can't be renamed.")})},u=a.middleware;return u.prepareRename?u.prepareRename(i,s,o,c):c(i,s,o)}:void 0};return[this.registerProvider(n,r),r]}registerProvider(e,n){return Jx.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}isDefaultBehavior(e){let n=e;return n&&dy.boolean(n.defaultBehavior)}};ac.RenameFeature=fh});var hy=b(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.DocumentLinkFeature=void 0;var Qx=require("vscode"),Eo=ne(),hh=be(),Zx=Qe(),ph=class extends hh.TextDocumentLanguageFeature{constructor(e){super(e,Eo.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=(0,hh.ensure)((0,hh.ensure)(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);r&&this.register({id:Zx.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentLinks:(i,s)=>{let o=this._client,a=(u,l)=>o.sendRequest(Eo.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(u),l).then(d=>l.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(d,l),d=>o.handleFailedRequest(Eo.DocumentLinkRequest.type,l,d,null)),c=o.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,s,a):a(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,a=(u,l)=>o.sendRequest(Eo.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(u),l).then(d=>l.isCancellationRequested?u:o.protocol2CodeConverter.asDocumentLink(d),d=>o.handleFailedRequest(Eo.DocumentLinkResolveRequest.type,l,d,u)),c=o.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,s,a):a(i,s)}:void 0};return[Qx.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};cc.DocumentLinkFeature=ph});var gy=b(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.ExecuteCommandFeature=void 0;var eP=require("vscode"),gh=ne(),tP=Qe(),py=be(),mh=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return gh.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,py.ensure)((0,py.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:tP.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.middleware,i=(s,o)=>{let a={command:s,arguments:o};return n.sendRequest(gh.ExecuteCommandRequest.type,a).then(void 0,c=>n.handleFailedRequest(gh.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(eP.commands.registerCommand(o,(...a)=>r.executeCommand?r.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}};uc.ExecuteCommandFeature=mh});var my=b(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.FileSystemWatcherFeature=void 0;var nP=require("vscode"),mi=ne(),lc=be(),vh=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return mi.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,lc.ensure)((0,lc.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,lc.ensure)((0,lc.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let s=!0,o=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(s=(r.kind&mi.WatchKind.Create)!==0,o=(r.kind&mi.WatchKind.Change)!==0,a=(r.kind&mi.WatchKind.Delete)!==0);let c=nP.workspace.createFileSystemWatcher(i,!s,!o,!a);this.hookListeners(c,s,o,a,n),n.push(c)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,s){n&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:mi.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:mi.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:mi.FileChangeType.Deleted}),null,s)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}};dc.FileSystemWatcherFeature=vh});var vy=b(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.ColorProviderFeature=void 0;var rP=require("vscode"),ko=ne(),yh=be(),_h=class extends yh.TextDocumentLanguageFeature{constructor(e){super(e,ko.DocumentColorRequest.type)}fillClientCapabilities(e){(0,yh.ensure)((0,yh.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideColorPresentations:(i,s,o)=>{let a=this._client,c=(l,d,p)=>{let h={color:l,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d.document),range:a.code2ProtocolConverter.asRange(d.range)};return a.sendRequest(ko.ColorPresentationRequest.type,h,p).then(g=>p.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(g,p),g=>a.handleFailedRequest(ko.ColorPresentationRequest.type,p,g,null))},u=a.middleware;return u.provideColorPresentations?u.provideColorPresentations(i,s,o,c):c(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,a=(u,l)=>{let d={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u)};return o.sendRequest(ko.DocumentColorRequest.type,d,l).then(p=>l.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(p,l),p=>o.handleFailedRequest(ko.DocumentColorRequest.type,l,p,null))},c=o.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,s,a):a(i,s)}};return[rP.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};fc.ColorProviderFeature=_h});var yy=b(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.ImplementationFeature=void 0;var iP=require("vscode"),wh=ne(),Ch=be(),bh=class extends Ch.TextDocumentLanguageFeature{constructor(e){super(e,wh.ImplementationRequest.type)}fillClientCapabilities(e){let n=(0,Ch.ensure)((0,Ch.ensure)(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideImplementation:(i,s,o)=>{let a=this._client,c=(l,d,p)=>a.sendRequest(wh.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(h,p),h=>a.handleFailedRequest(wh.ImplementationRequest.type,p,h,null)),u=a.middleware;return u.provideImplementation?u.provideImplementation(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return iP.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};hc.ImplementationFeature=bh});var _y=b(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.TypeDefinitionFeature=void 0;var sP=require("vscode"),Sh=ne(),Oo=be(),Rh=class extends Oo.TextDocumentLanguageFeature{constructor(e){super(e,Sh.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Oo.ensure)((0,Oo.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,Oo.ensure)((0,Oo.ensure)(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideTypeDefinition:(i,s,o)=>{let a=this._client,c=(l,d,p)=>a.sendRequest(Sh.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(h,p),h=>a.handleFailedRequest(Sh.TypeDefinitionRequest.type,p,h,null)),u=a.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return sP.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};pc.TypeDefinitionFeature=Rh});var wy=b(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.WorkspaceFoldersFeature=us.arrayDiff=void 0;var oP=Qe(),gc=require("vscode"),No=ne();function Dh(t,e){if(t!==void 0)return t[e]}function Th(t,e){return t.filter(n=>e.indexOf(n)<0)}us.arrayDiff=Th;var xh=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return No.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=gc.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(No.WorkspaceFoldersRequest.type,s=>{let o=()=>{let c=gc.workspace.workspaceFolders;return c===void 0?null:c.map(l=>this.asProtocol(l))},a=n.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let r=Dh(Dh(Dh(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=oP.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let n;if(this._initialFolders&&e){let r=Th(this._initialFolders,e),i=Th(e,this._initialFolders);(i.length>0||r.length>0)&&(n=this.doSendEvent(i,r))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):e&&(n=this.doSendEvent(e,[]));n!==void 0&&n.catch(r=>{this._client.error(`Sending notification ${No.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};return this._client.sendNotification(No.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=gc.workspace.onDidChangeWorkspaceFolders(s=>{let o=u=>this.doSendEvent(u.added,u.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(u=>{this._client.error(`Sending notification ${No.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(n,i),this.sendInitialEvent(gc.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};us.WorkspaceFoldersFeature=xh});var Cy=b(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.FoldingRangeFeature=void 0;var aP=require("vscode"),ls=ne(),Ph=be(),qh=class extends Ph.TextDocumentLanguageFeature{constructor(e){super(e,ls.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=(0,Ph.ensure)((0,Ph.ensure)(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[ls.FoldingRangeKind.Comment,ls.FoldingRangeKind.Imports,ls.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1}}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideFoldingRanges:(i,s,o)=>{let a=this._client,c=(l,d,p)=>{let h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l)};return a.sendRequest(ls.FoldingRangeRequest.type,h,p).then(g=>p.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(g,p),g=>a.handleFailedRequest(ls.FoldingRangeRequest.type,p,g,null))},u=a.middleware;return u.provideFoldingRanges?u.provideFoldingRanges(i,s,o,c):c(i,s,o)}};return[aP.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};mc.FoldingRangeFeature=qh});var by=b(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.DeclarationFeature=void 0;var cP=require("vscode"),Eh=ne(),kh=be(),Oh=class extends kh.TextDocumentLanguageFeature{constructor(e){super(e,Eh.DeclarationRequest.type)}fillClientCapabilities(e){let n=(0,kh.ensure)((0,kh.ensure)(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDeclaration:(i,s,o)=>{let a=this._client,c=(l,d,p)=>a.sendRequest(Eh.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(h,p),h=>a.handleFailedRequest(Eh.DeclarationRequest.type,p,h,null)),u=a.middleware;return u.provideDeclaration?u.provideDeclaration(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return cP.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};vc.DeclarationFeature=Oh});var Sy=b(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.SelectionRangeFeature=void 0;var uP=require("vscode"),Nh=ne(),Fh=be(),Ih=class extends Fh.TextDocumentLanguageFeature{constructor(e){super(e,Nh.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=(0,Fh.ensure)((0,Fh.ensure)(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideSelectionRanges:(i,s,o)=>{let a=this._client,c=async(l,d,p)=>{let h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:await a.code2ProtocolConverter.asPositions(d,p)};return a.sendRequest(Nh.SelectionRangeRequest.type,h,p).then(g=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(g,p),g=>a.handleFailedRequest(Nh.SelectionRangeRequest.type,p,g,null))},u=a.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return uP.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};yc.SelectionRangeFeature=Ih});var Dy=b(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.ProgressFeature=void 0;var Ry=ne(),lP=uf();function dP(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Mh=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:Ry.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){dP(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new lP.ProgressPart(this._client,i.token,n))};e.onRequest(Ry.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};_c.ProgressFeature=Mh});var Ty=b(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.CallHierarchyFeature=void 0;var fP=require("vscode"),vi=ne(),Lh=be(),Ah=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(vi.CallHierarchyPrepareRequest.type,l,u).then(d=>u.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(d,u),d=>i.handleFailedRequest(vi.CallHierarchyPrepareRequest.type,u,d,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,n,r,o):o(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(vi.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,a),u=>r.handleFailedRequest(vi.CallHierarchyIncomingCallsRequest.type,a,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,s):s(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(vi.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,a),u=>r.handleFailedRequest(vi.CallHierarchyOutgoingCallsRequest.type,a,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,s):s(e,n)}},jh=class extends Lh.TextDocumentLanguageFeature{constructor(e){super(e,vi.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=e,r=(0,Lh.ensure)((0,Lh.ensure)(n,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new Ah(n);return[fP.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};wc.CallHierarchyFeature=jh});var xy=b(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.SemanticTokensFeature=void 0;var Cc=require("vscode"),oe=ne(),Fo=be(),hP=yn(),$h=class extends Fo.TextDocumentLanguageFeature{constructor(e){super(e,oe.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=(0,Fo.ensure)((0,Fo.ensure)(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[oe.SemanticTokenTypes.namespace,oe.SemanticTokenTypes.type,oe.SemanticTokenTypes.class,oe.SemanticTokenTypes.enum,oe.SemanticTokenTypes.interface,oe.SemanticTokenTypes.struct,oe.SemanticTokenTypes.typeParameter,oe.SemanticTokenTypes.parameter,oe.SemanticTokenTypes.variable,oe.SemanticTokenTypes.property,oe.SemanticTokenTypes.enumMember,oe.SemanticTokenTypes.event,oe.SemanticTokenTypes.function,oe.SemanticTokenTypes.method,oe.SemanticTokenTypes.macro,oe.SemanticTokenTypes.keyword,oe.SemanticTokenTypes.modifier,oe.SemanticTokenTypes.comment,oe.SemanticTokenTypes.string,oe.SemanticTokenTypes.number,oe.SemanticTokenTypes.regexp,oe.SemanticTokenTypes.operator,oe.SemanticTokenTypes.decorator],n.tokenModifiers=[oe.SemanticTokenModifiers.declaration,oe.SemanticTokenModifiers.definition,oe.SemanticTokenModifiers.readonly,oe.SemanticTokenModifiers.static,oe.SemanticTokenModifiers.deprecated,oe.SemanticTokenModifiers.abstract,oe.SemanticTokenModifiers.async,oe.SemanticTokenModifiers.modification,oe.SemanticTokenModifiers.documentation,oe.SemanticTokenModifiers.defaultLibrary],n.formats=[oe.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,Fo.ensure)((0,Fo.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(oe.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(n,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,r=hP.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new Cc.EventEmitter,o=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(h,g)=>{let y=this._client,_=y.middleware,S=(T,C)=>{let D={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(T)};return y.sendRequest(oe.SemanticTokensRequest.type,D,C).then(E=>C.isCancellationRequested?null:y.protocol2CodeConverter.asSemanticTokens(E,C),E=>y.handleFailedRequest(oe.SemanticTokensRequest.type,C,E,null))};return _.provideDocumentSemanticTokens?_.provideDocumentSemanticTokens(h,g,S):S(h,g)},provideDocumentSemanticTokensEdits:i?(h,g,y)=>{let _=this._client,S=_.middleware,T=(C,D,E)=>{let W={textDocument:_.code2ProtocolConverter.asTextDocumentIdentifier(C),previousResultId:D};return _.sendRequest(oe.SemanticTokensDeltaRequest.type,W,E).then(async j=>E.isCancellationRequested?null:oe.SemanticTokens.is(j)?await _.protocol2CodeConverter.asSemanticTokens(j,E):await _.protocol2CodeConverter.asSemanticTokensEdits(j,E),j=>_.handleFailedRequest(oe.SemanticTokensDeltaRequest.type,E,j,null))};return S.provideDocumentSemanticTokensEdits?S.provideDocumentSemanticTokensEdits(h,g,y,T):T(h,g,y)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(h,g,y)=>{let _=this._client,S=_.middleware,T=(C,D,E)=>{let W={textDocument:_.code2ProtocolConverter.asTextDocumentIdentifier(C),range:_.code2ProtocolConverter.asRange(D)};return _.sendRequest(oe.SemanticTokensRangeRequest.type,W,E).then(j=>E.isCancellationRequested?null:_.protocol2CodeConverter.asSemanticTokens(j,E),j=>_.handleFailedRequest(oe.SemanticTokensRangeRequest.type,E,j,null))};return S.provideDocumentRangeSemanticTokens?S.provideDocumentRangeSemanticTokens(h,g,y,T):T(h,g,y)}}:void 0,u=[],l=this._client,d=l.protocol2CodeConverter.asSemanticTokensLegend(e.legend),p=l.protocol2CodeConverter.asDocumentSelector(n);return o!==void 0&&u.push(Cc.languages.registerDocumentSemanticTokensProvider(p,o,d)),c!==void 0&&u.push(Cc.languages.registerDocumentRangeSemanticTokensProvider(p,c,d)),[new Cc.Disposable(()=>u.forEach(h=>h.dispose())),{range:c,full:o,onDidChangeSemanticTokensEmitter:s}]}};bc.SemanticTokensFeature=$h});var Ey=b(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.WillDeleteFilesFeature=Qt.WillRenameFilesFeature=Qt.WillCreateFilesFeature=Qt.DidDeleteFilesFeature=Qt.DidRenameFilesFeature=Qt.DidCreateFilesFeature=void 0;var bn=require("vscode"),pP=Ka(),Cr=ne(),gP=Qe();function Py(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function mP(t,e){return t[e]}function qy(t,e,n){t[e]=n}var br=class{constructor(e,n,r,i,s){this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=Py(Py(e,"workspace"),"fileOperations");qy(n,"dynamicRegistration",!0),qy(n,this._clientCapability,!0)}initialize(e){let n=e.workspace?.fileOperations,r=n!==void 0?mP(n,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:gP.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new pP.Minimatch(r.pattern.glob,br.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return br.getFileType(e)}async filter(e,n){let r=await Promise.all(e.files.map(async s=>{let o=n(s),a=o.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==o.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;let l=await this.getFileType(o);if(l===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(l===bn.FileType.File&&u.kind===Cr.FileOperationPatternKind.file||l===bn.FileType.Directory&&u.kind===Cr.FileOperationPatternKind.folder)return!0}else if(u.kind===Cr.FileOperationPatternKind.folder&&await br.getFileType(o)===bn.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return{...e,files:i}}static async getFileType(e){try{return(await bn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Sc=class extends br{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._notificationType=r,this._accessUri=o,this._createParams=a}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(n,r)}}},Rc=class extends Sc{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let n=e.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);let r=await br.getFileType(e);return r&&this._fsPathFileTypes.set(n,r),r}async cacheFileTypes(e,n){await this.filter(e,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},Hh=class extends Sc{constructor(e){super(e,bn.workspace.onDidCreateFiles,Cr.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,n):n(e)}};Qt.DidCreateFilesFeature=Hh;var Uh=class extends Rc{constructor(e){super(e,bn.workspace.onDidRenameFiles,Cr.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=bn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,n=>n.oldUri))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,n):n(e)}};Qt.DidRenameFilesFeature=Uh;var Wh=class extends Rc{constructor(e){super(e,bn.workspace.onDidDeleteFiles,Cr.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=bn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,n=>n))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,n):n(e)}};Qt.DidDeleteFilesFeature=Wh;var Io=class extends br{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._requestType=r,this._accessUri=o,this._createParams=a}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},Bh=class extends Io{constructor(e){super(e,bn.workspace.onWillCreateFiles,Cr.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,n):n(e)}};Qt.WillCreateFilesFeature=Bh;var zh=class extends Io{constructor(e){super(e,bn.workspace.onWillRenameFiles,Cr.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,n):n(e)}};Qt.WillRenameFilesFeature=zh;var Kh=class extends Io{constructor(e){super(e,bn.workspace.onWillDeleteFiles,Cr.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,n):n(e)}};Qt.WillDeleteFilesFeature=Kh});var ky=b(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.LinkedEditingFeature=void 0;var vP=require("vscode"),Vh=ne(),Gh=be(),Xh=class extends Gh.TextDocumentLanguageFeature{constructor(e){super(e,Vh.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=(0,Gh.ensure)((0,Gh.ensure)(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideLinkedEditingRanges:(i,s,o)=>{let a=this._client,c=(l,d,p)=>a.sendRequest(Vh.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),p).then(h=>p.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(h,p),h=>a.handleFailedRequest(Vh.LinkedEditingRangeRequest.type,p,h,null)),u=a.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return vP.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Dc.LinkedEditingFeature=Xh});var Oy=b(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.TypeHierarchyFeature=void 0;var yP=require("vscode"),yi=ne(),Jh=be(),Yh=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(yi.TypeHierarchyPrepareRequest.type,l,u).then(d=>u.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(d,u),d=>i.handleFailedRequest(yi.TypeHierarchyPrepareRequest.type,u,d,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,n,r,o):o(e,n,r)}provideTypeHierarchySupertypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(yi.TypeHierarchySupertypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(yi.TypeHierarchySupertypesRequest.type,a,u,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,n,s):s(e,n)}provideTypeHierarchySubtypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(yi.TypeHierarchySubtypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(yi.TypeHierarchySubtypesRequest.type,a,u,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,n,s):s(e,n)}},Qh=class extends Jh.TextDocumentLanguageFeature{constructor(e){super(e,yi.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=(0,Jh.ensure)((0,Jh.ensure)(e,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new Yh(n);return[yP.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Tc.TypeHierarchyFeature=Qh});var Fy=b(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.InlineValueFeature=void 0;var Ny=require("vscode"),xc=ne(),Mo=be(),Zh=class extends Mo.TextDocumentLanguageFeature{constructor(e){super(e,xc.InlineValueRequest.type)}fillClientCapabilities(e){(0,Mo.ensure)((0,Mo.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Mo.ensure)((0,Mo.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,n){this._client.onRequest(xc.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(n,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Ny.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(s,o,a,c)=>{let u=this._client,l=(p,h,g,y)=>{let _={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(p),range:u.code2ProtocolConverter.asRange(h),context:u.code2ProtocolConverter.asInlineValueContext(g)};return u.sendRequest(xc.InlineValueRequest.type,_,y).then(S=>y.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(S,y),S=>u.handleFailedRequest(xc.InlineValueRequest.type,y,S,null))},d=u.middleware;return d.provideInlineValues?d.provideInlineValues(s,o,a,c,l):l(s,o,a,c)}};return[this.registerProvider(n,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,n){return Ny.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Pc.InlineValueFeature=Zh});var My=b(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.InlayHintsFeature=void 0;var Iy=require("vscode"),ds=ne(),Lo=be(),ep=class extends Lo.TextDocumentLanguageFeature{constructor(e){super(e,ds.InlayHintRequest.type)}fillClientCapabilities(e){let n=(0,Lo.ensure)((0,Lo.ensure)(e,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Lo.ensure)((0,Lo.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,n){this._client.onRequest(ds.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(n,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Iy.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(s,o,a)=>{let c=this._client,u=async(d,p,h)=>{let g={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(p)};try{let y=await c.sendRequest(ds.InlayHintRequest.type,g,h);return h.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(y,h)}catch(y){return c.handleFailedRequest(ds.InlayHintRequest.type,h,y,null)}},l=c.middleware;return l.provideInlayHints?l.provideInlayHints(s,o,a,u):u(s,o,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let a=this._client,c=async(l,d)=>{try{let p=await a.sendRequest(ds.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(l),d);if(d.isCancellationRequested)return null;let h=a.protocol2CodeConverter.asInlayHint(p,d);return d.isCancellationRequested?null:h}catch(p){return a.handleFailedRequest(ds.InlayHintResolveRequest.type,d,p,null)}},u=a.middleware;return u.resolveInlayHint?u.resolveInlayHint(s,o,c):c(s,o)}:void 0,[this.registerProvider(n,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,n){return Iy.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};qc.InlayHintsFeature=ep});var ip=b(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.ProposedFeatures=ze.BaseLanguageClient=ze.MessageTransports=ze.SuspendMode=ze.State=ze.CloseAction=ze.ErrorAction=ze.RevealOutputChannelOn=void 0;var Ne=require("vscode"),$=ne(),_P=mv(),wP=_v(),Sn=yn(),Ly=wo(),Ay=Qe(),CP=uf(),Un=be(),bP=xf(),jy=Gv(),$y=Jv(),fs=Yv(),SP=Qv(),RP=Zv(),DP=ey(),TP=ny(),xP=ry(),PP=Qf(),qP=sy(),EP=oy(),kP=ay(),OP=uy(),tp=ly(),NP=fy(),FP=hy(),IP=gy(),MP=my(),LP=vy(),AP=yy(),jP=_y(),$P=wy(),HP=Cy(),UP=by(),WP=Sy(),BP=Dy(),zP=Ty(),KP=xy(),hs=Ey(),VP=ky(),GP=Oy(),XP=Fy(),JP=My(),Ao;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Ao=ze.RevealOutputChannelOn||(ze.RevealOutputChannelOn={}));var kc;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(kc=ze.ErrorAction||(ze.ErrorAction={}));var _i;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(_i=ze.CloseAction||(ze.CloseAction={}));var Ec;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Ec=ze.State||(ze.State={}));var YP;(function(t){t.off="off",t.on="on"})(YP=ze.SuspendMode||(ze.SuspendMode={}));var np=class{constructor(e,n){this.client=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?{action:kc.Continue}:{action:kc.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:_i.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:_i.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:_i.Restart})}},ge;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(ge||(ge={}));var QP;(function(t){function e(n){return n&&$.MessageReader.is(n.reader)&&$.MessageWriter.is(n.writer)}t.is=e})(QP=ze.MessageTransports||(ze.MessageTransports={}));var wi=class{constructor(e,n,r){this._traceFormat=$.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new Ly.Semaphore(1),this._id=e,this._name=n,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??Ao.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=ge.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Ly.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new $.Emitter,this._stateChangeEmitter=new $.Emitter,this._trace=$.Trace.Off,this._tracer={log:(s,o)=>{Sn.string(s)?this.logTrace(s,o):this.logObjectTrace(s)}},this._c2p=_P.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=wP.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=Ne.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){switch(this.$state){case ge.Starting:return Ec.Starting;case ge.Running:return Ec.Running;default:return Ec.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...n){if(this.$state===ge.StartFailed||this.$state===ge.Stopping||this.$state===ge.Stopped)return Promise.reject(new $.ResponseError($.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${Sn.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,n)),s={dispose:()=>{let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,n),s={dispose:()=>{this._pendingRequestHandlers.delete(r);let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),s.dispose()}}}async sendNotification(e,n){if(this.$state===ge.StartFailed||this.$state===ge.Stopping||this.$state===ge.Stopped)return Promise.reject(new $.ResponseError($.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${Sn.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,n)),s={dispose:()=>{let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,n),s={dispose:()=>{this._pendingNotificationHandlers.delete(r);let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),s.dispose()}}}async sendProgress(e,n,r){if(this.$state===ge.StartFailed||this.$state===ge.Stopping||this.$state===ge.Stopped)return Promise.reject(new $.ResponseError($.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}onProgress(e,n,r){this._progressHandlers.set(n,{type:e,handler:r});let i=this.activeConnection(),s,o=this._clientOptions.middleware?.handleWorkDoneProgress,a=$.WorkDoneProgress.is(e)&&o!==void 0?c=>{o(n,c,()=>r(c))}:r;return i!==void 0?(this._progressDisposables.set(n,i.onProgress(e,n,a)),s={dispose:()=>{let c=this._progressDisposables.get(n);c!==void 0&&(c.dispose(),this._progressDisposables.delete(n))}}):(this._pendingProgressHandlers.set(n,{type:e,handler:r}),s={dispose:()=>{this._pendingProgressHandlers.delete(n);let c=this._progressDisposables.get(n);c!==void 0&&(c.dispose(),this._progressDisposables.delete(n))}}),{dispose:()=>{this._progressHandlers.delete(n),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new np(this,e??4)}async setTrace(e){this._trace=e;let n=this.activeConnection();n!==void 0&&await n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof $.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?Sn.string(e.stack)?e.stack:e.message:Sn.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Ao.Info&&this.showNotificationMessage($.MessageType.Info,e)}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Ao.Warn&&this.showNotificationMessage($.MessageType.Warning,e)}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=Ao.Error)&&this.showNotificationMessage($.MessageType.Error,e)}showNotificationMessage(e,n){n=n??"A request has failed. See the output for more information.",(e===$.MessageType.Error?Ne.window.showErrorMessage:e===$.MessageType.Warning?Ne.window.showWarningMessage:Ne.window.showInformationMessage)(n,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===ge.Initial||this.$state===ge.Stopping||this.$state===ge.Stopped}needsStop(){return this.$state===ge.Starting||this.$state===ge.Running}activeConnection(){return this.$state===ge.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===ge.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===ge.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,n,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?Ne.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):Ne.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=ge.Starting;try{let i=await this.createConnection();i.onNotification($.LogMessageNotification.type,s=>{switch(s.type){case $.MessageType.Error:this.error(s.message,void 0,!1);break;case $.MessageType.Warning:this.warn(s.message,void 0,!1);break;case $.MessageType.Info:this.info(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification($.ShowMessageNotification.type,s=>{switch(s.type){case $.MessageType.Error:Ne.window.showErrorMessage(s.message);break;case $.MessageType.Warning:Ne.window.showWarningMessage(s.message);break;case $.MessageType.Info:Ne.window.showInformationMessage(s.message);break;default:Ne.window.showInformationMessage(s.message)}}),i.onRequest($.ShowMessageRequest.type,s=>{let o;switch(s.type){case $.MessageType.Error:o=Ne.window.showErrorMessage;break;case $.MessageType.Warning:o=Ne.window.showWarningMessage;break;case $.MessageType.Info:o=Ne.window.showInformationMessage;break;default:o=Ne.window.showInformationMessage}let a=s.actions||[];return o(s.message,...a)}),i.onNotification($.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest($.ShowDocumentRequest.type,async s=>{let o=async c=>{let u=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await Ne.env.openExternal(u)};{let l={};return c.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?l.preserveFocus=!0:c.takeFocus===!0&&(l.preserveFocus=!1),await Ne.window.showTextDocument(u,l),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(s,o):o(s)}),i.listen(),await this.initialize(i),n()}catch(i){this.$state=ge.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,n;return[new Promise((i,s)=>{e=i,n=s}),e,n]}async initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:Ne.env.appName,version:Ne.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(Ne.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Sn.func(n)?n():n,trace:$.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=Ay.generateUuid(),a=new CP.ProgressPart(e,o);s.workDoneToken=o;try{let c=await this.doInitialize(e,s);return a.done(),c}catch(c){throw a.cancel(),c}}else return this.doInitialize(e,s)}async doInitialize(e,n){try{let r=await e.initialize(n);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==$.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=ge.Running;let i;Sn.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===$.TextDocumentSyncKind.None?i={openClose:!1,change:$.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification($.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest($.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest($.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest($.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification($.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof $.ResponseError&&r.data&&r.data.retry?Ne.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&Ne.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=Ne.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,n){if(this.$state===ge.Stopped||this.$state===ge.Initial)return;if(this.$state===ge.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==ge.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=ge.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,$.RAL)().timer.setTimeout(o,n)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(r);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=ge.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let n=this._listeners.splice(0,this._listeners.length);for(let r of n)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let n=this;async function r(s){return n._fileEvents.push(s),n._fileEventDelayer.trigger(async()=>{let o=await n.$start();await n.forceDocumentSync();let a=o.sendNotification($.DidChangeWatchedFilesNotification.type,{changes:n._fileEvents});return n._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(s=>{n.error("Notify file events failed.",s)})}async forceDocumentSync(){return this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get($.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===n&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,$.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[n,r]=e.value;this._diagnosticQueue.delete(n);let i=new Ne.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:n,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(n),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(o,s,(c,u)=>this.setDiagnostics(c,u)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,n){this._diagnostics&&this._diagnostics.set(e,n)}async $start(){if(this.$state===ge.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o)},n=()=>{this.handleConnectionClosed()},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=ZP(r.reader,r.writer,e,n,this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===ge.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:_i.DoNotRestart};if(this.$state!==ge.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===_i.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===ge.Starting?this.$state=ge.StartFailed:this.$state=ge.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===_i.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=ge.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(n=>this.error("Restarting server failed",n,"force")))}handleConnectionError(e,n,r){let i=this._clientOptions.errorHandler.error(e,n,r);i.action===kc.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)}))}hookConfigurationChanged(e){this._listeners.push(Ne.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,n=!1){let r=Ne.workspace.getConfiguration(this._id),i=$.Trace.Off,s=$.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=$.Trace.fromString(o):(i=$.Trace.fromString(r.get("trace.server.verbosity","off")),s=$.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;Sn.array(n)?r=n:r=[n],r&&this._dynamicFeatures.get($.DidChangeWatchedFilesNotification.type.method).registerRaw(Ay.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),Un.DynamicFeature.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let n=this.getFeature($.NotebookDocumentSyncRegistrationType.method);return n===void 0||!(n instanceof jy.NotebookDocumentSyncFeature)?!1:n.handles(e)}registerBuiltinFeatures(){this.registerFeature(new $y.ConfigurationFeature(this)),this.registerFeature(new fs.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new fs.DidChangeTextDocumentFeature(this)),this.registerFeature(new fs.WillSaveFeature(this)),this.registerFeature(new fs.WillSaveWaitUntilFeature(this)),this.registerFeature(new fs.DidSaveTextDocumentFeature(this)),this.registerFeature(new fs.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new MP.FileSystemWatcherFeature(this,e=>this.notifyFileEvent(e))),this.registerFeature(new SP.CompletionItemFeature(this)),this.registerFeature(new RP.HoverFeature(this)),this.registerFeature(new TP.SignatureHelpFeature(this)),this.registerFeature(new DP.DefinitionFeature(this)),this.registerFeature(new EP.ReferencesFeature(this)),this.registerFeature(new xP.DocumentHighlightFeature(this)),this.registerFeature(new PP.DocumentSymbolFeature(this)),this.registerFeature(new qP.WorkspaceSymbolFeature(this)),this.registerFeature(new kP.CodeActionFeature(this)),this.registerFeature(new OP.CodeLensFeature(this)),this.registerFeature(new tp.DocumentFormattingFeature(this)),this.registerFeature(new tp.DocumentRangeFormattingFeature(this)),this.registerFeature(new tp.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new NP.RenameFeature(this)),this.registerFeature(new FP.DocumentLinkFeature(this)),this.registerFeature(new IP.ExecuteCommandFeature(this)),this.registerFeature(new $y.SyncConfigurationFeature(this)),this.registerFeature(new jP.TypeDefinitionFeature(this)),this.registerFeature(new AP.ImplementationFeature(this)),this.registerFeature(new LP.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new $P.WorkspaceFoldersFeature(this)),this.registerFeature(new HP.FoldingRangeFeature(this)),this.registerFeature(new UP.DeclarationFeature(this)),this.registerFeature(new WP.SelectionRangeFeature(this)),this.registerFeature(new BP.ProgressFeature(this)),this.registerFeature(new zP.CallHierarchyFeature(this)),this.registerFeature(new KP.SemanticTokensFeature(this)),this.registerFeature(new VP.LinkedEditingFeature(this)),this.registerFeature(new hs.DidCreateFilesFeature(this)),this.registerFeature(new hs.DidRenameFilesFeature(this)),this.registerFeature(new hs.DidDeleteFilesFeature(this)),this.registerFeature(new hs.WillCreateFilesFeature(this)),this.registerFeature(new hs.WillRenameFilesFeature(this)),this.registerFeature(new hs.WillDeleteFilesFeature(this)),this.registerFeature(new GP.TypeHierarchyFeature(this)),this.registerFeature(new XP.InlineValueFeature(this)),this.registerFeature(new JP.InlayHintsFeature(this)),this.registerFeature(new bP.DiagnosticFeature(this)),this.registerFeature(new jy.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Hy.createAll(this))}fillInitializeParams(e){for(let n of this._features)Sn.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Un.ensure)(e,"workspace").applyEdit=!0;let n=(0,Un.ensure)((0,Un.ensure)(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[$.ResourceOperationKind.Create,$.ResourceOperationKind.Rename,$.ResourceOperationKind.Delete],n.failureHandling=$.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,Un.ensure)((0,Un.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[$.DiagnosticTag.Unnecessary,$.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,Un.ensure)(e,"window"),s=(0,Un.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,Un.ensure)(i,"showDocument");o.support=!0;let a=(0,Un.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(wi.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)Sn.func(r.preInitialize)&&r.preInitialize(this._capabilities,n);for(let r of this._features)r.initialize(this._capabilities,n)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let n of e.registrations)this._ignoredRegistrations.add(n.id);return}for(let n of e.registrations){let r=this._dynamicFeatures.get(n.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Registration failed.`));let i=n.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:n.id,registerOptions:i};try{r.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){for(let n of e.unregisterations){if(this._ignoredRegistrations.has(n.id))continue;let r=this._dynamicFeatures.get(n.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Unregistration failed.`));r.unregister(n.id)}}async handleApplyWorkspaceEdit(e){let n=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(n)),i=new Map;Ne.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(n.documentChanges){for(let o of n.documentChanges)if($.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let a=i.get(o.textDocument.uri);if(a&&a.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):Sn.asPromise(Ne.workspace.applyEdit(r).then(o=>({applied:o})))}handleFailedRequest(e,n,r,i,s=!0){if(r instanceof $.ResponseError){if(r.code===$.ErrorCodes.PendingResponseRejected||r.code===$.ErrorCodes.ConnectionInactive)return i;if(r.code===$.LSPErrorCodes.RequestCancelled||r.code===$.LSPErrorCodes.ServerCancelled){if(n!==void 0&&n.isCancellationRequested)return i;throw r.data!==void 0?new Un.LSPCancellationError(r.data):new Ne.CancellationError}else if(r.code===$.LSPErrorCodes.ContentModified){if(wi.RequestsToCancelOnContentModified.has(e.method))throw new Ne.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,s),r}};ze.BaseLanguageClient=wi;wi.RequestsToCancelOnContentModified=new Set([$.SemanticTokensRequest.method,$.SemanticTokensRangeRequest.method,$.SemanticTokensDeltaRequest.method]);var rp=class{error(e){(0,$.RAL)().console.error(e)}warn(e){(0,$.RAL)().console.warn(e)}info(e){(0,$.RAL)().console.info(e)}log(e){(0,$.RAL)().console.log(e)}};function ZP(t,e,n,r,i){let s=-1,o=new rp,a=(0,$.createProtocolConnection)(t,e,o,i);return a.onError(u=>{n(u[0],u[1],u[2])}),a.onClose(r),{get lastUsed(){return s},resetLastUsed:()=>{s=-1},listen:()=>a.listen(),sendRequest:(u,...l)=>(s=Date.now(),a.sendRequest(u,...l)),onRequest:(u,l)=>a.onRequest(u,l),hasPendingResponse:()=>a.hasPendingResponse(),sendNotification:(u,l)=>(s=Date.now(),a.sendNotification(u,l)),onNotification:(u,l)=>a.onNotification(u,l),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(u,l,d)=>{let p={sendNotification:!1,traceFormat:$.TraceFormat.Text};return d===void 0?a.trace(u,l,p):(Sn.boolean(d),a.trace(u,l,d))},initialize:u=>(s=Date.now(),a.sendRequest($.InitializeRequest.type,u)),shutdown:()=>(s=Date.now(),a.sendRequest($.ShutdownRequest.type,void 0)),exit:()=>(s=Date.now(),a.sendNotification($.ExitNotification.type)),end:()=>a.end(),dispose:()=>a.dispose()}}var Hy;(function(t){function e(n){return[]}t.createAll=e})(Hy=ze.ProposedFeatures||(ze.ProposedFeatures={}))});var Wy=b(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.terminate=void 0;var Uy=require("child_process"),eq=require("path"),tq=process.platform==="win32",nq=process.platform==="darwin",rq=process.platform==="linux";function iq(t,e){if(tq)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Uy.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(rq||nq)try{var n=(0,eq.join)(__dirname,"terminateProcess.sh"),r=Uy.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}Oc.terminate=iq});var sp=b((lM,By)=>{"use strict";By.exports=ne()});var jo=b((dM,zy)=>{var sq="2.0.0",oq=Number.MAX_SAFE_INTEGER||9007199254740991,aq=16;zy.exports={SEMVER_SPEC_VERSION:sq,MAX_LENGTH:256,MAX_SAFE_INTEGER:oq,MAX_SAFE_COMPONENT_LENGTH:aq}});var $o=b((fM,Ky)=>{var cq=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Ky.exports=cq});var Ci=b((Ur,Vy)=>{var{MAX_SAFE_COMPONENT_LENGTH:op}=jo(),uq=$o();Ur=Vy.exports={};var lq=Ur.re=[],K=Ur.src=[],V=Ur.t={},dq=0,de=(t,e,n)=>{let r=dq++;uq(t,r,e),V[t]=r,K[r]=e,lq[r]=new RegExp(e,n?"g":void 0)};de("NUMERICIDENTIFIER","0|[1-9]\\d*");de("NUMERICIDENTIFIERLOOSE","[0-9]+");de("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");de("MAINVERSION",`(${K[V.NUMERICIDENTIFIER]})\\.(${K[V.NUMERICIDENTIFIER]})\\.(${K[V.NUMERICIDENTIFIER]})`);de("MAINVERSIONLOOSE",`(${K[V.NUMERICIDENTIFIERLOOSE]})\\.(${K[V.NUMERICIDENTIFIERLOOSE]})\\.(${K[V.NUMERICIDENTIFIERLOOSE]})`);de("PRERELEASEIDENTIFIER",`(?:${K[V.NUMERICIDENTIFIER]}|${K[V.NONNUMERICIDENTIFIER]})`);de("PRERELEASEIDENTIFIERLOOSE",`(?:${K[V.NUMERICIDENTIFIERLOOSE]}|${K[V.NONNUMERICIDENTIFIER]})`);de("PRERELEASE",`(?:-(${K[V.PRERELEASEIDENTIFIER]}(?:\\.${K[V.PRERELEASEIDENTIFIER]})*))`);de("PRERELEASELOOSE",`(?:-?(${K[V.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${K[V.PRERELEASEIDENTIFIERLOOSE]})*))`);de("BUILDIDENTIFIER","[0-9A-Za-z-]+");de("BUILD",`(?:\\+(${K[V.BUILDIDENTIFIER]}(?:\\.${K[V.BUILDIDENTIFIER]})*))`);de("FULLPLAIN",`v?${K[V.MAINVERSION]}${K[V.PRERELEASE]}?${K[V.BUILD]}?`);de("FULL",`^${K[V.FULLPLAIN]}$`);de("LOOSEPLAIN",`[v=\\s]*${K[V.MAINVERSIONLOOSE]}${K[V.PRERELEASELOOSE]}?${K[V.BUILD]}?`);de("LOOSE",`^${K[V.LOOSEPLAIN]}$`);de("GTLT","((?:<|>)?=?)");de("XRANGEIDENTIFIERLOOSE",`${K[V.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);de("XRANGEIDENTIFIER",`${K[V.NUMERICIDENTIFIER]}|x|X|\\*`);de("XRANGEPLAIN",`[v=\\s]*(${K[V.XRANGEIDENTIFIER]})(?:\\.(${K[V.XRANGEIDENTIFIER]})(?:\\.(${K[V.XRANGEIDENTIFIER]})(?:${K[V.PRERELEASE]})?${K[V.BUILD]}?)?)?`);de("XRANGEPLAINLOOSE",`[v=\\s]*(${K[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[V.XRANGEIDENTIFIERLOOSE]})(?:${K[V.PRERELEASELOOSE]})?${K[V.BUILD]}?)?)?`);de("XRANGE",`^${K[V.GTLT]}\\s*${K[V.XRANGEPLAIN]}$`);de("XRANGELOOSE",`^${K[V.GTLT]}\\s*${K[V.XRANGEPLAINLOOSE]}$`);de("COERCE",`(^|[^\\d])(\\d{1,${op}})(?:\\.(\\d{1,${op}}))?(?:\\.(\\d{1,${op}}))?(?:$|[^\\d])`);de("COERCERTL",K[V.COERCE],!0);de("LONETILDE","(?:~>?)");de("TILDETRIM",`(\\s*)${K[V.LONETILDE]}\\s+`,!0);Ur.tildeTrimReplace="$1~";de("TILDE",`^${K[V.LONETILDE]}${K[V.XRANGEPLAIN]}$`);de("TILDELOOSE",`^${K[V.LONETILDE]}${K[V.XRANGEPLAINLOOSE]}$`);de("LONECARET","(?:\\^)");de("CARETTRIM",`(\\s*)${K[V.LONECARET]}\\s+`,!0);Ur.caretTrimReplace="$1^";de("CARET",`^${K[V.LONECARET]}${K[V.XRANGEPLAIN]}$`);de("CARETLOOSE",`^${K[V.LONECARET]}${K[V.XRANGEPLAINLOOSE]}$`);de("COMPARATORLOOSE",`^${K[V.GTLT]}\\s*(${K[V.LOOSEPLAIN]})$|^$`);de("COMPARATOR",`^${K[V.GTLT]}\\s*(${K[V.FULLPLAIN]})$|^$`);de("COMPARATORTRIM",`(\\s*)${K[V.GTLT]}\\s*(${K[V.LOOSEPLAIN]}|${K[V.XRANGEPLAIN]})`,!0);Ur.comparatorTrimReplace="$1$2$3";de("HYPHENRANGE",`^\\s*(${K[V.XRANGEPLAIN]})\\s+-\\s+(${K[V.XRANGEPLAIN]})\\s*$`);de("HYPHENRANGELOOSE",`^\\s*(${K[V.XRANGEPLAINLOOSE]})\\s+-\\s+(${K[V.XRANGEPLAINLOOSE]})\\s*$`);de("STAR","(<|>)?=?\\s*\\*");de("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");de("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ho=b((hM,Gy)=>{var fq=["includePrerelease","loose","rtl"],hq=t=>t?typeof t!="object"?{loose:!0}:fq.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};Gy.exports=hq});var ap=b((pM,Yy)=>{var Xy=/^[0-9]+$/,Jy=(t,e)=>{let n=Xy.test(t),r=Xy.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},pq=(t,e)=>Jy(e,t);Yy.exports={compareIdentifiers:Jy,rcompareIdentifiers:pq}});var It=b((gM,t_)=>{var Nc=$o(),{MAX_LENGTH:Qy,MAX_SAFE_INTEGER:Fc}=jo(),{re:Zy,t:e_}=Ci(),gq=Ho(),{compareIdentifiers:ps}=ap(),cn=class{constructor(e,n){if(n=gq(n),e instanceof cn){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Qy)throw new TypeError(`version is longer than ${Qy} characters`);Nc("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?Zy[e_.LOOSE]:Zy[e_.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Fc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Fc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Fc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Fc)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Nc("SemVer.compare",this.version,this.options,e),!(e instanceof cn)){if(typeof e=="string"&&e===this.version)return 0;e=new cn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof cn||(e=new cn(e,this.options)),ps(this.major,e.major)||ps(this.minor,e.minor)||ps(this.patch,e.patch)}comparePre(e){if(e instanceof cn||(e=new cn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(Nc("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ps(r,i)}while(++n)}compareBuild(e){e instanceof cn||(e=new cn(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(Nc("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ps(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(ps(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};t_.exports=cn});var Wr=b((mM,s_)=>{var{MAX_LENGTH:mq}=jo(),{re:n_,t:r_}=Ci(),i_=It(),vq=Ho(),yq=(t,e)=>{if(e=vq(e),t instanceof i_)return t;if(typeof t!="string"||t.length>mq||!(e.loose?n_[r_.LOOSE]:n_[r_.FULL]).test(t))return null;try{return new i_(t,e)}catch{return null}};s_.exports=yq});var a_=b((vM,o_)=>{"use strict";o_.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var u_=b((yM,c_)=>{"use strict";c_.exports=Re;Re.Node=bi;Re.create=Re;function Re(t){var e=this;if(e instanceof Re||(e=new Re),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}Re.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Re.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Re.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Re.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)wq(this,arguments[t]);return this.length};Re.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Cq(this,arguments[t]);return this.length};Re.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Re.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Re.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};Re.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};Re.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};Re.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};Re.prototype.map=function(t,e){e=e||this;for(var n=new Re,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};Re.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Re,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};Re.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};Re.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};Re.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};Re.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};Re.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Re;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};Re.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Re;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};Re.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=_q(this,i,n[r]);return s};Re.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function _q(t,e,n){var r=e===t.head?new bi(n,null,e,t):new bi(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function wq(t,e){t.tail=new bi(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Cq(t,e){t.head=new bi(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function bi(t,e,n,r){if(!(this instanceof bi))return new bi(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{a_()(Re)}catch{}});var p_=b((_M,h_)=>{"use strict";var bq=u_(),Si=Symbol("max"),Rr=Symbol("length"),gs=Symbol("lengthCalculator"),Wo=Symbol("allowStale"),Ri=Symbol("maxAge"),Sr=Symbol("dispose"),l_=Symbol("noDisposeOnSet"),wt=Symbol("lruList"),Wn=Symbol("cache"),f_=Symbol("updateAgeOnGet"),cp=()=>1,lp=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[Si]=e.max||1/0,r=e.length||cp;if(this[gs]=typeof r!="function"?cp:r,this[Wo]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ri]=e.maxAge||0,this[Sr]=e.dispose,this[l_]=e.noDisposeOnSet||!1,this[f_]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Si]=e||1/0,Uo(this)}get max(){return this[Si]}set allowStale(e){this[Wo]=!!e}get allowStale(){return this[Wo]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Ri]=e,Uo(this)}get maxAge(){return this[Ri]}set lengthCalculator(e){typeof e!="function"&&(e=cp),e!==this[gs]&&(this[gs]=e,this[Rr]=0,this[wt].forEach(n=>{n.length=this[gs](n.value,n.key),this[Rr]+=n.length})),Uo(this)}get lengthCalculator(){return this[gs]}get length(){return this[Rr]}get itemCount(){return this[wt].length}rforEach(e,n){n=n||this;for(let r=this[wt].tail;r!==null;){let i=r.prev;d_(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[wt].head;r!==null;){let i=r.next;d_(this,e,r,n),r=i}}keys(){return this[wt].toArray().map(e=>e.key)}values(){return this[wt].toArray().map(e=>e.value)}reset(){this[Sr]&&this[wt]&&this[wt].length&&this[wt].forEach(e=>this[Sr](e.key,e.value)),this[Wn]=new Map,this[wt]=new bq,this[Rr]=0}dump(){return this[wt].map(e=>Ic(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[wt]}set(e,n,r){if(r=r||this[Ri],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[gs](n,e);if(this[Wn].has(e)){if(s>this[Si])return ms(this,this[Wn].get(e)),!1;let c=this[Wn].get(e).value;return this[Sr]&&(this[l_]||this[Sr](e,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Rr]+=s-c.length,c.length=s,this.get(e),Uo(this),!0}let o=new dp(e,n,s,i,r);return o.length>this[Si]?(this[Sr]&&this[Sr](e,n),!1):(this[Rr]+=o.length,this[wt].unshift(o),this[Wn].set(e,this[wt].head),Uo(this),!0)}has(e){if(!this[Wn].has(e))return!1;let n=this[Wn].get(e).value;return!Ic(this,n)}get(e){return up(this,e,!0)}peek(e){return up(this,e,!1)}pop(){let e=this[wt].tail;return e?(ms(this,e),e.value):null}del(e){ms(this,this[Wn].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Wn].forEach((e,n)=>up(this,n,!1))}},up=(t,e,n)=>{let r=t[Wn].get(e);if(r){let i=r.value;if(Ic(t,i)){if(ms(t,r),!t[Wo])return}else n&&(t[f_]&&(r.value.now=Date.now()),t[wt].unshiftNode(r));return i.value}},Ic=(t,e)=>{if(!e||!e.maxAge&&!t[Ri])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Ri]&&n>t[Ri]},Uo=t=>{if(t[Rr]>t[Si])for(let e=t[wt].tail;t[Rr]>t[Si]&&e!==null;){let n=e.prev;ms(t,e),e=n}},ms=(t,e)=>{if(e){let n=e.value;t[Sr]&&t[Sr](n.key,n.value),t[Rr]-=n.length,t[Wn].delete(n.key),t[wt].removeNode(e)}},dp=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}},d_=(t,e,n,r)=>{let i=n.value;Ic(t,i)&&(ms(t,n),t[Wo]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};h_.exports=lp});var Rn=b((wM,m_)=>{var g_=It(),Sq=(t,e,n)=>new g_(t,n).compare(new g_(e,n));m_.exports=Sq});var Mc=b((CM,v_)=>{var Rq=Rn(),Dq=(t,e,n)=>Rq(t,e,n)===0;v_.exports=Dq});var fp=b((bM,y_)=>{var Tq=Rn(),xq=(t,e,n)=>Tq(t,e,n)!==0;y_.exports=xq});var Bo=b((SM,__)=>{var Pq=Rn(),qq=(t,e,n)=>Pq(t,e,n)>0;__.exports=qq});var Lc=b((RM,w_)=>{var Eq=Rn(),kq=(t,e,n)=>Eq(t,e,n)>=0;w_.exports=kq});var Ac=b((DM,C_)=>{var Oq=Rn(),Nq=(t,e,n)=>Oq(t,e,n)<0;C_.exports=Nq});var jc=b((TM,b_)=>{var Fq=Rn(),Iq=(t,e,n)=>Fq(t,e,n)<=0;b_.exports=Iq});var hp=b((xM,S_)=>{var Mq=Mc(),Lq=fp(),Aq=Bo(),jq=Lc(),$q=Ac(),Hq=jc(),Uq=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return Mq(t,n,r);case"!=":return Lq(t,n,r);case">":return Aq(t,n,r);case">=":return jq(t,n,r);case"<":return $q(t,n,r);case"<=":return Hq(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};S_.exports=Uq});var Ko=b((PM,P_)=>{var zo=Symbol("SemVer ANY"),vs=class{static get ANY(){return zo}constructor(e,n){if(n=Wq(n),e instanceof vs){if(e.loose===!!n.loose)return e;e=e.value}gp("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===zo?this.value="":this.value=this.operator+this.semver.version,gp("comp",this)}parse(e){let n=this.options.loose?R_[D_.COMPARATORLOOSE]:R_[D_.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new T_(r[2],this.options.loose):this.semver=zo}toString(){return this.value}test(e){if(gp("Comparator.test",e,this.options.loose),this.semver===zo||e===zo)return!0;if(typeof e=="string")try{e=new T_(e,this.options)}catch{return!1}return pp(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof vs))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new x_(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new x_(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=pp(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=pp(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&o||a||c}};P_.exports=vs;var Wq=Ho(),{re:R_,t:D_}=Ci(),pp=hp(),gp=$o(),T_=It(),x_=Dn()});var Dn=b((qM,O_)=>{var Di=class{constructor(e,n){if(n=zq(n),e instanceof Di)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new Di(e.raw,n);if(e instanceof mp)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!E_(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Jq(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=q_.get(r);if(i)return i;let s=this.options.loose,o=s?Zt[Wt.HYPHENRANGELOOSE]:Zt[Wt.HYPHENRANGE];e=e.replace(o,oE(this.options.includePrerelease)),et("hyphen replace",e),e=e.replace(Zt[Wt.COMPARATORTRIM],Vq),et("comparator trim",e),e=e.replace(Zt[Wt.TILDETRIM],Gq),e=e.replace(Zt[Wt.CARETTRIM],Xq),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(d=>Yq(d,this.options)).join(" ").split(/\s+/).map(d=>sE(d,this.options));s&&(a=a.filter(d=>(et("loose invalid filter",d,this.options),!!d.match(Zt[Wt.COMPARATORLOOSE])))),et("range list",a);let c=new Map,u=a.map(d=>new mp(d,this.options));for(let d of u){if(E_(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return q_.set(r,l),l}intersects(e,n){if(!(e instanceof Di))throw new TypeError("a Range is required");return this.set.some(r=>k_(r,n)&&e.set.some(i=>k_(i,n)&&r.every(s=>i.every(o=>s.intersects(o,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Kq(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(aE(this.set[n],e,this.options))return!0;return!1}};O_.exports=Di;var Bq=p_(),q_=new Bq({max:1e3}),zq=Ho(),mp=Ko(),et=$o(),Kq=It(),{re:Zt,t:Wt,comparatorTrimReplace:Vq,tildeTrimReplace:Gq,caretTrimReplace:Xq}=Ci(),E_=t=>t.value==="<0.0.0-0",Jq=t=>t.value==="",k_=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},Yq=(t,e)=>(et("comp",t,e),t=eE(t,e),et("caret",t),t=Qq(t,e),et("tildes",t),t=nE(t,e),et("xrange",t),t=iE(t,e),et("stars",t),t),Bt=t=>!t||t.toLowerCase()==="x"||t==="*",Qq=(t,e)=>t.trim().split(/\s+/).map(n=>Zq(n,e)).join(" "),Zq=(t,e)=>{let n=e.loose?Zt[Wt.TILDELOOSE]:Zt[Wt.TILDE];return t.replace(n,(r,i,s,o,a)=>{et("tilde",t,r,i,s,o,a);let c;return Bt(i)?c="":Bt(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Bt(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(et("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,et("tilde return",c),c})},eE=(t,e)=>t.trim().split(/\s+/).map(n=>tE(n,e)).join(" "),tE=(t,e)=>{et("caret",t,e);let n=e.loose?Zt[Wt.CARETLOOSE]:Zt[Wt.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,o,a,c)=>{et("caret",t,i,s,o,a,c);let u;return Bt(s)?u="":Bt(o)?u=`>=${s}.0.0${r} <${+s+1}.0.0-0`:Bt(a)?s==="0"?u=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:c?(et("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(et("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),et("caret return",u),u})},nE=(t,e)=>(et("replaceXRanges",t,e),t.split(/\s+/).map(n=>rE(n,e)).join(" ")),rE=(t,e)=>{t=t.trim();let n=e.loose?Zt[Wt.XRANGELOOSE]:Zt[Wt.XRANGE];return t.replace(n,(r,i,s,o,a,c)=>{et("xRange",t,r,i,s,o,a,c);let u=Bt(s),l=u||Bt(o),d=l||Bt(a),p=d;return i==="="&&p&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&p?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(c="-0"),r=`${i+s}.${o}.${a}${c}`):l?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:d&&(r=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),et("xRange return",r),r})},iE=(t,e)=>(et("replaceStars",t,e),t.trim().replace(Zt[Wt.STAR],"")),sE=(t,e)=>(et("replaceGTE0",t,e),t.trim().replace(Zt[e.includePrerelease?Wt.GTE0PRE:Wt.GTE0],"")),oE=t=>(e,n,r,i,s,o,a,c,u,l,d,p,h)=>(Bt(r)?n="":Bt(i)?n=`>=${r}.0.0${t?"-0":""}`:Bt(s)?n=`>=${r}.${i}.0${t?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Bt(u)?c="":Bt(l)?c=`<${+u+1}.0.0-0`:Bt(d)?c=`<${u}.${+l+1}.0-0`:p?c=`<=${u}.${l}.${d}-${p}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),aE=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(et(t[r].semver),t[r].semver!==mp.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ys=b((EM,N_)=>{var cE=Dn(),uE=(t,e,n)=>{try{e=new cE(e,n)}catch{return!1}return e.test(t)};N_.exports=uE});var I_=b(un=>{"use strict";var lE=un&&un.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),vp=un&&un.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&lE(e,t,n)};Object.defineProperty(un,"__esModule",{value:!0});un.DiagnosticPullMode=un.vsdiag=void 0;vp(ne(),un);vp(be(),un);var F_=xf();Object.defineProperty(un,"vsdiag",{enumerable:!0,get:function(){return F_.vsdiag}});Object.defineProperty(un,"DiagnosticPullMode",{enumerable:!0,get:function(){return F_.DiagnosticPullMode}});vp(ip(),un)});var Ti=b(zt=>{"use strict";var dE=zt&&zt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),A_=zt&&zt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&dE(e,t,n)};Object.defineProperty(zt,"__esModule",{value:!0});zt.SettingMonitor=zt.LanguageClient=zt.TransportKind=void 0;var Dr=require("child_process"),yp=require("fs"),_p=require("path"),zr=require("vscode"),Ke=yn(),M_=ip(),fE=Wy(),tt=sp(),hE=Wr(),pE=ys();A_(sp(),zt);A_(I_(),zt);var L_="^1.67.0",st;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(st=zt.TransportKind||(zt.TransportKind={}));var Br;(function(t){function e(n){let r=n;return r&&r.kind===st.socket&&Ke.number(r.port)}t.isSocket=e})(Br||(Br={}));var wp;(function(t){function e(n){return Ke.string(n.command)}t.is=e})(wp||(wp={}));var Cp;(function(t){function e(n){return Ke.string(n.module)}t.is=e})(Cp||(Cp={}));var bp;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(bp||(bp={}));var Sp;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(Sp||(Sp={}));var Rp=class extends M_.BaseLanguageClient{constructor(e,n,r,i,s){let o,a,c,u,l;Ke.string(n)?(o=e,a=n,c=r,u=i,l=!!s):(o=e.toLowerCase(),a=e,c=n,u=r,l=i),l===void 0&&(l=!1),super(o,a,u),this._serverOptions=c,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(d){throw Ke.string(d.message)&&this.outputChannel.appendLine(d.message),d}}checkVersion(){let e=hE(zr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${zr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!pE(e,L_))throw new Error(`The language client requires VS Code version ${L_} but received version ${zr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let n=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(n),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,fE.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(l,d){if(!l&&!d)return;let p=Object.create(null);return Object.keys(process.env).forEach(h=>p[h]=process.env[h]),d&&(p.ELECTRON_RUN_AS_NODE="1",p.ELECTRON_NO_ASAR="1"),l&&Object.keys(l).forEach(h=>p[h]=l[h]),p}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let l=process.execArgv;return l?l.some(d=>r.some(p=>d.startsWith(p))||i.some(p=>d===p)):!1}function o(l){if(l.stdin===null||l.stdout===null||l.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Ke.func(a))return a().then(l=>{if(M_.MessageTransports.is(l))return this._isDetached=!!l.detached,l;if(bp.is(l))return this._isDetached=!!l.detached,{reader:new tt.StreamMessageReader(l.reader),writer:new tt.StreamMessageWriter(l.writer)};{let d;return Sp.is(l)?(d=l.process,this._isDetached=l.detached):(d=l,this._isDetached=!1),d.stderr.on("data",p=>this.outputChannel.append(Ke.string(p)?p:p.toString(e))),{reader:new tt.StreamMessageReader(d.stdout),writer:new tt.StreamMessageWriter(d.stdin)}}});let c,u=a;return u.run||u.debug?this._forceDebug||s()?(c=u.debug,this._isInDebugMode=!0):(c=u.run,this._isInDebugMode=!1):c=a,this._getServerWorkingDir(c.options).then(l=>{if(Cp.is(c)&&c.module){let d=c,p=d.transport||st.stdio;if(d.runtime){let h=[],g=d.options??Object.create(null);g.execArgv&&g.execArgv.forEach(T=>h.push(T)),h.push(d.module),d.args&&d.args.forEach(T=>h.push(T));let y=Object.create(null);y.cwd=l,y.env=n(g.env,!1);let _=this._getRuntimePath(d.runtime,l),S;if(p===st.ipc?(y.stdio=[null,null,null,"ipc"],h.push("--node-ipc")):p===st.stdio?h.push("--stdio"):p===st.pipe?(S=(0,tt.generateRandomPipeName)(),h.push(`--pipe=${S}`)):Br.isSocket(p)&&h.push(`--socket=${p.port}`),h.push(`--clientProcessId=${process.pid.toString()}`),p===st.ipc||p===st.stdio){let T=Dr.spawn(_,h,y);return!T||!T.pid?_s(T,`Launching server using runtime ${_} failed.`):(this._serverProcess=T,T.stderr.on("data",C=>this.outputChannel.append(Ke.string(C)?C:C.toString(e))),p===st.ipc?(T.stdout.on("data",C=>this.outputChannel.append(Ke.string(C)?C:C.toString(e))),Promise.resolve({reader:new tt.IPCMessageReader(T),writer:new tt.IPCMessageWriter(T)})):Promise.resolve({reader:new tt.StreamMessageReader(T.stdout),writer:new tt.StreamMessageWriter(T.stdin)}))}else{if(p===st.pipe)return(0,tt.createClientPipeTransport)(S).then(T=>{let C=Dr.spawn(_,h,y);return!C||!C.pid?_s(C,`Launching server using runtime ${_} failed.`):(this._serverProcess=C,C.stderr.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),C.stdout.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),T.onConnected().then(D=>({reader:D[0],writer:D[1]})))});if(Br.isSocket(p))return(0,tt.createClientSocketTransport)(p.port).then(T=>{let C=Dr.spawn(_,h,y);return!C||!C.pid?_s(C,`Launching server using runtime ${_} failed.`):(this._serverProcess=C,C.stderr.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),C.stdout.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),T.onConnected().then(D=>({reader:D[0],writer:D[1]})))})}}else{let h;return new Promise((g,y)=>{let _=(d.args&&d.args.slice())??[];p===st.ipc?_.push("--node-ipc"):p===st.stdio?_.push("--stdio"):p===st.pipe?(h=(0,tt.generateRandomPipeName)(),_.push(`--pipe=${h}`)):Br.isSocket(p)&&_.push(`--socket=${p.port}`),_.push(`--clientProcessId=${process.pid.toString()}`);let S=d.options??Object.create(null);if(S.env=n(S.env,!0),S.execArgv=S.execArgv||[],S.cwd=l,S.silent=!0,p===st.ipc||p===st.stdio){let T=Dr.fork(d.module,_||[],S);o(T),this._serverProcess=T,T.stderr.on("data",C=>this.outputChannel.append(Ke.string(C)?C:C.toString(e))),p===st.ipc?(T.stdout.on("data",C=>this.outputChannel.append(Ke.string(C)?C:C.toString(e))),g({reader:new tt.IPCMessageReader(this._serverProcess),writer:new tt.IPCMessageWriter(this._serverProcess)})):g({reader:new tt.StreamMessageReader(T.stdout),writer:new tt.StreamMessageWriter(T.stdin)})}else p===st.pipe?(0,tt.createClientPipeTransport)(h).then(T=>{let C=Dr.fork(d.module,_||[],S);o(C),this._serverProcess=C,C.stderr.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),C.stdout.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),T.onConnected().then(D=>{g({reader:D[0],writer:D[1]})},y)},y):Br.isSocket(p)&&(0,tt.createClientSocketTransport)(p.port).then(T=>{let C=Dr.fork(d.module,_||[],S);o(C),this._serverProcess=C,C.stderr.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),C.stdout.on("data",D=>this.outputChannel.append(Ke.string(D)?D:D.toString(e))),T.onConnected().then(D=>{g({reader:D[0],writer:D[1]})},y)},y)})}}else if(wp.is(c)&&c.command){let d=c,p=c.args!==void 0?c.args.slice(0):[],h,g=c.transport;if(g===st.stdio)p.push("--stdio");else if(g===st.pipe)h=(0,tt.generateRandomPipeName)(),p.push(`--pipe=${h}`);else if(Br.isSocket(g))p.push(`--socket=${g.port}`);else if(g===st.ipc)throw new Error("Transport kind ipc is not support for command executable");let y=Object.assign({},d.options);if(y.cwd=y.cwd||l,g===void 0||g===st.stdio){let _=Dr.spawn(d.command,p,y);return!_||!_.pid?_s(_,`Launching server using command ${d.command} failed.`):(_.stderr.on("data",S=>this.outputChannel.append(Ke.string(S)?S:S.toString(e))),this._serverProcess=_,this._isDetached=!!y.detached,Promise.resolve({reader:new tt.StreamMessageReader(_.stdout),writer:new tt.StreamMessageWriter(_.stdin)}))}else{if(g===st.pipe)return(0,tt.createClientPipeTransport)(h).then(_=>{let S=Dr.spawn(d.command,p,y);return!S||!S.pid?_s(S,`Launching server using command ${d.command} failed.`):(this._serverProcess=S,this._isDetached=!!y.detached,S.stderr.on("data",T=>this.outputChannel.append(Ke.string(T)?T:T.toString(e))),S.stdout.on("data",T=>this.outputChannel.append(Ke.string(T)?T:T.toString(e))),_.onConnected().then(T=>({reader:T[0],writer:T[1]})))});if(Br.isSocket(g))return(0,tt.createClientSocketTransport)(g.port).then(_=>{let S=Dr.spawn(d.command,p,y);return!S||!S.pid?_s(S,`Launching server using command ${d.command} failed.`):(this._serverProcess=S,this._isDetached=!!y.detached,S.stderr.on("data",T=>this.outputChannel.append(Ke.string(T)?T:T.toString(e))),S.stdout.on("data",T=>this.outputChannel.append(Ke.string(T)?T:T.toString(e))),_.onConnected().then(T=>({reader:T[0],writer:T[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,n){if(_p.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=_p.join(r,e);if(yp.existsSync(i))return i}if(n!==void 0){let i=_p.join(n,e);if(yp.existsSync(i))return i}return e}_mainGetRootPath(){let e=zr.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{yp.lstat(n,(i,s)=>{r(!i&&s.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch{}return n===void 0||typeof n.locale!="string"?"en":n.locale}};zt.LanguageClient=Rp;var Dp=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return zr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new zr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?zr.workspace.getConfiguration(n).get(r,!1):zr.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};zt.SettingMonitor=Dp;function _s(t,e){return t===null?Promise.reject(e):new Promise((n,r)=>{t.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var $_=b((NM,j_)=>{"use strict";j_.exports=Ti()});var H_=b(en=>{Object.defineProperty(en,"__esModule",{value:!0});en.FileKind=en.MirrorBehaviorCapabilities=en.FileRangeCapabilities=en.FileCapabilities=void 0;var gE;(function(t){t.full={diagnostic:!0,foldingRange:!0,documentFormatting:!0,documentSymbol:!0,codeAction:!0,inlayHint:!0}})(gE=en.FileCapabilities||(en.FileCapabilities={}));var mE;(function(t){t.full={hover:!0,references:!0,definition:!0,rename:!0,completion:!0,diagnostic:!0,semanticTokens:!0}})(mE=en.FileRangeCapabilities||(en.FileRangeCapabilities={}));var vE;(function(t){t.full={references:!0,definition:!0,rename:!0}})(vE=en.MirrorBehaviorCapabilities||(en.MirrorBehaviorCapabilities={}));var yE;(function(t){t[t.TextFile=0]="TextFile",t[t.TypeScriptHostFile=1]="TypeScriptHostFile"})(yE=en.FileKind||(en.FileKind={}))});var U_=b(xi=>{var _E=xi&&xi.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),wE=xi&&xi.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&_E(e,t,n)};Object.defineProperty(xi,"__esModule",{value:!0});wE(ne(),xi)});var sr=b(ir=>{var CE=ir&&ir.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),$c=ir&&ir.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&CE(e,t,n)};Object.defineProperty(ir,"__esModule",{value:!0});$c(Pd(),ir);$c(qd(),ir);$c(H_(),ir);$c(U_(),ir)});var B_=b(ws=>{var W_=ws&&ws.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(ws,"__esModule",{value:!0});ws.register=void 0;var Tn=require("vscode"),bE=sr();function SE(t,e,n){return W_(this,void 0,void 0,function*(){let r=!1,i;s(),Tn.workspace.onDidChangeTextDocument(o,null,t.subscriptions),Tn.window.onDidChangeActiveTextEditor(s,null,t.subscriptions);function s(){r=!1;let c=Tn.window.activeTextEditor;if(!c)return;let u=c.document;n(u)&&(r=!0)}function o({document:c,contentChanges:u,reason:l}){var d;if(!r||u.length===0||l===Tn.TextDocumentChangeReason.Undo||l===Tn.TextDocumentChangeReason.Redo)return;let p=(d=Tn.window.activeTextEditor)===null||d===void 0?void 0:d.document;if(c!==p)return;i&&(clearTimeout(i),i=void 0);let h=u[u.length-1];a(c,h,(g,y,_,S)=>W_(this,void 0,void 0,function*(){for(let T of e){let C=Object.assign(Object.assign({},T.code2ProtocolConverter.asTextDocumentPositionParams(g,y)),{options:{lastChange:Object.assign(Object.assign({},_),{range:T.code2ProtocolConverter.asRange(_.range)})}});if(S())return;let D=yield T.sendRequest(bE.AutoInsertRequest.type,C);if(D!=null)return typeof D=="string"?D:T.protocol2CodeConverter.asTextEdit(D)}}))}function a(c,u,l){let d=u.range.start,p=c.version;i=setTimeout(()=>{let h=new Tn.Position(d.line,d.character+u.text.length);l(c,h,u,()=>{var g;return((g=Tn.window.activeTextEditor)===null||g===void 0?void 0:g.document.version)!==p}).then(g=>{if(g&&r){let y=Tn.window.activeTextEditor;if(y){let _=y.document;if(c===_&&_.version===p)if(typeof g=="string"){let S=y.selections;S.length&&S.some(T=>T.active.isEqual(h))?y.insertSnippet(new Tn.SnippetString(g),S.map(T=>T.active)):y.insertSnippet(new Tn.SnippetString(g),h)}else y.insertSnippet(new Tn.SnippetString(g.newText),g.range)}}}),i=void 0},100)}})}ws.register=SE});var z_=b(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.toString=Cs.getLength=void 0;function RE(t){let e=0;for(let n of t)e+=typeof n=="string"?n.length:n[0].length;return e}Cs.getLength=RE;function DE(t){return t.map(e=>typeof e=="string"?e:e[0]).join("")}Cs.toString=DE});var K_=b(Bn=>{var TE=Bn&&Bn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),xE=Bn&&Bn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&TE(e,t,n)};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.buildMappings=Bn.SourceMap=void 0;xE(z_(),Bn);var Tp=class{get memo(){if(!this._memo){let r=function(i){let s=new Set;for(let c of n.mappings)s.add(c[i][0]),s.add(c[i][1]);let o=[...s].sort((c,u)=>c-u).map(c=>({offset:c,mappings:new Set}));for(let c of n.mappings){let u=a(c[i][0]),l=a(c[i][1]);for(let d=u;d<=l;d++)o[d].mappings.add(c)}return o;function a(c){let u=0,l=o.length-1;for(;u<=l;){let d=Math.floor((u+l)/2),p=o[d];if(p.offset<c)u=d+1;else if(p.offset>c)l=d-1;else return d}}};var e=r;let n=this;this._memo={sourceRange:r("sourceRange"),generatedRange:r("generatedRange")}}return this._memo}constructor(e){this.mappings=e}toSourceOffset(e,n=!1){for(let r of this.matching(e,"generatedRange","sourceRange",n))return r}toGeneratedOffset(e,n=!1){for(let r of this.matching(e,"sourceRange","generatedRange",n))return r}toSourceOffsets(e,n=!1){return this.matching(e,"generatedRange","sourceRange",n)}toGeneratedOffsets(e,n=!1){return this.matching(e,"sourceRange","generatedRange",n)}*matching(e,n,r,i){let s=this.memo[n];if(s.length===0)return;let{low:o,high:a}=this.binarySearchMemo(s,e),c=new Set;for(let u=o;u<=a;u++)for(let l of s[u].mappings){if(c.has(l))continue;c.add(l);let d=this.matchOffset(e,l[n],l[r],i);d!==void 0&&(yield[d,l])}}matchOffset(e,n,r,i){if(e>=n[0]&&e<=n[1]){let s=r[0]+e-n[0];return i&&(s+=r[1]-r[0]-(n[1]-n[0])),s}}binarySearchMemo(e,n){let r=0,i=e.length-1;for(;r<=i;){let s=Math.floor((r+i)/2),o=e[s];if(o.offset<n)r=s+1;else if(o.offset>n)i=s-1;else{r=s,i=s;break}}return{low:Math.max(Math.min(r,i,e.length-1),0),high:Math.min(Math.max(r,i,0),e.length-1)}}};Bn.SourceMap=Tp;function PE(t){let e=0,n=[];for(let r of t)typeof r=="string"?e+=r.length:(n.push({generatedRange:[e,e+r[0].length],source:r[1],sourceRange:typeof r[2]=="number"?[r[2],r[2]+r[0].length]:r[2],data:r[3]}),e+=r[0].length);return n}Bn.buildMappings=PE});var G_=b(Ss=>{var Hc=Ss&&Ss.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.register=void 0;var Ce=require("vscode"),qE=Ti(),V_=sr(),EE=K_(),xp="volar-virtual-file",Pp=Ce.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",overviewRulerColor:"blue",overviewRulerLane:Ce.OverviewRulerLane.Right,light:{borderColor:"darkblue"},dark:{borderColor:"lightblue"}}),bs=Ce.window.createTextEditorDecorationType({cursor:"crosshair",light:{backgroundColor:"lightblue"},dark:{backgroundColor:"darkblue"}});function kE(t,e,n){return Hc(this,void 0,void 0,function*(){class r{provideHover(g,y,_){return Hc(this,void 0,void 0,function*(){let S=o.get(g.uri.toString());if(!S)return;let T=[];for(let[C,D,E]of S){let W=E.toSourceOffset(g.offsetAt(y));W&&T.push([C,W[1].data])}if(T.length!==0)return new Ce.Hover(T.map(([C,D])=>[C,"```json",JSON.stringify(D,null,2),"```"].join(`
`)))})}}Ce.languages.registerHoverProvider({scheme:xp},new r);let i=new Map,s=new Map,o=new Map,a=new Ce.EventEmitter,c=new Map,u,l;e.subscriptions.push(Ce.window.onDidChangeActiveTextEditor(d)),e.subscriptions.push(Ce.window.onDidChangeTextEditorSelection(d)),e.subscriptions.push(Ce.window.onDidChangeVisibleTextEditors(d)),e.subscriptions.push(Ce.workspace.onDidChangeTextDocument(h=>{if(i.has(h.document.uri.toString())){let g=i.get(h.document.uri.toString());clearTimeout(u),u=setTimeout(()=>{g?.forEach(y=>{a.fire(Ce.Uri.parse(y))})},100)}})),e.subscriptions.push(Ce.workspace.registerTextDocumentContentProvider(xp,{onDidChange:a.event,provideTextDocumentContent(h){return Hc(this,void 0,void 0,function*(){let g=h.with({scheme:"file"}).fsPath,y=s.get(h.toString());if(y){let _=yield n.sendRequest(V_.GetVirtualFileRequest.type,{sourceFileUri:y.document.uri.toString(),virtualFileName:g});return o.set(h.toString(),[]),Object.entries(_.mappings).forEach(([S,T])=>{var C,D;let E=Ce.window.visibleTextEditors.find(W=>W.document.uri.toString()===S);E&&((C=o.get(h.toString()))===null||C===void 0||C.push([E.document.uri.toString(),E.document.version,new EE.SourceMap(T)]),i.has(S)||i.set(S,new Set),(D=i.get(S))===null||D===void 0||D.add(h.toString()))}),c.set(h.toString(),qE.TextDocument.create("","",0,_.content)),clearTimeout(l),l=setTimeout(d,100),_.content}})}})),e.subscriptions.push(Ce.commands.registerCommand(t,()=>Hc(this,void 0,void 0,function*(){let h=Ce.window.activeTextEditor;if(h){let y=(yield n.sendRequest(V_.GetVirtualFileNamesRequest.type,n.code2ProtocolConverter.asTextDocumentIdentifier(h.document))).map(_=>Ce.Uri.file(_).with({scheme:xp}));i.set(h.document.uri.toString(),new Set(y.map(_=>_.toString())));for(let _ of y)s.set(_.toString(),h),Ce.window.showTextDocument(_,{viewColumn:Ce.ViewColumn.Two,preview:!1})}})));function d(){for(let[h,g]of o){let y=Ce.window.visibleTextEditors.find(T=>T.document.uri.toString()===h),_=[],S=[];if(y){for(let[T,C,D]of g){let E=Ce.window.visibleTextEditors.find(W=>W.document.uri.toString()===T);if(E&&E.document.version===C){let W=D.mappings.map(j=>new Ce.Range(E.document.positionAt(j.sourceRange[0]),E.document.positionAt(j.sourceRange[1])));if(E.setDecorations(Pp,W),_=_.concat(D.mappings.map(j=>new Ce.Range(p(h,j.generatedRange[0]),p(h,j.generatedRange[1])))),Ce.window.activeTextEditor){let j=Ce.window.activeTextEditor.selection,Q=Ce.window.activeTextEditor.document.offsetAt(j.start);if(E.setDecorations(bs,[]),Ce.window.activeTextEditor===E){let re=[...D.toGeneratedOffsets(Q)];E.setDecorations(bs,re.map(se=>new Ce.Range(E.document.positionAt(se[1].sourceRange[0]),E.document.positionAt(se[1].sourceRange[1])))),S=S.concat(re.map(se=>new Ce.Range(p(h,se[1].generatedRange[0]),p(h,se[1].generatedRange[1]))));let ue=re.sort((se,Fe)=>se[1].generatedRange[0]-Fe[1].generatedRange[0])[0];ue&&y.revealRange(new Ce.Range(p(h,ue[1].generatedRange[0]),p(h,ue[1].generatedRange[1])))}else if(Ce.window.activeTextEditor===y){let re=[...D.toSourceOffsets(Q)];E.setDecorations(bs,re.map(se=>new Ce.Range(E.document.positionAt(se[1].sourceRange[0]),E.document.positionAt(se[1].sourceRange[1])))),S=S.concat(re.map(se=>new Ce.Range(p(h,se[1].generatedRange[0]),p(h,se[1].generatedRange[1]))));let ue=re.sort((se,Fe)=>se[1].sourceRange[0]-Fe[1].sourceRange[0])[0];ue&&E.revealRange(new Ce.Range(E.document.positionAt(ue[1].sourceRange[0]),E.document.positionAt(ue[1].sourceRange[1])))}}else E.setDecorations(bs,[])}}y.setDecorations(Pp,_),y.setDecorations(bs,S)}else for(let[T]of g){let C=Ce.window.visibleTextEditors.find(D=>D.document.uri.toString()===T);C&&(C.setDecorations(Pp,[]),C.setDecorations(bs,[]))}}}function p(h,g){let _=c.get(h).positionAt(g);return new Ce.Position(_.line,_.character)}})}Ss.register=kE});var X_=b(Rs=>{var OE=Rs&&Rs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.register=void 0;var qp=require("vscode"),NE=sr();function FE(t,e,n){return OE(this,void 0,void 0,function*(){e.subscriptions.push(qp.commands.registerCommand(t,()=>{qp.window.activeTextEditor&&n.sendNotification(NE.WriteVirtualFilesNotification.type,n.code2ProtocolConverter.asTextDocumentIdentifier(qp.window.activeTextEditor.document))}))})}Rs.register=FE});var Np=b(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});var Ep;function kp(){if(Ep===void 0)throw new Error("No runtime abstraction layer installed");return Ep}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Ep=n}t.install=e})(kp||(kp={}));Op.default=kp});var Ip=b(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.config=Ve.loadMessageBundle=Ve.localize=Ve.format=Ve.setPseudo=Ve.isPseudo=Ve.isDefined=Ve.BundleFormat=Ve.MessageFormat=void 0;var Y_=Np(),IE;(function(t){t.file="file",t.bundle="bundle",t.both="both"})(IE=Ve.MessageFormat||(Ve.MessageFormat={}));var ME;(function(t){t.standalone="standalone",t.languagePack="languagePack"})(ME=Ve.BundleFormat||(Ve.BundleFormat={}));var J_;(function(t){function e(n){var r=n;return r&&Fp(r.key)&&Fp(r.comment)}t.is=e})(J_||(J_={}));function Fp(t){return typeof t<"u"}Ve.isDefined=Fp;Ve.isPseudo=!1;function LE(t){Ve.isPseudo=t}Ve.setPseudo=LE;function Q_(t,e){var n;return Ve.isPseudo&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),e.length===0?n=t:n=t.replace(/\{(\d+)\}/g,function(r,i){var s=i[0],o=e[s],a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),n}Ve.format=Q_;function AE(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return Q_(e,n)}Ve.localize=AE;function jE(t){return(0,Y_.default)().loadMessageBundle(t)}Ve.loadMessageBundle=jE;function $E(t){return(0,Y_.default)().config(t)}Ve.config=$E});var rw=b(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.config=or.loadMessageBundle=or.BundleFormat=or.MessageFormat=void 0;var zn=require("path"),xn=require("fs"),HE=Np(),tn=Ip(),ew=Ip();Object.defineProperty(or,"MessageFormat",{enumerable:!0,get:function(){return ew.MessageFormat}});Object.defineProperty(or,"BundleFormat",{enumerable:!0,get:function(){return ew.BundleFormat}});var tw=Object.prototype.toString;function UE(t){return tw.call(t)==="[object Number]"}function Tr(t){return tw.call(t)==="[object String]"}function WE(t){return t===!0||t===!1}function Ds(t){return JSON.parse(xn.readFileSync(t,"utf8"))}var Uc,we;function BE(){if(we={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:tn.MessageFormat.bundle},Tr(process.env.VSCODE_NLS_CONFIG))try{var t=JSON.parse(process.env.VSCODE_NLS_CONFIG),e=void 0;if(t.availableLanguages){var n=t.availableLanguages["*"];Tr(n)&&(e=n)}if(Tr(t.locale)&&(we.locale=t.locale.toLowerCase()),e===void 0?we.language=we.locale:e!=="en"&&(we.language=e),WE(t._languagePackSupport)&&(we.languagePackSupport=t._languagePackSupport),Tr(t._cacheRoot)&&(we.cacheRoot=t._cacheRoot),Tr(t._languagePackId)&&(we.languagePackId=t._languagePackId),Tr(t._translationsConfigFile)){we.translationsConfigFile=t._translationsConfigFile;try{we.translationsConfig=Ds(we.translationsConfigFile)}catch{if(t._corruptedFile){var r=zn.dirname(t._corruptedFile);xn.exists(r,function(s){s&&xn.writeFile(t._corruptedFile,"corrupted","utf8",function(o){console.error(o)})})}}}}catch{}(0,tn.setPseudo)(we.locale==="pseudo"),Uc=Object.create(null)}BE();function zE(){return we.languagePackSupport===!0&&we.cacheRoot!==void 0&&we.languagePackId!==void 0&&we.translationsConfigFile!==void 0&&we.translationsConfig!==void 0}function Mp(t){return function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(UE(e)){if(e>=t.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack));return}return(0,tn.format)(t[e],r)}else{if(Tr(n))return console.warn("Message ".concat(n," didn't get externalized correctly.")),(0,tn.format)(n,r);console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}}function KE(t){var e;if(we.cacheLanguageResolution&&e)e=e;else{if(tn.isPseudo||!we.language)e=".nls.json";else for(var n=we.language;n;){var r=".nls."+n+".json";if(xn.existsSync(t+r)){e=r;break}else{var i=n.lastIndexOf("-");i>0?n=n.substring(0,i):(e=".nls.json",n=null)}}we.cacheLanguageResolution&&(e=e)}return t+e}function VE(t){for(var e=we.language;e;){var n=zn.join(t,"nls.bundle.".concat(e,".json"));if(xn.existsSync(n))return n;var r=e.lastIndexOf("-");r>0?e=e.substring(0,r):e=void 0}if(e===void 0){var n=zn.join(t,"nls.bundle.json");if(xn.existsSync(n))return n}}function GE(t){var e=Ds(zn.join(t,"nls.metadata.json")),n=Object.create(null);for(var r in e){var i=e[r];n[r]=i.messages}return n}function XE(t,e){var n=we.translationsConfig[t.id];if(n){var r=Ds(n).contents,i=Ds(zn.join(e,"nls.metadata.json")),s=Object.create(null);for(var o in i){var a=i[o],c=r["".concat(t.outDir,"/").concat(o)];if(c){for(var u=[],l=0;l<a.keys.length;l++){var d=a.keys[l],p=Tr(d)?d:d.key,h=c[p];h===void 0&&(h=a.messages[l]),u.push(h)}s[o]=u}else s[o]=a.messages}return s}}function JE(t){var e=new Date;xn.utimes(t,e,e,function(){})}function Lp(t,e){return Uc[t]=e,e}function YE(t,e){var n,r=zn.join(we.cacheRoot,"".concat(t.id,"-").concat(t.hash,".json")),i=!1,s=!1;try{return n=JSON.parse(xn.readFileSync(r,{encoding:"utf8",flag:"r"})),JE(r),n}catch(o){if(o.code==="ENOENT")s=!0;else if(o instanceof SyntaxError)console.log("Syntax error parsing message bundle: ".concat(o.message,".")),xn.unlink(r,function(a){a&&console.error("Deleting corrupted bundle ".concat(r," failed."))}),i=!0;else throw o}if(n=XE(t,e),!n||i)return n;if(s)try{xn.writeFileSync(r,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(o){if(o.code==="EEXIST")return n;throw o}return n}function Z_(t){try{return GE(t)}catch(e){console.log("Generating default bundle from meta data failed.",e);return}}function QE(t,e){var n;if(zE())try{n=YE(t,e)}catch(i){console.log("Load or create bundle failed ",i)}if(!n){if(we.languagePackSupport)return Z_(e);var r=VE(e);if(r)try{return Ds(r)}catch(i){console.log("Loading in the box message bundle failed.",i)}n=Z_(e)}return n}function ZE(t){for(var e,n=zn.dirname(t);e=zn.join(n,"nls.metadata.header.json"),!xn.existsSync(e);){var r=zn.dirname(n);if(r===n){e=void 0;break}else n=r}return e}function Ap(t){if(!t)return tn.localize;var e=zn.extname(t);if(e&&(t=t.substr(0,t.length-e.length)),we.messageFormat===tn.MessageFormat.both||we.messageFormat===tn.MessageFormat.bundle){var n=ZE(t);if(n){var r=zn.dirname(n),i=Uc[r];if(i===void 0)try{var s=JSON.parse(xn.readFileSync(n,"utf8"));try{var o=QE(s,r);i=Lp(r,o?{header:s,nlsBundle:o}:null)}catch(l){console.error("Failed to load nls bundle",l),i=Lp(r,null)}}catch(l){console.error("Failed to read header file",l),i=Lp(r,null)}if(i){var a=t.substr(r.length+1).replace(/\\/g,"/"),c=i.nlsBundle[a];return c===void 0?(console.error("Messages for file ".concat(t," not found. See console for details.")),function(){return"Messages not found."}):Mp(c)}}}if(we.messageFormat===tn.MessageFormat.both||we.messageFormat===tn.MessageFormat.file)try{var u=Ds(KE(t));return Array.isArray(u)?Mp(u):(0,tn.isDefined)(u.messages)&&(0,tn.isDefined)(u.keys)?Mp(u.messages):(console.error("String bundle '".concat(t,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(l){l.code!=="ENOENT"&&console.error("Failed to load single file bundle",l)}return console.error("Failed to load message bundle for file ".concat(t)),function(){return"Failed to load message bundle. See console for details."}}or.loadMessageBundle=Ap;function nw(t){return t&&(Tr(t.locale)&&(we.locale=t.locale.toLowerCase(),we.language=we.locale,Uc=Object.create(null)),t.messageFormat!==void 0&&(we.messageFormat=t.messageFormat),t.bundleFormat===tn.BundleFormat.standalone&&we.languagePackSupport===!0&&(we.languagePackSupport=!1)),(0,tn.setPseudo)(we.locale==="pseudo"),Ap}or.config=nw;HE.default.install(Object.freeze({loadMessageBundle:Ap,config:nw}))});var iw=b(Ts=>{var jp=Ts&&Ts.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.register=void 0;var Pi=require("vscode"),ek=rw(),tk=sr(),nk=ek.loadMessageBundle();function rk(t,e,n){return jp(this,void 0,void 0,function*(){e.subscriptions.push(Pi.commands.registerCommand(t,r=>jp(this,void 0,void 0,function*(){yield Pi.window.withProgress({location:Pi.ProgressLocation.Window,title:nk("progress.title","Finding file references")},i=>jp(this,void 0,void 0,function*(){var s;if(!r){let l=Pi.window.activeTextEditor;if(!l)return;r=l.document.uri}let o=yield n.sendRequest(tk.FindFileReferenceRequest.type,{textDocument:{uri:r.toString()}});if(!o)return;let a=o.map(l=>n.protocol2CodeConverter.asLocation(l)),c=Pi.workspace.getConfiguration("references"),u=c.inspect("preferredLocation");yield c.update("preferredLocation","view");try{yield Pi.commands.executeCommand("editor.action.showReferences",r,new Pi.Position(0,0),a)}finally{yield c.update("preferredLocation",(s=u?.workspaceFolderValue)!==null&&s!==void 0?s:u?.workspaceValue)}}))})))})}Ts.register=rk});var sw=b(xs=>{var ik=xs&&xs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(xs,"__esModule",{value:!0});xs.register=void 0;var $p=require("vscode"),sk=sr();function ok(t,e,n){return ik(this,void 0,void 0,function*(){e.subscriptions.push($p.commands.registerCommand(t,()=>{if($p.window.activeTextEditor)for(let r of n)r.sendNotification(sk.ReloadProjectNotification.type,r.code2ProtocolConverter.asTextDocumentIdentifier($p.window.activeTextEditor.document))}))})}xs.register=ok});var cw=b(Ps=>{var ow=Ps&&Ps.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.register=void 0;var aw=require("vscode"),ak=sr();function ck(t,e,n){return ow(this,void 0,void 0,function*(){e.subscriptions.push(aw.commands.registerCommand(t,()=>ow(this,void 0,void 0,function*(){for(let r of n)yield r.sendNotification(ak.ReportStats.type);yield aw.commands.executeCommand("workbench.action.output.toggleOutput")})))})}Ps.register=ck});var Wc=b((GM,uw)=>{uw.exports=require("path")});var lw=b(qs=>{var Hp=qs&&qs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(qs,"__esModule",{value:!0});qs.register=void 0;var Kn=require("vscode"),uk=sr(),lk=Wc();function dk(t,e,n,r){return Hp(this,void 0,void 0,function*(){let i=Kn.window.createStatusBarItem(Kn.StatusBarAlignment.Right),s;o(),Kn.window.onDidChangeActiveTextEditor(o,void 0,e.subscriptions),e.subscriptions.push(Kn.commands.registerCommand(t,()=>Hp(this,void 0,void 0,function*(){if(s){let a=yield Kn.workspace.openTextDocument(s);yield Kn.window.showTextDocument(a)}})));function o(){return Hp(this,void 0,void 0,function*(){if(!Kn.window.activeTextEditor||!r(Kn.window.activeTextEditor.document))i.hide();else{let a=yield n.sendRequest(uk.GetMatchTsConfigRequest.type,n.code2ProtocolConverter.asTextDocumentIdentifier(Kn.window.activeTextEditor.document));a?.uri?(s=Kn.Uri.parse(a.uri),i.text=lk.relative(Kn.workspace.rootPath||"/",s.fsPath),i.command=t):(i.text="No tsconfig",i.command=void 0),i.show()}})}})}qs.register=dk});var dw=b(ks=>{var fk=ks&&ks.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(ks,"__esModule",{value:!0});ks.register=void 0;var Es=require("vscode"),hk=Ti(),pk=sr();function gk(t,e){return fk(this,void 0,void 0,function*(){n(),e.onDidChangeState(()=>{e.state===hk.State.Running&&n()});function n(){t.subscriptions.push(e.onNotification(pk.ShowReferencesNotification.type,r=>{let i=r.textDocument.uri,s=r.position,o=r.references;Es.commands.executeCommand("editor.action.showReferences",Es.Uri.parse(i),new Es.Position(s.line,s.character),o.map(a=>new Es.Location(Es.Uri.parse(a.uri),new Es.Range(a.range.start.line,a.range.start.character,a.range.end.line,a.range.end.character))))}))}})}ks.register=gk});var fw=b(Os=>{var Bc=Os&&Os.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Os,"__esModule",{value:!0});Os.register=void 0;var Up=require("vscode"),mk=Ti(),Wp=sr();function vk(t,e){return Bc(this,void 0,void 0,function*(){n(),e.onDidChangeState(()=>{e.state===mk.State.Running&&n()});function n(){t.subscriptions.push(e.onRequest(Wp.FsStatRequest.type,r=>Bc(this,void 0,void 0,function*(){try{return yield Up.workspace.fs.stat(e.protocol2CodeConverter.asUri(r))}catch{return}}))),t.subscriptions.push(e.onRequest(Wp.FsReadFileRequest.type,r=>Bc(this,void 0,void 0,function*(){try{let i=yield Up.workspace.fs.readFile(e.protocol2CodeConverter.asUri(r));return new TextDecoder("utf8").decode(i)}catch{return}}))),t.subscriptions.push(e.onRequest(Wp.FsReadDirectoryRequest.type,r=>Bc(this,void 0,void 0,function*(){try{return yield Up.workspace.fs.readDirectory(e.protocol2CodeConverter.asUri(r))}catch{return[]}})))}})}Os.register=vk});var Kc=b(zc=>{Object.defineProperty(zc,"__esModule",{value:!0});zc.quickPick=void 0;var hw=require("vscode");function yk(t,e){return new Promise(n=>{let r=hw.window.createQuickPick(),i=[];for(let s of Array.isArray(t)?t:[t]){let o=Object.values(s);if(o.length){i.length&&i.push({label:"",kind:hw.QuickPickItemKind.Separator});for(let a of o)a&&i.push(a)}}r.items=i,r.placeholder=e,r.onDidChangeSelection(s=>{if(s[0])for(let o of Array.isArray(t)?t:[t])for(let a in o){let c=o[a];if(s[0]===c){n(a),r.hide();break}}}),r.onDidHide(()=>{r.dispose(),n(void 0)}),r.show()})}zc.quickPick=yk});var gw={};Lg(gw,{URI:()=>_k,Utils:()=>wk});var pw,_k,wk,mw=Mg(()=>{(()=>{"use strict";var t={470:i=>{function s(c){if(typeof c!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(c))}function o(c,u){for(var l,d="",p=0,h=-1,g=0,y=0;y<=c.length;++y){if(y<c.length)l=c.charCodeAt(y);else{if(l===47)break;l=47}if(l===47){if(!(h===y-1||g===1))if(h!==y-1&&g===2){if(d.length<2||p!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var _=d.lastIndexOf("/");if(_!==d.length-1){_===-1?(d="",p=0):p=(d=d.slice(0,_)).length-1-d.lastIndexOf("/"),h=y,g=0;continue}}else if(d.length===2||d.length===1){d="",p=0,h=y,g=0;continue}}u&&(d.length>0?d+="/..":d="..",p=2)}else d.length>0?d+="/"+c.slice(h+1,y):d=c.slice(h+1,y),p=y-h-1;h=y,g=0}else l===46&&g!==-1?++g:g=-1}return d}var a={resolve:function(){for(var c,u="",l=!1,d=arguments.length-1;d>=-1&&!l;d--){var p;d>=0?p=arguments[d]:(c===void 0&&(c=process.cwd()),p=c),s(p),p.length!==0&&(u=p+"/"+u,l=p.charCodeAt(0)===47)}return u=o(u,!l),l?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(c){if(s(c),c.length===0)return".";var u=c.charCodeAt(0)===47,l=c.charCodeAt(c.length-1)===47;return(c=o(c,!u)).length!==0||u||(c="."),c.length>0&&l&&(c+="/"),u?"/"+c:c},isAbsolute:function(c){return s(c),c.length>0&&c.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var c,u=0;u<arguments.length;++u){var l=arguments[u];s(l),l.length>0&&(c===void 0?c=l:c+="/"+l)}return c===void 0?".":a.normalize(c)},relative:function(c,u){if(s(c),s(u),c===u||(c=a.resolve(c))===(u=a.resolve(u)))return"";for(var l=1;l<c.length&&c.charCodeAt(l)===47;++l);for(var d=c.length,p=d-l,h=1;h<u.length&&u.charCodeAt(h)===47;++h);for(var g=u.length-h,y=p<g?p:g,_=-1,S=0;S<=y;++S){if(S===y){if(g>y){if(u.charCodeAt(h+S)===47)return u.slice(h+S+1);if(S===0)return u.slice(h+S)}else p>y&&(c.charCodeAt(l+S)===47?_=S:S===0&&(_=0));break}var T=c.charCodeAt(l+S);if(T!==u.charCodeAt(h+S))break;T===47&&(_=S)}var C="";for(S=l+_+1;S<=d;++S)S!==d&&c.charCodeAt(S)!==47||(C.length===0?C+="..":C+="/..");return C.length>0?C+u.slice(h+_):(h+=_,u.charCodeAt(h)===47&&++h,u.slice(h))},_makeLong:function(c){return c},dirname:function(c){if(s(c),c.length===0)return".";for(var u=c.charCodeAt(0),l=u===47,d=-1,p=!0,h=c.length-1;h>=1;--h)if((u=c.charCodeAt(h))===47){if(!p){d=h;break}}else p=!1;return d===-1?l?"/":".":l&&d===1?"//":c.slice(0,d)},basename:function(c,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');s(c);var l,d=0,p=-1,h=!0;if(u!==void 0&&u.length>0&&u.length<=c.length){if(u.length===c.length&&u===c)return"";var g=u.length-1,y=-1;for(l=c.length-1;l>=0;--l){var _=c.charCodeAt(l);if(_===47){if(!h){d=l+1;break}}else y===-1&&(h=!1,y=l+1),g>=0&&(_===u.charCodeAt(g)?--g==-1&&(p=l):(g=-1,p=y))}return d===p?p=y:p===-1&&(p=c.length),c.slice(d,p)}for(l=c.length-1;l>=0;--l)if(c.charCodeAt(l)===47){if(!h){d=l+1;break}}else p===-1&&(h=!1,p=l+1);return p===-1?"":c.slice(d,p)},extname:function(c){s(c);for(var u=-1,l=0,d=-1,p=!0,h=0,g=c.length-1;g>=0;--g){var y=c.charCodeAt(g);if(y!==47)d===-1&&(p=!1,d=g+1),y===46?u===-1?u=g:h!==1&&(h=1):u!==-1&&(h=-1);else if(!p){l=g+1;break}}return u===-1||d===-1||h===0||h===1&&u===d-1&&u===l+1?"":c.slice(u,d)},format:function(c){if(c===null||typeof c!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof c);return function(u,l){var d=l.dir||l.root,p=l.base||(l.name||"")+(l.ext||"");return d?d===l.root?d+p:d+"/"+p:p}(0,c)},parse:function(c){s(c);var u={root:"",dir:"",base:"",ext:"",name:""};if(c.length===0)return u;var l,d=c.charCodeAt(0),p=d===47;p?(u.root="/",l=1):l=0;for(var h=-1,g=0,y=-1,_=!0,S=c.length-1,T=0;S>=l;--S)if((d=c.charCodeAt(S))!==47)y===-1&&(_=!1,y=S+1),d===46?h===-1?h=S:T!==1&&(T=1):h!==-1&&(T=-1);else if(!_){g=S+1;break}return h===-1||y===-1||T===0||T===1&&h===y-1&&h===g+1?y!==-1&&(u.base=u.name=g===0&&p?c.slice(1,y):c.slice(g,y)):(g===0&&p?(u.name=c.slice(1,h),u.base=c.slice(1,y)):(u.name=c.slice(g,h),u.base=c.slice(g,y)),u.ext=c.slice(h,y)),g>0?u.dir=c.slice(0,g-1):p&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,i.exports=a}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(i,s)=>{for(var o in s)n.o(s,o)&&!n.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:s[o]})},n.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{var i;if(n.r(r),n.d(r,{URI:()=>_,Utils:()=>se}),typeof process=="object")i=process.platform==="win32";else if(typeof navigator=="object"){var s=navigator.userAgent;i=s.indexOf("Windows")>=0}var o,a,c=(o=function(k,q){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,M){F.__proto__=M}||function(F,M){for(var Y in M)Object.prototype.hasOwnProperty.call(M,Y)&&(F[Y]=M[Y])},o(k,q)},function(k,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function F(){this.constructor=k}o(k,q),k.prototype=q===null?Object.create(q):(F.prototype=q.prototype,new F)}),u=/^\w[\w\d+.-]*$/,l=/^\//,d=/^\/\//;function p(k,q){if(!k.scheme&&q)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(k.authority,'", path: "').concat(k.path,'", query: "').concat(k.query,'", fragment: "').concat(k.fragment,'"}'));if(k.scheme&&!u.test(k.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(k.path){if(k.authority){if(!l.test(k.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(k.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var h="",g="/",y=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,_=function(){function k(q,F,M,Y,ie,G){G===void 0&&(G=!1),typeof q=="object"?(this.scheme=q.scheme||h,this.authority=q.authority||h,this.path=q.path||h,this.query=q.query||h,this.fragment=q.fragment||h):(this.scheme=function(Pt,ht){return Pt||ht?Pt:"file"}(q,G),this.authority=F||h,this.path=function(Pt,ht){switch(Pt){case"https":case"http":case"file":ht?ht[0]!==g&&(ht=g+ht):ht=g}return ht}(this.scheme,M||h),this.query=Y||h,this.fragment=ie||h,p(this,G))}return k.isUri=function(q){return q instanceof k||!!q&&typeof q.authority=="string"&&typeof q.fragment=="string"&&typeof q.path=="string"&&typeof q.query=="string"&&typeof q.scheme=="string"&&typeof q.fsPath=="string"&&typeof q.with=="function"&&typeof q.toString=="function"},Object.defineProperty(k.prototype,"fsPath",{get:function(){return W(this,!1)},enumerable:!1,configurable:!0}),k.prototype.with=function(q){if(!q)return this;var F=q.scheme,M=q.authority,Y=q.path,ie=q.query,G=q.fragment;return F===void 0?F=this.scheme:F===null&&(F=h),M===void 0?M=this.authority:M===null&&(M=h),Y===void 0?Y=this.path:Y===null&&(Y=h),ie===void 0?ie=this.query:ie===null&&(ie=h),G===void 0?G=this.fragment:G===null&&(G=h),F===this.scheme&&M===this.authority&&Y===this.path&&ie===this.query&&G===this.fragment?this:new T(F,M,Y,ie,G)},k.parse=function(q,F){F===void 0&&(F=!1);var M=y.exec(q);return M?new T(M[2]||h,ue(M[4]||h),ue(M[5]||h),ue(M[7]||h),ue(M[9]||h),F):new T(h,h,h,h,h)},k.file=function(q){var F=h;if(i&&(q=q.replace(/\\/g,g)),q[0]===g&&q[1]===g){var M=q.indexOf(g,2);M===-1?(F=q.substring(2),q=g):(F=q.substring(2,M),q=q.substring(M)||g)}return new T("file",F,q,h,h)},k.from=function(q){var F=new T(q.scheme,q.authority,q.path,q.query,q.fragment);return p(F,!0),F},k.prototype.toString=function(q){return q===void 0&&(q=!1),j(this,q)},k.prototype.toJSON=function(){return this},k.revive=function(q){if(q){if(q instanceof k)return q;var F=new T(q);return F._formatted=q.external,F._fsPath=q._sep===S?q.fsPath:null,F}return q},k}(),S=i?1:void 0,T=function(k){function q(){var F=k!==null&&k.apply(this,arguments)||this;return F._formatted=null,F._fsPath=null,F}return c(q,k),Object.defineProperty(q.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=W(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),q.prototype.toString=function(F){return F===void 0&&(F=!1),F?j(this,!0):(this._formatted||(this._formatted=j(this,!1)),this._formatted)},q.prototype.toJSON=function(){var F={$mid:1};return this._fsPath&&(F.fsPath=this._fsPath,F._sep=S),this._formatted&&(F.external=this._formatted),this.path&&(F.path=this.path),this.scheme&&(F.scheme=this.scheme),this.authority&&(F.authority=this.authority),this.query&&(F.query=this.query),this.fragment&&(F.fragment=this.fragment),F},q}(_),C=((a={})[58]="%3A",a[47]="%2F",a[63]="%3F",a[35]="%23",a[91]="%5B",a[93]="%5D",a[64]="%40",a[33]="%21",a[36]="%24",a[38]="%26",a[39]="%27",a[40]="%28",a[41]="%29",a[42]="%2A",a[43]="%2B",a[44]="%2C",a[59]="%3B",a[61]="%3D",a[32]="%20",a);function D(k,q,F){for(var M=void 0,Y=-1,ie=0;ie<k.length;ie++){var G=k.charCodeAt(ie);if(G>=97&&G<=122||G>=65&&G<=90||G>=48&&G<=57||G===45||G===46||G===95||G===126||q&&G===47||F&&G===91||F&&G===93||F&&G===58)Y!==-1&&(M+=encodeURIComponent(k.substring(Y,ie)),Y=-1),M!==void 0&&(M+=k.charAt(ie));else{M===void 0&&(M=k.substr(0,ie));var Pt=C[G];Pt!==void 0?(Y!==-1&&(M+=encodeURIComponent(k.substring(Y,ie)),Y=-1),M+=Pt):Y===-1&&(Y=ie)}}return Y!==-1&&(M+=encodeURIComponent(k.substring(Y))),M!==void 0?M:k}function E(k){for(var q=void 0,F=0;F<k.length;F++){var M=k.charCodeAt(F);M===35||M===63?(q===void 0&&(q=k.substr(0,F)),q+=C[M]):q!==void 0&&(q+=k[F])}return q!==void 0?q:k}function W(k,q){var F;return F=k.authority&&k.path.length>1&&k.scheme==="file"?"//".concat(k.authority).concat(k.path):k.path.charCodeAt(0)===47&&(k.path.charCodeAt(1)>=65&&k.path.charCodeAt(1)<=90||k.path.charCodeAt(1)>=97&&k.path.charCodeAt(1)<=122)&&k.path.charCodeAt(2)===58?q?k.path.substr(1):k.path[1].toLowerCase()+k.path.substr(2):k.path,i&&(F=F.replace(/\//g,"\\")),F}function j(k,q){var F=q?E:D,M="",Y=k.scheme,ie=k.authority,G=k.path,Pt=k.query,ht=k.fragment;if(Y&&(M+=Y,M+=":"),(ie||Y==="file")&&(M+=g,M+=g),ie){var qt=ie.indexOf("@");if(qt!==-1){var fn=ie.substr(0,qt);ie=ie.substr(qt+1),(qt=fn.lastIndexOf(":"))===-1?M+=F(fn,!1,!1):(M+=F(fn.substr(0,qt),!1,!1),M+=":",M+=F(fn.substr(qt+1),!1,!0)),M+="@"}(qt=(ie=ie.toLowerCase()).lastIndexOf(":"))===-1?M+=F(ie,!1,!0):(M+=F(ie.substr(0,qt),!1,!0),M+=ie.substr(qt))}if(G){if(G.length>=3&&G.charCodeAt(0)===47&&G.charCodeAt(2)===58)(Xt=G.charCodeAt(1))>=65&&Xt<=90&&(G="/".concat(String.fromCharCode(Xt+32),":").concat(G.substr(3)));else if(G.length>=2&&G.charCodeAt(1)===58){var Xt;(Xt=G.charCodeAt(0))>=65&&Xt<=90&&(G="".concat(String.fromCharCode(Xt+32),":").concat(G.substr(2)))}M+=F(G,!0,!1)}return Pt&&(M+="?",M+=F(Pt,!1,!1)),ht&&(M+="#",M+=q?ht:D(ht,!1,!1)),M}function Q(k){try{return decodeURIComponent(k)}catch{return k.length>3?k.substr(0,3)+Q(k.substr(3)):k}}var re=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ue(k){return k.match(re)?k.replace(re,function(q){return Q(q)}):k}var se,Fe=n(470),We=function(k,q,F){if(F||arguments.length===2)for(var M,Y=0,ie=q.length;Y<ie;Y++)!M&&Y in q||(M||(M=Array.prototype.slice.call(q,0,Y)),M[Y]=q[Y]);return k.concat(M||Array.prototype.slice.call(q))},ve=Fe.posix||Fe,Ie="/";(function(k){k.joinPath=function(q){for(var F=[],M=1;M<arguments.length;M++)F[M-1]=arguments[M];return q.with({path:ve.join.apply(ve,We([q.path],F,!1))})},k.resolvePath=function(q){for(var F=[],M=1;M<arguments.length;M++)F[M-1]=arguments[M];var Y=q.path,ie=!1;Y[0]!==Ie&&(Y=Ie+Y,ie=!0);var G=ve.resolve.apply(ve,We([Y],F,!1));return ie&&G[0]===Ie&&!q.authority&&(G=G.substring(1)),q.with({path:G})},k.dirname=function(q){if(q.path.length===0||q.path===Ie)return q;var F=ve.dirname(q.path);return F.length===1&&F.charCodeAt(0)===46&&(F=""),q.with({path:F})},k.basename=function(q){return ve.basename(q.path)},k.extname=function(q){return ve.extname(q.path)}})(se||(se={}))})(),pw=r})();({URI:_k,Utils:wk}=pw)});var Bp=b(nn=>{Object.defineProperty(nn,"__esModule",{value:!0});nn.notEmpty=nn.sleep=nn.syntaxToLanguageId=nn.fileNameToUri=nn.uriToFileName=nn.normalizeFileName=void 0;var vw=(mw(),la(gw));function Ck(t){return yw(_w(t))}nn.normalizeFileName=Ck;function yw(t){if(t.startsWith("https://cdn.jsdelivr.net/npm/"))return"/__uri__/node_modules/"+t.replace("https://cdn.jsdelivr.net/npm/","");let e=vw.URI.parse(t);return e.scheme==="file"?e.fsPath.replace(/\\/g,"/"):"/__uri__/"+t.replace("://","__uri_scheme__")}nn.uriToFileName=yw;function _w(t){return t.startsWith("/__uri__/node_modules/")?t.replace("/__uri__/node_modules/","https://cdn.jsdelivr.net/npm/"):t.startsWith("/__uri__/")?t.replace("/__uri__/","").replace("__uri_scheme__","://"):vw.URI.file(t).toString()}nn.fileNameToUri=_w;function bk(t){switch(t){case"js":return"javascript";case"cjs":return"javascript";case"mjs":return"javascript";case"ts":return"typescript";case"cts":return"typescript";case"mts":return"typescript";case"jsx":return"javascriptreact";case"tsx":return"typescriptreact";case"pug":return"jade";case"md":return"markdown"}return t}nn.syntaxToLanguageId=bk;function Sk(t){return new Promise(e=>setTimeout(e,t))}nn.sleep=Sk;function Rk(t){return t!=null}nn.notEmpty=Rk});var bw=b(Kr=>{var Ns=Kr&&Kr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getTsdk=Kr.register=void 0;var zp=Wc(),Ge=require("vscode"),Dk=Kc(),Tk=Bp(),Vo="node_modules/typescript/lib";function xk(t,e,n,r,i){return Ns(this,void 0,void 0,function*(){let s=Ge.window.createStatusBarItem(Ge.StatusBarAlignment.Right);s.command=t,e.subscriptions.push({dispose:()=>s.dispose()}),e.subscriptions.push(Ge.commands.registerCommand(t,o)),Ge.workspace.onDidChangeConfiguration(a,void 0,e.subscriptions),Ge.window.onDidChangeActiveTextEditor(c,void 0,e.subscriptions),c();function o(){var l,d,p,h;return Ns(this,void 0,void 0,function*(){let g=Gc(e),y=Cw(),_=ww(),S=_.scheme!=="file",T=yield(0,Dk.quickPick)([{useVSCodeTsdk:{label:(g.isWorkspacePath?"":"\u2022 ")+"Use VS Code's Version",description:yield Vc(_),detail:S?_.toString(!0):void 0},useConfigWorkspaceTsdk:y&&!S?{label:(g.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:(d=yield Vc(Ge.Uri.file((l=Kp(y))!==null&&l!==void 0?l:"/")))!==null&&d!==void 0?d:"Could not load the TypeScript version at this path",detail:y}:void 0,useDefaultWorkspaceTsdk:y!==Vo&&!S?{label:(g.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:(h=yield Vc(Ge.Uri.file((p=Kp(Vo))!==null&&p!==void 0?p:"/")))!==null&&h!==void 0?h:"Could not load the TypeScript version at this path",detail:Vo}:void 0},{takeover:{label:"What is Takeover Mode?"}}]);if(T===void 0)return;if(T==="takeover"){Ge.env.openExternal(Ge.Uri.parse("https://vuejs.org/guide/typescript/overview.html#volar-takeover-mode"));return}T==="useDefaultWorkspaceTsdk"&&(yield Ge.workspace.getConfiguration("typescript").update("tsdk",Vo));let C=T==="useConfigWorkspaceTsdk"||T==="useDefaultWorkspaceTsdk";C!==Vp(e)&&(e.workspaceState.update("typescript.useWorkspaceTsdk",C),u()),c()})}function a(l){l.affectsConfiguration("typescript.tsdk")&&Vp(e)&&u()}function c(){return Ns(this,void 0,void 0,function*(){if(!Ge.window.activeTextEditor||!r(Ge.window.activeTextEditor.document))s.hide();else{let l=yield Vc(Gc(e).uri);s.text=l??"x.x.x",s.text=i(s.text),s.show()}})}function u(){return Ns(this,void 0,void 0,function*(){let l=Gc(e),d=Object.assign(Object.assign({},n.clientOptions.initializationOptions),{typescript:l});n.clientOptions.initializationOptions=d,Ge.commands.executeCommand("volar.action.restartServer")})}})}Kr.register=xk;function Gc(t){if(Vp(t)){let n=Kp(Cw()||Vo);if(n)return{tsdk:n,uri:Ge.Uri.file(n),isWorkspacePath:!0}}let e=ww();return{tsdk:Tk.uriToFileName(e.toString()),uri:e,isWorkspacePath:!1}}Kr.getTsdk=Gc;function Kp(t){var e;if(zp.isAbsolute(t))try{if(require.resolve("./typescript.js",{paths:[t]}))return t}catch{}let n=((e=Ge.workspace.workspaceFolders)!==null&&e!==void 0?e:[]).map(r=>r.uri.fsPath);for(let r of n){let i=zp.join(r,t);try{if(require.resolve("./typescript.js",{paths:[i]}))return i}catch{}}}function ww(){let t=Ge.extensions.getExtension("ms-vscode.vscode-typescript-next");if(t)return Ge.Uri.parse(t.extensionUri.toString()+"/node_modules/typescript/lib");if(Ge.env.appRoot)return Ge.Uri.file(zp.join(Ge.env.appRoot,"extensions/node_modules/typescript/lib"));let e=require("typescript/package.json").version;return Ge.Uri.parse(`https://cdn.jsdelivr.net/npm/typescript@${e}/lib`)}function Cw(){return Ge.workspace.getConfiguration("typescript").get("tsdk")}function Vp(t){return t.workspaceState.get("typescript.useWorkspaceTsdk",!1)}function Vc(t){return Ns(this,void 0,void 0,function*(){if(t.scheme!=="file")return require("typescript/package.json").version;let i=t.toString().split("/").slice(0,-1).join("/"),s=Ge.Uri.parse(i+"/package.json"),o=yield Pk(s);if(o===void 0)return;let a=null;try{a=JSON.parse(o)}catch{return}if(!(!a||!a.version))return a.version})}function Pk(t){return Ns(this,void 0,void 0,function*(){try{let e=yield Ge.workspace.fs.readFile(t);return new TextDecoder("utf8").decode(e)}catch{}})}});var Dw=b($e=>{Object.defineProperty($e,"__esModule",{value:!0});$e.takeOverModeActive=$e.getTsdk=$e.registerTsVersion=$e.registerServerSys=$e.registerShowReferences=$e.registerTsConfig=$e.registerServerStats=$e.registerReloadProjects=$e.registerFileReferences=$e.registerWriteVirtualFiles=$e.registerShowVirtualFiles=$e.registerAutoInsertion=void 0;var Sw=require("vscode"),qk=B_();Object.defineProperty($e,"registerAutoInsertion",{enumerable:!0,get:function(){return qk.register}});var Ek=G_();Object.defineProperty($e,"registerShowVirtualFiles",{enumerable:!0,get:function(){return Ek.register}});var kk=X_();Object.defineProperty($e,"registerWriteVirtualFiles",{enumerable:!0,get:function(){return kk.register}});var Ok=iw();Object.defineProperty($e,"registerFileReferences",{enumerable:!0,get:function(){return Ok.register}});var Nk=sw();Object.defineProperty($e,"registerReloadProjects",{enumerable:!0,get:function(){return Nk.register}});var Fk=cw();Object.defineProperty($e,"registerServerStats",{enumerable:!0,get:function(){return Fk.register}});var Ik=lw();Object.defineProperty($e,"registerTsConfig",{enumerable:!0,get:function(){return Ik.register}});var Mk=dw();Object.defineProperty($e,"registerShowReferences",{enumerable:!0,get:function(){return Mk.register}});var Lk=fw();Object.defineProperty($e,"registerServerSys",{enumerable:!0,get:function(){return Lk.register}});var Rw=bw();Object.defineProperty($e,"registerTsVersion",{enumerable:!0,get:function(){return Rw.register}});Object.defineProperty($e,"getTsdk",{enumerable:!0,get:function(){return Rw.getTsdk}});function Ak(t){return Sw.workspace.getConfiguration("volar").get("takeOverMode.extension")===t.extension.id?!Sw.extensions.getExtension("vscode.typescript-language-features"):!1}$e.takeOverModeActive=Ak});var xw=b(Fs=>{var Gp=Fs&&Fs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.register=void 0;var xr=require("vscode"),jk=mr(),Tw="vue-component-meta";function $k(t,e){return Gp(this,void 0,void 0,function*(){let n=new Map,r=new Map,i=new xr.EventEmitter,s;t.subscriptions.push(xr.workspace.onDidChangeTextDocument(o=>{let a=n.get(o.document.uri.toString());a&&(clearTimeout(s),s=setTimeout(()=>{i.fire(xr.Uri.parse(a))},100))})),t.subscriptions.push(xr.workspace.registerTextDocumentContentProvider(Tw,{onDidChange:i.event,provideTextDocumentContent(o){return Gp(this,void 0,void 0,function*(){let a=r.get(o.toString());if(a){let c=yield e.sendRequest(jk.GetComponentMeta.type,{uri:a.document.uri.toString()});return JSON.stringify(c,void 0,"	")}})}})),t.subscriptions.push(xr.commands.registerCommand("volar.action.showComponentMeta",()=>Gp(this,void 0,void 0,function*(){let o=xr.window.activeTextEditor;if(o){let a=o.document.uri.with({scheme:Tw}).toString()+".meta.json";n.set(o.document.uri.toString(),a),r.set(a,o),xr.window.showTextDocument(xr.Uri.parse(a),{viewColumn:xr.ViewColumn.Two,preview:!1})}})))})}Fs.register=$k});var qw=b((rL,Pw)=>{var Hk=Wr(),Uk=(t,e)=>{let n=Hk(t,e);return n?n.version:null};Pw.exports=Uk});var kw=b((iL,Ew)=>{var Wk=Wr(),Bk=(t,e)=>{let n=Wk(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};Ew.exports=Bk});var Fw=b((sL,Nw)=>{var Ow=It(),zk=(t,e,n,r)=>{typeof n=="string"&&(r=n,n=void 0);try{return new Ow(t instanceof Ow?t.version:t,n).inc(e,r).version}catch{return null}};Nw.exports=zk});var Lw=b((oL,Mw)=>{var Iw=Wr(),Kk=Mc(),Vk=(t,e)=>{if(Kk(t,e))return null;{let n=Iw(t),r=Iw(e),i=n.prerelease.length||r.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let a in n)if((a==="major"||a==="minor"||a==="patch")&&n[a]!==r[a])return s+a;return o}};Mw.exports=Vk});var jw=b((aL,Aw)=>{var Gk=It(),Xk=(t,e)=>new Gk(t,e).major;Aw.exports=Xk});var Hw=b((cL,$w)=>{var Jk=It(),Yk=(t,e)=>new Jk(t,e).minor;$w.exports=Yk});var Ww=b((uL,Uw)=>{var Qk=It(),Zk=(t,e)=>new Qk(t,e).patch;Uw.exports=Zk});var zw=b((lL,Bw)=>{var eO=Wr(),tO=(t,e)=>{let n=eO(t,e);return n&&n.prerelease.length?n.prerelease:null};Bw.exports=tO});var Vw=b((dL,Kw)=>{var nO=Rn(),rO=(t,e,n)=>nO(e,t,n);Kw.exports=rO});var Xw=b((fL,Gw)=>{var iO=Rn(),sO=(t,e)=>iO(t,e,!0);Gw.exports=sO});var Xc=b((hL,Yw)=>{var Jw=It(),oO=(t,e,n)=>{let r=new Jw(t,n),i=new Jw(e,n);return r.compare(i)||r.compareBuild(i)};Yw.exports=oO});var Zw=b((pL,Qw)=>{var aO=Xc(),cO=(t,e)=>t.sort((n,r)=>aO(n,r,e));Qw.exports=cO});var tC=b((gL,eC)=>{var uO=Xc(),lO=(t,e)=>t.sort((n,r)=>uO(r,n,e));eC.exports=lO});var rC=b((mL,nC)=>{var dO=It(),fO=Wr(),{re:Jc,t:Yc}=Ci(),hO=(t,e)=>{if(t instanceof dO)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(Jc[Yc.COERCE]);else{let r;for(;(r=Jc[Yc.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),Jc[Yc.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;Jc[Yc.COERCERTL].lastIndex=-1}return n===null?null:fO(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};nC.exports=hO});var sC=b((vL,iC)=>{var pO=Dn(),gO=(t,e)=>new pO(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));iC.exports=gO});var aC=b((yL,oC)=>{var mO=It(),vO=Dn(),yO=(t,e,n)=>{let r=null,i=null,s=null;try{s=new vO(e,n)}catch{return null}return t.forEach(o=>{s.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new mO(r,n))}),r};oC.exports=yO});var uC=b((_L,cC)=>{var _O=It(),wO=Dn(),CO=(t,e,n)=>{let r=null,i=null,s=null;try{s=new wO(e,n)}catch{return null}return t.forEach(o=>{s.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new _O(r,n))}),r};cC.exports=CO});var fC=b((wL,dC)=>{var Xp=It(),bO=Dn(),lC=Bo(),SO=(t,e)=>{t=new bO(t,e);let n=new Xp("0.0.0");if(t.test(n)||(n=new Xp("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],s=null;i.forEach(o=>{let a=new Xp(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||lC(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!n||lC(n,s))&&(n=s)}return n&&t.test(n)?n:null};dC.exports=SO});var pC=b((CL,hC)=>{var RO=Dn(),DO=(t,e)=>{try{return new RO(t,e).range||"*"}catch{return null}};hC.exports=DO});var Qc=b((bL,yC)=>{var TO=It(),vC=Ko(),{ANY:xO}=vC,PO=Dn(),qO=ys(),gC=Bo(),mC=Ac(),EO=jc(),kO=Lc(),OO=(t,e,n,r)=>{t=new TO(t,r),e=new PO(e,r);let i,s,o,a,c;switch(n){case">":i=gC,s=EO,o=mC,a=">",c=">=";break;case"<":i=mC,s=kO,o=gC,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(qO(t,e,r))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,p=null;if(l.forEach(h=>{h.semver===xO&&(h=new vC(">=0.0.0")),d=d||h,p=p||h,i(h.semver,d.semver,r)?d=h:o(h.semver,p.semver,r)&&(p=h)}),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&s(t,p.semver))return!1;if(p.operator===c&&o(t,p.semver))return!1}return!0};yC.exports=OO});var wC=b((SL,_C)=>{var NO=Qc(),FO=(t,e,n)=>NO(t,e,">",n);_C.exports=FO});var bC=b((RL,CC)=>{var IO=Qc(),MO=(t,e,n)=>IO(t,e,"<",n);CC.exports=MO});var DC=b((DL,RC)=>{var SC=Dn(),LO=(t,e,n)=>(t=new SC(t,n),e=new SC(e,n),t.intersects(e));RC.exports=LO});var xC=b((TL,TC)=>{var AO=ys(),jO=Rn();TC.exports=(t,e,n)=>{let r=[],i=null,s=null,o=t.sort((l,d)=>jO(l,d,n));for(let l of o)AO(l,e,n)?(s=l,i||(i=l)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let a=[];for(let[l,d]of r)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var OC=b((xL,kC)=>{var PC=Dn(),Zc=Ko(),{ANY:Jp}=Zc,Go=ys(),Yp=Rn(),$O=(t,e,n={})=>{if(t===e)return!0;t=new PC(t,n),e=new PC(e,n);let r=!1;e:for(let i of t.set){for(let s of e.set){let o=HO(i,s,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},HO=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Jp){if(e.length===1&&e[0].semver===Jp)return!0;n.includePrerelease?t=[new Zc(">=0.0.0-0")]:t=[new Zc(">=0.0.0")]}if(e.length===1&&e[0].semver===Jp){if(n.includePrerelease)return!0;e=[new Zc(">=0.0.0")]}let r=new Set,i,s;for(let h of t)h.operator===">"||h.operator===">="?i=qC(i,h,n):h.operator==="<"||h.operator==="<="?s=EC(s,h,n):r.add(h.semver);if(r.size>1)return null;let o;if(i&&s){if(o=Yp(i.semver,s.semver,n),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let h of r){if(i&&!Go(h,String(i),n)||s&&!Go(h,String(s),n))return null;for(let g of e)if(!Go(h,String(g),n))return!1;return!0}let a,c,u,l,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let h of e){if(l=l||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator===">"||h.operator===">="){if(a=qC(i,h,n),a===h&&a!==i)return!1}else if(i.operator===">="&&!Go(i.semver,String(h),n))return!1}if(s){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(c=EC(s,h,n),c===h&&c!==s)return!1}else if(s.operator==="<="&&!Go(s.semver,String(h),n))return!1}if(!h.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&l&&!i&&o!==0||p||d)},qC=(t,e,n)=>{if(!t)return e;let r=Yp(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},EC=(t,e,n)=>{if(!t)return e;let r=Yp(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};kC.exports=$O});var IC=b((PL,FC)=>{var Qp=Ci(),UO=jo(),WO=It(),NC=ap(),BO=Wr(),zO=qw(),KO=kw(),VO=Fw(),GO=Lw(),XO=jw(),JO=Hw(),YO=Ww(),QO=zw(),ZO=Rn(),e1=Vw(),t1=Xw(),n1=Xc(),r1=Zw(),i1=tC(),s1=Bo(),o1=Ac(),a1=Mc(),c1=fp(),u1=Lc(),l1=jc(),d1=hp(),f1=rC(),h1=Ko(),p1=Dn(),g1=ys(),m1=sC(),v1=aC(),y1=uC(),_1=fC(),w1=pC(),C1=Qc(),b1=wC(),S1=bC(),R1=DC(),D1=xC(),T1=OC();FC.exports={parse:BO,valid:zO,clean:KO,inc:VO,diff:GO,major:XO,minor:JO,patch:YO,prerelease:QO,compare:ZO,rcompare:e1,compareLoose:t1,compareBuild:n1,sort:r1,rsort:i1,gt:s1,lt:o1,eq:a1,neq:c1,gte:u1,lte:l1,cmp:d1,coerce:f1,Comparator:h1,Range:p1,satisfies:g1,toComparators:m1,maxSatisfying:v1,minSatisfying:y1,minVersion:_1,validRange:w1,outside:C1,gtr:b1,ltr:S1,intersects:R1,simplifyRange:D1,subset:T1,SemVer:WO,re:Qp.re,src:Qp.src,tokens:Qp.t,SEMVER_SPEC_VERSION:UO.SEMVER_SPEC_VERSION,compareIdentifiers:NC.compareIdentifiers,rcompareIdentifiers:NC.rcompareIdentifiers}});var AC=b(Is=>{var eu=Is&&Is.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Is,"__esModule",{value:!0});Is.register=void 0;var Mt=require("vscode"),qi=IC(),Zp=mr(),MC="vue-doctor",LC={postcss:["cpylua.language-postcss","vunguyentuan.vscode-postcss","csstools.postcss"],stylus:["sysoev.language-stylus"],sass:["Syler.sass-indented"]};function x1(t,e){return eu(this,void 0,void 0,function*(){let n=Mt.window.createStatusBarItem(Mt.StatusBarAlignment.Right);n.backgroundColor=new Mt.ThemeColor("statusBarItem.warningBackground"),n.command="volar.action.doctor";let r=new Mt.EventEmitter;s(Mt.window.activeTextEditor),t.subscriptions.push(Mt.window.onDidChangeActiveTextEditor(s)),t.subscriptions.push(Mt.workspace.registerTextDocumentContentProvider(MC,{onDidChange:r.event,provideTextDocumentContent(a){return eu(this,void 0,void 0,function*(){let c=a.with({scheme:"file",path:a.path.substring(0,a.path.length-10)}),u=yield o(c),l=`# ${c.path.split("/").pop()} Doctor

`;for(let d of u)l+="## \u2757 "+d.title+`

`,l+=d.message+`

`;return l+=`---

`,l+=`> Have any questions about the report message? You can see how it is composed by inspecting the [source code](https://github.com/johnsoncodehk/volar/blob/master/extensions/vscode-vue/src/features/doctor.ts).

`,l.trim()})}})),t.subscriptions.push(Mt.commands.registerCommand("volar.action.doctor",()=>{var a;let c=(a=Mt.window.activeTextEditor)===null||a===void 0?void 0:a.document;c?.languageId==="vue"&&c.uri.scheme==="file"&&Mt.commands.executeCommand("markdown.showPreviewToSide",i(c.uri))}));function i(a){return a.with({scheme:MC,path:a.path+"/Doctor.md"})}function s(a){var c;return eu(this,void 0,void 0,function*(){if(Mt.workspace.getConfiguration("volar").get("doctor.statusBarItem")&&a&&a.document.languageId==="vue"&&a.document.uri.scheme==="file"){let u=yield o(a.document.uri);u.length&&((c=Mt.window.activeTextEditor)===null||c===void 0?void 0:c.document)===a.document&&(n.show(),n.text=u.length+(u.length===1?" known issue":" known issues"),r.fire(i(a.document.uri)))}else n.hide()})}function o(a){var c,u,l,d;return eu(this,void 0,void 0,function*(){let p=Mt.workspace.textDocuments.find(E=>E.fileName===a.fsPath),[h,g,y]=yield Promise.all([e.sendRequest(Zp.GetMatchTsConfigRequest.type,{uri:a.toString()}),e.sendRequest(Zp.GetVueCompilerOptionsRequest.type,{uri:a.toString()}),p?e.sendRequest(Zp.ParseSFCRequest.type,p.getText()):void 0]),_=tu(a.fsPath,"vue"),S=tu(a.fsPath,"@vue/runtime-dom"),T=[];if(_||T.push({title:"`vue` module not found",message:"Vue module not found from workspace, you may not have installed `node_modules` yet."}),_){let E=qi.gte(_.json.version,"3.0.0")?3:qi.gte(_.json.version,"2.7.0")?2.7:2,W=(c=g?.target)!==null&&c!==void 0?c:3,j=[`Target version mismatch. You can specify the target version in \`vueCompilerOptions.target\` in tsconfig.json / jsconfig.json. (Expected \`"target": ${E}\`)`,"","- vue version: "+_.json.version,"- tsconfig target: "+W+(g?.target!==void 0?"":" (default)"),"- vue: "+_.path,"- tsconfig: "+((u=h?.uri)!==null&&u!==void 0?u:"Not found"),"- vueCompilerOptions:","  ```json",JSON.stringify(g,void 0,2).split(`
`).map(Q=>"  "+Q).join(`
`),"  ```"];E!==W&&T.push({title:"Incorrect Target",message:j.join(`
`)})}if(_&&qi.lt(_.json.version,"2.7.0")&&!S&&T.push({title:"`@vue/runtime-dom` missing for Vue 2",message:["Vue 2 does not have JSX types definitions, so template type checking will not work correctly. You can resolve this problem by installing `@vue/runtime-dom` and adding it to your project's `devDependencies`.","","- vue: "+_.path].join(`
`)}),_&&qi.gte(_.json.version,"2.7.0")&&qi.lt(_.json.version,"3.0.0")&&S&&T.push({title:"Unnecessary `@vue/runtime-dom`",message:["Vue 2.7 already includes JSX type definitions. You can remove the `@vue/runtime-dom` dependency from package.json.","","- vue: "+_.path,"- @vue/runtime-dom: "+S.path].join(`
`)}),Mt.workspace.getConfiguration("volar").get("doctor.checkVueTsc")){let E=tu(a.fsPath,"vue-tsc");E&&E.json.version!==t.extension.packageJSON.version&&T.push({title:"Different `vue-tsc` version",message:[`The \`${t.extension.packageJSON.displayName}\`'s version is \`${t.extension.packageJSON.version}\`, but the workspace's \`vue-tsc\` version is \`${E.json.version}\`. This may produce different type checking behavior.`,"","- vue-tsc: "+E.path].join(`
`)})}let C=tu(a.fsPath,"@types/node");C&&qi.gte(C.json.version,"18.8.1")&&qi.lte(C.json.version,"18.11.0")&&T.push({title:"Incompatible `@types/node` version",message:["`@types/node`'s version `"+C.json.version+"` is incompatible with Vue. It will cause broken DOM event types in template.","","You can update `@types/node` to `18.11.1` or later to resolve.","","- @types/node: "+C.path,"- Issue: https://github.com/johnsoncodehk/volar/issues/1985"].join(`
`)});let D=Mt.extensions.getExtension("octref.vetur");if(D?.isActive&&T.push({title:"Use @volar-plugins/vetur instead of Vetur",message:"Detected Vetur enabled. Consider disabling Vetur and use [@volar-plugins/vetur](https://github.com/johnsoncodehk/volar-plugins/tree/master/packages/vetur) instead."}),((l=y?.descriptor.template)===null||l===void 0?void 0:l.lang)==="pug"&&!(!((d=g?.plugins)===null||d===void 0)&&d.some(E=>E.indexOf("vue-language-plugin-pug")>=0))&&T.push({title:"`@volar/vue-language-plugin-pug` missing",message:['For `<template lang="pug">`, the `@volar/vue-language-plugin-pug` plugin is required. Install it using `$ npm install -D @volar/vue-language-plugin-pug` and add it to `vueCompilerOptions.plugins` to support TypeScript intellisense in Pug templates.',"","- package.json","```json",JSON.stringify({devDependencies:{"@volar/vue-language-plugin-pug":"latest"}},void 0,2),"```","","- tsconfig.json / jsconfig.json","```jsonc",JSON.stringify({vueCompilerOptions:{plugins:["@volar/vue-language-plugin-pug"]}},void 0,2),"```"].join(`
`)}),y){let E=[y.descriptor.template,y.descriptor.script,y.descriptor.scriptSetup,...y.descriptor.styles,...y.descriptor.customBlocks];for(let W of E)if(W&&W.lang&&W.lang in LC){let j=LC[W.lang];j.some(re=>!!Mt.extensions.getExtension(re))||T.push({title:"Syntax Highlighting for "+W.lang,message:`Did not find a valid syntax highlighter extension for ${W.lang} language block; you can choose to install one of the following:

`+j.map(re=>`- [${re}](https://marketplace.visualstudio.com/items?itemName=${re})
`)})}}return T})}})}Is.register=x1;function tu(t,e){try{let n=require.resolve(e+"/package.json",{paths:[t]});return{path:n,json:require(n)}}catch{}}});var eg=b(Ue=>{var Xo=Ue&&Ue.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.activate=Ue.tagNameCasings=Ue.attrNameCasings=void 0;var Kt=require("vscode"),P1=Kc(),q1=Ti(),He=mr(),jC=tg();Ue.attrNameCasings=new Map;Ue.tagNameCasings=new Map;function E1(t,e){var n;return Xo(this,void 0,void 0,function*(){yield e.start();let r=Kt.window.createStatusBarItem(Kt.StatusBarAlignment.Right);r.command="volar.action.nameCasing",u((n=Kt.window.activeTextEditor)===null||n===void 0?void 0:n.document);let i=Kt.window.onDidChangeActiveTextEditor(p=>{u(p?.document)}),s=Kt.workspace.onDidCloseTextDocument(p=>{Ue.attrNameCasings.delete(p.uri.toString()),Ue.tagNameCasings.delete(p.uri.toString())}),o=Kt.commands.registerCommand("volar.action.nameCasing",()=>Xo(this,void 0,void 0,function*(){var p;if(!(!((p=Kt.window.activeTextEditor)===null||p===void 0)&&p.document))return;let h=Kt.window.activeTextEditor.document,g=Ue.attrNameCasings.get(h.uri.toString()),y=Ue.tagNameCasings.get(h.uri.toString()),_=yield(0,P1.quickPick)([{1:{label:(y===He.TagNameCasing.Kebab?"\u2022 ":"")+"Component Name Using kebab-case"},2:{label:(y===He.TagNameCasing.Pascal?"\u2022 ":"")+"Component Name Using PascalCase"},3:{label:"Convert Component Name to kebab-case"},4:{label:"Convert Component Name to PascalCase"}},{5:{label:(g===He.AttrNameCasing.Kebab?"\u2022 ":"")+"Prop Name Using kebab-case"},6:{label:(g===He.AttrNameCasing.Camel?"\u2022 ":"")+"Prop Name Using camelCase"},7:{label:"Convert Prop Name to kebab-case"},8:{label:"Convert Prop Name to camelCase"}}]);_!==void 0&&(_==="1"&&Ue.tagNameCasings.set(h.uri.toString(),He.TagNameCasing.Kebab),_==="2"&&Ue.tagNameCasings.set(h.uri.toString(),He.TagNameCasing.Pascal),_==="3"&&(yield a(Kt.window.activeTextEditor,He.TagNameCasing.Kebab)),_==="4"&&(yield a(Kt.window.activeTextEditor,He.TagNameCasing.Pascal)),_==="5"&&Ue.attrNameCasings.set(h.uri.toString(),He.AttrNameCasing.Kebab),_==="6"&&Ue.attrNameCasings.set(h.uri.toString(),He.AttrNameCasing.Camel),_==="7"&&(yield c(Kt.window.activeTextEditor,He.AttrNameCasing.Kebab)),_==="8"&&(yield c(Kt.window.activeTextEditor,He.AttrNameCasing.Camel)),d())}));e.onDidChangeState(p=>{p.newState===q1.State.Stopped&&(i.dispose(),s.dispose(),o.dispose(),r.dispose())});function a(p,h){return Xo(this,void 0,void 0,function*(){let g=yield e.sendRequest(He.GetConvertTagCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(p.document),casing:h}),y=yield e.protocol2CodeConverter.asTextEdits(g);y&&p.edit(_=>{for(let S of y)_.replace(S.range,S.newText)}),Ue.tagNameCasings.set(p.document.uri.toString(),h),d()})}function c(p,h){return Xo(this,void 0,void 0,function*(){let g=yield e.sendRequest(He.GetConvertAttrCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(p.document),casing:h}),y=yield e.protocol2CodeConverter.asTextEdits(g);y&&p.edit(_=>{for(let S of y)_.replace(S.range,S.newText)}),Ue.attrNameCasings.set(p.document.uri.toString(),h),d()})}function u(p){return Xo(this,void 0,void 0,function*(){if(p?.languageId==="vue"||(0,jC.processMd)()&&p?.languageId==="markdown"||(0,jC.processHtml)()&&p?.languageId==="html"){let h,g=Ue.attrNameCasings.get(p.uri.toString()),y=Ue.tagNameCasings.get(p.uri.toString());if(!g){let _=Kt.workspace.getConfiguration("volar").get("completion.preferredAttrNameCase");_==="kebab"?g=He.AttrNameCasing.Kebab:_==="camel"?g=He.AttrNameCasing.Camel:(h??(h=yield l(p)),h?.attr.length===1?g=h.attr[0]:_==="auto-camel"?g=He.AttrNameCasing.Camel:g=He.AttrNameCasing.Kebab),Ue.attrNameCasings.set(p.uri.toString(),g)}if(!y){let _=Kt.workspace.getConfiguration("volar").get("completion.preferredTagNameCase");_==="kebab"?y=He.TagNameCasing.Kebab:_==="pascal"?y=He.TagNameCasing.Pascal:(h??(h=yield l(p)),h?.tag.length===1?y=h.tag[0]:y=He.TagNameCasing.Pascal),Ue.tagNameCasings.set(p.uri.toString(),y)}d(),r.show()}else r.hide()})}function l(p){return e.sendRequest(He.DetectNameCasingRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(p)})}function d(){var p;let h=(p=Kt.window.activeTextEditor)===null||p===void 0?void 0:p.document;if(!h)return;let g=Ue.attrNameCasings.get(h.uri.toString()),y=Ue.tagNameCasings.get(h.uri.toString()),_="<";y===He.TagNameCasing.Kebab?_+="tag-name ":y===He.TagNameCasing.Pascal?_+="TagName ":_+="? ",g===He.AttrNameCasing.Kebab?_+="prop-name":g===He.AttrNameCasing.Camel?_+="propName":_+="?",_+=" />",r.text=_}})}Ue.activate=E1});var $C=b(Ms=>{var ng=Ms&&Ms.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.register=void 0;var Vt=require("vscode"),k1=mr();function O1(t,e){let n=i();t.subscriptions.push(Vt.commands.registerCommand("volar.action.splitEditors",r));function r(){var s;return ng(this,void 0,void 0,function*(){let o=Vt.window.activeTextEditor;if(!o)return;let a=(s=yield Vt.workspace.getConfiguration("volar").get("splitEditors.layout"))!==null&&s!==void 0?s:{left:[],right:[]},c=o.document,{descriptor:u}=yield n(c.getText()),l=[],d=[];u.script&&(a.left.includes("script")&&l.push(u.script),a.right.includes("script")&&d.push(u.script)),u.scriptSetup&&(a.left.includes("scriptSetup")&&l.push(u.scriptSetup),a.right.includes("scriptSetup")&&d.push(u.scriptSetup)),u.template&&(a.left.includes("template")&&l.push(u.template),a.right.includes("template")&&d.push(u.template)),a.left.includes("styles")&&(l=l.concat(u.styles)),a.right.includes("styles")&&(d=d.concat(u.styles)),a.left.includes("customBlocks")&&(l=l.concat(u.customBlocks)),a.right.includes("customBlocks")&&(d=d.concat(u.customBlocks)),yield Vt.commands.executeCommand("workbench.action.joinEditorInGroup"),Vt.window.activeTextEditor===o?(yield p(l),yield Vt.commands.executeCommand("workbench.action.toggleSplitEditorInGroup"),yield p(d)):yield Vt.commands.executeCommand("editor.unfoldAll");function p(h){return ng(this,void 0,void 0,function*(){let g=Vt.window.activeTextEditor;if(!g)return;g.selections=h.length?h.map(_=>new Vt.Selection(c.positionAt(_.loc.start.offset),c.positionAt(_.loc.start.offset))):[new Vt.Selection(c.positionAt(c.getText().length),c.positionAt(c.getText().length))],yield Vt.commands.executeCommand("editor.unfoldAll"),yield Vt.commands.executeCommand("editor.foldLevel1");let y=h.sort((_,S)=>_.loc.start.offset-S.loc.start.offset)[0];y&&g.revealRange(new Vt.Range(c.positionAt(y.loc.start.offset),new Vt.Position(g.document.lineCount,0)),Vt.TextEditorRevealType.AtTop)})}})}function i(){let s,o;return a;function a(c){return ng(this,void 0,void 0,function*(){return c!==s&&(s=c,o=yield e.sendRequest(k1.ParseSFCRequest.type,c)),o})}}}Ms.register=O1});var tg=b(ot=>{var Jo=ot&&ot.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(ot,"__esModule",{value:!0});ot.diagnosticModel=ot.disableFileWatcher=ot.reverseConfigFilePriority=ot.noProjectReferences=ot.processMd=ot.processHtml=ot.getDocumentSelector=ot.deactivate=ot.activate=void 0;var Gt=Dw(),Pr=mr(),ft=require("vscode"),nu=Ti(),N1=xw(),F1=AC(),I1=eg(),M1=$C(),ki;(function(t){t[t.Semantic=0]="Semantic",t[t.Syntactic=1]="Syntactic"})(ki||(ki={}));var Lt,Ei;function L1(t,e){return Jo(this,void 0,void 0,function*(){let n=ft.window.onDidChangeActiveTextEditor(r);r();function r(){if(!ft.window.activeTextEditor){rg(t,e),n.dispose();return}let i=ft.window.activeTextEditor.document.languageId;(i==="vue"||i==="markdown"&&As()||i==="html"&&Ls())&&(rg(t,e),n.dispose()),(0,Gt.takeOverModeActive)(t)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(i)&&(rg(t,e),n.dispose())}})}ot.activate=L1;function rg(t,e){return Jo(this,void 0,void 0,function*(){ft.commands.executeCommand("setContext","volar.activated",!0),Lt=e("vue-semantic-server","Vue Semantic Server",ig(t,Pr.ServerMode.Semantic),UC(Pr.ServerMode.Semantic,t),HC([ki.Semantic]),6009),Ei=e("vue-syntactic-server","Vue Syntactic Server",ig(t,Pr.ServerMode.Syntactic),UC(Pr.ServerMode.Syntactic,t),HC([ki.Syntactic]),6011);let n=[Lt,Ei];s(),o(),a(),M1.register(t,Ei),F1.register(t,Lt),N1.register(t,Lt);let r={vue:!0,markdown:!0,javascript:!0,typescript:!0,javascriptreact:!0,typescriptreact:!0};(0,Gt.registerAutoInsertion)(t,[Ei,Lt],c=>r[c.languageId]),(0,Gt.registerShowVirtualFiles)("volar.action.showVirtualFiles",t,Lt),(0,Gt.registerWriteVirtualFiles)("volar.action.writeVirtualFiles",t,Lt),(0,Gt.registerFileReferences)("volar.vue.findAllFileReferences",t,Lt),(0,Gt.registerTsConfig)("volar.openTsconfig",t,Lt,c=>c.languageId==="vue"||As()&&c.languageId==="markdown"||Ls()&&c.languageId==="html"||(0,Gt.takeOverModeActive)(t)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(c.languageId)),(0,Gt.registerReloadProjects)("volar.action.reloadProject",t,[Lt]),(0,Gt.registerServerStats)("volar.action.serverStats",t,[Lt]),(0,Gt.registerTsVersion)("volar.selectTypeScriptVersion",t,Lt,c=>c.languageId==="vue"||As()&&c.languageId==="markdown"||Ls()&&c.languageId==="html"||(0,Gt.takeOverModeActive)(t)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(c.languageId),c=>(c+=" (vue)",sg()&&(c+=" (noProjectReferences)"),c));for(let c of n)(0,Gt.registerShowReferences)(t,c),(0,Gt.registerServerSys)(t,c);function i(){return Jo(this,void 0,void 0,function*(){(yield ft.window.showInformationMessage("Please reload VSCode to restart language servers.","Reload Window"))!==void 0&&ft.commands.executeCommand("workbench.action.reloadWindow")})}function s(){ft.workspace.onDidChangeConfiguration(c=>{(c.affectsConfiguration("volar.vueserver.maxOldSpaceSize")||c.affectsConfiguration("volar.vueserver.diagnosticModel")||c.affectsConfiguration("volar.vueserver.noProjectReferences")||c.affectsConfiguration("volar.vueserver.reverseConfigFilePriority")||c.affectsConfiguration("volar.vueserver.disableFileWatcher")||c.affectsConfiguration("volar.vueserver.petiteVue.processHtmlFile")||c.affectsConfiguration("volar.vueserver.vitePress.processMdFile")||c.affectsConfiguration("volar.vueserver.additionalExtensions")||c.affectsConfiguration("volar.vueserver.maxFileSize")||c.affectsConfiguration("volar.vueserver.configFilePath"))&&i()})}function o(){return Jo(this,void 0,void 0,function*(){t.subscriptions.push(ft.commands.registerCommand("volar.action.restartServer",()=>Jo(this,void 0,void 0,function*(){yield Promise.all(n.map(c=>c.stop())),yield Promise.all(n.map(c=>c.start())),a()})))})}function a(){I1.activate(t,Lt)}})}function A1(){return Promise.all([Lt?.stop(),Ei?.stop()])}ot.deactivate=A1;function ig(t,e){let n=(0,Gt.takeOverModeActive)(t),r=n?["vue","javascript","typescript","javascriptreact","typescriptreact"]:["vue"];return n&&e===Pr.ServerMode.Semantic&&r.push("json"),Ls()&&r.push("html"),As()&&r.push("markdown"),r}ot.getDocumentSelector=ig;function Ls(){return!!ft.workspace.getConfiguration("volar").get("vueserver.petiteVue.processHtmlFile")}ot.processHtml=Ls;function As(){return!!ft.workspace.getConfiguration("volar").get("vueserver.vitePress.processMdFile")}ot.processMd=As;function sg(){return!!ft.workspace.getConfiguration("volar").get("vueserver.noProjectReferences")}ot.noProjectReferences=sg;function WC(){return!!ft.workspace.getConfiguration("volar").get("vueserver.reverseConfigFilePriority")}ot.reverseConfigFilePriority=WC;function BC(){return!!ft.workspace.getConfiguration("volar").get("vueserver.disableFileWatcher")}ot.disableFileWatcher=BC;function zC(){return ft.workspace.getConfiguration("volar").get("vueserver.diagnosticModel")}ot.diagnosticModel=zC;function j1(){var t;return(t=ft.workspace.getConfiguration("volar").get("vueserver.additionalExtensions"))!==null&&t!==void 0?t:[]}function HC(t){return function(e){e.locale=ft.env.language,e.capabilities.textDocument&&(t.includes(ki.Semantic)||(e.capabilities.textDocument.references=void 0,e.capabilities.textDocument.implementation=void 0,e.capabilities.textDocument.definition=void 0,e.capabilities.textDocument.typeDefinition=void 0,e.capabilities.textDocument.callHierarchy=void 0,e.capabilities.textDocument.hover=void 0,e.capabilities.textDocument.rename=void 0,e.capabilities.textDocument.signatureHelp=void 0,e.capabilities.textDocument.codeAction=void 0,e.capabilities.textDocument.completion=void 0,e.capabilities.textDocument.documentHighlight=void 0,e.capabilities.textDocument.documentLink=void 0,e.capabilities.textDocument.codeLens=void 0,e.capabilities.textDocument.semanticTokens=void 0,e.capabilities.textDocument.inlayHint=void 0,e.capabilities.textDocument.diagnostic=void 0),t.includes(ki.Syntactic)||(e.capabilities.textDocument.selectionRange=void 0,e.capabilities.textDocument.foldingRange=void 0,e.capabilities.textDocument.linkedEditingRange=void 0,e.capabilities.textDocument.documentSymbol=void 0,e.capabilities.textDocument.colorProvider=void 0,e.capabilities.textDocument.formatting=void 0,e.capabilities.textDocument.rangeFormatting=void 0,e.capabilities.textDocument.onTypeFormatting=void 0)),e.capabilities.workspace&&(t.includes(ki.Semantic)||(e.capabilities.workspace.symbol=void 0,e.capabilities.workspace.fileOperations=void 0))}}function UC(t,e){let n=ft.workspace.getConfiguration("volar").get("vueserver.textDocumentSync");return{configFilePath:ft.workspace.getConfiguration("volar").get("vueserver.configFilePath"),respectClientCapabilities:!0,serverMode:t,diagnosticModel:t===Pr.ServerMode.Syntactic?Pr.DiagnosticModel.None:zC()==="pull"?Pr.DiagnosticModel.Pull:Pr.DiagnosticModel.Push,textDocumentSync:n?{incremental:nu.TextDocumentSyncKind.Incremental,full:nu.TextDocumentSyncKind.Full,none:nu.TextDocumentSyncKind.None}[n]:nu.TextDocumentSyncKind.Incremental,typescript:{tsdk:(0,Gt.getTsdk)(e).tsdk},noProjectReferences:sg(),reverseConfigFilePriority:WC(),disableFileWatcher:BC(),maxFileSize:ft.workspace.getConfiguration("volar").get("vueserver.maxFileSize"),petiteVue:{processHtmlFile:Ls()},vitePress:{processMdFile:As()},json:{customBlockSchemaUrls:ft.workspace.getConfiguration("volar").get("vueserver.json.customBlockSchemaUrls")},additionalExtensions:j1(),semanticTokensLegend:{tokenTypes:["component"],tokenModifiers:[]}}}});var VC=b(iu=>{Object.defineProperty(iu,"__esModule",{value:!0});iu.middleware=void 0;var ru=mr(),og=require("vscode"),KC=eg();iu.middleware={handleDiagnostics:(t,e,n)=>{let r=og.workspace.textDocuments.find(i=>i.uri.toString()===t.toString());if(r){let i=!1;for(let s of e){let o=s.data;if(typeof o=="object"&&"version"in o&&r.version!==o.version){i=!0;break}}if(i)return}n(t,e)},workspace:{configuration(t,e,n){return t.items.some(r=>r.section==="volar.completion.preferredAttrNameCase"||r.section==="volar.completion.preferredTagNameCase")?t.items.map(r=>{if(r.scopeUri){if(r.section==="volar.completion.preferredTagNameCase"){let i=KC.tagNameCasings.get(r.scopeUri);if(i===ru.TagNameCasing.Kebab)return"kebab";if(i===ru.TagNameCasing.Pascal)return"pascal"}if(r.section==="volar.completion.preferredAttrNameCase"){let i=KC.attrNameCasings.get(r.scopeUri);if(i===ru.AttrNameCasing.Kebab)return"kebab";if(i===ru.AttrNameCasing.Camel)return"camel"}}return og.workspace.getConfiguration(r.section,r.scopeUri?og.Uri.parse(r.scopeUri):void 0)}):n(t,e)}}}});var JC=b(Vr=>{var GC=Vr&&Vr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.exists=Vr.readFile=void 0;var XC=require("vscode");function $1(t){return GC(this,void 0,void 0,function*(){let e=yield XC.workspace.fs.readFile(t);return new TextDecoder("utf8").decode(e)})}Vr.readFile=$1;function H1(t){return GC(this,void 0,void 0,function*(){try{return yield XC.workspace.fs.stat(t),!0}catch{return!1}})}Vr.exists=H1});var Gr=b((IL,YC)=>{"use strict";YC.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Yo=b((ML,su)=>{"use strict";var{EMPTY_BUFFER:U1}=Gr();function W1(t,e){if(t.length===0)return U1;if(t.length===1)return t[0];let n=Buffer.allocUnsafe(e),r=0;for(let i=0;i<t.length;i++){let s=t[i];n.set(s,r),r+=s.length}return r<e?n.slice(0,r):n}function QC(t,e,n,r,i){for(let s=0;s<i;s++)n[r+s]=t[s]^e[s&3]}function ZC(t,e){for(let n=0;n<t.length;n++)t[n]^=e[n&3]}function B1(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function ag(t){if(ag.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=Buffer.from(t):ArrayBuffer.isView(t)?e=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),ag.readOnly=!1),e}su.exports={concat:W1,mask:QC,toArrayBuffer:B1,toBuffer:ag,unmask:ZC};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");su.exports.mask=function(e,n,r,i,s){s<48?QC(e,n,r,i,s):t.mask(e,n,r,i,s)},su.exports.unmask=function(e,n){e.length<32?ZC(e,n):t.unmask(e,n)}}catch{}});var nb=b((LL,tb)=>{"use strict";var eb=Symbol("kDone"),cg=Symbol("kRun"),ug=class{constructor(e){this[eb]=()=>{this.pending--,this[cg]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[cg]()}[cg](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[eb])}}};tb.exports=ug});var ea=b((AL,ob)=>{"use strict";var Qo=require("zlib"),rb=Yo(),z1=nb(),{kStatusCode:ib}=Gr(),K1=Buffer.from([0,0,255,255]),cu=Symbol("permessage-deflate"),qr=Symbol("total-length"),Zo=Symbol("callback"),Xr=Symbol("buffers"),au=Symbol("error"),ou,lg=class{constructor(e,n,r){if(this._maxPayload=r|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!n,this._deflate=null,this._inflate=null,this.params=null,!ou){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;ou=new z1(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Zo];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let n=this._options,r=e.find(i=>!(n.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(n.serverMaxWindowBits===!1||typeof n.serverMaxWindowBits=="number"&&n.serverMaxWindowBits>i.server_max_window_bits)||typeof n.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return n.serverNoContextTakeover&&(r.server_no_context_takeover=!0),n.clientNoContextTakeover&&(r.client_no_context_takeover=!0),typeof n.serverMaxWindowBits=="number"&&(r.server_max_window_bits=n.serverMaxWindowBits),typeof n.clientMaxWindowBits=="number"?r.client_max_window_bits=n.clientMaxWindowBits:(r.client_max_window_bits===!0||n.clientMaxWindowBits===!1)&&delete r.client_max_window_bits,r}acceptAsClient(e){let n=e[0];if(this._options.clientNoContextTakeover===!1&&n.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!n.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(n.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&n.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return n}normalizeParams(e){return e.forEach(n=>{Object.keys(n).forEach(r=>{let i=n[r];if(i.length>1)throw new Error(`Parameter "${r}" must have only a single value`);if(i=i[0],r==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${r}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${r}": ${i}`)}else if(r==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${r}": ${i}`);i=s}else if(r==="client_no_context_takeover"||r==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${r}": ${i}`)}else throw new Error(`Unknown parameter "${r}"`);n[r]=i})}),e}decompress(e,n,r){ou.add(i=>{this._decompress(e,n,(s,o)=>{i(),r(s,o)})})}compress(e,n,r){ou.add(i=>{this._compress(e,n,(s,o)=>{i(),r(s,o)})})}_decompress(e,n,r){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Qo.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=Qo.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[cu]=this,this._inflate[qr]=0,this._inflate[Xr]=[],this._inflate.on("error",G1),this._inflate.on("data",sb)}this._inflate[Zo]=r,this._inflate.write(e),n&&this._inflate.write(K1),this._inflate.flush(()=>{let s=this._inflate[au];if(s){this._inflate.close(),this._inflate=null,r(s);return}let o=rb.concat(this._inflate[Xr],this._inflate[qr]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[qr]=0,this._inflate[Xr]=[],n&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,o)})}_compress(e,n,r){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Qo.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=Qo.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[qr]=0,this._deflate[Xr]=[],this._deflate.on("data",V1)}this._deflate[Zo]=r,this._deflate.write(e),this._deflate.flush(Qo.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=rb.concat(this._deflate[Xr],this._deflate[qr]);n&&(s=s.slice(0,s.length-4)),this._deflate[Zo]=null,this._deflate[qr]=0,this._deflate[Xr]=[],n&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,s)})}};ob.exports=lg;function V1(t){this[Xr].push(t),this[qr]+=t.length}function sb(t){if(this[qr]+=t.length,this[cu]._maxPayload<1||this[qr]<=this[cu]._maxPayload){this[Xr].push(t);return}this[au]=new RangeError("Max payload size exceeded"),this[au].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[au][ib]=1009,this.removeListener("data",sb),this.reset()}function G1(t){this[cu]._inflate=null,t[ib]=1007,this[Zo](t)}});var ta=b((jL,dg)=>{"use strict";var X1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function J1(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function ab(t){let e=t.length,n=0;for(;n<e;)if(!(t[n]&128))n++;else if((t[n]&224)===192){if(n+1===e||(t[n+1]&192)!==128||(t[n]&254)===192)return!1;n+=2}else if((t[n]&240)===224){if(n+2>=e||(t[n+1]&192)!==128||(t[n+2]&192)!==128||t[n]===224&&(t[n+1]&224)===128||t[n]===237&&(t[n+1]&224)===160)return!1;n+=3}else if((t[n]&248)===240){if(n+3>=e||(t[n+1]&192)!==128||(t[n+2]&192)!==128||(t[n+3]&192)!==128||t[n]===240&&(t[n+1]&240)===128||t[n]===244&&t[n+1]>143||t[n]>244)return!1;n+=4}else return!1;return!0}dg.exports={isValidStatusCode:J1,isValidUTF8:ab,tokenChars:X1};if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");dg.exports.isValidUTF8=function(e){return e.length<150?ab(e):t(e)}}catch{}});var gg=b(($L,pb)=>{"use strict";var{Writable:Y1}=require("stream"),cb=ea(),{BINARY_TYPES:Q1,EMPTY_BUFFER:ub,kStatusCode:Z1,kWebSocket:eN}=Gr(),{concat:fg,toArrayBuffer:tN,unmask:nN}=Yo(),{isValidStatusCode:rN,isValidUTF8:lb}=ta(),na=0,db=1,fb=2,hb=3,hg=4,iN=5,pg=class extends Y1{constructor(e={}){super(),this._binaryType=e.binaryType||Q1[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[eN]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=na,this._loop=!1}_write(e,n,r){if(this._opcode===8&&this._state==na)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let r=this._buffers[0];return this._buffers[0]=r.slice(e),r.slice(0,e)}let n=Buffer.allocUnsafe(e);do{let r=this._buffers[0],i=n.length-e;e>=r.length?n.set(this._buffers.shift(),i):(n.set(new Uint8Array(r.buffer,r.byteOffset,e),i),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return n}startLoop(e){let n;this._loop=!0;do switch(this._state){case na:n=this.getInfo();break;case db:n=this.getPayloadLength16();break;case fb:n=this.getPayloadLength64();break;case hb:this.getMask();break;case hg:n=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(n)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,mt(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let n=(e[0]&64)===64;if(n&&!this._extensions[cb.extensionName])return this._loop=!1,mt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(n)return this._loop=!1,mt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,mt(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,mt(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,mt(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(n)return this._loop=!1,mt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,mt(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,mt(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,mt(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,mt(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=db;else if(this._payloadLength===127)this._state=fb;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),n=e.readUInt32BE(0);return n>Math.pow(2,53-32)-1?(this._loop=!1,mt(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=n*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,mt(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=hb:this._state=hg}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=hg}getData(e){let n=ub;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}n=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&nN(n,this._mask)}if(this._opcode>7)return this.controlMessage(n);if(this._compressed){this._state=iN,this.decompress(n,e);return}return n.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(n)),this.dataMessage()}decompress(e,n){this._extensions[cb.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return n(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return n(mt(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}let o=this.dataMessage();if(o)return n(o);this.startLoop(n)})}dataMessage(){if(this._fin){let e=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let r;this._binaryType==="nodebuffer"?r=fg(n,e):this._binaryType==="arraybuffer"?r=tN(fg(n,e)):r=n,this.emit("message",r,!0)}else{let r=fg(n,e);if(!this._skipUTF8Validation&&!lb(r))return this._loop=!1,mt(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=na}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,ub),this.end();else{if(e.length===1)return mt(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let n=e.readUInt16BE(0);if(!rN(n))return mt(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let r=e.slice(2);if(!this._skipUTF8Validation&&!lb(r))return mt(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",n,r),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=na}};pb.exports=pg;function mt(t,e,n,r,i){let s=new t(n?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(s,mt),s.code=i,s[Z1]=r,s}});var mg=b((WL,vb)=>{"use strict";var HL=require("net"),UL=require("tls"),{randomFillSync:sN}=require("crypto"),gb=ea(),{EMPTY_BUFFER:oN}=Gr(),{isValidStatusCode:aN}=ta(),{mask:mb,toBuffer:js}=Yo(),Vn=Symbol("kByteLength"),cN=Buffer.alloc(4),ar=class{constructor(e,n,r){this._extensions=n||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,n){let r,i=!1,s=2,o=!1;n.mask&&(r=n.maskBuffer||cN,n.generateMask?n.generateMask(r):sN(r,0,4),o=(r[0]|r[1]|r[2]|r[3])===0,s=6);let a;typeof e=="string"?(!n.mask||o)&&n[Vn]!==void 0?a=n[Vn]:(e=Buffer.from(e),a=e.length):(a=e.length,i=n.mask&&n.readOnly&&!o);let c=a;a>=65536?(s+=8,c=127):a>125&&(s+=2,c=126);let u=Buffer.allocUnsafe(i?a+s:s);return u[0]=n.fin?n.opcode|128:n.opcode,n.rsv1&&(u[0]|=64),u[1]=c,c===126?u.writeUInt16BE(a,2):c===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),n.mask?(u[1]|=128,u[s-4]=r[0],u[s-3]=r[1],u[s-2]=r[2],u[s-1]=r[3],o?[u,e]:i?(mb(e,r,u,s,a),[u]):(mb(e,r,e,0,a),[u,e])):[u,e]}close(e,n,r,i){let s;if(e===void 0)s=oN;else{if(typeof e!="number"||!aN(e))throw new TypeError("First argument must be a valid error code number");if(n===void 0||!n.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(n);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof n=="string"?s.write(n,2):s.set(n,2)}}let o={[Vn]:s.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(ar.frame(s,o),i)}ping(e,n,r){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):(e=js(e),i=e.length,s=js.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Vn]:i,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(ar.frame(e,o),r)}pong(e,n,r){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):(e=js(e),i=e.length,s=js.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Vn]:i,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(ar.frame(e,o),r)}send(e,n,r){let i=this._extensions[gb.extensionName],s=n.binary?2:1,o=n.compress,a,c;if(typeof e=="string"?(a=Buffer.byteLength(e),c=!1):(e=js(e),a=e.length,c=js.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=i._threshold),this._compress=o):(o=!1,s=0),n.fin&&(this._firstFragment=!0),i){let u={[Vn]:a,fin:n.fin,generateMask:this._generateMask,mask:n.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:c,rsv1:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}else this.sendFrame(ar.frame(e,{[Vn]:a,fin:n.fin,generateMask:this._generateMask,mask:n.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:c,rsv1:!1}),r)}dispatch(e,n,r,i){if(!n){this.sendFrame(ar.frame(e,r),i);return}let s=this._extensions[gb.extensionName];this._bufferedBytes+=r[Vn],this._deflating=!0,s.compress(e,r.fin,(o,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(c);for(let u=0;u<this._queue.length;u++){let l=this._queue[u],d=l[l.length-1];typeof d=="function"&&d(c)}return}this._bufferedBytes-=r[Vn],this._deflating=!1,r.readOnly=!1,this.sendFrame(ar.frame(a,r),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Vn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Vn],this._queue.push(e)}sendFrame(e,n){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],n),this._socket.uncork()):this._socket.write(e[0],n)}};vb.exports=ar});var Tb=b((BL,Db)=>{"use strict";var{kForOnEventAttribute:ra,kListener:vg}=Gr(),yb=Symbol("kCode"),_b=Symbol("kData"),wb=Symbol("kError"),Cb=Symbol("kMessage"),bb=Symbol("kReason"),$s=Symbol("kTarget"),Sb=Symbol("kType"),Rb=Symbol("kWasClean"),Er=class{constructor(e){this[$s]=null,this[Sb]=e}get target(){return this[$s]}get type(){return this[Sb]}};Object.defineProperty(Er.prototype,"target",{enumerable:!0});Object.defineProperty(Er.prototype,"type",{enumerable:!0});var Oi=class extends Er{constructor(e,n={}){super(e),this[yb]=n.code===void 0?0:n.code,this[bb]=n.reason===void 0?"":n.reason,this[Rb]=n.wasClean===void 0?!1:n.wasClean}get code(){return this[yb]}get reason(){return this[bb]}get wasClean(){return this[Rb]}};Object.defineProperty(Oi.prototype,"code",{enumerable:!0});Object.defineProperty(Oi.prototype,"reason",{enumerable:!0});Object.defineProperty(Oi.prototype,"wasClean",{enumerable:!0});var Hs=class extends Er{constructor(e,n={}){super(e),this[wb]=n.error===void 0?null:n.error,this[Cb]=n.message===void 0?"":n.message}get error(){return this[wb]}get message(){return this[Cb]}};Object.defineProperty(Hs.prototype,"error",{enumerable:!0});Object.defineProperty(Hs.prototype,"message",{enumerable:!0});var ia=class extends Er{constructor(e,n={}){super(e),this[_b]=n.data===void 0?null:n.data}get data(){return this[_b]}};Object.defineProperty(ia.prototype,"data",{enumerable:!0});var uN={addEventListener(t,e,n={}){for(let i of this.listeners(t))if(!n[ra]&&i[vg]===e&&!i[ra])return;let r;if(t==="message")r=function(s,o){let a=new ia("message",{data:o?s:s.toString()});a[$s]=this,uu(e,this,a)};else if(t==="close")r=function(s,o){let a=new Oi("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[$s]=this,uu(e,this,a)};else if(t==="error")r=function(s){let o=new Hs("error",{error:s,message:s.message});o[$s]=this,uu(e,this,o)};else if(t==="open")r=function(){let s=new Er("open");s[$s]=this,uu(e,this,s)};else return;r[ra]=!!n[ra],r[vg]=e,n.once?this.once(t,r):this.on(t,r)},removeEventListener(t,e){for(let n of this.listeners(t))if(n[vg]===e&&!n[ra]){this.removeListener(t,n);break}}};Db.exports={CloseEvent:Oi,ErrorEvent:Hs,Event:Er,EventTarget:uN,MessageEvent:ia};function uu(t,e,n){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,n):t.call(e,n)}});var yg=b((zL,xb)=>{"use strict";var{tokenChars:sa}=ta();function cr(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}function lN(t){let e=Object.create(null),n=Object.create(null),r=!1,i=!1,s=!1,o,a,c=-1,u=-1,l=-1,d=0;for(;d<t.length;d++)if(u=t.charCodeAt(d),o===void 0)if(l===-1&&sa[u]===1)c===-1&&(c=d);else if(d!==0&&(u===32||u===9))l===-1&&c!==-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let h=t.slice(c,l);u===44?(cr(e,h,n),n=Object.create(null)):o=h,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(l===-1&&sa[u]===1)c===-1&&(c=d);else if(u===32||u===9)l===-1&&c!==-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d),cr(n,t.slice(c,l),!0),u===44&&(cr(e,o,n),n=Object.create(null),o=void 0),c=l=-1}else if(u===61&&c!==-1&&l===-1)a=t.slice(c,d),c=l=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(i){if(sa[u]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);c===-1?c=d:r||(r=!0),i=!1}else if(s)if(sa[u]===1)c===-1&&(c=d);else if(u===34&&c!==-1)s=!1,l=d;else if(u===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(u===34&&t.charCodeAt(d-1)===61)s=!0;else if(l===-1&&sa[u]===1)c===-1&&(c=d);else if(c!==-1&&(u===32||u===9))l===-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let h=t.slice(c,l);r&&(h=h.replace(/\\/g,""),r=!1),cr(n,a,h),u===44&&(cr(e,o,n),n=Object.create(null),o=void 0),a=void 0,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(c===-1||s||u===32||u===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=d);let p=t.slice(c,l);return o===void 0?cr(e,p,n):(a===void 0?cr(n,p,!0):r?cr(n,a,p.replace(/\\/g,"")):cr(n,a,p),cr(e,o,n)),e}function dN(t){return Object.keys(t).map(e=>{let n=t[e];return Array.isArray(n)||(n=[n]),n.map(r=>[e].concat(Object.keys(r).map(i=>{let s=r[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}xb.exports={format:dN,parse:lN}});var Sg=b((VL,Ab)=>{"use strict";var fN=require("events"),hN=require("https"),pN=require("http"),Eb=require("net"),gN=require("tls"),{randomBytes:mN,createHash:vN}=require("crypto"),{Readable:KL}=require("stream"),{URL:_g}=require("url"),Jr=ea(),yN=gg(),_N=mg(),{BINARY_TYPES:Pb,EMPTY_BUFFER:lu,GUID:wN,kForOnEventAttribute:wg,kListener:CN,kStatusCode:bN,kWebSocket:At,NOOP:kb}=Gr(),{EventTarget:{addEventListener:SN,removeEventListener:RN}}=Tb(),{format:DN,parse:TN}=yg(),{toBuffer:xN}=Yo(),PN=30*1e3,Ob=Symbol("kAborted"),Cg=[8,13],kr=["CONNECTING","OPEN","CLOSING","CLOSED"],qN=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,ae=class extends fN{constructor(e,n,r){super(),this._binaryType=Pb[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=lu,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=ae.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,n===void 0?n=[]:Array.isArray(n)||(typeof n=="object"&&n!==null?(r=n,n=[]):n=[n]),Nb(this,e,n,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){Pb.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,n,r){let i=new yN({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new _N(e,this._extensions,r.generateMask),this._receiver=i,this._socket=e,i[At]=this,e[At]=this,i.on("conclude",ON),i.on("drain",NN),i.on("error",FN),i.on("message",IN),i.on("ping",MN),i.on("pong",LN),e.setTimeout(0),e.setNoDelay(),n.length>0&&e.unshift(n),e.on("close",Ib),e.on("data",fu),e.on("end",Mb),e.on("error",Lb),this._readyState=ae.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=ae.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Jr.extensionName]&&this._extensions[Jr.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=ae.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,n){if(this.readyState!==ae.CLOSED){if(this.readyState===ae.CONNECTING){let r="WebSocket was closed before the connection was established";return ln(this,this._req,r)}if(this.readyState===ae.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=ae.CLOSING,this._sender.close(e,n,!this._isServer,r=>{r||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),PN)}}pause(){this.readyState===ae.CONNECTING||this.readyState===ae.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,n,r){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=n=void 0):typeof n=="function"&&(r=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){bg(this,e,r);return}n===void 0&&(n=!this._isServer),this._sender.ping(e||lu,n,r)}pong(e,n,r){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=n=void 0):typeof n=="function"&&(r=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){bg(this,e,r);return}n===void 0&&(n=!this._isServer),this._sender.pong(e||lu,n,r)}resume(){this.readyState===ae.CONNECTING||this.readyState===ae.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,n,r){if(this.readyState===ae.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof n=="function"&&(r=n,n={}),typeof e=="number"&&(e=e.toString()),this.readyState!==ae.OPEN){bg(this,e,r);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...n};this._extensions[Jr.extensionName]||(i.compress=!1),this._sender.send(e||lu,i,r)}terminate(){if(this.readyState!==ae.CLOSED){if(this.readyState===ae.CONNECTING){let e="WebSocket was closed before the connection was established";return ln(this,this._req,e)}this._socket&&(this._readyState=ae.CLOSING,this._socket.destroy())}}};Object.defineProperty(ae,"CONNECTING",{enumerable:!0,value:kr.indexOf("CONNECTING")});Object.defineProperty(ae.prototype,"CONNECTING",{enumerable:!0,value:kr.indexOf("CONNECTING")});Object.defineProperty(ae,"OPEN",{enumerable:!0,value:kr.indexOf("OPEN")});Object.defineProperty(ae.prototype,"OPEN",{enumerable:!0,value:kr.indexOf("OPEN")});Object.defineProperty(ae,"CLOSING",{enumerable:!0,value:kr.indexOf("CLOSING")});Object.defineProperty(ae.prototype,"CLOSING",{enumerable:!0,value:kr.indexOf("CLOSING")});Object.defineProperty(ae,"CLOSED",{enumerable:!0,value:kr.indexOf("CLOSED")});Object.defineProperty(ae.prototype,"CLOSED",{enumerable:!0,value:kr.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(ae.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(ae.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[wg])return e[CN];return null},set(e){for(let n of this.listeners(t))if(n[wg]){this.removeListener(t,n);break}typeof e=="function"&&this.addEventListener(t,e,{[wg]:!0})}})});ae.prototype.addEventListener=SN;ae.prototype.removeEventListener=RN;Ab.exports=ae;function Nb(t,e,n,r){let i={protocolVersion:Cg[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...r,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!Cg.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${Cg.join(", ")})`);let s;if(e instanceof _g)s=e,t._url=e.href;else{try{s=new _g(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}t._url=e}let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",c;if(s.protocol!=="ws:"&&!o&&!a?c=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:a&&!s.pathname?c="The URL's pathname is empty":s.hash&&(c="The URL contains a fragment identifier"),c){let y=new SyntaxError(c);if(t._redirects===0)throw y;du(t,y);return}let u=o?443:80,l=mN(16).toString("base64"),d=o?hN.request:pN.request,p=new Set,h;if(i.createConnection=o?kN:EN,i.defaultPort=i.defaultPort||u,i.port=s.port||u,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(h=new Jr(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=DN({[Jr.extensionName]:h.offer()})),n.length){for(let y of n){if(typeof y!="string"||!qN.test(y)||p.has(y))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(y)}i.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){let y=i.path.split(":");i.socketPath=y[0],i.path=y[1]}let g;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?i.socketPath:s.host;let y=r&&r.headers;if(r={...r,headers:{}},y)for(let[_,S]of Object.entries(y))r.headers[_.toLowerCase()]=S}else if(t.listenerCount("redirect")===0){let y=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!y||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,y||delete i.headers.host,i.auth=void 0)}i.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),g=t._req=d(i),t._redirects&&t.emit("redirect",t.url,g)}else g=t._req=d(i);i.timeout&&g.on("timeout",()=>{ln(t,g,"Opening handshake has timed out")}),g.on("error",y=>{g===null||g[Ob]||(g=t._req=null,du(t,y))}),g.on("response",y=>{let _=y.headers.location,S=y.statusCode;if(_&&i.followRedirects&&S>=300&&S<400){if(++t._redirects>i.maxRedirects){ln(t,g,"Maximum redirects exceeded");return}g.abort();let T;try{T=new _g(_,e)}catch{let D=new SyntaxError(`Invalid URL: ${_}`);du(t,D);return}Nb(t,T,n,r)}else t.emit("unexpected-response",g,y)||ln(t,g,`Unexpected server response: ${y.statusCode}`)}),g.on("upgrade",(y,_,S)=>{if(t.emit("upgrade",y),t.readyState!==ae.CONNECTING)return;if(g=t._req=null,y.headers.upgrade.toLowerCase()!=="websocket"){ln(t,_,"Invalid Upgrade header");return}let T=vN("sha1").update(l+wN).digest("base64");if(y.headers["sec-websocket-accept"]!==T){ln(t,_,"Invalid Sec-WebSocket-Accept header");return}let C=y.headers["sec-websocket-protocol"],D;if(C!==void 0?p.size?p.has(C)||(D="Server sent an invalid subprotocol"):D="Server sent a subprotocol but none was requested":p.size&&(D="Server sent no subprotocol"),D){ln(t,_,D);return}C&&(t._protocol=C);let E=y.headers["sec-websocket-extensions"];if(E!==void 0){if(!h){ln(t,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let W;try{W=TN(E)}catch{ln(t,_,"Invalid Sec-WebSocket-Extensions header");return}let j=Object.keys(W);if(j.length!==1||j[0]!==Jr.extensionName){ln(t,_,"Server indicated an extension that was not requested");return}try{h.accept(W[Jr.extensionName])}catch{ln(t,_,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[Jr.extensionName]=h}t.setSocket(_,S,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),g.end()}function du(t,e){t._readyState=ae.CLOSING,t.emit("error",e),t.emitClose()}function EN(t){return t.path=t.socketPath,Eb.connect(t)}function kN(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=Eb.isIP(t.host)?"":t.host),gN.connect(t)}function ln(t,e,n){t._readyState=ae.CLOSING;let r=new Error(n);Error.captureStackTrace(r,ln),e.setHeader?(e[Ob]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(du,t,r)):(e.destroy(r),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function bg(t,e,n){if(e){let r=xN(e).length;t._socket?t._sender._bufferedBytes+=r:t._bufferedAmount+=r}if(n){let r=new Error(`WebSocket is not open: readyState ${t.readyState} (${kr[t.readyState]})`);n(r)}}function ON(t,e){let n=this[At];n._closeFrameReceived=!0,n._closeMessage=e,n._closeCode=t,n._socket[At]!==void 0&&(n._socket.removeListener("data",fu),process.nextTick(Fb,n._socket),t===1005?n.close():n.close(t,e))}function NN(){let t=this[At];t.isPaused||t._socket.resume()}function FN(t){let e=this[At];e._socket[At]!==void 0&&(e._socket.removeListener("data",fu),process.nextTick(Fb,e._socket),e.close(t[bN])),e.emit("error",t)}function qb(){this[At].emitClose()}function IN(t,e){this[At].emit("message",t,e)}function MN(t){let e=this[At];e.pong(t,!e._isServer,kb),e.emit("ping",t)}function LN(t){this[At].emit("pong",t)}function Fb(t){t.resume()}function Ib(){let t=this[At];this.removeListener("close",Ib),this.removeListener("data",fu),this.removeListener("end",Mb),t._readyState=ae.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[At]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",qb),t._receiver.on("finish",qb))}function fu(t){this[At]._receiver.write(t)||this.pause()}function Mb(){let t=this[At];t._readyState=ae.CLOSING,t._receiver.end(),this.end()}function Lb(){let t=this[At];this.removeListener("error",Lb),this.on("error",kb),t&&(t._readyState=ae.CLOSING,this.destroy())}});var Ub=b((GL,Hb)=>{"use strict";var{Duplex:AN}=require("stream");function jb(t){t.emit("close")}function jN(){!this.destroyed&&this._writableState.finished&&this.destroy()}function $b(t){this.removeListener("error",$b),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function $N(t,e){let n=!0,r=new AN({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&r._readableState.objectMode?s.toString():s;r.push(a)||t.pause()}),t.once("error",function(s){r.destroyed||(n=!1,r.destroy(s))}),t.once("close",function(){r.destroyed||r.push(null)}),r._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(jb,r);return}let o=!1;t.once("error",function(c){o=!0,s(c)}),t.once("close",function(){o||s(i),process.nextTick(jb,r)}),n&&t.terminate()},r._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){r._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),r._readableState.endEmitted&&r.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},r._read=function(){t.isPaused&&t.resume()},r._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){r._write(i,s,o)});return}t.send(i,o)},r.on("end",jN),r.on("error",$b),r}Hb.exports=$N});var Bb=b((XL,Wb)=>{"use strict";var{tokenChars:HN}=ta();function UN(t){let e=new Set,n=-1,r=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(r===-1&&HN[o]===1)n===-1&&(n=i);else if(i!==0&&(o===32||o===9))r===-1&&n!==-1&&(r=i);else if(o===44){if(n===-1)throw new SyntaxError(`Unexpected character at index ${i}`);r===-1&&(r=i);let a=t.slice(n,r);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),n=r=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(n===-1||r!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(n,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}Wb.exports={parse:UN}});var Yb=b((ZL,Jb)=>{"use strict";var WN=require("events"),hu=require("http"),JL=require("https"),YL=require("net"),QL=require("tls"),{createHash:BN}=require("crypto"),zb=yg(),Ni=ea(),zN=Bb(),KN=Sg(),{GUID:VN,kWebSocket:GN}=Gr(),XN=/^[+/0-9A-Za-z]{22}==$/,Kb=0,Vb=1,Xb=2,Rg=class extends WN{constructor(e,n){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:KN,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=hu.createServer((r,i)=>{let s=hu.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,n)):e.server&&(this._server=e.server),this._server){let r=this.emit.bind(this,"connection");this._removeListeners=JN(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,r)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=Kb}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===Xb){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(oa,this);return}if(e&&this.once("close",e),this._state!==Vb)if(this._state=Vb,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(oa,this):process.nextTick(oa,this);else{let n=this._server;this._removeListeners(),this._removeListeners=this._server=null,n.close(()=>{oa(this)})}}shouldHandle(e){if(this.options.path){let n=e.url.indexOf("?");if((n!==-1?e.url.slice(0,n):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,n,r,i){n.on("error",Gb);let s=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Fi(this,e,n,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Fi(this,e,n,400,"Invalid Upgrade header");return}if(!s||!XN.test(s)){Fi(this,e,n,400,"Missing or invalid Sec-WebSocket-Key header");return}if(o!==8&&o!==13){Fi(this,e,n,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){aa(n,400);return}let a=e.headers["sec-websocket-protocol"],c=new Set;if(a!==void 0)try{c=zN.parse(a)}catch{Fi(this,e,n,400,"Invalid Sec-WebSocket-Protocol header");return}let u=e.headers["sec-websocket-extensions"],l={};if(this.options.perMessageDeflate&&u!==void 0){let d=new Ni(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let p=zb.parse(u);p[Ni.extensionName]&&(d.accept(p[Ni.extensionName]),l[Ni.extensionName]=d)}catch{Fi(this,e,n,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let d={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(d,(p,h,g,y)=>{if(!p)return aa(n,h||401,g,y);this.completeUpgrade(l,s,c,e,n,r,i)});return}if(!this.options.verifyClient(d))return aa(n,401)}this.completeUpgrade(l,s,c,e,n,r,i)}completeUpgrade(e,n,r,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[GN])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Kb)return aa(s,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${BN("sha1").update(n+VN).digest("base64")}`],l=new this.options.WebSocket(null);if(r.size){let d=this.options.handleProtocols?this.options.handleProtocols(r,i):r.values().next().value;d&&(u.push(`Sec-WebSocket-Protocol: ${d}`),l._protocol=d)}if(e[Ni.extensionName]){let d=e[Ni.extensionName].params,p=zb.format({[Ni.extensionName]:[d]});u.push(`Sec-WebSocket-Extensions: ${p}`),l._extensions=e}this.emit("headers",u,i),s.write(u.concat(`\r
`).join(`\r
`)),s.removeListener("error",Gb),l.setSocket(s,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(oa,this)})),a(l,i)}};Jb.exports=Rg;function JN(t,e){for(let n of Object.keys(e))t.on(n,e[n]);return function(){for(let r of Object.keys(e))t.removeListener(r,e[r])}}function oa(t){t._state=Xb,t.emit("close")}function Gb(){this.destroy()}function aa(t,e,n,r){n=n||hu.STATUS_CODES[e],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...r},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${hu.STATUS_CODES[e]}\r
`+Object.keys(r).map(i=>`${i}: ${r[i]}`).join(`\r
`)+`\r
\r
`+n)}function Fi(t,e,n,r,i){if(t.listenerCount("wsClientError")){let s=new Error(i);Error.captureStackTrace(s,Fi),t.emit("wsClientError",s,n,e)}else aa(n,r,i)}});var Zb=b((eA,Qb)=>{"use strict";var Or=Sg();Or.createWebSocketStream=Ub();Or.Server=Yb();Or.Receiver=gg();Or.Sender=mg();Or.WebSocket=Or;Or.WebSocketServer=Or.Server;Qb.exports=Or});var eS=b(pu=>{Object.defineProperty(pu,"__esModule",{value:!0});pu.createPreviewConnection=void 0;var YN=Zb();function QN(t){let e=[],n,r=0;return n=new YN.Server({port:56789}),n.on("connection",a=>{e.push(a),a.on("message",c=>{let u=JSON.parse(c.toString());if(u.command==="goToTemplate"){let l=++r,d=u.data,p={get isCancelled(){return l!==r}};t.onGotoCode(d.fileName,d.range,p)}if(u.command==="requestOpenFile"){let l=u.data,d=t.getFileHref(l.fileName,l.range);a.send(JSON.stringify({command:"openFile",data:d}))}})}),{stop:i,highlight:s,unhighlight:o};function i(){n?.close(),e.length=0}function s(a,c,u){let l={command:"highlightSelections",data:{fileName:a,ranges:c,isDirty:u}};for(let d of e)d.send(JSON.stringify(l))}function o(){let a={command:"highlightSelections",data:void 0};for(let c of e)c.send(JSON.stringify(a))}}pu.createPreviewConnection=QN});var nS=b(Yr=>{var ZN=Yr&&Yr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.getLocalHostAvailablePort=Yr.isLocalHostPortUsing=void 0;var eF=require("http");function tS(t){return new Promise(e=>{eF.get(`http://localhost:${t}/`,{headers:{accept:"*/*"}},n=>{e(n.statusCode===200)}).on("error",()=>e(!1)).end()})}Yr.isLocalHostPortUsing=tS;function tF(t){return ZN(this,void 0,void 0,function*(){return(yield tS(t))&&t++,t})}Yr.getLocalHostAvailablePort=tF});var oS=b(Us=>{var dn=Us&&Us.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Us,"__esModule",{value:!0});Us.register=void 0;var U=require("vscode"),xt=Wc(),rS=JC(),iS=Bp(),Dg=Kc(),sS=eS(),nF=nS(),rF=mr();function iF(t,e){return dn(this,void 0,void 0,function*(){let n,r=!1,i,s=U.window.createStatusBarItem(U.StatusBarAlignment.Right,-1);s.command="volar.previewMenu",s.backgroundColor=new U.ThemeColor("statusBarItem.warningBackground"),t.subscriptions.push(s);let o,a=!0,c=U.window.terminals.find(C=>C.name.startsWith("volar-preview:"));c&&(o=sS.createPreviewConnection({onGotoCode:y,getFileHref:C=>(r=!1,i?.(),"vscode://files:/"+C)}),s.text="Preview Port: "+c.name.split(":")[1],s.show()),U.window.onDidOpenTerminal(C=>{C.name.startsWith("volar-preview:")&&(o=sS.createPreviewConnection({onGotoCode:y,getFileHref:D=>(r=!1,i?.(),"vscode://files:/"+D)}),s.text="Preview Port: "+C.name.split(":")[1],s.show())}),U.window.onDidCloseTerminal(C=>{C.name.startsWith("volar-preview:")&&(o?.stop(),o=void 0,s.hide())});let u=new WeakMap;class l{resolveWebviewView(D,E,W){let j;D.webview.options={enableScripts:!0},Q(!0),i=Q,U.window.onDidChangeActiveTextEditor(()=>{r||!U.window.activeTextEditor||j===U.window.activeTextEditor.document||Q(!1)}),U.workspace.onDidChangeTextDocument(()=>Q(!1)),U.workspace.onDidChangeConfiguration(()=>Q(!0)),D.onDidChangeVisibility(()=>Q(!1));function Q(re){var ue;return dn(this,void 0,void 0,function*(){if(!D.visible||(((ue=U.window.activeTextEditor)===null||ue===void 0?void 0:ue.document.languageId)==="vue"&&(j=U.window.activeTextEditor.document),!j))return;let se=j.fileName,Fe=U.window.terminals.find(q=>q.name.startsWith("volar-preview:")),We,ve=yield S(se,"vite");if(!ve)return;if(Fe)We=Number(Fe.name.split(":")[1]);else{let q=xt.dirname(ve),F=yield _(q,"vite");Fe=F.terminal,We=F.port}let Ie=iS.normalizeFileName(xt.relative(xt.dirname(ve),se)),k=`http://localhost:${We}/__preview${Ie}#`;if(j.isDirty&&(k+=btoa(j.getText())),re){let q=U.Uri.file(xt.join(t.extensionPath,"images/preview-bg.png")),F=D.webview.asWebviewUri(q);D.webview.html="",D.webview.html=T(k,F.toString())}else D.webview.postMessage({sender:"volar",command:"updateUrl",data:k})})}}}U.window.registerWebviewViewProvider("vueComponentPreview",new l),t.subscriptions.push(U.commands.registerCommand("volar.previewMenu",()=>dn(this,void 0,void 0,function*(){let C={},D={},E={};C.kill={label:"Kill Preview Server"},C.browser={label:"Open in Browser"},E["highlight-on"]={label:(a?"\u2022 ":"")+"Highlight DOM Elements"},E["highlight-off"]={label:(a?"":"\u2022 ")+"Don't Highlight DOM Elements"};let W=yield(0,Dg.quickPick)([C,D,E]);if(W==="kill")for(let j of U.window.terminals)j.name.startsWith("volar-preview:")&&j.dispose();W==="browser"&&U.env.openExternal(U.Uri.parse("http://localhost:"+s.text.split(":")[1].trim())),W==="highlight-on"&&(a=!0,U.window.activeTextEditor&&h(U.window.activeTextEditor)),W==="highlight-off"&&(a=!1,U.window.activeTextEditor&&h(U.window.activeTextEditor))}))),t.subscriptions.push(U.commands.registerCommand("volar.action.vite",()=>dn(this,void 0,void 0,function*(){let C=U.window.activeTextEditor;if(!C)return;let D=yield S(C.document.fileName,"vite"),E=yield(0,Dg.quickPick)({["volar-webview"]:{label:"Preview Vite App",detail:U.workspace.rootPath&&D?xt.relative(U.workspace.rootPath,D):D,description:"Press `Alt` to use go to code feature"},["volar-start-server"]:{label:"Preview Vite App in External Browser",detail:U.workspace.rootPath&&D?xt.relative(U.workspace.rootPath,D):D,description:"Press `Alt` to use go to code feature"},["volar-component-preview"]:{label:"Preview Component in External Browser",detail:U.workspace.rootPath?xt.relative(U.workspace.rootPath,C.document.fileName):C.document.fileName}});E!==void 0&&g(E,C.document.fileName,"vite")}))),t.subscriptions.push(U.commands.registerCommand("volar.action.nuxt",()=>dn(this,void 0,void 0,function*(){let C=U.window.activeTextEditor;if(!C)return;let D=yield S(C.document.fileName,"nuxt"),E=yield(0,Dg.quickPick)({["volar-webview"]:{label:"Preview Nuxt App",detail:U.workspace.rootPath&&D?xt.relative(U.workspace.rootPath,D):D},["volar-start-server"]:{label:"Preview Nuxt App in External Browser",detail:U.workspace.rootPath&&D?xt.relative(U.workspace.rootPath,D):D,description:"Press `Alt` to use go to code in Browser"}});E!==void 0&&g(E,C.document.fileName,"nuxt")}))),t.subscriptions.push(U.window.onDidChangeTextEditorSelection(C=>{h(C.textEditor)})),t.subscriptions.push(U.workspace.onDidChangeTextDocument(C=>{var D;((D=U.window.activeTextEditor)===null||D===void 0?void 0:D.document)===C.document&&h(U.window.activeTextEditor)})),t.subscriptions.push(U.workspace.onDidSaveTextDocument(C=>{var D;((D=U.window.activeTextEditor)===null||D===void 0?void 0:D.document)===C&&h(U.window.activeTextEditor)})),t.subscriptions.push(U.window.onDidChangeActiveTextEditor(p)),p();function d(C){return dn(this,void 0,void 0,function*(){let D=u.get(C);if(!D||D.version!==C.version){let E=yield e.sendRequest(rF.ParseSFCRequest.type,C.getText());D={version:C.version,sfc:E},u.set(C,D)}return D.sfc})}function p(){var C;return dn(this,void 0,void 0,function*(){if(((C=U.window.activeTextEditor)===null||C===void 0?void 0:C.document.languageId)==="vue"){let D=yield S(U.window.activeTextEditor.document.fileName,"vite"),E=yield S(U.window.activeTextEditor.document.fileName,"nuxt");U.commands.executeCommand("setContext","volar.foundViteDir",D!==void 0),U.commands.executeCommand("setContext","volar.foundNuxtDir",E!==void 0)}})}function h(C){var D,E;return dn(this,void 0,void 0,function*(){if(o&&C.document.languageId==="vue"&&a){let j=(E=(D=(yield d(C.document)).descriptor.template)===null||D===void 0?void 0:D.loc.start.offset)!==null&&E!==void 0?E:0;o.highlight(C.document.fileName,C.selections.map(Q=>({start:C.document.offsetAt(Q.start)-j,end:C.document.offsetAt(Q.end)-j})),C.document.isDirty)}else o?.unhighlight()})}function g(C,D,E,W){var j;return dn(this,void 0,void 0,function*(){let Q=yield S(D,E);if(!Q)return;let re=U.window.terminals.find(ve=>ve.name.startsWith("volar-preview:")),ue;if(re)ue=Number(re.name.split(":")[1]);else{let ve=xt.dirname(Q),Ie=yield _(ve,E);re=Ie.terminal,ue=Ie.port}let se=W??U.window.createWebviewPanel(C,"Preview "+xt.relative((j=U.workspace.rootPath)!==null&&j!==void 0?j:"",Q),U.ViewColumn.Beside,{retainContextWhenHidden:!0,enableScripts:!0,enableFindWidget:!0}),Fe=[];if(se.onDidDispose(()=>{for(let ve of Fe)ve.dispose()}),Fe.push(se.webview.onDidReceiveMessage(We)),re.show(),n=se,C==="volar-start-server")se.webview.html=T(`http://localhost:${ue}`,void 0,"openExternal");else if(C==="volar-component-preview"){let ve=iS.normalizeFileName(xt.relative(xt.dirname(Q),D));se.webview.html=T(`http://localhost:${ue}/__preview${ve}`,void 0,"openExternal")}else C==="volar-webview"&&(se.webview.html=T(`http://localhost:${ue}`,void 0,"openSimpleBrowser"));return ue;function We(ve){var Ie;return dn(this,void 0,void 0,function*(){switch(ve.command){case"openUrl":{let{url:k,external:q}=ve.data;q?U.env.openExternal(U.Uri.parse(k)):U.commands.executeCommand("simpleBrowser.api.open",k,{preserveFocus:!0,viewColumn:(Ie=n?.viewColumn)!==null&&Ie!==void 0?Ie:U.ViewColumn.Beside}),n?.dispose();break}case"log":{let k=ve.data;U.window.showInformationMessage(k);break}case"warn":{let k=ve.data;U.window.showWarningMessage(k);break}case"error":{let k=ve.data;U.window.showErrorMessage(k);break}}})}})}function y(C,D,E){var W,j;return dn(this,void 0,void 0,function*(){r=!0;let Q=yield U.workspace.openTextDocument(C);if(E.isCancelled)return;let ue=(j=(W=(yield d(Q)).descriptor.template)===null||W===void 0?void 0:W.loc.start.offset)!==null&&j!==void 0?j:0,se=Q.positionAt(D[0]+ue),Fe=Q.positionAt(D[1]+ue);if(yield U.window.showTextDocument(Q,U.ViewColumn.One),E.isCancelled)return;let We=U.window.activeTextEditor;We&&(We.selection=new U.Selection(se,Fe),We.revealRange(new U.Range(se,Fe)))})}function _(C,D){var E;return dn(this,void 0,void 0,function*(){let W=yield(0,nF.getLocalHostAvailablePort)(U.workspace.getConfiguration("volar").get("preview.port")),j=(E=yield U.workspace.getConfiguration("volar").get("preview.script."+(D==="nuxt"?"nuxi":"vite")))!==null&&E!==void 0?E:"";j.indexOf("{VITE_BIN}")>=0&&(j=j.replace("{VITE_BIN}",JSON.stringify(require.resolve("./dist/preview-bin/vite",{paths:[t.extensionPath]})))),j.indexOf("{NUXI_BIN}")>=0&&(j=j.replace("{NUXI_BIN}",JSON.stringify(require.resolve("./dist/preview-bin/nuxi",{paths:[t.extensionPath]})))),j.indexOf("{PORT}")>=0&&(j=j.replace("{PORT}",W.toString()));let Q=U.window.createTerminal({name:"volar-preview:"+W,isTransient:!0});return Q.sendText(`cd ${JSON.stringify(C)}`),Q.sendText(j),{port:W,terminal:Q}})}function S(C,D){return dn(this,void 0,void 0,function*(){let E=xt.dirname(C),W;for(;;){let j=xt.join(E,D+".config.ts"),Q=xt.join(E,D+".config.js");if(yield rS.exists(U.Uri.file(j))){W=j;break}if(yield rS.exists(U.Uri.file(Q))){W=Q;break}let re=xt.dirname(E);if(re===E)break;E=re}return W})}function T(C,D,E){let W=U.workspace.getConfiguration("volar");return`
			<style>
			body {
				padding: 0;
				background-color: ${W.get("preview.backgroundColor")};
				${D&&W.get("preview.transparentGrid")?`background-image: url(${D});`:""}
			}
			</style>

			<script>

			const vscode = acquireVsCodeApi();

			let preview;

			window.addEventListener('message', e => {
				if (e.data.sender === 'volar') {
					if (e.data.command === 'updateUrl') {
						preview.src = e.data.data;
					}
					else {
						preview.contentWindow.postMessage(e.data, '*');
					}
				}
				else {
					vscode.postMessage(e.data);
				}
			});

			const start = Date.now();

			(async () => {

				while (Date.now() - start < 10000 && !(await isServerStart())) {
					await sleep(250);
				}

				preview = document.createElement('iframe');
				preview.src = '${C}';
				preview.onload = previewFrameLoaded;
				preview.frameBorder = '0';
				preview.style.display = 'block';
				preview.style.margin = '0';
				preview.style.overflow = 'hidden';
				preview.style.width = '100%';
				preview.style.height = '0';

				document.body.append(preview);
			})();

			function previewFrameLoaded() {
				preview.onload = undefined;
				${E?`
					vscode.postMessage({ command: 'openUrl', data: { url: '${C}', external: ${E==="openExternal"} } });
				`:`
					preview.style.height = '100vh';
					document.getElementById('loading').remove();
				`}
			};
			function sleep(ms) {
				return new Promise(resolve => setTimeout(resolve, ms));
			}
			function isServerStart() {
				return new Promise(resolve => {
					fetch('${C}',{method: 'GET', headers: { accept: '*/*' } })
						.then(() => resolve(true))
						.catch(() => resolve(false))
				});
			}
			</script>

			<div id="loading">
				<div style="display: flex; align-items: center; flex-direction: column; min-height: 100vh; justify-content: space-evenly;">
					<a href="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/sponsors.svg" target="_top">
						<img src="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/sponsors.svg?time=${Math.round(Date.now()/1e3/3600)}" />
					</a>

					<div style="height: 35px; width: 116px; display: flex;">
						<a
							style="box-shadow: none; background-color: rgb(250, 251, 252); border-block: 1px solid rgba(27, 31, 35, 0.15); border-bottom-left-radius: 6px; border-bottom-right-radius: 6px; border-inline: 1px solid rgba(27, 31, 35, 0.15); border-start-end-radius: 6px; border-start-start-radius: 6px; caret-color: rgb(36, 41, 46); color: rgb(36, 41, 46); display: block; font-size: 14px; font-weight: 500; inline-size: 100%; line-height: 20px; padding-block: 5px; padding-inline: 16px; position: relative; text-align: center; transition-duration: 0.2s; transition-property: background-color; transition-timing-function: cubic-bezier(0.3, 0, 0.5, 1); user-select: none; vertical-align: middle; white-space: nowrap; text-decoration: none; display: inline-flex; align-items: center;"
							aria-label="Sponsor @johnsoncodehk"
							target="_top"
							href="https://github.com/sponsors/johnsoncodehk?o=esb"
						>
							<svg
								aria-hidden="true"
								height="16"
								viewBox="0 0 16 16"
								version="1.1"
								width="16"
								data-view-component="true"
								style="border-block-color: rgb(106, 115, 125); border-inline-color: rgb(106, 115, 125); caret-color: rgb(106, 115, 125); color: rgb(106, 115, 125); display: inline-block; fill: rgb(106, 115, 125); margin-inline-end: 8px; overflow: visible; transform: scale(1, 1); transition-duration: 0.15s; transition-property: transform; transition-timing-function: cubic-bezier(0.2, 0, 0.13, 2); vertical-align: text-bottom;"
							>
								<path
									fill-rule="evenodd"
									d="M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"
								/>
							</svg>
							<span>Sponsor</span>
						</a>
					</div>
				</div>

				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; display: block; shape-rendering: auto; position: absolute; right: 0; bottom: 0;" width="200px" height="100px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
					<g transform="translate(20 50)">
						<circle cx="0" cy="0" r="6" fill="#41b883">
							<animateTransform attributeName="transform" type="scale" begin="-0.375s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
					<g transform="translate(40 50)">
						<circle cx="0" cy="0" r="6" fill="#34495e">
							<animateTransform attributeName="transform" type="scale" begin="-0.25s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
					<g transform="translate(60 50)">
						<circle cx="0" cy="0" r="6" fill="#34495e">
							<animateTransform attributeName="transform" type="scale" begin="-0.125s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
					<g transform="translate(80 50)">
						<circle cx="0" cy="0" r="6" fill="#41b883">
							<animateTransform attributeName="transform" type="scale" begin="0s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
				</svg>
			</div>
		`}})}Us.register=iF});Object.defineProperty(exports,"__esModule",{value:!0});exports.deactivate=exports.activate=void 0;var aS=mr(),sF=require("fs"),oF=require("os"),aF=require("path"),Tg=require("vscode"),xg=$_(),Pg=tg(),cF=VC(),uF=oS();function lF(t){let e=aF.join(oF.tmpdir(),`vscode-${t.extension.id}-cancellation-pipe.tmp`),n=(0,Pg.getDocumentSelector)(t,aS.ServerMode.Semantic),r;return Tg.workspace.onDidChangeTextDocument(i=>{let s=i.document.uri.toString()+"|"+i.document.version;if(r===void 0){r=s;return}n.includes(i.document.languageId)&&r!==s&&(r=s,sF.writeFileSync(e,""))}),(0,Pg.activate)(t,(i,s,o,a,c,u)=>{a.cancellationPipeName=e;class l extends xg.LanguageClient{fillInitializeParams(C){c(C)}}let d=Tg.Uri.joinPath(t.extensionUri,"server.js"),p=Tg.workspace.getConfiguration("volar").get("vueserver.maxOldSpaceSize"),h={execArgv:[]};p&&h.execArgv.push("--max-old-space-size="+p);let g={execArgv:["--nolazy","--inspect="+u]},y={run:{module:d.fsPath,transport:xg.TransportKind.ipc,options:h},debug:{module:d.fsPath,transport:xg.TransportKind.ipc,options:g}},_={middleware:cF.middleware,documentSelector:o.map(T=>({language:T})),initializationOptions:a,progressOnInitialization:!0},S=new l(i,s,y,_);return S.start(),a.serverMode===aS.ServerMode.Semantic&&uF.register(t,S),S})}exports.activate=lF;function dF(){return(0,Pg.deactivate)()}exports.deactivate=dF;
