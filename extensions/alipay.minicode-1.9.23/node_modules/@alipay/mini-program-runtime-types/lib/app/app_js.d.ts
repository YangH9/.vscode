import { UniqueLeft } from '@alipay/generic-types';
import { IShareAppMessage, UnknownRecord } from '../shared';
export declare type $$_GLOBAL_DATA_KEY = 'globalData';
export interface IAppOnLaunchReferrerInfo {
    /**
     * 来源小程序
     */
    appId: string;
    /**
     * 来源插件，当处于插件运行模式时可见
     */
    sourceServiceId: string;
    /**
     * 来源小程序传过来的数据
     */
    extraData: Record<string, any>;
}
export interface IAppOnLaunchOptions<Query = Record<string, string>> {
    /**
     * 当前小程序的 query，从启动参数的 query 字段解析而来
     */
    query: Query;
    /**
     * 启动小程序的 场景值
     * @see https://opendocs.alipay.com/mini/framework/scene
     */
    scene: number;
    /**
     * 当前小程序的页面地址，从启动参数 page 字段解析而来，page 忽略时默认为首页
     */
    path: string;
    /**
     * 来源信息
     */
    referrerInfo: IAppOnLaunchReferrerInfo;
}
export interface IAppOnUnhandledRejectionRes {
    /**
     * reject 的原因
     */
    reason: string;
    /**
     * 被 reject 的 Promise 对象
     */
    promise: Promise<unknown>;
}
/**
 * app.js App(options) 中 options 的内部类型
 * ref: https://opendocs.alipay.com/mini/framework/app-detail
 */
export interface IAppOptions<ExtraOptions extends UnknownRecord> {
    /**
     * 生命周期回调：监听小程序初始化
     * 当小程序初始化完成时触发，全局只触发一次
     */
    onLaunch<Query = {}>(options: IAppOnLaunchOptions<Query>): void;
    /**
     * 生命周期回调：监听小程序显示
     * 当小程序启动，或从后台进入前台显示时触发
     */
    onShow<Query = {}>(options: IAppOnLaunchOptions<Query>): void;
    /**
     * 生命周期回调：监听小程序隐藏
     * 当当前页面被隐藏时触发，例如跳转、按下设备 Home 键离开
     */
    onHide(): void;
    /**
     * 监听小程序错误
     * 当小程序发生 js 错误时触发
     */
    onError(error: string): void;
    /**
     * 全局分享配置
     */
    onShareAppMessage(): IShareAppMessage;
    /**
     * 监听 unhandledrejection 事件
     * 当 Promise 被 reject 且没有 reject 处理器时，会触发 onUnhandledRejection 事件
     */
    onUnhandledRejection(res: IAppOnUnhandledRejectionRes): void;
    /**
     * 全局数据
     */
    globalData: object;
}
/**
 * Additional properties in App instance, for module augmentation
 */
export interface IAppInstanceAdditionalProperties<ExtraOptions extends UnknownRecord> {
}
/**
 * `this` type of life cycle hooks in App.
 */
export declare type IAppInstance<ExtraThis, ExtraOptions extends UnknownRecord> = Omit<ExtraOptions, keyof IAppOptions<ExtraOptions>> & ExtraThis & IAppInstanceAdditionalProperties<ExtraOptions> & {
    globalData: ExtraOptions[$$_GLOBAL_DATA_KEY] extends never ? UnknownRecord : ExtraOptions[$$_GLOBAL_DATA_KEY];
};
/**
 * 用户可配置的 App Options
 */
export declare type IUserAppOptions<ExtraThis, ExtraOptions extends UnknownRecord> = Partial<IAppOptions<ExtraOptions>> & Partial<UniqueLeft<UniqueLeft<ExtraThis, ExtraOptions>, IAppOptions<ExtraOptions>>> & {
    [P in keyof ExtraOptions]: P extends keyof IAppOptions<ExtraOptions> ? unknown : ExtraOptions[P];
} & ThisType<IAppInstance<ExtraThis, ExtraOptions>>;
/**
 * App 的类型
 */
export interface IApp<ExtraThis, ExtraOptions extends UnknownRecord> {
    (opts: IUserAppOptions<ExtraThis, ExtraOptions>): any;
}
//# sourceMappingURL=app_js.d.ts.map