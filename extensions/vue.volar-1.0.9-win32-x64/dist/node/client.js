var Mu=Object.defineProperty;var j0=Object.getOwnPropertyDescriptor;var $0=Object.getOwnPropertyNames;var U0=Object.prototype.hasOwnProperty;var Au=(t,e)=>()=>(t&&(e=t(t=0)),e);var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ju=(t,e)=>{for(var n in e)Mu(t,n,{get:e[n],enumerable:!0})},H0=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $0(e))!U0.call(t,i)&&i!==n&&Mu(t,i,{get:()=>e[i],enumerable:!(r=j0(e,i))||r.enumerable});return t};var jr=t=>H0(Mu({},"__esModule",{value:!0}),t);var mr=w(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var $u;function Uu(){if($u===void 0)throw new Error("No runtime abstraction layer installed");return $u}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");$u=n}t.install=e})(Uu||(Uu={}));Hu.default=Uu});var Wu=w(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.Disposable=void 0;var W0;(function(t){function e(n){return{dispose:n}}t.create=e})(W0=eo.Disposable||(eo.Disposable={}))});var fm=w(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.AbstractMessageBuffer=void 0;var B0=13,z0=10,G0=`\r
`,Bu=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let c=this._chunks[n];r=0;t:for(;r<c.length;){switch(c[r]){case B0:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case z0:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=c.byteLength,n++}if(e!==4)return;let s=this._read(i+r),o=new Map,a=this.toString(s,"ascii").split(G0);if(a.length<2)return o;for(let c=0;c<a.length-2;c++){let u=a[c],l=u.indexOf(":");if(l===-1)throw new Error("Message header must separate key and value using :");let d=u.substr(0,l),h=u.substr(l+1).trim();o.set(d,h)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);n.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};xa.AbstractMessageBuffer=Bu});var gm=w(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});var K0=mr(),hm=require("util"),ui=Wu(),V0=fm(),Xi=class extends V0.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Xi.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new hm.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};Xi.emptyBuffer=Buffer.allocUnsafe(0);var zu=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ui.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ui.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ui.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ui.Disposable.create(()=>this.stream.off("data",e))}},Gu=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ui.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ui.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ui.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},pm=Object.freeze({messageBuffer:Object.freeze({create:t=>new Xi(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new hm.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new zu(t),asWritableStream:t=>new Gu(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:()=>clearImmediate(n)}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:()=>clearInterval(r)}}})});function Ku(){return pm}(function(t){function e(){K0.default.install(pm)}t.install=e})(Ku||(Ku={}));Vu.default=Ku});var Ji=w(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.stringArray=Ft.array=Ft.func=Ft.error=Ft.number=Ft.string=Ft.boolean=void 0;function X0(t){return t===!0||t===!1}Ft.boolean=X0;function mm(t){return typeof t=="string"||t instanceof String}Ft.string=mm;function J0(t){return typeof t=="number"||t instanceof Number}Ft.number=J0;function Y0(t){return t instanceof Error}Ft.error=Y0;function Q0(t){return typeof t=="function"}Ft.func=Q0;function vm(t){return Array.isArray(t)}Ft.array=vm;function Z0(t){return vm(t)&&t.every(e=>mm(e))}Ft.stringArray=Z0});var vl=w(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.Message=ne.NotificationType9=ne.NotificationType8=ne.NotificationType7=ne.NotificationType6=ne.NotificationType5=ne.NotificationType4=ne.NotificationType3=ne.NotificationType2=ne.NotificationType1=ne.NotificationType0=ne.NotificationType=ne.RequestType9=ne.RequestType8=ne.RequestType7=ne.RequestType6=ne.RequestType5=ne.RequestType4=ne.RequestType3=ne.RequestType2=ne.RequestType1=ne.RequestType=ne.RequestType0=ne.AbstractMessageSignature=ne.ParameterStructures=ne.ResponseError=ne.ErrorCodes=void 0;var li=Ji(),ym;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(ym=ne.ErrorCodes||(ne.ErrorCodes={}));var to=class extends Error{constructor(e,n,r){super(n),this.code=li.number(e)?e:ym.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,to.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};ne.ResponseError=to;var wt=class{constructor(e){this.kind=e}static is(e){return e===wt.auto||e===wt.byName||e===wt.byPosition}toString(){return this.kind}};ne.ParameterStructures=wt;wt.auto=new wt("auto");wt.byPosition=new wt("byPosition");wt.byName=new wt("byName");var Ke=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return wt.auto}};ne.AbstractMessageSignature=Ke;var Xu=class extends Ke{constructor(e){super(e,0)}};ne.RequestType0=Xu;var Ju=class extends Ke{constructor(e,n=wt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};ne.RequestType=Ju;var Yu=class extends Ke{constructor(e,n=wt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};ne.RequestType1=Yu;var Qu=class extends Ke{constructor(e){super(e,2)}};ne.RequestType2=Qu;var Zu=class extends Ke{constructor(e){super(e,3)}};ne.RequestType3=Zu;var el=class extends Ke{constructor(e){super(e,4)}};ne.RequestType4=el;var tl=class extends Ke{constructor(e){super(e,5)}};ne.RequestType5=tl;var nl=class extends Ke{constructor(e){super(e,6)}};ne.RequestType6=nl;var rl=class extends Ke{constructor(e){super(e,7)}};ne.RequestType7=rl;var il=class extends Ke{constructor(e){super(e,8)}};ne.RequestType8=il;var sl=class extends Ke{constructor(e){super(e,9)}};ne.RequestType9=sl;var ol=class extends Ke{constructor(e,n=wt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};ne.NotificationType=ol;var al=class extends Ke{constructor(e){super(e,0)}};ne.NotificationType0=al;var cl=class extends Ke{constructor(e,n=wt.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};ne.NotificationType1=cl;var ul=class extends Ke{constructor(e){super(e,2)}};ne.NotificationType2=ul;var ll=class extends Ke{constructor(e){super(e,3)}};ne.NotificationType3=ll;var dl=class extends Ke{constructor(e){super(e,4)}};ne.NotificationType4=dl;var fl=class extends Ke{constructor(e){super(e,5)}};ne.NotificationType5=fl;var hl=class extends Ke{constructor(e){super(e,6)}};ne.NotificationType6=hl;var pl=class extends Ke{constructor(e){super(e,7)}};ne.NotificationType7=pl;var gl=class extends Ke{constructor(e){super(e,8)}};ne.NotificationType8=gl;var ml=class extends Ke{constructor(e){super(e,9)}};ne.NotificationType9=ml;var eR;(function(t){function e(i){let s=i;return s&&li.string(s.method)&&(li.string(s.id)||li.number(s.id))}t.isRequest=e;function n(i){let s=i;return s&&li.string(s.method)&&i.id===void 0}t.isNotification=n;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(li.string(s.id)||li.number(s.id)||s.id===null)}t.isResponse=r})(eR=ne.Message||(ne.Message={}))});var _l=w(vr=>{"use strict";var _m;Object.defineProperty(vr,"__esModule",{value:!0});vr.LRUCache=vr.LinkedMap=vr.Touch=void 0;var Ht;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ht=vr.Touch||(vr.Touch={}));var Pa=class{constructor(){this[_m]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Ht.None){let r=this._map.get(e);if(!!r)return n!==Ht.None&&this.touch(r,n),r.value}set(e,n,r=Ht.None){let i=this._map.get(e);if(i)i.value=n,r!==Ht.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Ht.None:this.addItemLast(i);break;case Ht.First:this.addItemFirst(i);break;case Ht.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(_m=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ht.First&&n!==Ht.Last)){if(n===Ht.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ht.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};vr.LinkedMap=Pa;var yl=class extends Pa{constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ht.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ht.None)}set(e,n){return super.set(e,n,Ht.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};vr.LRUCache=yl});var Qi=w(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.Emitter=di.Event=void 0;var tR=mr(),nR;(function(t){let e={dispose(){}};t.None=function(){return e}})(nR=di.Event||(di.Event={}));var wl=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{n.push(r[s].apply(i[s],e))}catch(a){(0,tR.default)().console.error(a)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Yi=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new wl),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=Yi._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};di.Emitter=Yi;Yi._noop=function(){}});var Rl=w(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.CancellationTokenSource=fi.CancellationToken=void 0;var rR=mr(),iR=Ji(),Cl=Qi(),bl;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Cl.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Cl.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||iR.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(bl=fi.CancellationToken||(fi.CancellationToken={}));var sR=Object.freeze(function(t,e){let n=(0,rR.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),qa=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?sR:(this._emitter||(this._emitter=new Cl.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Sl=class{get token(){return this._token||(this._token=new qa),this._token}cancel(){this._token?this._token.cancel():this._token=bl.Cancelled}dispose(){this._token?this._token instanceof qa&&this._token.dispose():this._token=bl.None}};fi.CancellationTokenSource=Sl});var wm=w(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.ReadableStreamMessageReader=yr.AbstractMessageReader=yr.MessageReader=void 0;var Tl=mr(),Zi=Ji(),Dl=Qi(),oR;(function(t){function e(n){let r=n;return r&&Zi.func(r.listen)&&Zi.func(r.dispose)&&Zi.func(r.onError)&&Zi.func(r.onClose)&&Zi.func(r.onPartialMessage)}t.is=e})(oR=yr.MessageReader||(yr.MessageReader={}));var Oa=class{constructor(){this.errorEmitter=new Dl.Emitter,this.closeEmitter=new Dl.Emitter,this.partialMessageEmitter=new Dl.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Zi.string(e.message)?e.message:"unknown"}`)}};yr.AbstractMessageReader=Oa;var El;(function(t){function e(n){let r,i,s,o=new Map,a,c=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,o.set(s.name,s)),n.contentDecoders!==void 0)for(let u of n.contentDecoders)o.set(u.name,u);if(n.contentTypeDecoder!==void 0&&(a=n.contentTypeDecoder,c.set(a.name,a)),n.contentTypeDecoders!==void 0)for(let u of n.contentTypeDecoders)c.set(u.name,u)}return a===void 0&&(a=(0,Tl.default)().applicationJson.decoder,c.set(a.name,a)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:c}}t.fromOptions=e})(El||(El={}));var xl=class extends Oa{constructor(e,n){super(),this.readable=e,this.options=El.fromOptions(n),this.buffer=(0,Tl.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Tl.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};yr.ReadableStreamMessageReader=xl});var Cm=w(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.Semaphore=void 0;var aR=mr(),Pl=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,aR.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ka.Semaphore=Pl});var Dm=w(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.WriteableStreamMessageWriter=_r.AbstractMessageWriter=_r.MessageWriter=void 0;var bm=mr(),no=Ji(),cR=Cm(),Sm=Qi(),uR="Content-Length: ",Rm=`\r
`,lR;(function(t){function e(n){let r=n;return r&&no.func(r.dispose)&&no.func(r.onClose)&&no.func(r.onError)&&no.func(r.write)}t.is=e})(lR=_r.MessageWriter||(_r.MessageWriter={}));var Na=class{constructor(){this.errorEmitter=new Sm.Emitter,this.closeEmitter=new Sm.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${no.string(e.message)?e.message:"unknown"}`)}};_r.AbstractMessageWriter=Na;var ql;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,bm.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,bm.default)().applicationJson.encoder}}t.fromOptions=e})(ql||(ql={}));var Ol=class extends Na{constructor(e,n){super(),this.writable=e,this.options=ql.fromOptions(n),this.errorCount=0,this.writeSemaphore=new cR.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(uR,r.byteLength.toString(),Rm),i.push(Rm),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};_r.WriteableStreamMessageWriter=Ol});var Om=w(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.createMessageConnection=ae.ConnectionOptions=ae.CancellationStrategy=ae.CancellationSenderStrategy=ae.CancellationReceiverStrategy=ae.ConnectionStrategy=ae.ConnectionError=ae.ConnectionErrors=ae.LogTraceNotification=ae.SetTraceNotification=ae.TraceFormat=ae.TraceValues=ae.Trace=ae.NullLogger=ae.ProgressType=ae.ProgressToken=void 0;var Tm=mr(),mt=Ji(),ce=vl(),Em=_l(),ro=Qi(),kl=Rl(),so;(function(t){t.type=new ce.NotificationType("$/cancelRequest")})(so||(so={}));var xm;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}t.is=e})(xm=ae.ProgressToken||(ae.ProgressToken={}));var io;(function(t){t.type=new ce.NotificationType("$/progress")})(io||(io={}));var Nl=class{constructor(){}};ae.ProgressType=Nl;var Il;(function(t){function e(n){return mt.func(n)}t.is=e})(Il||(Il={}));ae.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Ae;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Ae=ae.Trace||(ae.Trace={}));var dR;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(dR=ae.TraceValues||(ae.TraceValues={}));(function(t){function e(r){if(!mt.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(Ae=ae.Trace||(ae.Trace={}));var $n;(function(t){t.Text="text",t.JSON="json"})($n=ae.TraceFormat||(ae.TraceFormat={}));(function(t){function e(n){return mt.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}t.fromString=e})($n=ae.TraceFormat||(ae.TraceFormat={}));var Pm;(function(t){t.type=new ce.NotificationType("$/setTrace")})(Pm=ae.SetTraceNotification||(ae.SetTraceNotification={}));var Fl;(function(t){t.type=new ce.NotificationType("$/logTrace")})(Fl=ae.LogTraceNotification||(ae.LogTraceNotification={}));var Ia;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Ia=ae.ConnectionErrors||(ae.ConnectionErrors={}));var $r=class extends Error{constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,$r.prototype)}};ae.ConnectionError=$r;var qm;(function(t){function e(n){let r=n;return r&&mt.func(r.cancelUndispatched)}t.is=e})(qm=ae.ConnectionStrategy||(ae.ConnectionStrategy={}));var Ll;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new kl.CancellationTokenSource}});function e(n){let r=n;return r&&mt.func(r.createCancellationTokenSource)}t.is=e})(Ll=ae.CancellationReceiverStrategy||(ae.CancellationReceiverStrategy={}));var Ml;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(so.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&mt.func(r.sendCancellation)&&mt.func(r.cleanup)}t.is=e})(Ml=ae.CancellationSenderStrategy||(ae.CancellationSenderStrategy={}));var Al;(function(t){t.Message=Object.freeze({receiver:Ll.Message,sender:Ml.Message});function e(n){let r=n;return r&&Ll.is(r.receiver)&&Ml.is(r.sender)}t.is=e})(Al=ae.CancellationStrategy||(ae.CancellationStrategy={}));var fR;(function(t){function e(n){let r=n;return r&&(Al.is(r.cancellationStrategy)||qm.is(r.connectionStrategy))}t.is=e})(fR=ae.ConnectionOptions||(ae.ConnectionOptions={}));var Un;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Un||(Un={}));function hR(t,e,n,r){let i=n!==void 0?n:ae.NullLogger,s=0,o=0,a=0,c="2.0",u,l=new Map,d,h=new Map,p=new Map,m,y=new Em.LinkedMap,_=new Map,S=new Set,T=new Map,x=Ae.Off,k=$n.Text,W,Q=Un.New,oe=new ro.Emitter,L=new ro.Emitter,M=new ro.Emitter,G=new ro.Emitter,de=new ro.Emitter,Z=r&&r.cancellationStrategy?r.cancellationStrategy:Al.Message;function ie(C){if(C===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+C.toString()}function Te(C){return C===null?"res-unknown-"+(++a).toString():"res-"+C.toString()}function N(){return"not-"+(++o).toString()}function D(C,q){ce.Message.isRequest(q)?C.set(ie(q.id),q):ce.Message.isResponse(q)?C.set(Te(q.id),q):C.set(N(),q)}function I(C){}function O(){return Q===Un.Listening}function ee(){return Q===Un.Closed}function te(){return Q===Un.Disposed}function B(){(Q===Un.New||Q===Un.Listening)&&(Q=Un.Closed,L.fire(void 0))}function se(C){oe.fire([C,void 0,void 0])}function Ge(C){oe.fire(C)}t.onClose(B),t.onError(se),e.onClose(B),e.onError(Ge);function It(){m||y.size===0||(m=(0,Tm.default)().timer.setImmediate(()=>{m=void 0,Fn()}))}function Fn(){if(y.size===0)return;let C=y.shift();try{ce.Message.isRequest(C)?si(C):ce.Message.isNotification(C)?zi(C):ce.Message.isResponse(C)?Ys(C):Gi(C)}finally{It()}}let Zt=C=>{try{if(ce.Message.isNotification(C)&&C.method===so.type.method){let q=C.params.id,j=ie(q),K=y.get(j);if(ce.Message.isRequest(K)){let Le=r?.connectionStrategy,He=Le&&Le.cancelUndispatched?Le.cancelUndispatched(K,I):void 0;if(He&&(He.error!==void 0||He.result!==void 0)){y.delete(j),T.delete(q),He.id=K.id,Ln(He,C.method,Date.now()),e.write(He).catch(()=>i.error("Sending response for canceled message failed."));return}}let Fe=T.get(q);if(Fe!==void 0){Fe.cancel(),Ar(C);return}else S.add(q)}D(y,C)}finally{It()}};function si(C){if(te())return;function q(be,$e,Se){let g={jsonrpc:c,id:C.id};be instanceof ce.ResponseError?g.error=be.toJson():g.result=be===void 0?null:be,Ln(g,$e,Se),e.write(g).catch(()=>i.error("Sending response failed."))}function j(be,$e,Se){let g={jsonrpc:c,id:C.id,error:be.toJson()};Ln(g,$e,Se),e.write(g).catch(()=>i.error("Sending response failed."))}function K(be,$e,Se){be===void 0&&(be=null);let g={jsonrpc:c,id:C.id,result:be};Ln(g,$e,Se),e.write(g).catch(()=>i.error("Sending response failed."))}oi(C);let Fe=l.get(C.method),Le,He;Fe&&(Le=Fe.type,He=Fe.handler);let Ye=Date.now();if(He||u){let be=C.id??String(Date.now()),$e=Z.receiver.createCancellationTokenSource(be);C.id!==null&&S.has(C.id)&&$e.cancel(),C.id!==null&&T.set(be,$e);try{let Se;if(He)if(C.params===void 0){if(Le!==void 0&&Le.numberOfParams!==0){j(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${C.method} defines ${Le.numberOfParams} params but received none.`),C.method,Ye);return}Se=He($e.token)}else if(Array.isArray(C.params)){if(Le!==void 0&&Le.parameterStructures===ce.ParameterStructures.byName){j(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by name but received parameters by position`),C.method,Ye);return}Se=He(...C.params,$e.token)}else{if(Le!==void 0&&Le.parameterStructures===ce.ParameterStructures.byPosition){j(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by position but received parameters by name`),C.method,Ye);return}Se=He(C.params,$e.token)}else u&&(Se=u(C.method,C.params,$e.token));let g=Se;Se?g.then?g.then(E=>{T.delete(be),q(E,C.method,Ye)},E=>{T.delete(be),E instanceof ce.ResponseError?j(E,C.method,Ye):E&&mt.string(E.message)?j(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${E.message}`),C.method,Ye):j(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,Ye)}):(T.delete(be),q(Se,C.method,Ye)):(T.delete(be),K(Se,C.method,Ye))}catch(Se){T.delete(be),Se instanceof ce.ResponseError?q(Se,C.method,Ye):Se&&mt.string(Se.message)?j(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${Se.message}`),C.method,Ye):j(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,Ye)}}else j(new ce.ResponseError(ce.ErrorCodes.MethodNotFound,`Unhandled method ${C.method}`),C.method,Ye)}function Ys(C){if(!te())if(C.id===null)C.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(C.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let q=C.id,j=_.get(q);if(Mn(C,j),j!==void 0){_.delete(q);try{if(C.error){let K=C.error;j.reject(new ce.ResponseError(K.code,K.message,K.data))}else if(C.result!==void 0)j.resolve(C.result);else throw new Error("Should never happen.")}catch(K){K.message?i.error(`Response handler '${j.method}' failed with message: ${K.message}`):i.error(`Response handler '${j.method}' failed unexpectedly.`)}}}}function zi(C){if(te())return;let q,j;if(C.method===so.type.method){let K=C.params.id;S.delete(K),Ar(C);return}else{let K=h.get(C.method);K&&(j=K.handler,q=K.type)}if(j||d)try{if(Ar(C),j)if(C.params===void 0)q!==void 0&&q.numberOfParams!==0&&q.parameterStructures!==ce.ParameterStructures.byName&&i.error(`Notification ${C.method} defines ${q.numberOfParams} params but received none.`),j();else if(Array.isArray(C.params)){let K=C.params;C.method===io.type.method&&K.length===2&&xm.is(K[0])?j({token:K[0],value:K[1]}):(q!==void 0&&(q.parameterStructures===ce.ParameterStructures.byName&&i.error(`Notification ${C.method} defines parameters by name but received parameters by position`),q.numberOfParams!==C.params.length&&i.error(`Notification ${C.method} defines ${q.numberOfParams} params but received ${K.length} arguments`)),j(...K))}else q!==void 0&&q.parameterStructures===ce.ParameterStructures.byPosition&&i.error(`Notification ${C.method} defines parameters by position but received parameters by name`),j(C.params);else d&&d(C.method,C.params)}catch(K){K.message?i.error(`Notification handler '${C.method}' failed with message: ${K.message}`):i.error(`Notification handler '${C.method}' failed unexpectedly.`)}else M.fire(C)}function Gi(C){if(!C){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(C,null,4)}`);let q=C;if(mt.string(q.id)||mt.number(q.id)){let j=q.id,K=_.get(j);K&&K.reject(new Error("The received response has neither a result nor an error property."))}}function wn(C){if(C!=null)switch(x){case Ae.Verbose:return JSON.stringify(C,null,4);case Ae.Compact:return JSON.stringify(C);default:return}}function tr(C){if(!(x===Ae.Off||!W))if(k===$n.Text){let q;(x===Ae.Verbose||x===Ae.Compact)&&C.params&&(q=`Params: ${wn(C.params)}

`),W.log(`Sending request '${C.method} - (${C.id})'.`,q)}else Cn("send-request",C)}function Ki(C){if(!(x===Ae.Off||!W))if(k===$n.Text){let q;(x===Ae.Verbose||x===Ae.Compact)&&(C.params?q=`Params: ${wn(C.params)}

`:q=`No parameters provided.

`),W.log(`Sending notification '${C.method}'.`,q)}else Cn("send-notification",C)}function Ln(C,q,j){if(!(x===Ae.Off||!W))if(k===$n.Text){let K;(x===Ae.Verbose||x===Ae.Compact)&&(C.error&&C.error.data?K=`Error data: ${wn(C.error.data)}

`:C.result?K=`Result: ${wn(C.result)}

`:C.error===void 0&&(K=`No result returned.

`)),W.log(`Sending response '${q} - (${C.id})'. Processing request took ${Date.now()-j}ms`,K)}else Cn("send-response",C)}function oi(C){if(!(x===Ae.Off||!W))if(k===$n.Text){let q;(x===Ae.Verbose||x===Ae.Compact)&&C.params&&(q=`Params: ${wn(C.params)}

`),W.log(`Received request '${C.method} - (${C.id})'.`,q)}else Cn("receive-request",C)}function Ar(C){if(!(x===Ae.Off||!W||C.method===Fl.type.method))if(k===$n.Text){let q;(x===Ae.Verbose||x===Ae.Compact)&&(C.params?q=`Params: ${wn(C.params)}

`:q=`No parameters provided.

`),W.log(`Received notification '${C.method}'.`,q)}else Cn("receive-notification",C)}function Mn(C,q){if(!(x===Ae.Off||!W))if(k===$n.Text){let j;if((x===Ae.Verbose||x===Ae.Compact)&&(C.error&&C.error.data?j=`Error data: ${wn(C.error.data)}

`:C.result?j=`Result: ${wn(C.result)}

`:C.error===void 0&&(j=`No result returned.

`)),q){let K=C.error?` Request failed: ${C.error.message} (${C.error.code}).`:"";W.log(`Received response '${q.method} - (${C.id})' in ${Date.now()-q.timerStart}ms.${K}`,j)}else W.log(`Received response ${C.id} without active response promise.`,j)}else Cn("receive-response",C)}function Cn(C,q){if(!W||x===Ae.Off)return;let j={isLSPMessage:!0,type:C,message:q,timestamp:Date.now()};W.log(j)}function _t(){if(ee())throw new $r(Ia.Closed,"Connection is closed.");if(te())throw new $r(Ia.Disposed,"Connection is disposed.")}function Qs(){if(O())throw new $r(Ia.AlreadyListening,"Connection is already listening")}function ln(){if(!O())throw new Error("Call listen() first.")}function An(C){return C===void 0?null:C}function Vi(C){if(C!==null)return C}function ai(C){return C!=null&&!Array.isArray(C)&&typeof C=="object"}function ci(C,q){switch(C){case ce.ParameterStructures.auto:return ai(q)?Vi(q):[An(q)];case ce.ParameterStructures.byName:if(!ai(q))throw new Error("Received parameters by name but param is not an object literal.");return Vi(q);case ce.ParameterStructures.byPosition:return[An(q)];default:throw new Error(`Unknown parameter structure ${C.toString()}`)}}function jn(C,q){let j,K=C.numberOfParams;switch(K){case 0:j=void 0;break;case 1:j=ci(C.parameterStructures,q[0]);break;default:j=[];for(let Fe=0;Fe<q.length&&Fe<K;Fe++)j.push(An(q[Fe]));if(q.length<K)for(let Fe=q.length;Fe<K;Fe++)j.push(null);break}return j}let nr={sendNotification:(C,...q)=>{_t();let j,K;if(mt.string(C)){j=C;let Le=q[0],He=0,Ye=ce.ParameterStructures.auto;ce.ParameterStructures.is(Le)&&(He=1,Ye=Le);let be=q.length,$e=be-He;switch($e){case 0:K=void 0;break;case 1:K=ci(Ye,q[He]);break;default:if(Ye===ce.ParameterStructures.byName)throw new Error(`Received ${$e} parameters for 'by Name' notification parameter structure.`);K=q.slice(He,be).map(Se=>An(Se));break}}else{let Le=q;j=C.method,K=jn(C,Le)}let Fe={jsonrpc:c,method:j,params:K};return Ki(Fe),e.write(Fe).catch(()=>i.error("Sending notification failed."))},onNotification:(C,q)=>{_t();let j;return mt.func(C)?d=C:q&&(mt.string(C)?(j=C,h.set(C,{type:void 0,handler:q})):(j=C.method,h.set(C.method,{type:C,handler:q}))),{dispose:()=>{j!==void 0?h.delete(j):d=void 0}}},onProgress:(C,q,j)=>{if(p.has(q))throw new Error(`Progress handler for token ${q} already registered`);return p.set(q,j),{dispose:()=>{p.delete(q)}}},sendProgress:(C,q,j)=>nr.sendNotification(io.type,{token:q,value:j}),onUnhandledProgress:G.event,sendRequest:(C,...q)=>{_t(),ln();let j,K,Fe;if(mt.string(C)){j=C;let be=q[0],$e=q[q.length-1],Se=0,g=ce.ParameterStructures.auto;ce.ParameterStructures.is(be)&&(Se=1,g=be);let E=q.length;kl.CancellationToken.is($e)&&(E=E-1,Fe=$e);let z=E-Se;switch(z){case 0:K=void 0;break;case 1:K=ci(g,q[Se]);break;default:if(g===ce.ParameterStructures.byName)throw new Error(`Received ${z} parameters for 'by Name' request parameter structure.`);K=q.slice(Se,E).map(_e=>An(_e));break}}else{let be=q;j=C.method,K=jn(C,be);let $e=C.numberOfParams;Fe=kl.CancellationToken.is(be[$e])?be[$e]:void 0}let Le=s++,He;return Fe&&(He=Fe.onCancellationRequested(()=>{let be=Z.sender.sendCancellation(nr,Le);return be===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Le}`),Promise.resolve()):be.catch(()=>{i.log(`Sending cancellation messages for id ${Le} failed`)})})),new Promise((be,$e)=>{let Se={jsonrpc:c,id:Le,method:j,params:K},g=_e=>{be(_e),Z.sender.cleanup(Le),He?.dispose()},E=_e=>{$e(_e),Z.sender.cleanup(Le),He?.dispose()},z={method:j,timerStart:Date.now(),resolve:g,reject:E};tr(Se);try{e.write(Se).catch(()=>i.error("Sending request failed."))}catch(_e){z.reject(new ce.ResponseError(ce.ErrorCodes.MessageWriteError,_e.message?_e.message:"Unknown reason")),z=null}z&&_.set(Le,z)})},onRequest:(C,q)=>{_t();let j=null;return Il.is(C)?(j=void 0,u=C):mt.string(C)?(j=null,q!==void 0&&(j=C,l.set(C,{handler:q,type:void 0}))):q!==void 0&&(j=C.method,l.set(C.method,{type:C,handler:q})),{dispose:()=>{j!==null&&(j!==void 0?l.delete(j):u=void 0)}}},hasPendingResponse:()=>_.size>0,trace:async(C,q,j)=>{let K=!1,Fe=$n.Text;j!==void 0&&(mt.boolean(j)?K=j:(K=j.sendNotification||!1,Fe=j.traceFormat||$n.Text)),x=C,k=Fe,x===Ae.Off?W=void 0:W=q,K&&!ee()&&!te()&&await nr.sendNotification(Pm.type,{value:Ae.toString(C)})},onError:oe.event,onClose:L.event,onUnhandledNotification:M.event,onDispose:de.event,end:()=>{e.end()},dispose:()=>{if(te())return;Q=Un.Disposed,de.fire(void 0);let C=new ce.ResponseError(ce.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let q of _.values())q.reject(C);_=new Map,T=new Map,S=new Set,y=new Em.LinkedMap,mt.func(e.dispose)&&e.dispose(),mt.func(t.dispose)&&t.dispose()},listen:()=>{_t(),Qs(),Q=Un.Listening,t.listen(Zt)},inspect:()=>{(0,Tm.default)().console.log("inspect")}};return nr.onNotification(Fl.type,C=>{if(x===Ae.Off||!W)return;let q=x===Ae.Verbose||x===Ae.Compact;W.log(C.message,q?C.verbose:void 0)}),nr.onNotification(io.type,C=>{let q=p.get(C.token);q?q(C.value):G.fire(C)}),nr}ae.createMessageConnection=hR});var Hl=w(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.TraceFormat=P.TraceValues=P.Trace=P.ProgressType=P.ProgressToken=P.createMessageConnection=P.NullLogger=P.ConnectionOptions=P.ConnectionStrategy=P.WriteableStreamMessageWriter=P.AbstractMessageWriter=P.MessageWriter=P.ReadableStreamMessageReader=P.AbstractMessageReader=P.MessageReader=P.CancellationToken=P.CancellationTokenSource=P.Emitter=P.Event=P.Disposable=P.LRUCache=P.Touch=P.LinkedMap=P.ParameterStructures=P.NotificationType9=P.NotificationType8=P.NotificationType7=P.NotificationType6=P.NotificationType5=P.NotificationType4=P.NotificationType3=P.NotificationType2=P.NotificationType1=P.NotificationType0=P.NotificationType=P.ErrorCodes=P.ResponseError=P.RequestType9=P.RequestType8=P.RequestType7=P.RequestType6=P.RequestType5=P.RequestType4=P.RequestType3=P.RequestType2=P.RequestType1=P.RequestType0=P.RequestType=P.Message=P.RAL=void 0;P.CancellationStrategy=P.CancellationSenderStrategy=P.CancellationReceiverStrategy=P.ConnectionError=P.ConnectionErrors=P.LogTraceNotification=P.SetTraceNotification=void 0;var We=vl();Object.defineProperty(P,"Message",{enumerable:!0,get:function(){return We.Message}});Object.defineProperty(P,"RequestType",{enumerable:!0,get:function(){return We.RequestType}});Object.defineProperty(P,"RequestType0",{enumerable:!0,get:function(){return We.RequestType0}});Object.defineProperty(P,"RequestType1",{enumerable:!0,get:function(){return We.RequestType1}});Object.defineProperty(P,"RequestType2",{enumerable:!0,get:function(){return We.RequestType2}});Object.defineProperty(P,"RequestType3",{enumerable:!0,get:function(){return We.RequestType3}});Object.defineProperty(P,"RequestType4",{enumerable:!0,get:function(){return We.RequestType4}});Object.defineProperty(P,"RequestType5",{enumerable:!0,get:function(){return We.RequestType5}});Object.defineProperty(P,"RequestType6",{enumerable:!0,get:function(){return We.RequestType6}});Object.defineProperty(P,"RequestType7",{enumerable:!0,get:function(){return We.RequestType7}});Object.defineProperty(P,"RequestType8",{enumerable:!0,get:function(){return We.RequestType8}});Object.defineProperty(P,"RequestType9",{enumerable:!0,get:function(){return We.RequestType9}});Object.defineProperty(P,"ResponseError",{enumerable:!0,get:function(){return We.ResponseError}});Object.defineProperty(P,"ErrorCodes",{enumerable:!0,get:function(){return We.ErrorCodes}});Object.defineProperty(P,"NotificationType",{enumerable:!0,get:function(){return We.NotificationType}});Object.defineProperty(P,"NotificationType0",{enumerable:!0,get:function(){return We.NotificationType0}});Object.defineProperty(P,"NotificationType1",{enumerable:!0,get:function(){return We.NotificationType1}});Object.defineProperty(P,"NotificationType2",{enumerable:!0,get:function(){return We.NotificationType2}});Object.defineProperty(P,"NotificationType3",{enumerable:!0,get:function(){return We.NotificationType3}});Object.defineProperty(P,"NotificationType4",{enumerable:!0,get:function(){return We.NotificationType4}});Object.defineProperty(P,"NotificationType5",{enumerable:!0,get:function(){return We.NotificationType5}});Object.defineProperty(P,"NotificationType6",{enumerable:!0,get:function(){return We.NotificationType6}});Object.defineProperty(P,"NotificationType7",{enumerable:!0,get:function(){return We.NotificationType7}});Object.defineProperty(P,"NotificationType8",{enumerable:!0,get:function(){return We.NotificationType8}});Object.defineProperty(P,"NotificationType9",{enumerable:!0,get:function(){return We.NotificationType9}});Object.defineProperty(P,"ParameterStructures",{enumerable:!0,get:function(){return We.ParameterStructures}});var jl=_l();Object.defineProperty(P,"LinkedMap",{enumerable:!0,get:function(){return jl.LinkedMap}});Object.defineProperty(P,"LRUCache",{enumerable:!0,get:function(){return jl.LRUCache}});Object.defineProperty(P,"Touch",{enumerable:!0,get:function(){return jl.Touch}});var pR=Wu();Object.defineProperty(P,"Disposable",{enumerable:!0,get:function(){return pR.Disposable}});var km=Qi();Object.defineProperty(P,"Event",{enumerable:!0,get:function(){return km.Event}});Object.defineProperty(P,"Emitter",{enumerable:!0,get:function(){return km.Emitter}});var Nm=Rl();Object.defineProperty(P,"CancellationTokenSource",{enumerable:!0,get:function(){return Nm.CancellationTokenSource}});Object.defineProperty(P,"CancellationToken",{enumerable:!0,get:function(){return Nm.CancellationToken}});var $l=wm();Object.defineProperty(P,"MessageReader",{enumerable:!0,get:function(){return $l.MessageReader}});Object.defineProperty(P,"AbstractMessageReader",{enumerable:!0,get:function(){return $l.AbstractMessageReader}});Object.defineProperty(P,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return $l.ReadableStreamMessageReader}});var Ul=Dm();Object.defineProperty(P,"MessageWriter",{enumerable:!0,get:function(){return Ul.MessageWriter}});Object.defineProperty(P,"AbstractMessageWriter",{enumerable:!0,get:function(){return Ul.AbstractMessageWriter}});Object.defineProperty(P,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Ul.WriteableStreamMessageWriter}});var Lt=Om();Object.defineProperty(P,"ConnectionStrategy",{enumerable:!0,get:function(){return Lt.ConnectionStrategy}});Object.defineProperty(P,"ConnectionOptions",{enumerable:!0,get:function(){return Lt.ConnectionOptions}});Object.defineProperty(P,"NullLogger",{enumerable:!0,get:function(){return Lt.NullLogger}});Object.defineProperty(P,"createMessageConnection",{enumerable:!0,get:function(){return Lt.createMessageConnection}});Object.defineProperty(P,"ProgressToken",{enumerable:!0,get:function(){return Lt.ProgressToken}});Object.defineProperty(P,"ProgressType",{enumerable:!0,get:function(){return Lt.ProgressType}});Object.defineProperty(P,"Trace",{enumerable:!0,get:function(){return Lt.Trace}});Object.defineProperty(P,"TraceValues",{enumerable:!0,get:function(){return Lt.TraceValues}});Object.defineProperty(P,"TraceFormat",{enumerable:!0,get:function(){return Lt.TraceFormat}});Object.defineProperty(P,"SetTraceNotification",{enumerable:!0,get:function(){return Lt.SetTraceNotification}});Object.defineProperty(P,"LogTraceNotification",{enumerable:!0,get:function(){return Lt.LogTraceNotification}});Object.defineProperty(P,"ConnectionErrors",{enumerable:!0,get:function(){return Lt.ConnectionErrors}});Object.defineProperty(P,"ConnectionError",{enumerable:!0,get:function(){return Lt.ConnectionError}});Object.defineProperty(P,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Lt.CancellationReceiverStrategy}});Object.defineProperty(P,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Lt.CancellationSenderStrategy}});Object.defineProperty(P,"CancellationStrategy",{enumerable:!0,get:function(){return Lt.CancellationStrategy}});var gR=mr();P.RAL=gR.default});var gi=w(ke=>{"use strict";var mR=ke&&ke.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),vR=ke&&ke.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&mR(e,t,n)};Object.defineProperty(ke,"__esModule",{value:!0});ke.createMessageConnection=ke.createServerSocketTransport=ke.createClientSocketTransport=ke.createServerPipeTransport=ke.createClientPipeTransport=ke.generateRandomPipeName=ke.StreamMessageWriter=ke.StreamMessageReader=ke.SocketMessageWriter=ke.SocketMessageReader=ke.IPCMessageWriter=ke.IPCMessageReader=void 0;var es=gm();es.default.install();var ir=Hl(),Im=require("path"),yR=require("os"),_R=require("crypto"),Ma=require("net");vR(Hl(),ke);var Wl=class extends ir.AbstractMessageReader{constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),ir.Disposable.create(()=>this.process.off("message",e))}};ke.IPCMessageReader=Wl;var Bl=class extends ir.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ke.IPCMessageWriter=Bl;var hi=class extends ir.ReadableStreamMessageReader{constructor(e,n="utf-8"){super((0,es.default)().stream.asReadableStream(e),n)}};ke.SocketMessageReader=hi;var pi=class extends ir.WriteableStreamMessageWriter{constructor(e,n){super((0,es.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ke.SocketMessageWriter=pi;var Fa=class extends ir.ReadableStreamMessageReader{constructor(e,n){super((0,es.default)().stream.asReadableStream(e),n)}};ke.StreamMessageReader=Fa;var La=class extends ir.WriteableStreamMessageWriter{constructor(e,n){super((0,es.default)().stream.asWritableStream(e),n)}};ke.StreamMessageWriter=La;var Fm=process.env.XDG_RUNTIME_DIR,wR=new Map([["linux",107],["darwin",103]]);function CR(){let t=(0,_R.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Fm?e=Im.join(Fm,`vscode-ipc-${t}.sock`):e=Im.join(yR.tmpdir(),`vscode-${t}.sock`);let n=wR.get(process.platform);return n!==void 0&&e.length>=n&&(0,es.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ke.generateRandomPipeName=CR;function bR(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,Ma.createServer)(a=>{o.close(),n([new hi(a,e),new pi(a,e)])});o.on("error",s),o.listen(t,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}ke.createClientPipeTransport=bR;function SR(t,e="utf-8"){let n=(0,Ma.createConnection)(t);return[new hi(n,e),new pi(n,e)]}ke.createServerPipeTransport=SR;function RR(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let o=(0,Ma.createServer)(a=>{o.close(),n([new hi(a,e),new pi(a,e)])});o.on("error",s),o.listen(t,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}ke.createClientSocketTransport=RR;function DR(t,e="utf-8"){let n=(0,Ma.createConnection)(t,"127.0.0.1");return[new hi(n,e),new pi(n,e)]}ke.createServerSocketTransport=DR;function TR(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function ER(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function xR(t,e,n,r){n||(n=ir.NullLogger);let i=TR(t)?new Fa(t):t,s=ER(e)?new La(e):e;return ir.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,ir.createMessageConnection)(i,s,n,r)}ke.createMessageConnection=xR});var zl=w((eM,Lm)=>{"use strict";Lm.exports=gi()});var Ga={};ju(Ga,{AnnotatedTextEdit:()=>wr,ChangeAnnotation:()=>mi,ChangeAnnotationIdentifier:()=>xt,CodeAction:()=>Dd,CodeActionContext:()=>Rd,CodeActionKind:()=>Sd,CodeActionTriggerKind:()=>ho,CodeDescription:()=>td,CodeLens:()=>Td,Color:()=>$a,ColorInformation:()=>Xl,ColorPresentation:()=>Jl,Command:()=>vi,CompletionItem:()=>dd,CompletionItemKind:()=>sd,CompletionItemLabelDetails:()=>ld,CompletionItemTag:()=>ad,CompletionList:()=>fd,CreateFile:()=>ts,DeleteFile:()=>rs,Diagnostic:()=>co,DiagnosticRelatedInformation:()=>Ua,DiagnosticSeverity:()=>Zl,DiagnosticTag:()=>ed,DocumentHighlight:()=>vd,DocumentHighlightKind:()=>md,DocumentLink:()=>xd,DocumentSymbol:()=>bd,DocumentUri:()=>Gl,EOL:()=>qR,FoldingRange:()=>Ql,FoldingRangeKind:()=>Yl,FormattingOptions:()=>Ed,Hover:()=>hd,InlayHint:()=>Md,InlayHintKind:()=>Ba,InlayHintLabelPart:()=>za,InlineValueContext:()=>Ld,InlineValueEvaluatableExpression:()=>Fd,InlineValueText:()=>Nd,InlineValueVariableLookup:()=>Id,InsertReplaceEdit:()=>cd,InsertTextFormat:()=>od,InsertTextMode:()=>ud,Location:()=>ao,LocationLink:()=>Vl,MarkedString:()=>fo,MarkupContent:()=>is,MarkupKind:()=>Wa,OptionalVersionedTextDocumentIdentifier:()=>lo,ParameterInformation:()=>pd,Position:()=>bn,Range:()=>st,RenameFile:()=>ns,SelectionRange:()=>Pd,SemanticTokenModifiers:()=>Od,SemanticTokenTypes:()=>qd,SemanticTokens:()=>kd,SignatureInformation:()=>gd,SymbolInformation:()=>wd,SymbolKind:()=>yd,SymbolTag:()=>_d,TextDocument:()=>jd,TextDocumentEdit:()=>uo,TextDocumentIdentifier:()=>nd,TextDocumentItem:()=>id,TextEdit:()=>sr,URI:()=>ja,VersionedTextDocumentIdentifier:()=>rd,WorkspaceChange:()=>PR,WorkspaceEdit:()=>Ha,WorkspaceFolder:()=>Ad,WorkspaceSymbol:()=>Cd,integer:()=>Kl,uinteger:()=>oo});var Gl,ja,Kl,oo,bn,st,ao,Vl,$a,Xl,Jl,Yl,Ql,Ua,Zl,ed,td,co,vi,sr,mi,xt,wr,uo,ts,ns,rs,Ha,Aa,Mm,PR,nd,rd,lo,id,Wa,is,sd,od,ad,cd,ud,ld,dd,fd,fo,hd,pd,gd,md,vd,yd,_d,wd,Cd,bd,Sd,ho,Rd,Dd,Td,Ed,xd,Pd,qd,Od,kd,Nd,Id,Fd,Ld,Ba,za,Md,Ad,qR,jd,OR,R,Ka=Au(()=>{"use strict";(function(t){function e(n){return typeof n=="string"}t.is=e})(Gl||(Gl={}));(function(t){function e(n){return typeof n=="string"}t.is=e})(ja||(ja={}));(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(Kl||(Kl={}));(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}t.is=e})(oo||(oo={}));(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=oo.MAX_VALUE),i===Number.MAX_VALUE&&(i=oo.MAX_VALUE),{line:r,character:i}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&R.uinteger(i.line)&&R.uinteger(i.character)}t.is=n})(bn||(bn={}));(function(t){function e(r,i,s,o){if(R.uinteger(r)&&R.uinteger(i)&&R.uinteger(s)&&R.uinteger(o))return{start:bn.create(r,i),end:bn.create(s,o)};if(bn.is(r)&&bn.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(s,", ").concat(o,"]"))}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&bn.is(i.start)&&bn.is(i.end)}t.is=n})(st||(st={}));(function(t){function e(r,i){return{uri:r,range:i}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&st.is(i.range)&&(R.string(i.uri)||R.undefined(i.uri))}t.is=n})(ao||(ao={}));(function(t){function e(r,i,s,o){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:o}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&st.is(i.targetRange)&&R.string(i.targetUri)&&st.is(i.targetSelectionRange)&&(st.is(i.originSelectionRange)||R.undefined(i.originSelectionRange))}t.is=n})(Vl||(Vl={}));(function(t){function e(r,i,s,o){return{red:r,green:i,blue:s,alpha:o}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&R.numberRange(i.red,0,1)&&R.numberRange(i.green,0,1)&&R.numberRange(i.blue,0,1)&&R.numberRange(i.alpha,0,1)}t.is=n})($a||($a={}));(function(t){function e(r,i){return{range:r,color:i}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&st.is(i.range)&&$a.is(i.color)}t.is=n})(Xl||(Xl={}));(function(t){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&R.string(i.label)&&(R.undefined(i.textEdit)||sr.is(i))&&(R.undefined(i.additionalTextEdits)||R.typedArray(i.additionalTextEdits,sr.is))}t.is=n})(Jl||(Jl={}));(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Yl||(Yl={}));(function(t){function e(r,i,s,o,a,c){var u={startLine:r,endLine:i};return R.defined(s)&&(u.startCharacter=s),R.defined(o)&&(u.endCharacter=o),R.defined(a)&&(u.kind=a),R.defined(c)&&(u.collapsedText=c),u}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&R.uinteger(i.startLine)&&R.uinteger(i.startLine)&&(R.undefined(i.startCharacter)||R.uinteger(i.startCharacter))&&(R.undefined(i.endCharacter)||R.uinteger(i.endCharacter))&&(R.undefined(i.kind)||R.string(i.kind))}t.is=n})(Ql||(Ql={}));(function(t){function e(r,i){return{location:r,message:i}}t.create=e;function n(r){var i=r;return R.defined(i)&&ao.is(i.location)&&R.string(i.message)}t.is=n})(Ua||(Ua={}));(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Zl||(Zl={}));(function(t){t.Unnecessary=1,t.Deprecated=2})(ed||(ed={}));(function(t){function e(n){var r=n;return R.objectLiteral(r)&&R.string(r.href)}t.is=e})(td||(td={}));(function(t){function e(r,i,s,o,a,c){var u={range:r,message:i};return R.defined(s)&&(u.severity=s),R.defined(o)&&(u.code=o),R.defined(a)&&(u.source=a),R.defined(c)&&(u.relatedInformation=c),u}t.create=e;function n(r){var i,s=r;return R.defined(s)&&st.is(s.range)&&R.string(s.message)&&(R.number(s.severity)||R.undefined(s.severity))&&(R.integer(s.code)||R.string(s.code)||R.undefined(s.code))&&(R.undefined(s.codeDescription)||R.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(R.string(s.source)||R.undefined(s.source))&&(R.undefined(s.relatedInformation)||R.typedArray(s.relatedInformation,Ua.is))}t.is=n})(co||(co={}));(function(t){function e(r,i){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a={title:r,command:i};return R.defined(s)&&s.length>0&&(a.arguments=s),a}t.create=e;function n(r){var i=r;return R.defined(i)&&R.string(i.title)&&R.string(i.command)}t.is=n})(vi||(vi={}));(function(t){function e(s,o){return{range:s,newText:o}}t.replace=e;function n(s,o){return{range:{start:s,end:s},newText:o}}t.insert=n;function r(s){return{range:s,newText:""}}t.del=r;function i(s){var o=s;return R.objectLiteral(o)&&R.string(o.newText)&&st.is(o.range)}t.is=i})(sr||(sr={}));(function(t){function e(r,i,s){var o={label:r};return i!==void 0&&(o.needsConfirmation=i),s!==void 0&&(o.description=s),o}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&R.string(i.label)&&(R.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(R.string(i.description)||i.description===void 0)}t.is=n})(mi||(mi={}));(function(t){function e(n){var r=n;return R.string(r)}t.is=e})(xt||(xt={}));(function(t){function e(s,o,a){return{range:s,newText:o,annotationId:a}}t.replace=e;function n(s,o,a){return{range:{start:s,end:s},newText:o,annotationId:a}}t.insert=n;function r(s,o){return{range:s,newText:"",annotationId:o}}t.del=r;function i(s){var o=s;return sr.is(o)&&(mi.is(o.annotationId)||xt.is(o.annotationId))}t.is=i})(wr||(wr={}));(function(t){function e(r,i){return{textDocument:r,edits:i}}t.create=e;function n(r){var i=r;return R.defined(i)&&lo.is(i.textDocument)&&Array.isArray(i.edits)}t.is=n})(uo||(uo={}));(function(t){function e(r,i,s){var o={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&R.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||R.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||R.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xt.is(i.annotationId))}t.is=n})(ts||(ts={}));(function(t){function e(r,i,s,o){var a={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(a.options=s),o!==void 0&&(a.annotationId=o),a}t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&R.string(i.oldUri)&&R.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||R.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||R.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xt.is(i.annotationId))}t.is=n})(ns||(ns={}));(function(t){function e(r,i,s){var o={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(o.options=i),s!==void 0&&(o.annotationId=s),o}t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&R.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||R.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||R.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||xt.is(i.annotationId))}t.is=n})(rs||(rs={}));(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return R.string(i.kind)?ts.is(i)||ns.is(i)||rs.is(i):uo.is(i)}))}t.is=e})(Ha||(Ha={}));Aa=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return t.prototype.insert=function(e,n,r){var i,s;if(r===void 0?i=sr.insert(e,n):xt.is(r)?(s=r,i=wr.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=wr.insert(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.replace=function(e,n,r){var i,s;if(r===void 0?i=sr.replace(e,n):xt.is(r)?(s=r,i=wr.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=wr.replace(e,n,s)),this.edits.push(i),s!==void 0)return s},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=sr.del(e):xt.is(n)?(i=n,r=wr.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=wr.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Mm=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(xt.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),PR=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Mm(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(uo.is(r)){var i=new Aa(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new Aa(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(lo.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],s={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(s),r=new Aa(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new Aa(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Mm,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;mi.is(n)||xt.is(n)?i=n:r=n;var s,o;if(i===void 0?s=ts.create(e,r):(o=xt.is(i)?i:this._changeAnnotations.manage(i),s=ts.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;mi.is(r)||xt.is(r)?s=r:i=r;var o,a;if(s===void 0?o=ns.create(e,n,i):(a=xt.is(s)?s:this._changeAnnotations.manage(s),o=ns.create(e,n,i,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;mi.is(n)||xt.is(n)?i=n:r=n;var s,o;if(i===void 0?s=rs.create(e,r):(o=xt.is(i)?i:this._changeAnnotations.manage(i),s=rs.create(e,r,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},t}();(function(t){function e(r){return{uri:r}}t.create=e;function n(r){var i=r;return R.defined(i)&&R.string(i.uri)}t.is=n})(nd||(nd={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return R.defined(i)&&R.string(i.uri)&&R.integer(i.version)}t.is=n})(rd||(rd={}));(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return R.defined(i)&&R.string(i.uri)&&(i.version===null||R.integer(i.version))}t.is=n})(lo||(lo={}));(function(t){function e(r,i,s,o){return{uri:r,languageId:i,version:s,text:o}}t.create=e;function n(r){var i=r;return R.defined(i)&&R.string(i.uri)&&R.string(i.languageId)&&R.integer(i.version)&&R.string(i.text)}t.is=n})(id||(id={}));(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){var r=n;return r===t.PlainText||r===t.Markdown}t.is=e})(Wa||(Wa={}));(function(t){function e(n){var r=n;return R.objectLiteral(n)&&Wa.is(r.kind)&&R.string(r.value)}t.is=e})(is||(is={}));(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(sd||(sd={}));(function(t){t.PlainText=1,t.Snippet=2})(od||(od={}));(function(t){t.Deprecated=1})(ad||(ad={}));(function(t){function e(r,i,s){return{newText:r,insert:i,replace:s}}t.create=e;function n(r){var i=r;return i&&R.string(i.newText)&&st.is(i.insert)&&st.is(i.replace)}t.is=n})(cd||(cd={}));(function(t){t.asIs=1,t.adjustIndentation=2})(ud||(ud={}));(function(t){function e(n){var r=n;return r&&(R.string(r.detail)||r.detail===void 0)&&(R.string(r.description)||r.description===void 0)}t.is=e})(ld||(ld={}));(function(t){function e(n){return{label:n}}t.create=e})(dd||(dd={}));(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}t.create=e})(fd||(fd={}));(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(r){var i=r;return R.string(i)||R.objectLiteral(i)&&R.string(i.language)&&R.string(i.value)}t.is=n})(fo||(fo={}));(function(t){function e(n){var r=n;return!!r&&R.objectLiteral(r)&&(is.is(r.contents)||fo.is(r.contents)||R.typedArray(r.contents,fo.is))&&(n.range===void 0||st.is(n.range))}t.is=e})(hd||(hd={}));(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}t.create=e})(pd||(pd={}));(function(t){function e(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o={label:n};return R.defined(r)&&(o.documentation=r),R.defined(i)?o.parameters=i:o.parameters=[],o}t.create=e})(gd||(gd={}));(function(t){t.Text=1,t.Read=2,t.Write=3})(md||(md={}));(function(t){function e(n,r){var i={range:n};return R.number(r)&&(i.kind=r),i}t.create=e})(vd||(vd={}));(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(yd||(yd={}));(function(t){t.Deprecated=1})(_d||(_d={}));(function(t){function e(n,r,i,s,o){var a={name:n,kind:r,location:{uri:s,range:i}};return o&&(a.containerName=o),a}t.create=e})(wd||(wd={}));(function(t){function e(n,r,i,s){return s!==void 0?{name:n,kind:r,location:{uri:i,range:s}}:{name:n,kind:r,location:{uri:i}}}t.create=e})(Cd||(Cd={}));(function(t){function e(r,i,s,o,a,c){var u={name:r,detail:i,kind:s,range:o,selectionRange:a};return c!==void 0&&(u.children=c),u}t.create=e;function n(r){var i=r;return i&&R.string(i.name)&&R.number(i.kind)&&st.is(i.range)&&st.is(i.selectionRange)&&(i.detail===void 0||R.string(i.detail))&&(i.deprecated===void 0||R.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=n})(bd||(bd={}));(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Sd||(Sd={}));(function(t){t.Invoked=1,t.Automatic=2})(ho||(ho={}));(function(t){function e(r,i,s){var o={diagnostics:r};return i!=null&&(o.only=i),s!=null&&(o.triggerKind=s),o}t.create=e;function n(r){var i=r;return R.defined(i)&&R.typedArray(i.diagnostics,co.is)&&(i.only===void 0||R.typedArray(i.only,R.string))&&(i.triggerKind===void 0||i.triggerKind===ho.Invoked||i.triggerKind===ho.Automatic)}t.is=n})(Rd||(Rd={}));(function(t){function e(r,i,s){var o={title:r},a=!0;return typeof i=="string"?(a=!1,o.kind=i):vi.is(i)?o.command=i:o.edit=i,a&&s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return i&&R.string(i.title)&&(i.diagnostics===void 0||R.typedArray(i.diagnostics,co.is))&&(i.kind===void 0||R.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||vi.is(i.command))&&(i.isPreferred===void 0||R.boolean(i.isPreferred))&&(i.edit===void 0||Ha.is(i.edit))}t.is=n})(Dd||(Dd={}));(function(t){function e(r,i){var s={range:r};return R.defined(i)&&(s.data=i),s}t.create=e;function n(r){var i=r;return R.defined(i)&&st.is(i.range)&&(R.undefined(i.command)||vi.is(i.command))}t.is=n})(Td||(Td={}));(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}t.create=e;function n(r){var i=r;return R.defined(i)&&R.uinteger(i.tabSize)&&R.boolean(i.insertSpaces)}t.is=n})(Ed||(Ed={}));(function(t){function e(r,i,s){return{range:r,target:i,data:s}}t.create=e;function n(r){var i=r;return R.defined(i)&&st.is(i.range)&&(R.undefined(i.target)||R.string(i.target))}t.is=n})(xd||(xd={}));(function(t){function e(r,i){return{range:r,parent:i}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&st.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=n})(Pd||(Pd={}));(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(qd||(qd={}));(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Od||(Od={}));(function(t){function e(n){var r=n;return R.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(kd||(kd={}));(function(t){function e(r,i){return{range:r,text:i}}t.create=e;function n(r){var i=r;return i!=null&&st.is(i.range)&&R.string(i.text)}t.is=n})(Nd||(Nd={}));(function(t){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}t.create=e;function n(r){var i=r;return i!=null&&st.is(i.range)&&R.boolean(i.caseSensitiveLookup)&&(R.string(i.variableName)||i.variableName===void 0)}t.is=n})(Id||(Id={}));(function(t){function e(r,i){return{range:r,expression:i}}t.create=e;function n(r){var i=r;return i!=null&&st.is(i.range)&&(R.string(i.expression)||i.expression===void 0)}t.is=n})(Fd||(Fd={}));(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}t.create=e;function n(r){var i=r;return R.defined(i)&&st.is(r.stoppedLocation)}t.is=n})(Ld||(Ld={}));(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}t.is=e})(Ba||(Ba={}));(function(t){function e(r){return{value:r}}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&(i.tooltip===void 0||R.string(i.tooltip)||is.is(i.tooltip))&&(i.location===void 0||ao.is(i.location))&&(i.command===void 0||vi.is(i.command))}t.is=n})(za||(za={}));(function(t){function e(r,i,s){var o={position:r,label:i};return s!==void 0&&(o.kind=s),o}t.create=e;function n(r){var i=r;return R.objectLiteral(i)&&bn.is(i.position)&&(R.string(i.label)||R.typedArray(i.label,za.is))&&(i.kind===void 0||Ba.is(i.kind))&&i.textEdits===void 0||R.typedArray(i.textEdits,sr.is)&&(i.tooltip===void 0||R.string(i.tooltip)||is.is(i.tooltip))&&(i.paddingLeft===void 0||R.boolean(i.paddingLeft))&&(i.paddingRight===void 0||R.boolean(i.paddingRight))}t.is=n})(Md||(Md={}));(function(t){function e(n){var r=n;return R.objectLiteral(r)&&ja.is(r.uri)&&R.string(r.name)}t.is=e})(Ad||(Ad={}));qR=[`
`,`\r
`,"\r"];(function(t){function e(s,o,a,c){return new OR(s,o,a,c)}t.create=e;function n(s){var o=s;return!!(R.defined(o)&&R.string(o.uri)&&(R.undefined(o.languageId)||R.string(o.languageId))&&R.uinteger(o.lineCount)&&R.func(o.getText)&&R.func(o.positionAt)&&R.func(o.offsetAt))}t.is=n;function r(s,o){for(var a=s.getText(),c=i(o,function(m,y){var _=m.range.start.line-y.range.start.line;return _===0?m.range.start.character-y.range.start.character:_}),u=a.length,l=c.length-1;l>=0;l--){var d=c[l],h=s.offsetAt(d.range.start),p=s.offsetAt(d.range.end);if(p<=u)a=a.substring(0,h)+d.newText+a.substring(p,a.length);else throw new Error("Overlapping edit");u=h}return a}t.applyEdits=r;function i(s,o){if(s.length<=1)return s;var a=s.length/2|0,c=s.slice(0,a),u=s.slice(a);i(c,o),i(u,o);for(var l=0,d=0,h=0;l<c.length&&d<u.length;){var p=o(c[l],u[d]);p<=0?s[h++]=c[l++]:s[h++]=u[d++]}for(;l<c.length;)s[h++]=c[l++];for(;d<u.length;)s[h++]=u[d++];return s}})(jd||(jd={}));OR=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var s=n.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return bn.create(0,e);for(;r<i;){var s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}var o=r-1;return bn.create(o,e-n[o])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}();(function(t){var e=Object.prototype.toString;function n(p){return typeof p<"u"}t.defined=n;function r(p){return typeof p>"u"}t.undefined=r;function i(p){return p===!0||p===!1}t.boolean=i;function s(p){return e.call(p)==="[object String]"}t.string=s;function o(p){return e.call(p)==="[object Number]"}t.number=o;function a(p,m,y){return e.call(p)==="[object Number]"&&m<=p&&p<=y}t.numberRange=a;function c(p){return e.call(p)==="[object Number]"&&-2147483648<=p&&p<=2147483647}t.integer=c;function u(p){return e.call(p)==="[object Number]"&&0<=p&&p<=2147483647}t.uinteger=u;function l(p){return e.call(p)==="[object Function]"}t.func=l;function d(p){return p!==null&&typeof p=="object"}t.objectLiteral=d;function h(p,m){return Array.isArray(p)&&p.every(m)}t.typedArray=h})(R||(R={}))});var Qe=w(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.ProtocolNotificationType=Wt.ProtocolNotificationType0=Wt.ProtocolRequestType=Wt.ProtocolRequestType0=Wt.RegistrationType=Wt.MessageDirection=void 0;var ss=gi(),kR;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(kR=Wt.MessageDirection||(Wt.MessageDirection={}));var $d=class{constructor(e){this.method=e}};Wt.RegistrationType=$d;var Ud=class extends ss.RequestType0{constructor(e){super(e)}};Wt.ProtocolRequestType0=Ud;var Hd=class extends ss.RequestType{constructor(e){super(e,ss.ParameterStructures.byName)}};Wt.ProtocolRequestType=Hd;var Wd=class extends ss.NotificationType0{constructor(e){super(e)}};Wt.ProtocolNotificationType0=Wd;var Bd=class extends ss.NotificationType{constructor(e){super(e,ss.ParameterStructures.byName)}};Wt.ProtocolNotificationType=Bd});var Va=w(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.objectLiteral=ut.typedArray=ut.stringArray=ut.array=ut.func=ut.error=ut.number=ut.string=ut.boolean=void 0;function NR(t){return t===!0||t===!1}ut.boolean=NR;function Am(t){return typeof t=="string"||t instanceof String}ut.string=Am;function IR(t){return typeof t=="number"||t instanceof Number}ut.number=IR;function FR(t){return t instanceof Error}ut.error=FR;function LR(t){return typeof t=="function"}ut.func=LR;function jm(t){return Array.isArray(t)}ut.array=jm;function MR(t){return jm(t)&&t.every(e=>Am(e))}ut.stringArray=MR;function AR(t,e){return Array.isArray(t)&&t.every(e)}ut.typedArray=AR;function jR(t){return t!==null&&typeof t=="object"}ut.objectLiteral=jR});var Um=w(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.ImplementationRequest=void 0;var $m=Qe(),$R;(function(t){t.method="textDocument/implementation",t.messageDirection=$m.MessageDirection.clientToServer,t.type=new $m.ProtocolRequestType(t.method)})($R=po.ImplementationRequest||(po.ImplementationRequest={}))});var Wm=w(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.TypeDefinitionRequest=void 0;var Hm=Qe(),UR;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=Hm.MessageDirection.clientToServer,t.type=new Hm.ProtocolRequestType(t.method)})(UR=go.TypeDefinitionRequest||(go.TypeDefinitionRequest={}))});var Bm=w(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.DidChangeWorkspaceFoldersNotification=Ur.WorkspaceFoldersRequest=void 0;var Xa=Qe(),HR;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Xa.MessageDirection.serverToClient,t.type=new Xa.ProtocolRequestType0(t.method)})(HR=Ur.WorkspaceFoldersRequest||(Ur.WorkspaceFoldersRequest={}));var WR;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Xa.MessageDirection.clientToServer,t.type=new Xa.ProtocolNotificationType(t.method)})(WR=Ur.DidChangeWorkspaceFoldersNotification||(Ur.DidChangeWorkspaceFoldersNotification={}))});var Gm=w(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.ConfigurationRequest=void 0;var zm=Qe(),BR;(function(t){t.method="workspace/configuration",t.messageDirection=zm.MessageDirection.serverToClient,t.type=new zm.ProtocolRequestType(t.method)})(BR=mo.ConfigurationRequest||(mo.ConfigurationRequest={}))});var Km=w(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.ColorPresentationRequest=Hr.DocumentColorRequest=void 0;var Ja=Qe(),zR;(function(t){t.method="textDocument/documentColor",t.messageDirection=Ja.MessageDirection.clientToServer,t.type=new Ja.ProtocolRequestType(t.method)})(zR=Hr.DocumentColorRequest||(Hr.DocumentColorRequest={}));var GR;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Ja.MessageDirection.clientToServer,t.type=new Ja.ProtocolRequestType(t.method)})(GR=Hr.ColorPresentationRequest||(Hr.ColorPresentationRequest={}))});var Xm=w(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.FoldingRangeRequest=void 0;var Vm=Qe(),KR;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Vm.MessageDirection.clientToServer,t.type=new Vm.ProtocolRequestType(t.method)})(KR=vo.FoldingRangeRequest||(vo.FoldingRangeRequest={}))});var Ym=w(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.DeclarationRequest=void 0;var Jm=Qe(),VR;(function(t){t.method="textDocument/declaration",t.messageDirection=Jm.MessageDirection.clientToServer,t.type=new Jm.ProtocolRequestType(t.method)})(VR=yo.DeclarationRequest||(yo.DeclarationRequest={}))});var Zm=w(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.SelectionRangeRequest=void 0;var Qm=Qe(),XR;(function(t){t.method="textDocument/selectionRange",t.messageDirection=Qm.MessageDirection.clientToServer,t.type=new Qm.ProtocolRequestType(t.method)})(XR=_o.SelectionRangeRequest||(_o.SelectionRangeRequest={}))});var ev=w(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.WorkDoneProgressCancelNotification=Hn.WorkDoneProgressCreateRequest=Hn.WorkDoneProgress=void 0;var JR=gi(),Ya=Qe(),YR;(function(t){t.type=new JR.ProgressType;function e(n){return n===t.type}t.is=e})(YR=Hn.WorkDoneProgress||(Hn.WorkDoneProgress={}));var QR;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Ya.MessageDirection.serverToClient,t.type=new Ya.ProtocolRequestType(t.method)})(QR=Hn.WorkDoneProgressCreateRequest||(Hn.WorkDoneProgressCreateRequest={}));var ZR;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Ya.MessageDirection.clientToServer,t.type=new Ya.ProtocolNotificationType(t.method)})(ZR=Hn.WorkDoneProgressCancelNotification||(Hn.WorkDoneProgressCancelNotification={}))});var tv=w(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.CallHierarchyOutgoingCallsRequest=Wn.CallHierarchyIncomingCallsRequest=Wn.CallHierarchyPrepareRequest=void 0;var os=Qe(),eD;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=os.MessageDirection.clientToServer,t.type=new os.ProtocolRequestType(t.method)})(eD=Wn.CallHierarchyPrepareRequest||(Wn.CallHierarchyPrepareRequest={}));var tD;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=os.MessageDirection.clientToServer,t.type=new os.ProtocolRequestType(t.method)})(tD=Wn.CallHierarchyIncomingCallsRequest||(Wn.CallHierarchyIncomingCallsRequest={}));var nD;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=os.MessageDirection.clientToServer,t.type=new os.ProtocolRequestType(t.method)})(nD=Wn.CallHierarchyOutgoingCallsRequest||(Wn.CallHierarchyOutgoingCallsRequest={}))});var nv=w(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.SemanticTokensRefreshRequest=lt.SemanticTokensRangeRequest=lt.SemanticTokensDeltaRequest=lt.SemanticTokensRequest=lt.SemanticTokensRegistrationType=lt.TokenFormat=void 0;var Cr=Qe(),rD;(function(t){t.Relative="relative"})(rD=lt.TokenFormat||(lt.TokenFormat={}));var Qa;(function(t){t.method="textDocument/semanticTokens",t.type=new Cr.RegistrationType(t.method)})(Qa=lt.SemanticTokensRegistrationType||(lt.SemanticTokensRegistrationType={}));var iD;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Cr.MessageDirection.clientToServer,t.type=new Cr.ProtocolRequestType(t.method),t.registrationMethod=Qa.method})(iD=lt.SemanticTokensRequest||(lt.SemanticTokensRequest={}));var sD;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Cr.MessageDirection.clientToServer,t.type=new Cr.ProtocolRequestType(t.method),t.registrationMethod=Qa.method})(sD=lt.SemanticTokensDeltaRequest||(lt.SemanticTokensDeltaRequest={}));var oD;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Cr.MessageDirection.clientToServer,t.type=new Cr.ProtocolRequestType(t.method),t.registrationMethod=Qa.method})(oD=lt.SemanticTokensRangeRequest||(lt.SemanticTokensRangeRequest={}));var aD;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Cr.MessageDirection.clientToServer,t.type=new Cr.ProtocolRequestType0(t.method)})(aD=lt.SemanticTokensRefreshRequest||(lt.SemanticTokensRefreshRequest={}))});var iv=w(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.ShowDocumentRequest=void 0;var rv=Qe(),cD;(function(t){t.method="window/showDocument",t.messageDirection=rv.MessageDirection.serverToClient,t.type=new rv.ProtocolRequestType(t.method)})(cD=wo.ShowDocumentRequest||(wo.ShowDocumentRequest={}))});var ov=w(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.LinkedEditingRangeRequest=void 0;var sv=Qe(),uD;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=sv.MessageDirection.clientToServer,t.type=new sv.ProtocolRequestType(t.method)})(uD=Co.LinkedEditingRangeRequest||(Co.LinkedEditingRangeRequest={}))});var av=w(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.WillDeleteFilesRequest=Ze.DidDeleteFilesNotification=Ze.DidRenameFilesNotification=Ze.WillRenameFilesRequest=Ze.DidCreateFilesNotification=Ze.WillCreateFilesRequest=Ze.FileOperationPatternKind=void 0;var Sn=Qe(),lD;(function(t){t.file="file",t.folder="folder"})(lD=Ze.FileOperationPatternKind||(Ze.FileOperationPatternKind={}));var dD;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Sn.MessageDirection.clientToServer,t.type=new Sn.ProtocolRequestType(t.method)})(dD=Ze.WillCreateFilesRequest||(Ze.WillCreateFilesRequest={}));var fD;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Sn.MessageDirection.clientToServer,t.type=new Sn.ProtocolNotificationType(t.method)})(fD=Ze.DidCreateFilesNotification||(Ze.DidCreateFilesNotification={}));var hD;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Sn.MessageDirection.clientToServer,t.type=new Sn.ProtocolRequestType(t.method)})(hD=Ze.WillRenameFilesRequest||(Ze.WillRenameFilesRequest={}));var pD;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Sn.MessageDirection.clientToServer,t.type=new Sn.ProtocolNotificationType(t.method)})(pD=Ze.DidRenameFilesNotification||(Ze.DidRenameFilesNotification={}));var gD;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Sn.MessageDirection.clientToServer,t.type=new Sn.ProtocolNotificationType(t.method)})(gD=Ze.DidDeleteFilesNotification||(Ze.DidDeleteFilesNotification={}));var mD;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Sn.MessageDirection.clientToServer,t.type=new Sn.ProtocolRequestType(t.method)})(mD=Ze.WillDeleteFilesRequest||(Ze.WillDeleteFilesRequest={}))});var uv=w(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.MonikerRequest=Bn.MonikerKind=Bn.UniquenessLevel=void 0;var cv=Qe(),vD;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(vD=Bn.UniquenessLevel||(Bn.UniquenessLevel={}));var yD;(function(t){t.$import="import",t.$export="export",t.local="local"})(yD=Bn.MonikerKind||(Bn.MonikerKind={}));var _D;(function(t){t.method="textDocument/moniker",t.messageDirection=cv.MessageDirection.clientToServer,t.type=new cv.ProtocolRequestType(t.method)})(_D=Bn.MonikerRequest||(Bn.MonikerRequest={}))});var lv=w(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.TypeHierarchySubtypesRequest=zn.TypeHierarchySupertypesRequest=zn.TypeHierarchyPrepareRequest=void 0;var as=Qe(),wD;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=as.MessageDirection.clientToServer,t.type=new as.ProtocolRequestType(t.method)})(wD=zn.TypeHierarchyPrepareRequest||(zn.TypeHierarchyPrepareRequest={}));var CD;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=as.MessageDirection.clientToServer,t.type=new as.ProtocolRequestType(t.method)})(CD=zn.TypeHierarchySupertypesRequest||(zn.TypeHierarchySupertypesRequest={}));var bD;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=as.MessageDirection.clientToServer,t.type=new as.ProtocolRequestType(t.method)})(bD=zn.TypeHierarchySubtypesRequest||(zn.TypeHierarchySubtypesRequest={}))});var dv=w(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.InlineValueRefreshRequest=Wr.InlineValueRequest=void 0;var Za=Qe(),SD;(function(t){t.method="textDocument/inlineValue",t.messageDirection=Za.MessageDirection.clientToServer,t.type=new Za.ProtocolRequestType(t.method)})(SD=Wr.InlineValueRequest||(Wr.InlineValueRequest={}));var RD;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=Za.MessageDirection.clientToServer,t.type=new Za.ProtocolRequestType0(t.method)})(RD=Wr.InlineValueRefreshRequest||(Wr.InlineValueRefreshRequest={}))});var fv=w(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.InlayHintRefreshRequest=Gn.InlayHintResolveRequest=Gn.InlayHintRequest=void 0;var cs=Qe(),DD;(function(t){t.method="textDocument/inlayHint",t.messageDirection=cs.MessageDirection.clientToServer,t.type=new cs.ProtocolRequestType(t.method)})(DD=Gn.InlayHintRequest||(Gn.InlayHintRequest={}));var TD;(function(t){t.method="inlayHint/resolve",t.messageDirection=cs.MessageDirection.clientToServer,t.type=new cs.ProtocolRequestType(t.method)})(TD=Gn.InlayHintResolveRequest||(Gn.InlayHintResolveRequest={}));var ED;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=cs.MessageDirection.clientToServer,t.type=new cs.ProtocolRequestType0(t.method)})(ED=Gn.InlayHintRefreshRequest||(Gn.InlayHintRefreshRequest={}))});var pv=w(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.DiagnosticRefreshRequest=Pt.WorkspaceDiagnosticRequest=Pt.DocumentDiagnosticRequest=Pt.DocumentDiagnosticReportKind=Pt.DiagnosticServerCancellationData=void 0;var hv=gi(),xD=Va(),us=Qe(),PD;(function(t){function e(n){let r=n;return r&&xD.boolean(r.retriggerRequest)}t.is=e})(PD=Pt.DiagnosticServerCancellationData||(Pt.DiagnosticServerCancellationData={}));var qD;(function(t){t.Full="full",t.Unchanged="unchanged"})(qD=Pt.DocumentDiagnosticReportKind||(Pt.DocumentDiagnosticReportKind={}));var OD;(function(t){t.method="textDocument/diagnostic",t.messageDirection=us.MessageDirection.clientToServer,t.type=new us.ProtocolRequestType(t.method),t.partialResult=new hv.ProgressType})(OD=Pt.DocumentDiagnosticRequest||(Pt.DocumentDiagnosticRequest={}));var kD;(function(t){t.method="workspace/diagnostic",t.messageDirection=us.MessageDirection.clientToServer,t.type=new us.ProtocolRequestType(t.method),t.partialResult=new hv.ProgressType})(kD=Pt.WorkspaceDiagnosticRequest||(Pt.WorkspaceDiagnosticRequest={}));var ND;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=us.MessageDirection.clientToServer,t.type=new us.ProtocolRequestType0(t.method)})(ND=Pt.DiagnosticRefreshRequest||(Pt.DiagnosticRefreshRequest={}))});var vv=w(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=void 0;var bo=(Ka(),jr(Ga)),Kn=Va(),or=Qe(),gv;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}t.is=e})(gv=xe.NotebookCellKind||(xe.NotebookCellKind={}));var mv;(function(t){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}t.create=e;function n(i){let s=i;return Kn.objectLiteral(s)&&bo.uinteger.is(s.executionOrder)&&(s.success===void 0||Kn.boolean(s.success))}t.is=n;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}t.equals=r})(mv=xe.ExecutionSummary||(xe.ExecutionSummary={}));var zd;(function(t){function e(s,o){return{kind:s,document:o}}t.create=e;function n(s){let o=s;return Kn.objectLiteral(o)&&gv.is(o.kind)&&bo.DocumentUri.is(o.document)&&(o.metadata===void 0||Kn.objectLiteral(o.metadata))}t.is=n;function r(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!mv.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}t.diff=r;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),c=Array.isArray(o);if(a!==c)return!1;if(a&&c){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++)if(!i(s[u],o[u]))return!1}if(Kn.objectLiteral(s)&&Kn.objectLiteral(o)){let u=Object.keys(s),l=Object.keys(o);if(u.length!==l.length||(u.sort(),l.sort(),!i(u,l)))return!1;for(let d=0;d<u.length;d++){let h=u[d];if(!i(s[h],o[h]))return!1}}return!0}})(zd=xe.NotebookCell||(xe.NotebookCell={}));var ID;(function(t){function e(r,i,s,o){return{uri:r,notebookType:i,version:s,cells:o}}t.create=e;function n(r){let i=r;return Kn.objectLiteral(i)&&Kn.string(i.uri)&&bo.integer.is(i.version)&&Kn.typedArray(i.cells,zd.is)}t.is=n})(ID=xe.NotebookDocument||(xe.NotebookDocument={}));var So;(function(t){t.method="notebookDocument/sync",t.messageDirection=or.MessageDirection.clientToServer,t.type=new or.RegistrationType(t.method)})(So=xe.NotebookDocumentSyncRegistrationType||(xe.NotebookDocumentSyncRegistrationType={}));var FD;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=or.MessageDirection.clientToServer,t.type=new or.ProtocolNotificationType(t.method),t.registrationMethod=So.method})(FD=xe.DidOpenNotebookDocumentNotification||(xe.DidOpenNotebookDocumentNotification={}));var LD;(function(t){function e(r){let i=r;return Kn.objectLiteral(i)&&bo.uinteger.is(i.start)&&bo.uinteger.is(i.deleteCount)&&(i.cells===void 0||Kn.typedArray(i.cells,zd.is))}t.is=e;function n(r,i,s){let o={start:r,deleteCount:i};return s!==void 0&&(o.cells=s),o}t.create=n})(LD=xe.NotebookCellArrayChange||(xe.NotebookCellArrayChange={}));var MD;(function(t){t.method="notebookDocument/didChange",t.messageDirection=or.MessageDirection.clientToServer,t.type=new or.ProtocolNotificationType(t.method),t.registrationMethod=So.method})(MD=xe.DidChangeNotebookDocumentNotification||(xe.DidChangeNotebookDocumentNotification={}));var AD;(function(t){t.method="notebookDocument/didSave",t.messageDirection=or.MessageDirection.clientToServer,t.type=new or.ProtocolNotificationType(t.method),t.registrationMethod=So.method})(AD=xe.DidSaveNotebookDocumentNotification||(xe.DidSaveNotebookDocumentNotification={}));var jD;(function(t){t.method="notebookDocument/didClose",t.messageDirection=or.MessageDirection.clientToServer,t.type=new or.ProtocolNotificationType(t.method),t.registrationMethod=So.method})(jD=xe.DidCloseNotebookDocumentNotification||(xe.DidCloseNotebookDocumentNotification={}))});var Tv=w(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.WorkspaceSymbolRequest=v.CodeActionResolveRequest=v.CodeActionRequest=v.DocumentSymbolRequest=v.DocumentHighlightRequest=v.ReferencesRequest=v.DefinitionRequest=v.SignatureHelpRequest=v.SignatureHelpTriggerKind=v.HoverRequest=v.CompletionResolveRequest=v.CompletionRequest=v.CompletionTriggerKind=v.PublishDiagnosticsNotification=v.WatchKind=v.RelativePattern=v.FileChangeType=v.DidChangeWatchedFilesNotification=v.WillSaveTextDocumentWaitUntilRequest=v.WillSaveTextDocumentNotification=v.TextDocumentSaveReason=v.DidSaveTextDocumentNotification=v.DidCloseTextDocumentNotification=v.DidChangeTextDocumentNotification=v.TextDocumentContentChangeEvent=v.DidOpenTextDocumentNotification=v.TextDocumentSyncKind=v.TelemetryEventNotification=v.LogMessageNotification=v.ShowMessageRequest=v.ShowMessageNotification=v.MessageType=v.DidChangeConfigurationNotification=v.ExitNotification=v.ShutdownRequest=v.InitializedNotification=v.InitializeErrorCodes=v.InitializeRequest=v.WorkDoneProgressOptions=v.TextDocumentRegistrationOptions=v.StaticRegistrationOptions=v.PositionEncodingKind=v.FailureHandlingKind=v.ResourceOperationKind=v.UnregistrationRequest=v.RegistrationRequest=v.DocumentSelector=v.NotebookCellTextDocumentFilter=v.NotebookDocumentFilter=v.TextDocumentFilter=void 0;v.TypeHierarchySubtypesRequest=v.TypeHierarchyPrepareRequest=v.MonikerRequest=v.MonikerKind=v.UniquenessLevel=v.WillDeleteFilesRequest=v.DidDeleteFilesNotification=v.WillRenameFilesRequest=v.DidRenameFilesNotification=v.WillCreateFilesRequest=v.DidCreateFilesNotification=v.FileOperationPatternKind=v.LinkedEditingRangeRequest=v.ShowDocumentRequest=v.SemanticTokensRegistrationType=v.SemanticTokensRefreshRequest=v.SemanticTokensRangeRequest=v.SemanticTokensDeltaRequest=v.SemanticTokensRequest=v.TokenFormat=v.CallHierarchyPrepareRequest=v.CallHierarchyOutgoingCallsRequest=v.CallHierarchyIncomingCallsRequest=v.WorkDoneProgressCancelNotification=v.WorkDoneProgressCreateRequest=v.WorkDoneProgress=v.SelectionRangeRequest=v.DeclarationRequest=v.FoldingRangeRequest=v.ColorPresentationRequest=v.DocumentColorRequest=v.ConfigurationRequest=v.DidChangeWorkspaceFoldersNotification=v.WorkspaceFoldersRequest=v.TypeDefinitionRequest=v.ImplementationRequest=v.ApplyWorkspaceEditRequest=v.ExecuteCommandRequest=v.PrepareRenameRequest=v.RenameRequest=v.PrepareSupportDefaultBehavior=v.DocumentOnTypeFormattingRequest=v.DocumentRangeFormattingRequest=v.DocumentFormattingRequest=v.DocumentLinkResolveRequest=v.DocumentLinkRequest=v.CodeLensRefreshRequest=v.CodeLensResolveRequest=v.CodeLensRequest=v.WorkspaceSymbolResolveRequest=void 0;v.DidCloseNotebookDocumentNotification=v.DidSaveNotebookDocumentNotification=v.DidChangeNotebookDocumentNotification=v.NotebookCellArrayChange=v.DidOpenNotebookDocumentNotification=v.NotebookDocumentSyncRegistrationType=v.NotebookDocument=v.NotebookCell=v.ExecutionSummary=v.NotebookCellKind=v.DiagnosticRefreshRequest=v.WorkspaceDiagnosticRequest=v.DocumentDiagnosticRequest=v.DocumentDiagnosticReportKind=v.DiagnosticServerCancellationData=v.InlayHintRefreshRequest=v.InlayHintResolveRequest=v.InlayHintRequest=v.InlineValueRefreshRequest=v.InlineValueRequest=v.TypeHierarchySupertypesRequest=void 0;var A=Qe(),yv=(Ka(),jr(Ga)),qt=Va(),$D=Um();Object.defineProperty(v,"ImplementationRequest",{enumerable:!0,get:function(){return $D.ImplementationRequest}});var UD=Wm();Object.defineProperty(v,"TypeDefinitionRequest",{enumerable:!0,get:function(){return UD.TypeDefinitionRequest}});var _v=Bm();Object.defineProperty(v,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return _v.WorkspaceFoldersRequest}});Object.defineProperty(v,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return _v.DidChangeWorkspaceFoldersNotification}});var HD=Gm();Object.defineProperty(v,"ConfigurationRequest",{enumerable:!0,get:function(){return HD.ConfigurationRequest}});var wv=Km();Object.defineProperty(v,"DocumentColorRequest",{enumerable:!0,get:function(){return wv.DocumentColorRequest}});Object.defineProperty(v,"ColorPresentationRequest",{enumerable:!0,get:function(){return wv.ColorPresentationRequest}});var WD=Xm();Object.defineProperty(v,"FoldingRangeRequest",{enumerable:!0,get:function(){return WD.FoldingRangeRequest}});var BD=Ym();Object.defineProperty(v,"DeclarationRequest",{enumerable:!0,get:function(){return BD.DeclarationRequest}});var zD=Zm();Object.defineProperty(v,"SelectionRangeRequest",{enumerable:!0,get:function(){return zD.SelectionRangeRequest}});var Gd=ev();Object.defineProperty(v,"WorkDoneProgress",{enumerable:!0,get:function(){return Gd.WorkDoneProgress}});Object.defineProperty(v,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Gd.WorkDoneProgressCreateRequest}});Object.defineProperty(v,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Gd.WorkDoneProgressCancelNotification}});var Kd=tv();Object.defineProperty(v,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Kd.CallHierarchyIncomingCallsRequest}});Object.defineProperty(v,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Kd.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(v,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Kd.CallHierarchyPrepareRequest}});var ls=nv();Object.defineProperty(v,"TokenFormat",{enumerable:!0,get:function(){return ls.TokenFormat}});Object.defineProperty(v,"SemanticTokensRequest",{enumerable:!0,get:function(){return ls.SemanticTokensRequest}});Object.defineProperty(v,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return ls.SemanticTokensDeltaRequest}});Object.defineProperty(v,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return ls.SemanticTokensRangeRequest}});Object.defineProperty(v,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return ls.SemanticTokensRefreshRequest}});Object.defineProperty(v,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return ls.SemanticTokensRegistrationType}});var GD=iv();Object.defineProperty(v,"ShowDocumentRequest",{enumerable:!0,get:function(){return GD.ShowDocumentRequest}});var KD=ov();Object.defineProperty(v,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return KD.LinkedEditingRangeRequest}});var yi=av();Object.defineProperty(v,"FileOperationPatternKind",{enumerable:!0,get:function(){return yi.FileOperationPatternKind}});Object.defineProperty(v,"DidCreateFilesNotification",{enumerable:!0,get:function(){return yi.DidCreateFilesNotification}});Object.defineProperty(v,"WillCreateFilesRequest",{enumerable:!0,get:function(){return yi.WillCreateFilesRequest}});Object.defineProperty(v,"DidRenameFilesNotification",{enumerable:!0,get:function(){return yi.DidRenameFilesNotification}});Object.defineProperty(v,"WillRenameFilesRequest",{enumerable:!0,get:function(){return yi.WillRenameFilesRequest}});Object.defineProperty(v,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return yi.DidDeleteFilesNotification}});Object.defineProperty(v,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return yi.WillDeleteFilesRequest}});var Vd=uv();Object.defineProperty(v,"UniquenessLevel",{enumerable:!0,get:function(){return Vd.UniquenessLevel}});Object.defineProperty(v,"MonikerKind",{enumerable:!0,get:function(){return Vd.MonikerKind}});Object.defineProperty(v,"MonikerRequest",{enumerable:!0,get:function(){return Vd.MonikerRequest}});var Xd=lv();Object.defineProperty(v,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Xd.TypeHierarchyPrepareRequest}});Object.defineProperty(v,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Xd.TypeHierarchySubtypesRequest}});Object.defineProperty(v,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Xd.TypeHierarchySupertypesRequest}});var Cv=dv();Object.defineProperty(v,"InlineValueRequest",{enumerable:!0,get:function(){return Cv.InlineValueRequest}});Object.defineProperty(v,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Cv.InlineValueRefreshRequest}});var Jd=fv();Object.defineProperty(v,"InlayHintRequest",{enumerable:!0,get:function(){return Jd.InlayHintRequest}});Object.defineProperty(v,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Jd.InlayHintResolveRequest}});Object.defineProperty(v,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Jd.InlayHintRefreshRequest}});var Ro=pv();Object.defineProperty(v,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Ro.DiagnosticServerCancellationData}});Object.defineProperty(v,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Ro.DocumentDiagnosticReportKind}});Object.defineProperty(v,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Ro.DocumentDiagnosticRequest}});Object.defineProperty(v,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Ro.WorkspaceDiagnosticRequest}});Object.defineProperty(v,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Ro.DiagnosticRefreshRequest}});var ar=vv();Object.defineProperty(v,"NotebookCellKind",{enumerable:!0,get:function(){return ar.NotebookCellKind}});Object.defineProperty(v,"ExecutionSummary",{enumerable:!0,get:function(){return ar.ExecutionSummary}});Object.defineProperty(v,"NotebookCell",{enumerable:!0,get:function(){return ar.NotebookCell}});Object.defineProperty(v,"NotebookDocument",{enumerable:!0,get:function(){return ar.NotebookDocument}});Object.defineProperty(v,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return ar.NotebookDocumentSyncRegistrationType}});Object.defineProperty(v,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return ar.DidOpenNotebookDocumentNotification}});Object.defineProperty(v,"NotebookCellArrayChange",{enumerable:!0,get:function(){return ar.NotebookCellArrayChange}});Object.defineProperty(v,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return ar.DidChangeNotebookDocumentNotification}});Object.defineProperty(v,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return ar.DidSaveNotebookDocumentNotification}});Object.defineProperty(v,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return ar.DidCloseNotebookDocumentNotification}});var bv;(function(t){function e(n){let r=n;return qt.string(r.language)||qt.string(r.scheme)||qt.string(r.pattern)}t.is=e})(bv=v.TextDocumentFilter||(v.TextDocumentFilter={}));var Sv;(function(t){function e(n){let r=n;return qt.objectLiteral(r)&&(qt.string(r.notebookType)||qt.string(r.scheme)||qt.string(r.pattern))}t.is=e})(Sv=v.NotebookDocumentFilter||(v.NotebookDocumentFilter={}));var Rv;(function(t){function e(n){let r=n;return qt.objectLiteral(r)&&(qt.string(r.notebook)||Sv.is(r.notebook))&&(r.language===void 0||qt.string(r.language))}t.is=e})(Rv=v.NotebookCellTextDocumentFilter||(v.NotebookCellTextDocumentFilter={}));var Dv;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!qt.string(r)&&!bv.is(r)&&!Rv.is(r))return!1;return!0}t.is=e})(Dv=v.DocumentSelector||(v.DocumentSelector={}));var VD;(function(t){t.method="client/registerCapability",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolRequestType(t.method)})(VD=v.RegistrationRequest||(v.RegistrationRequest={}));var XD;(function(t){t.method="client/unregisterCapability",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolRequestType(t.method)})(XD=v.UnregistrationRequest||(v.UnregistrationRequest={}));var JD;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(JD=v.ResourceOperationKind||(v.ResourceOperationKind={}));var YD;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(YD=v.FailureHandlingKind||(v.FailureHandlingKind={}));var QD;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(QD=v.PositionEncodingKind||(v.PositionEncodingKind={}));var ZD;(function(t){function e(n){let r=n;return r&&qt.string(r.id)&&r.id.length>0}t.hasId=e})(ZD=v.StaticRegistrationOptions||(v.StaticRegistrationOptions={}));var eT;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Dv.is(r.documentSelector))}t.is=e})(eT=v.TextDocumentRegistrationOptions||(v.TextDocumentRegistrationOptions={}));var tT;(function(t){function e(r){let i=r;return qt.objectLiteral(i)&&(i.workDoneProgress===void 0||qt.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&qt.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(tT=v.WorkDoneProgressOptions||(v.WorkDoneProgressOptions={}));var nT;(function(t){t.method="initialize",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(nT=v.InitializeRequest||(v.InitializeRequest={}));var rT;(function(t){t.unknownProtocolVersion=1})(rT=v.InitializeErrorCodes||(v.InitializeErrorCodes={}));var iT;(function(t){t.method="initialized",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(iT=v.InitializedNotification||(v.InitializedNotification={}));var sT;(function(t){t.method="shutdown",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType0(t.method)})(sT=v.ShutdownRequest||(v.ShutdownRequest={}));var oT;(function(t){t.method="exit",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType0(t.method)})(oT=v.ExitNotification||(v.ExitNotification={}));var aT;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(aT=v.DidChangeConfigurationNotification||(v.DidChangeConfigurationNotification={}));var cT;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(cT=v.MessageType||(v.MessageType={}));var uT;(function(t){t.method="window/showMessage",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolNotificationType(t.method)})(uT=v.ShowMessageNotification||(v.ShowMessageNotification={}));var lT;(function(t){t.method="window/showMessageRequest",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolRequestType(t.method)})(lT=v.ShowMessageRequest||(v.ShowMessageRequest={}));var dT;(function(t){t.method="window/logMessage",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolNotificationType(t.method)})(dT=v.LogMessageNotification||(v.LogMessageNotification={}));var fT;(function(t){t.method="telemetry/event",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolNotificationType(t.method)})(fT=v.TelemetryEventNotification||(v.TelemetryEventNotification={}));var hT;(function(t){t.None=0,t.Full=1,t.Incremental=2})(hT=v.TextDocumentSyncKind||(v.TextDocumentSyncKind={}));var pT;(function(t){t.method="textDocument/didOpen",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(pT=v.DidOpenTextDocumentNotification||(v.DidOpenTextDocumentNotification={}));var gT;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(gT=v.TextDocumentContentChangeEvent||(v.TextDocumentContentChangeEvent={}));var mT;(function(t){t.method="textDocument/didChange",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(mT=v.DidChangeTextDocumentNotification||(v.DidChangeTextDocumentNotification={}));var vT;(function(t){t.method="textDocument/didClose",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(vT=v.DidCloseTextDocumentNotification||(v.DidCloseTextDocumentNotification={}));var yT;(function(t){t.method="textDocument/didSave",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(yT=v.DidSaveTextDocumentNotification||(v.DidSaveTextDocumentNotification={}));var _T;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(_T=v.TextDocumentSaveReason||(v.TextDocumentSaveReason={}));var wT;(function(t){t.method="textDocument/willSave",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(wT=v.WillSaveTextDocumentNotification||(v.WillSaveTextDocumentNotification={}));var CT;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(CT=v.WillSaveTextDocumentWaitUntilRequest||(v.WillSaveTextDocumentWaitUntilRequest={}));var bT;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolNotificationType(t.method)})(bT=v.DidChangeWatchedFilesNotification||(v.DidChangeWatchedFilesNotification={}));var ST;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(ST=v.FileChangeType||(v.FileChangeType={}));var RT;(function(t){function e(n){let r=n;return qt.objectLiteral(r)&&(yv.URI.is(r.baseUri)||yv.WorkspaceFolder.is(r.baseUri))&&qt.string(r.pattern)}t.is=e})(RT=v.RelativePattern||(v.RelativePattern={}));var DT;(function(t){t.Create=1,t.Change=2,t.Delete=4})(DT=v.WatchKind||(v.WatchKind={}));var TT;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolNotificationType(t.method)})(TT=v.PublishDiagnosticsNotification||(v.PublishDiagnosticsNotification={}));var ET;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(ET=v.CompletionTriggerKind||(v.CompletionTriggerKind={}));var xT;(function(t){t.method="textDocument/completion",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(xT=v.CompletionRequest||(v.CompletionRequest={}));var PT;(function(t){t.method="completionItem/resolve",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(PT=v.CompletionResolveRequest||(v.CompletionResolveRequest={}));var qT;(function(t){t.method="textDocument/hover",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(qT=v.HoverRequest||(v.HoverRequest={}));var OT;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(OT=v.SignatureHelpTriggerKind||(v.SignatureHelpTriggerKind={}));var kT;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(kT=v.SignatureHelpRequest||(v.SignatureHelpRequest={}));var NT;(function(t){t.method="textDocument/definition",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(NT=v.DefinitionRequest||(v.DefinitionRequest={}));var IT;(function(t){t.method="textDocument/references",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(IT=v.ReferencesRequest||(v.ReferencesRequest={}));var FT;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(FT=v.DocumentHighlightRequest||(v.DocumentHighlightRequest={}));var LT;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(LT=v.DocumentSymbolRequest||(v.DocumentSymbolRequest={}));var MT;(function(t){t.method="textDocument/codeAction",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(MT=v.CodeActionRequest||(v.CodeActionRequest={}));var AT;(function(t){t.method="codeAction/resolve",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(AT=v.CodeActionResolveRequest||(v.CodeActionResolveRequest={}));var jT;(function(t){t.method="workspace/symbol",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(jT=v.WorkspaceSymbolRequest||(v.WorkspaceSymbolRequest={}));var $T;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})($T=v.WorkspaceSymbolResolveRequest||(v.WorkspaceSymbolResolveRequest={}));var UT;(function(t){t.method="textDocument/codeLens",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(UT=v.CodeLensRequest||(v.CodeLensRequest={}));var HT;(function(t){t.method="codeLens/resolve",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(HT=v.CodeLensResolveRequest||(v.CodeLensResolveRequest={}));var WT;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolRequestType0(t.method)})(WT=v.CodeLensRefreshRequest||(v.CodeLensRefreshRequest={}));var BT;(function(t){t.method="textDocument/documentLink",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(BT=v.DocumentLinkRequest||(v.DocumentLinkRequest={}));var zT;(function(t){t.method="documentLink/resolve",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(zT=v.DocumentLinkResolveRequest||(v.DocumentLinkResolveRequest={}));var GT;(function(t){t.method="textDocument/formatting",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(GT=v.DocumentFormattingRequest||(v.DocumentFormattingRequest={}));var KT;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(KT=v.DocumentRangeFormattingRequest||(v.DocumentRangeFormattingRequest={}));var VT;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(VT=v.DocumentOnTypeFormattingRequest||(v.DocumentOnTypeFormattingRequest={}));var XT;(function(t){t.Identifier=1})(XT=v.PrepareSupportDefaultBehavior||(v.PrepareSupportDefaultBehavior={}));var JT;(function(t){t.method="textDocument/rename",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(JT=v.RenameRequest||(v.RenameRequest={}));var YT;(function(t){t.method="textDocument/prepareRename",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(YT=v.PrepareRenameRequest||(v.PrepareRenameRequest={}));var QT;(function(t){t.method="workspace/executeCommand",t.messageDirection=A.MessageDirection.clientToServer,t.type=new A.ProtocolRequestType(t.method)})(QT=v.ExecuteCommandRequest||(v.ExecuteCommandRequest={}));var ZT;(function(t){t.method="workspace/applyEdit",t.messageDirection=A.MessageDirection.serverToClient,t.type=new A.ProtocolRequestType("workspace/applyEdit")})(ZT=v.ApplyWorkspaceEditRequest||(v.ApplyWorkspaceEditRequest={}))});var xv=w(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.createProtocolConnection=void 0;var Ev=gi();function eE(t,e,n,r){return Ev.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ev.createMessageConnection)(t,e,n,r)}ec.createProtocolConnection=eE});var Pv=w(Bt=>{"use strict";var tE=Bt&&Bt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),tc=Bt&&Bt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&tE(e,t,n)};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.LSPErrorCodes=Bt.createProtocolConnection=void 0;tc(gi(),Bt);tc((Ka(),jr(Ga)),Bt);tc(Qe(),Bt);tc(Tv(),Bt);var nE=xv();Object.defineProperty(Bt,"createProtocolConnection",{enumerable:!0,get:function(){return nE.createProtocolConnection}});var rE;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(rE=Bt.LSPErrorCodes||(Bt.LSPErrorCodes={}))});var le=w(cr=>{"use strict";var iE=cr&&cr.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),qv=cr&&cr.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&iE(e,t,n)};Object.defineProperty(cr,"__esModule",{value:!0});cr.createProtocolConnection=void 0;var sE=zl();qv(zl(),cr);qv(Pv(),cr);function oE(t,e,n,r){return(0,sE.createMessageConnection)(t,e,n,r)}cr.createProtocolConnection=oE});var Ov=w(dt=>{Object.defineProperty(dt,"__esModule",{value:!0});dt.ParseSFCRequest=dt.GetConvertAttrCasingEditsRequest=dt.GetConvertTagCasingEditsRequest=dt.DetectNameCasingRequest=dt.GetComponentMeta=dt.GetVueCompilerOptionsRequest=void 0;var ds=le(),aE;(function(t){t.type=new ds.RequestType("volar/vueCompilerOptions")})(aE=dt.GetVueCompilerOptionsRequest||(dt.GetVueCompilerOptionsRequest={}));var cE;(function(t){t.type=new ds.RequestType("volar/meta")})(cE=dt.GetComponentMeta||(dt.GetComponentMeta={}));var uE;(function(t){t.type=new ds.RequestType("volar/detectTagCasing")})(uE=dt.DetectNameCasingRequest||(dt.DetectNameCasingRequest={}));var lE;(function(t){t.type=new ds.RequestType("volar/convertTagNameCasing")})(lE=dt.GetConvertTagCasingEditsRequest||(dt.GetConvertTagCasingEditsRequest={}));var dE;(function(t){t.type=new ds.RequestType("volar/convertAttrNameCasing")})(dE=dt.GetConvertAttrCasingEditsRequest||(dt.GetConvertAttrCasingEditsRequest={}));var fE;(function(t){t.type=new ds.RequestType("volar/parseSfc")})(fE=dt.ParseSFCRequest||(dt.ParseSFCRequest={}))});var Nv=w(kv=>{Object.defineProperty(kv,"__esModule",{value:!0})});var Iv=w(pe=>{Object.defineProperty(pe,"__esModule",{value:!0});pe.FsReadDirectoryRequest=pe.FsReadFileRequest=pe.FsStatRequest=pe.ReportStats=pe.GetVirtualFileRequest=pe.GetVirtualFileNamesRequest=pe.ReloadProjectNotification=pe.WriteVirtualFilesNotification=pe.VerifyAllScriptsNotification=pe.AutoInsertRequest=pe.GetMatchTsConfigRequest=pe.FindFileReferenceRequest=pe.ShowReferencesNotification=void 0;var dn=le(),hE;(function(t){t.type=new dn.NotificationType("vue.findReferences")})(hE=pe.ShowReferencesNotification||(pe.ShowReferencesNotification={}));var pE;(function(t){t.type=new dn.RequestType("vue/findFileReference")})(pE=pe.FindFileReferenceRequest||(pe.FindFileReferenceRequest={}));var gE;(function(t){t.type=new dn.RequestType("volar/tsconfig")})(gE=pe.GetMatchTsConfigRequest||(pe.GetMatchTsConfigRequest={}));var mE;(function(t){t.type=new dn.RequestType("vue/autoInsert")})(mE=pe.AutoInsertRequest||(pe.AutoInsertRequest={}));var vE;(function(t){t.type=new dn.NotificationType("volar.action.verifyAllScripts")})(vE=pe.VerifyAllScriptsNotification||(pe.VerifyAllScriptsNotification={}));var yE;(function(t){t.type=new dn.NotificationType("volar.action.writeVirtualFiles")})(yE=pe.WriteVirtualFilesNotification||(pe.WriteVirtualFilesNotification={}));var _E;(function(t){t.type=new dn.NotificationType("volar.action.reloadProject")})(_E=pe.ReloadProjectNotification||(pe.ReloadProjectNotification={}));var wE;(function(t){t.type=new dn.RequestType("vue/virtualFileNames")})(wE=pe.GetVirtualFileNamesRequest||(pe.GetVirtualFileNamesRequest={}));var CE;(function(t){t.type=new dn.RequestType("vue/virtualFile")})(CE=pe.GetVirtualFileRequest||(pe.GetVirtualFileRequest={}));var bE;(function(t){t.type=new dn.NotificationType0("vue/stats")})(bE=pe.ReportStats||(pe.ReportStats={}));var SE;(function(t){t.type=new dn.RequestType("fs/stat")})(SE=pe.FsStatRequest||(pe.FsStatRequest={}));var RE;(function(t){t.type=new dn.RequestType("fs/readFile")})(RE=pe.FsReadFileRequest||(pe.FsReadFileRequest={}));var DE;(function(t){t.type=new dn.RequestType("fs/readDirectory")})(DE=pe.FsReadDirectoryRequest||(pe.FsReadDirectoryRequest={}))});var Fv=w(Br=>{Object.defineProperty(Br,"__esModule",{value:!0});Br.DiagnosticModel=Br.ServerMode=void 0;var TE;(function(t){t[t.Semantic=0]="Semantic",t[t.Syntactic=2]="Syntactic"})(TE=Br.ServerMode||(Br.ServerMode={}));var EE;(function(t){t[t.None=0]="None",t[t.Push=1]="Push",t[t.Pull=2]="Pull"})(EE=Br.DiagnosticModel||(Br.DiagnosticModel={}))});var Mv=w(Lv=>{Object.defineProperty(Lv,"__esModule",{value:!0})});var Av=w(fn=>{var xE=fn&&fn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),PE=fn&&fn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&xE(e,t,n)};Object.defineProperty(fn,"__esModule",{value:!0});fn.AttrNameCasing=fn.TagNameCasing=void 0;var qE;(function(t){t[t.Kebab=0]="Kebab",t[t.Pascal=1]="Pascal"})(qE=fn.TagNameCasing||(fn.TagNameCasing={}));var OE;(function(t){t[t.Kebab=0]="Kebab",t[t.Camel=1]="Camel"})(OE=fn.AttrNameCasing||(fn.AttrNameCasing={}));PE(Mv(),fn)});var Ct=w(Vn=>{var kE=Vn&&Vn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Do=Vn&&Vn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&kE(e,t,n)};Object.defineProperty(Vn,"__esModule",{value:!0});Do(Ov(),Vn);Do(Nv(),Vn);Do(Iv(),Vn);Do(Fv(),Vn);Do(Av(),Vn)});var Rn=w(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.asPromise=ot.thenable=ot.typedArray=ot.stringArray=ot.array=ot.func=ot.error=ot.number=ot.string=ot.boolean=void 0;function NE(t){return t===!0||t===!1}ot.boolean=NE;function jv(t){return typeof t=="string"||t instanceof String}ot.string=jv;function IE(t){return typeof t=="number"||t instanceof Number}ot.number=IE;function FE(t){return t instanceof Error}ot.error=FE;function $v(t){return typeof t=="function"}ot.func=$v;function Uv(t){return Array.isArray(t)}ot.array=Uv;function LE(t){return Uv(t)&&t.every(e=>jv(e))}ot.stringArray=LE;function ME(t,e){return Array.isArray(t)&&t.every(e)}ot.typedArray=ME;function Hv(t){return t&&$v(t.then)}ot.thenable=Hv;function AE(t){return t instanceof Promise?t:Hv(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}ot.asPromise=AE});var xo=w(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.forEach=Mt.mapAsync=Mt.map=Mt.clearTestMode=Mt.setTestMode=Mt.Semaphore=Mt.Delayer=void 0;var Eo=le(),Yd=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,Eo.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Mt.Delayer=Yd;var Qd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Eo.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};Mt.Semaphore=Qd;var Zd=!1;function jE(){Zd=!0}Mt.setTestMode=jE;function $E(){Zd=!1}Mt.clearTestMode=$E;var Wv=15,To=class{constructor(e=Wv){this.yieldAfter=Zd===!0?Math.max(e,2):Math.max(e,Wv),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function UE(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new To(r?.yieldAfter);function o(c){s.start();for(let u=c;u<t.length;u++)if(i[u]=e(t[u]),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,Eo.RAL)().timer.setImmediate(()=>{c(o(a))})});return i}Mt.map=UE;async function HE(t,e,n,r){if(t.length===0)return[];let i=new Array(t.length),s=new To(r?.yieldAfter);async function o(c){s.start();for(let u=c;u<t.length;u++)if(i[u]=await e(t[u],n),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=await o(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,Eo.RAL)().timer.setImmediate(()=>{c(o(a))})});return i}Mt.mapAsync=HE;async function WE(t,e,n,r){if(t.length===0)return;let i=new To(r?.yieldAfter);function s(a){i.start();for(let c=a;c<t.length;c++)if(e(t[c]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),c+1;return-1}let o=s(0);for(;o!==-1&&!(n!==void 0&&n.isCancellationRequested);)o=await new Promise(a=>{(0,Eo.RAL)().timer.setImmediate(()=>{a(s(o))})})}Mt.forEach=WE});var nf=w(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});var BE=require("vscode"),ef=class extends BE.CompletionItem{constructor(e){super(e)}};tf.default=ef});var of=w(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var zE=require("vscode"),rf=class extends zE.CodeLens{constructor(e){super(e)}};sf.default=rf});var uf=w(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var GE=require("vscode"),af=class extends GE.DocumentLink{constructor(e,n){super(e,n)}};cf.default=af});var ff=w(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var KE=require("vscode"),lf=class extends KE.CodeAction{constructor(e,n){super(e),this.data=n}};df.default=lf});var gf=w(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.ProtocolDiagnostic=_i.DiagnosticCode=void 0;var VE=require("vscode"),hf=Rn(),XE;(function(t){function e(n){let r=n;return r!=null&&(hf.number(r.value)||hf.string(r.value))&&hf.string(r.target)}t.is=e})(XE=_i.DiagnosticCode||(_i.DiagnosticCode={}));var pf=class extends VE.Diagnostic{constructor(e,n,r,i){super(e,n,r),this.data=i,this.hasDiagnosticCode=!1}};_i.ProtocolDiagnostic=pf});var yf=w(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});var JE=require("vscode"),mf=class extends JE.CallHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};vf.default=mf});var Cf=w(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var YE=require("vscode"),_f=class extends YE.TypeHierarchyItem{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,o),a!==void 0&&(this.data=a)}};wf.default=_f});var Rf=w(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var nc=require("vscode"),bf=class extends nc.SymbolInformation{constructor(e,n,r,i,s){let o=!(i instanceof nc.Uri);super(e,n,r,o?i:new nc.Location(i,new nc.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};Sf.default=bf});var Ef=w(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});var QE=require("vscode"),Df=class extends QE.InlayHint{constructor(e,n,r){super(e,n,r)}};Tf.default=Df});var Gv=w(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.createConverter=void 0;var ft=require("vscode"),ge=le(),fs=Rn(),Bv=xo(),ZE=nf(),ex=of(),tx=uf(),nx=ff(),zv=gf(),rx=yf(),ix=Cf(),sx=Rf(),ox=Ef(),xf;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(xf||(xf={}));function ax(t){let n=t||(g=>g.toString());function r(g){return n(g)}function i(g){return{uri:n(g.uri)}}function s(g){return{uri:n(g.uri),languageId:g.languageId,version:g.version,text:g.getText()}}function o(g){return{uri:n(g.uri),version:g.version}}function a(g){return{textDocument:s(g)}}function c(g){let E=g;return!!E.document&&!!E.contentChanges}function u(g){let E=g;return!!E.uri&&!!E.version}function l(g){if(u(g))return{textDocument:{uri:n(g.uri),version:g.version},contentChanges:[{text:g.getText()}]};if(c(g)){let E=g.document;return{textDocument:{uri:n(E.uri),version:E.version},contentChanges:g.contentChanges.map(_e=>{let Oe=_e.range;return{range:{start:{line:Oe.start.line,character:Oe.start.character},end:{line:Oe.end.line,character:Oe.end.character}},rangeLength:_e.rangeLength,text:_e.text}})}}else throw Error("Unsupported text document change parameter")}function d(g){return{textDocument:i(g)}}function h(g,E=!1){let z={textDocument:i(g)};return E&&(z.text=g.getText()),z}function p(g){switch(g){case ft.TextDocumentSaveReason.Manual:return ge.TextDocumentSaveReason.Manual;case ft.TextDocumentSaveReason.AfterDelay:return ge.TextDocumentSaveReason.AfterDelay;case ft.TextDocumentSaveReason.FocusOut:return ge.TextDocumentSaveReason.FocusOut}return ge.TextDocumentSaveReason.Manual}function m(g){return{textDocument:i(g.document),reason:p(g.reason)}}function y(g){return{files:g.files.map(E=>({uri:n(E)}))}}function _(g){return{files:g.files.map(E=>({oldUri:n(E.oldUri),newUri:n(E.newUri)}))}}function S(g){return{files:g.files.map(E=>({uri:n(E)}))}}function T(g){return{files:g.files.map(E=>({uri:n(E)}))}}function x(g){return{files:g.files.map(E=>({oldUri:n(E.oldUri),newUri:n(E.newUri)}))}}function k(g){return{files:g.files.map(E=>({uri:n(E)}))}}function W(g,E){return{textDocument:i(g),position:N(E)}}function Q(g){switch(g){case ft.CompletionTriggerKind.TriggerCharacter:return ge.CompletionTriggerKind.TriggerCharacter;case ft.CompletionTriggerKind.TriggerForIncompleteCompletions:return ge.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ge.CompletionTriggerKind.Invoked}}function oe(g,E,z){return{textDocument:i(g),position:N(E),context:{triggerKind:Q(z.triggerKind),triggerCharacter:z.triggerCharacter}}}function L(g){switch(g){case ft.SignatureHelpTriggerKind.Invoke:return ge.SignatureHelpTriggerKind.Invoked;case ft.SignatureHelpTriggerKind.TriggerCharacter:return ge.SignatureHelpTriggerKind.TriggerCharacter;case ft.SignatureHelpTriggerKind.ContentChange:return ge.SignatureHelpTriggerKind.ContentChange}}function M(g){return{label:g.label}}function G(g){return g.map(M)}function de(g){return{label:g.label,parameters:G(g.parameters)}}function Z(g){return g.map(de)}function ie(g){return g===void 0?g:{signatures:Z(g.signatures),activeSignature:g.activeSignature,activeParameter:g.activeParameter}}function Te(g,E,z){return{textDocument:i(g),position:N(E),context:{isRetrigger:z.isRetrigger,triggerCharacter:z.triggerCharacter,triggerKind:L(z.triggerKind),activeSignatureHelp:ie(z.activeSignatureHelp)}}}function N(g){return{line:g.line,character:g.character}}function D(g){return g==null?g:{line:g.line>ge.uinteger.MAX_VALUE?ge.uinteger.MAX_VALUE:g.line,character:g.character>ge.uinteger.MAX_VALUE?ge.uinteger.MAX_VALUE:g.character}}function I(g,E){return Bv.map(g,D,E)}function O(g){return g==null?g:{start:D(g.start),end:D(g.end)}}function ee(g){return g==null?g:ge.Location.create(r(g.uri),O(g.range))}function te(g){switch(g){case ft.DiagnosticSeverity.Error:return ge.DiagnosticSeverity.Error;case ft.DiagnosticSeverity.Warning:return ge.DiagnosticSeverity.Warning;case ft.DiagnosticSeverity.Information:return ge.DiagnosticSeverity.Information;case ft.DiagnosticSeverity.Hint:return ge.DiagnosticSeverity.Hint}}function B(g){if(!g)return;let E=[];for(let z of g){let _e=se(z);_e!==void 0&&E.push(_e)}return E.length>0?E:void 0}function se(g){switch(g){case ft.DiagnosticTag.Unnecessary:return ge.DiagnosticTag.Unnecessary;case ft.DiagnosticTag.Deprecated:return ge.DiagnosticTag.Deprecated;default:return}}function Ge(g){return{message:g.message,location:ee(g.location)}}function It(g){return g.map(Ge)}function Fn(g){if(g!=null)return fs.number(g)||fs.string(g)?g:{value:g.value,target:r(g.target)}}function Zt(g){let E=ge.Diagnostic.create(O(g.range),g.message),z=g instanceof zv.ProtocolDiagnostic?g:void 0;z!==void 0&&z.data!==void 0&&(E.data=z.data);let _e=Fn(g.code);return zv.DiagnosticCode.is(_e)?z!==void 0&&z.hasDiagnosticCode?E.code=_e:(E.code=_e.value,E.codeDescription={href:_e.target}):E.code=_e,fs.number(g.severity)&&(E.severity=te(g.severity)),Array.isArray(g.tags)&&(E.tags=B(g.tags)),g.relatedInformation&&(E.relatedInformation=It(g.relatedInformation)),g.source&&(E.source=g.source),E}function si(g,E){return g==null?g:Bv.map(g,Zt,E)}function Ys(g,E){switch(g){case"$string":return E;case ge.MarkupKind.PlainText:return{kind:g,value:E};case ge.MarkupKind.Markdown:return{kind:g,value:E.value};default:return`Unsupported Markup content received. Kind is: ${g}`}}function zi(g){switch(g){case ft.CompletionItemTag.Deprecated:return ge.CompletionItemTag.Deprecated}}function Gi(g){if(g===void 0)return g;let E=[];for(let z of g){let _e=zi(z);_e!==void 0&&E.push(_e)}return E}function wn(g,E){return E!==void 0?E:g+1}function tr(g,E=!1){let z,_e;fs.string(g.label)?z=g.label:(z=g.label.label,E&&(g.label.detail!==void 0||g.label.description!==void 0)&&(_e={detail:g.label.detail,description:g.label.description}));let Oe={label:z};_e!==void 0&&(Oe.labelDetails=_e);let Tt=g instanceof ZE.default?g:void 0;g.detail&&(Oe.detail=g.detail),g.documentation&&(!Tt||Tt.documentationFormat==="$string"?Oe.documentation=g.documentation:Oe.documentation=Ys(Tt.documentationFormat,g.documentation)),g.filterText&&(Oe.filterText=g.filterText),Ki(Oe,g),fs.number(g.kind)&&(Oe.kind=wn(g.kind,Tt&&Tt.originalItemKind)),g.sortText&&(Oe.sortText=g.sortText),g.additionalTextEdits&&(Oe.additionalTextEdits=Ar(g.additionalTextEdits)),g.commitCharacters&&(Oe.commitCharacters=g.commitCharacters.slice()),g.command&&(Oe.command=jn(g.command)),(g.preselect===!0||g.preselect===!1)&&(Oe.preselect=g.preselect);let gr=Gi(g.tags);if(Tt){if(Tt.data!==void 0&&(Oe.data=Tt.data),Tt.deprecated===!0||Tt.deprecated===!1){if(Tt.deprecated===!0&&gr!==void 0&&gr.length>0){let Zs=gr.indexOf(ft.CompletionItemTag.Deprecated);Zs!==-1&&gr.splice(Zs,1)}Oe.deprecated=Tt.deprecated}Tt.insertTextMode!==void 0&&(Oe.insertTextMode=Tt.insertTextMode)}return gr!==void 0&&gr.length>0&&(Oe.tags=gr),Oe.insertTextMode===void 0&&g.keepWhitespace===!0&&(Oe.insertTextMode=ge.InsertTextMode.adjustIndentation),Oe}function Ki(g,E){let z=ge.InsertTextFormat.PlainText,_e,Oe;E.textEdit?(_e=E.textEdit.newText,Oe=E.textEdit.range):E.insertText instanceof ft.SnippetString?(z=ge.InsertTextFormat.Snippet,_e=E.insertText.value):_e=E.insertText,E.range&&(Oe=E.range),g.insertTextFormat=z,E.fromEdit&&_e!==void 0&&Oe!==void 0?g.textEdit=Ln(_e,Oe):g.insertText=_e}function Ln(g,E){return xf.is(E)?ge.InsertReplaceEdit.create(g,O(E.inserting),O(E.replacing)):{newText:g,range:O(E)}}function oi(g){return{range:O(g.range),newText:g.newText}}function Ar(g){return g==null?g:g.map(oi)}function Mn(g){return g<=ft.SymbolKind.TypeParameter?g+1:ge.SymbolKind.Property}function Cn(g){return g}function _t(g){return g.map(Cn)}function Qs(g,E,z){return{textDocument:i(g),position:N(E),context:{includeDeclaration:z.includeDeclaration}}}async function ln(g,E){let z=ge.CodeAction.create(g.title);if(g instanceof nx.default&&g.data!==void 0&&(z.data=g.data),g.kind!==void 0&&(z.kind=ai(g.kind)),g.diagnostics!==void 0&&(z.diagnostics=await si(g.diagnostics,E)),g.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return g.command!==void 0&&(z.command=jn(g.command)),g.isPreferred!==void 0&&(z.isPreferred=g.isPreferred),g.disabled!==void 0&&(z.disabled={reason:g.disabled.reason}),z}async function An(g,E){if(g==null)return g;let z;return g.only&&fs.string(g.only.value)&&(z=[g.only.value]),ge.CodeActionContext.create(await si(g.diagnostics,E),z,Vi(g.triggerKind))}function Vi(g){switch(g){case ft.CodeActionTriggerKind.Invoke:return ge.CodeActionTriggerKind.Invoked;case ft.CodeActionTriggerKind.Automatic:return ge.CodeActionTriggerKind.Automatic;default:return}}function ai(g){if(g!=null)return g.value}function ci(g){return g==null?g:ge.InlineValueContext.create(g.frameId,O(g.stoppedLocation))}function jn(g){let E=ge.Command.create(g.title,g.command);return g.arguments&&(E.arguments=g.arguments),E}function nr(g){let E=ge.CodeLens.create(O(g.range));return g.command&&(E.command=jn(g.command)),g instanceof ex.default&&g.data&&(E.data=g.data),E}function C(g,E){let z={tabSize:g.tabSize,insertSpaces:g.insertSpaces};return E.trimTrailingWhitespace&&(z.trimTrailingWhitespace=!0),E.trimFinalNewlines&&(z.trimFinalNewlines=!0),E.insertFinalNewline&&(z.insertFinalNewline=!0),z}function q(g){return{textDocument:i(g)}}function j(g){return{textDocument:i(g)}}function K(g){let E=ge.DocumentLink.create(O(g.range));g.target&&(E.target=r(g.target)),g.tooltip!==void 0&&(E.tooltip=g.tooltip);let z=g instanceof tx.default?g:void 0;return z&&z.data&&(E.data=z.data),E}function Fe(g){return{textDocument:i(g)}}function Le(g){let E={name:g.name,kind:Mn(g.kind),uri:r(g.uri),range:O(g.range),selectionRange:O(g.selectionRange)};return g.detail!==void 0&&g.detail.length>0&&(E.detail=g.detail),g.tags!==void 0&&(E.tags=_t(g.tags)),g instanceof rx.default&&g.data!==void 0&&(E.data=g.data),E}function He(g){let E={name:g.name,kind:Mn(g.kind),uri:r(g.uri),range:O(g.range),selectionRange:O(g.selectionRange)};return g.detail!==void 0&&g.detail.length>0&&(E.detail=g.detail),g.tags!==void 0&&(E.tags=_t(g.tags)),g instanceof ix.default&&g.data!==void 0&&(E.data=g.data),E}function Ye(g){let E=g instanceof sx.default?{name:g.name,kind:Mn(g.kind),location:g.hasRange?ee(g.location):{uri:n(g.location.uri)},data:g.data}:{name:g.name,kind:Mn(g.kind),location:ee(g.location)};return g.tags!==void 0&&(E.tags=_t(g.tags)),g.containerName!==""&&(E.containerName=g.containerName),E}function be(g){let E=typeof g.label=="string"?g.label:g.label.map($e),z=ge.InlayHint.create(D(g.position),E);return g.kind!==void 0&&(z.kind=g.kind),g.textEdits!==void 0&&(z.textEdits=Ar(g.textEdits)),g.tooltip!==void 0&&(z.tooltip=Se(g.tooltip)),g.paddingLeft!==void 0&&(z.paddingLeft=g.paddingLeft),g.paddingRight!==void 0&&(z.paddingRight=g.paddingRight),g instanceof ox.default&&g.data!==void 0&&(z.data=g.data),z}function $e(g){let E=ge.InlayHintLabelPart.create(g.value);return g.location!==void 0&&(E.location=ee(g.location)),g.command!==void 0&&(E.command=jn(g.command)),g.tooltip!==void 0&&(E.tooltip=Se(g.tooltip)),E}function Se(g){return typeof g=="string"?g:{kind:ge.MarkupKind.Markdown,value:g.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:l,asCloseTextDocumentParams:d,asSaveTextDocumentParams:h,asWillSaveTextDocumentParams:m,asDidCreateFilesParams:y,asDidRenameFilesParams:_,asDidDeleteFilesParams:S,asWillCreateFilesParams:T,asWillRenameFilesParams:x,asWillDeleteFilesParams:k,asTextDocumentPositionParams:W,asCompletionParams:oe,asSignatureHelpParams:Te,asWorkerPosition:N,asRange:O,asPosition:D,asPositions:I,asLocation:ee,asDiagnosticSeverity:te,asDiagnosticTag:se,asDiagnostic:Zt,asDiagnostics:si,asCompletionItem:tr,asTextEdit:oi,asSymbolKind:Mn,asSymbolTag:Cn,asSymbolTags:_t,asReferenceParams:Qs,asCodeAction:ln,asCodeActionContext:An,asInlineValueContext:ci,asCommand:jn,asCodeLens:nr,asFormattingOptions:C,asDocumentSymbolParams:q,asCodeLensParams:j,asDocumentLink:K,asDocumentLinkParams:Fe,asCallHierarchyItem:Le,asTypeHierarchyItem:He,asInlayHint:be,asWorkspaceSymbol:Ye}}rc.createConverter=ax});var Xv=w(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.createConverter=void 0;var H=require("vscode"),ue=le(),Dn=Rn(),Ne=xo(),cx=nf(),ux=of(),lx=uf(),dx=ff(),Kv=gf(),fx=yf(),hx=Cf(),px=Rf(),gx=Ef(),Vv=le(),ic;(function(t){function e(n){let r=n;return r&&Dn.string(r.language)&&Dn.string(r.value)}t.is=e})(ic||(ic={}));function mx(t,e,n){let i=t||(f=>H.Uri.parse(f));function s(f){return i(f)}function o(f){let b=[];for(let F of f)if(typeof F=="string")b.push(F);else if(Vv.NotebookCellTextDocumentFilter.is(F))if(typeof F.notebook=="string")b.push({notebookType:F.notebook,language:F.language});else{let re=F.notebook.notebookType??"*";b.push({notebookType:re,scheme:F.notebook.scheme,pattern:F.notebook.pattern,language:F.language})}else Vv.TextDocumentFilter.is(F)&&b.push({language:F.language,scheme:F.scheme,pattern:F.pattern});return b}async function a(f,b){return Ne.map(f,u,b)}function c(f){let b=new Array(f.length);for(let F=0;F<f.length;F++)b[F]=u(f[F]);return b}function u(f){let b=new Kv.ProtocolDiagnostic(m(f.range),f.message,_(f.severity),f.data);if(f.code!==void 0){if(typeof f.code=="string"||typeof f.code=="number")ue.CodeDescription.is(f.codeDescription)?b.code={value:f.code,target:s(f.codeDescription.href)}:b.code=f.code;else if(Kv.DiagnosticCode.is(f.code)){b.hasDiagnosticCode=!0;let F=f.code;b.code={value:F.value,target:s(F.target)}}}return f.source&&(b.source=f.source),f.relatedInformation&&(b.relatedInformation=l(f.relatedInformation)),Array.isArray(f.tags)&&(b.tags=d(f.tags)),b}function l(f){let b=new Array(f.length);for(let F=0;F<f.length;F++){let re=f[F];b[F]=new H.DiagnosticRelatedInformation(se(re.location),re.message)}return b}function d(f){if(!f)return;let b=[];for(let F of f){let re=h(F);re!==void 0&&b.push(re)}return b.length>0?b:void 0}function h(f){switch(f){case ue.DiagnosticTag.Unnecessary:return H.DiagnosticTag.Unnecessary;case ue.DiagnosticTag.Deprecated:return H.DiagnosticTag.Deprecated;default:return}}function p(f){return f?new H.Position(f.line,f.character):void 0}function m(f){return f?new H.Range(f.start.line,f.start.character,f.end.line,f.end.character):void 0}async function y(f,b){return Ne.map(f,F=>new H.Range(F.start.line,F.start.character,F.end.line,F.end.character),b)}function _(f){if(f==null)return H.DiagnosticSeverity.Error;switch(f){case ue.DiagnosticSeverity.Error:return H.DiagnosticSeverity.Error;case ue.DiagnosticSeverity.Warning:return H.DiagnosticSeverity.Warning;case ue.DiagnosticSeverity.Information:return H.DiagnosticSeverity.Information;case ue.DiagnosticSeverity.Hint:return H.DiagnosticSeverity.Hint}return H.DiagnosticSeverity.Error}function S(f){if(Dn.string(f))return x(f);if(ic.is(f))return x().appendCodeblock(f.value,f.language);if(Array.isArray(f)){let b=[];for(let F of f){let re=x();ic.is(F)?re.appendCodeblock(F.value,F.language):re.appendMarkdown(F),b.push(re)}return b}else return x(f)}function T(f){if(Dn.string(f))return f;switch(f.kind){case ue.MarkupKind.Markdown:return x(f.value);case ue.MarkupKind.PlainText:return f.value;default:return`Unsupported Markup content received. Kind is: ${f.kind}`}}function x(f){let b;if(f===void 0||typeof f=="string")b=new H.MarkdownString(f);else switch(f.kind){case ue.MarkupKind.Markdown:b=new H.MarkdownString(f.value);break;case ue.MarkupKind.PlainText:b=new H.MarkdownString,b.appendText(f.value);break;default:b=new H.MarkdownString,b.appendText(`Unsupported Markup content received. Kind is: ${f.kind}`);break}return b.isTrusted=e,b.supportHtml=n,b}function k(f){if(!!f)return new H.Hover(S(f.contents),m(f.range))}async function W(f,b,F){if(!f)return;if(Array.isArray(f))return Ne.map(f,rr=>G(rr,b),F);let re=f,{defaultRange:en,commitCharacters:Et}=Q(re,b),Me=await Ne.map(re.items,rr=>G(rr,Et,en,re.itemDefaults?.insertTextMode,re.itemDefaults?.insertTextFormat,re.itemDefaults?.data),F);return new H.CompletionList(Me,re.isIncomplete)}function Q(f,b){let F=f.itemDefaults?.editRange,re=f.itemDefaults?.commitCharacters??b;return ue.Range.is(F)?{defaultRange:m(F),commitCharacters:re}:F!==void 0?{defaultRange:{inserting:m(F.insert),replacing:m(F.replace)},commitCharacters:re}:{defaultRange:void 0,commitCharacters:re}}function oe(f){return ue.CompletionItemKind.Text<=f&&f<=ue.CompletionItemKind.TypeParameter?[f-1,void 0]:[H.CompletionItemKind.Text,f]}function L(f){switch(f){case ue.CompletionItemTag.Deprecated:return H.CompletionItemTag.Deprecated}}function M(f){if(f==null)return[];let b=[];for(let F of f){let re=L(F);re!==void 0&&b.push(re)}return b}function G(f,b,F,re,en,Et){let Me=M(f.tags),rr=de(f),Ue=new cx.default(rr);f.detail&&(Ue.detail=f.detail),f.documentation&&(Ue.documentation=T(f.documentation),Ue.documentationFormat=Dn.string(f.documentation)?"$string":f.documentation.kind),f.filterText&&(Ue.filterText=f.filterText);let Ea=Z(f,F,en);if(Ea&&(Ue.insertText=Ea.text,Ue.range=Ea.range,Ue.fromEdit=Ea.fromEdit),Dn.number(f.kind)){let[A0,dm]=oe(f.kind);Ue.kind=A0,dm&&(Ue.originalItemKind=dm)}f.sortText&&(Ue.sortText=f.sortText),f.additionalTextEdits&&(Ue.additionalTextEdits=D(f.additionalTextEdits));let um=f.commitCharacters!==void 0?Dn.stringArray(f.commitCharacters)?f.commitCharacters:void 0:b;um&&(Ue.commitCharacters=um.slice()),f.command&&(Ue.command=_t(f.command)),(f.deprecated===!0||f.deprecated===!1)&&(Ue.deprecated=f.deprecated,f.deprecated===!0&&Me.push(H.CompletionItemTag.Deprecated)),(f.preselect===!0||f.preselect===!1)&&(Ue.preselect=f.preselect);let lm=f.data??Et;lm!==void 0&&(Ue.data=lm),Me.length>0&&(Ue.tags=Me);let Lu=f.insertTextMode??re;return Lu!==void 0&&(Ue.insertTextMode=Lu,Lu===ue.InsertTextMode.asIs&&(Ue.keepWhitespace=!0)),Ue}function de(f){return ue.CompletionItemLabelDetails.is(f.labelDetails)?{label:f.label,detail:f.labelDetails.detail,description:f.labelDetails.description}:f.label}function Z(f,b,F){let re=f.insertTextFormat??F;if(f.textEdit!==void 0||b!==void 0){let[en,Et]=f.textEdit!==void 0?ie(f.textEdit):[b,f.textEditText??f.label];return re===ue.InsertTextFormat.Snippet?{text:new H.SnippetString(Et),range:en,fromEdit:!0}:{text:Et,range:en,fromEdit:!0}}else return f.insertText?re===ue.InsertTextFormat.Snippet?{text:new H.SnippetString(f.insertText),fromEdit:!1}:{text:f.insertText,fromEdit:!1}:void 0}function ie(f){return ue.InsertReplaceEdit.is(f)?[{inserting:m(f.insert),replacing:m(f.replace)},f.newText]:[m(f.range),f.newText]}function Te(f){if(!!f)return new H.TextEdit(m(f.range),f.newText)}async function N(f,b){if(!!f)return Ne.map(f,Te,b)}function D(f){if(!f)return;let b=new Array(f.length);for(let F=0;F<f.length;F++)b[F]=Te(f[F]);return b}async function I(f,b){if(!f)return;let F=new H.SignatureHelp;return Dn.number(f.activeSignature)?F.activeSignature=f.activeSignature:F.activeSignature=0,Dn.number(f.activeParameter)?F.activeParameter=f.activeParameter:F.activeParameter=0,f.signatures&&(F.signatures=await O(f.signatures,b)),F}async function O(f,b){return Ne.mapAsync(f,ee,b)}async function ee(f,b){let F=new H.SignatureInformation(f.label);return f.documentation!==void 0&&(F.documentation=T(f.documentation)),f.parameters!==void 0&&(F.parameters=await te(f.parameters,b)),f.activeParameter!==void 0&&(F.activeParameter=f.activeParameter),F}function te(f,b){return Ne.map(f,B,b)}function B(f){let b=new H.ParameterInformation(f.label);return f.documentation&&(b.documentation=T(f.documentation)),b}function se(f){return f?new H.Location(i(f.uri),m(f.range)):void 0}async function Ge(f,b){if(!!f)return Zt(f,b)}async function It(f,b){if(!!f)return Zt(f,b)}function Fn(f){if(!f)return;let b={targetUri:i(f.targetUri),targetRange:m(f.targetRange),originSelectionRange:m(f.originSelectionRange),targetSelectionRange:m(f.targetSelectionRange)};if(!b.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return b}async function Zt(f,b){if(!!f)if(Dn.array(f)){if(f.length===0)return[];if(ue.LocationLink.is(f[0])){let F=f;return Ne.map(F,Fn,b)}else{let F=f;return Ne.map(F,se,b)}}else return ue.LocationLink.is(f)?[Fn(f)]:se(f)}async function si(f,b){if(!!f)return Ne.map(f,se,b)}async function Ys(f,b){if(!!f)return Ne.map(f,zi,b)}function zi(f){let b=new H.DocumentHighlight(m(f.range));return Dn.number(f.kind)&&(b.kind=Gi(f.kind)),b}function Gi(f){switch(f){case ue.DocumentHighlightKind.Text:return H.DocumentHighlightKind.Text;case ue.DocumentHighlightKind.Read:return H.DocumentHighlightKind.Read;case ue.DocumentHighlightKind.Write:return H.DocumentHighlightKind.Write}return H.DocumentHighlightKind.Text}async function wn(f,b){if(!!f)return Ne.map(f,oi,b)}function tr(f){return f<=ue.SymbolKind.TypeParameter?f-1:H.SymbolKind.Property}function Ki(f){switch(f){case ue.SymbolTag.Deprecated:return H.SymbolTag.Deprecated;default:return}}function Ln(f){if(f==null)return;let b=[];for(let F of f){let re=Ki(F);re!==void 0&&b.push(re)}return b.length===0?void 0:b}function oi(f){let b=f.data,F=f.location,re=F.range===void 0||b!==void 0?new px.default(f.name,tr(f.kind),f.containerName??"",F.range===void 0?i(F.uri):new H.Location(i(f.location.uri),m(F.range)),b):new H.SymbolInformation(f.name,tr(f.kind),f.containerName??"",new H.Location(i(f.location.uri),m(F.range)));return Cn(re,f),re}async function Ar(f,b){if(f!=null)return Ne.map(f,Mn,b)}function Mn(f){let b=new H.DocumentSymbol(f.name,f.detail||"",tr(f.kind),m(f.range),m(f.selectionRange));if(Cn(b,f),f.children!==void 0&&f.children.length>0){let F=[];for(let re of f.children)F.push(Mn(re));b.children=F}return b}function Cn(f,b){f.tags=Ln(b.tags),b.deprecated&&(f.tags?f.tags.includes(H.SymbolTag.Deprecated)||(f.tags=f.tags.concat(H.SymbolTag.Deprecated)):f.tags=[H.SymbolTag.Deprecated])}function _t(f){let b={title:f.title,command:f.command};return f.arguments&&(b.arguments=f.arguments),b}async function Qs(f,b){if(!!f)return Ne.map(f,_t,b)}let ln=new Map;ln.set(ue.CodeActionKind.Empty,H.CodeActionKind.Empty),ln.set(ue.CodeActionKind.QuickFix,H.CodeActionKind.QuickFix),ln.set(ue.CodeActionKind.Refactor,H.CodeActionKind.Refactor),ln.set(ue.CodeActionKind.RefactorExtract,H.CodeActionKind.RefactorExtract),ln.set(ue.CodeActionKind.RefactorInline,H.CodeActionKind.RefactorInline),ln.set(ue.CodeActionKind.RefactorRewrite,H.CodeActionKind.RefactorRewrite),ln.set(ue.CodeActionKind.Source,H.CodeActionKind.Source),ln.set(ue.CodeActionKind.SourceOrganizeImports,H.CodeActionKind.SourceOrganizeImports);function An(f){if(f==null)return;let b=ln.get(f);if(b)return b;let F=f.split(".");b=H.CodeActionKind.Empty;for(let re of F)b=b.append(re);return b}function Vi(f){if(f!=null)return f.map(b=>An(b))}async function ai(f,b){if(f==null)return;let F=new dx.default(f.title,f.data);return f.kind!==void 0&&(F.kind=An(f.kind)),f.diagnostics!==void 0&&(F.diagnostics=c(f.diagnostics)),f.edit!==void 0&&(F.edit=await C(f.edit,b)),f.command!==void 0&&(F.command=_t(f.command)),f.isPreferred!==void 0&&(F.isPreferred=f.isPreferred),f.disabled!==void 0&&(F.disabled={reason:f.disabled.reason}),F}function ci(f,b){return Ne.mapAsync(f,async F=>ue.Command.is(F)?_t(F):ai(F,b),b)}function jn(f){if(!f)return;let b=new ux.default(m(f.range));return f.command&&(b.command=_t(f.command)),f.data!==void 0&&f.data!==null&&(b.data=f.data),b}async function nr(f,b){if(!!f)return Ne.map(f,jn,b)}async function C(f,b){if(!f)return;let F=new Map;if(f.changeAnnotations!==void 0){let Et=f.changeAnnotations;await Ne.forEach(Object.keys(Et),Me=>{let rr=q(Et[Me]);F.set(Me,rr)},b)}let re=Et=>{if(Et!==void 0)return F.get(Et)},en=new H.WorkspaceEdit;if(f.documentChanges){let Et=f.documentChanges;await Ne.forEach(Et,Me=>{if(ue.CreateFile.is(Me))en.createFile(i(Me.uri),Me.options,re(Me.annotationId));else if(ue.RenameFile.is(Me))en.renameFile(i(Me.oldUri),i(Me.newUri),Me.options,re(Me.annotationId));else if(ue.DeleteFile.is(Me))en.deleteFile(i(Me.uri),Me.options,re(Me.annotationId));else if(ue.TextDocumentEdit.is(Me)){let rr=i(Me.textDocument.uri);for(let Ue of Me.edits)ue.AnnotatedTextEdit.is(Ue)?en.replace(rr,m(Ue.range),Ue.newText,re(Ue.annotationId)):en.replace(rr,m(Ue.range),Ue.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Me,void 0,4)}`)},b)}else if(f.changes){let Et=f.changes;await Ne.forEach(Object.keys(Et),Me=>{en.set(i(Me),D(Et[Me]))},b)}return en}function q(f){if(f!==void 0)return{label:f.label,needsConfirmation:!!f.needsConfirmation,description:f.description}}function j(f){let b=m(f.range),F=f.target?s(f.target):void 0,re=new lx.default(b,F);return f.tooltip!==void 0&&(re.tooltip=f.tooltip),f.data!==void 0&&f.data!==null&&(re.data=f.data),re}async function K(f,b){if(!!f)return Ne.map(f,j,b)}function Fe(f){return new H.Color(f.red,f.green,f.blue,f.alpha)}function Le(f){return new H.ColorInformation(m(f.range),Fe(f.color))}async function He(f,b){if(!!f)return Ne.map(f,Le,b)}function Ye(f){let b=new H.ColorPresentation(f.label);return b.additionalTextEdits=D(f.additionalTextEdits),f.textEdit&&(b.textEdit=Te(f.textEdit)),b}async function be(f,b){if(!!f)return Ne.map(f,Ye,b)}function $e(f){if(f)switch(f){case ue.FoldingRangeKind.Comment:return H.FoldingRangeKind.Comment;case ue.FoldingRangeKind.Imports:return H.FoldingRangeKind.Imports;case ue.FoldingRangeKind.Region:return H.FoldingRangeKind.Region}}function Se(f){return new H.FoldingRange(f.startLine,f.endLine,$e(f.kind))}async function g(f,b){if(!!f)return Ne.map(f,Se,b)}function E(f){return new H.SelectionRange(m(f.range),f.parent?E(f.parent):void 0)}async function z(f,b){return Array.isArray(f)?Ne.map(f,E,b):[]}function _e(f){return ue.InlineValueText.is(f)?new H.InlineValueText(m(f.range),f.text):ue.InlineValueVariableLookup.is(f)?new H.InlineValueVariableLookup(m(f.range),f.variableName,f.caseSensitiveLookup):new H.InlineValueEvaluatableExpression(m(f.range),f.expression)}async function Oe(f,b){return Array.isArray(f)?Ne.map(f,_e,b):[]}async function Tt(f,b){let F=typeof f.label=="string"?f.label:await Ne.map(f.label,gr,b),re=new gx.default(p(f.position),F);return f.kind!==void 0&&(re.kind=f.kind),f.textEdits!==void 0&&(re.textEdits=await N(f.textEdits,b)),f.tooltip!==void 0&&(re.tooltip=Zs(f.tooltip)),f.paddingLeft!==void 0&&(re.paddingLeft=f.paddingLeft),f.paddingRight!==void 0&&(re.paddingRight=f.paddingRight),f.data!==void 0&&(re.data=f.data),re}function gr(f){let b=new H.InlayHintLabelPart(f.value);return f.location!==void 0&&(b.location=se(f.location)),f.tooltip!==void 0&&(b.tooltip=Zs(f.tooltip)),f.command!==void 0&&(b.command=_t(f.command)),b}function Zs(f){return typeof f=="string"?f:x(f)}async function E0(f,b){if(!!Array.isArray(f))return Ne.mapAsync(f,Tt,b)}function Ta(f){if(f===null)return;let b=new fx.default(tr(f.kind),f.name,f.detail||"",s(f.uri),m(f.range),m(f.selectionRange),f.data);return f.tags!==void 0&&(b.tags=Ln(f.tags)),b}async function x0(f,b){if(f!==null)return Ne.map(f,Ta,b)}async function sm(f,b){return new H.CallHierarchyIncomingCall(Ta(f.from),await y(f.fromRanges,b))}async function P0(f,b){if(f!==null)return Ne.mapAsync(f,sm,b)}async function om(f,b){return new H.CallHierarchyOutgoingCall(Ta(f.to),await y(f.fromRanges,b))}async function q0(f,b){if(f!==null)return Ne.mapAsync(f,om,b)}async function O0(f,b){if(f!=null)return new H.SemanticTokens(new Uint32Array(f.data),f.resultId)}function am(f){return new H.SemanticTokensEdit(f.start,f.deleteCount,f.data!==void 0?new Uint32Array(f.data):void 0)}async function k0(f,b){if(f!=null)return new H.SemanticTokensEdits(f.edits.map(am),f.resultId)}function N0(f){return f}async function I0(f,b){if(f!=null)return new H.LinkedEditingRanges(await y(f.ranges,b),F0(f.wordPattern))}function F0(f){if(f!=null)return new RegExp(f)}function cm(f){if(f===null)return;let b=new hx.default(tr(f.kind),f.name,f.detail||"",s(f.uri),m(f.range),m(f.selectionRange),f.data);return f.tags!==void 0&&(b.tags=Ln(f.tags)),b}async function L0(f,b){if(f!==null)return Ne.map(f,cm,b)}function M0(f){if(Dn.string(f))return f;if(ue.RelativePattern.is(f)){if(ue.URI.is(f.baseUri))return new H.RelativePattern(s(f.baseUri),f.pattern);if(ue.WorkspaceFolder.is(f.baseUri)){let b=H.workspace.getWorkspaceFolder(s(f.baseUri.uri));return b!==void 0?new H.RelativePattern(b,f.pattern):void 0}}}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:u,asRange:m,asRanges:y,asPosition:p,asDiagnosticSeverity:_,asDiagnosticTag:h,asHover:k,asCompletionResult:W,asCompletionItem:G,asTextEdit:Te,asTextEdits:N,asSignatureHelp:I,asSignatureInformations:O,asSignatureInformation:ee,asParameterInformations:te,asParameterInformation:B,asDeclarationResult:Ge,asDefinitionResult:It,asLocation:se,asReferences:si,asDocumentHighlights:Ys,asDocumentHighlight:zi,asDocumentHighlightKind:Gi,asSymbolKind:tr,asSymbolTag:Ki,asSymbolTags:Ln,asSymbolInformations:wn,asSymbolInformation:oi,asDocumentSymbols:Ar,asDocumentSymbol:Mn,asCommand:_t,asCommands:Qs,asCodeAction:ai,asCodeActionKind:An,asCodeActionKinds:Vi,asCodeActionResult:ci,asCodeLens:jn,asCodeLenses:nr,asWorkspaceEdit:C,asDocumentLink:j,asDocumentLinks:K,asFoldingRangeKind:$e,asFoldingRange:Se,asFoldingRanges:g,asColor:Fe,asColorInformation:Le,asColorInformations:He,asColorPresentation:Ye,asColorPresentations:be,asSelectionRange:E,asSelectionRanges:z,asInlineValue:_e,asInlineValues:Oe,asInlayHint:Tt,asInlayHints:E0,asSemanticTokensLegend:N0,asSemanticTokens:O0,asSemanticTokensEdit:am,asSemanticTokensEdits:k0,asCallHierarchyItem:Ta,asCallHierarchyItems:x0,asCallHierarchyIncomingCall:sm,asCallHierarchyIncomingCalls:P0,asCallHierarchyOutgoingCall:om,asCallHierarchyOutgoingCalls:q0,asLinkedEditingRanges:I0,asTypeHierarchyItem:cm,asTypeHierarchyItems:L0,asGlobPattern:M0}}sc.createConverter=mx});var et=w(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.generateUuid=Tn.parse=Tn.isUUID=Tn.v4=Tn.empty=void 0;var Po=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},me=class extends Po{constructor(){super([me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),"-",me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),"-","4",me._randomHex(),me._randomHex(),me._randomHex(),"-",me._oneOf(me._timeHighBits),me._randomHex(),me._randomHex(),me._randomHex(),"-",me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex(),me._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return me._oneOf(me._chars)}};me._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];me._timeHighBits=["8","9","a","b"];Tn.empty=new Po("00000000-0000-0000-0000-000000000000");function Jv(){return new me}Tn.v4=Jv;var vx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Yv(t){return vx.test(t)}Tn.isUUID=Yv;function yx(t){if(!Yv(t))throw new Error("invalid uuid");return new Po(t)}Tn.parse=yx;function _x(){return Jv().asHex()}Tn.generateUuid=_x});var qf=w(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.ProgressPart=void 0;var Qv=require("vscode"),Zv=le(),ey=Rn(),Pf=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Zv.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Qv.window.withProgress({location:Qv.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Zv.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&ey.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(ey.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};oc.ProgressPart=Pf});var Ee=w(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.WorkspaceFeature=ht.TextDocumentLanguageFeature=ht.TextDocumentEventFeature=ht.DynamicDocumentFeature=ht.DynamicFeature=ht.StaticFeature=ht.ensure=ht.LSPCancellationError=void 0;var wi=require("vscode"),Of=le(),zt=Rn(),ty=et(),kf=class extends wi.CancellationError{constructor(e){super(),this.data=e}};ht.LSPCancellationError=kf;function wx(t,e){return t[e]===void 0&&(t[e]={}),t[e]}ht.ensure=wx;var Cx;(function(t){function e(n){let r=n;return r!=null&&zt.func(r.fillClientCapabilities)&&zt.func(r.initialize)&&zt.func(r.getState)&&zt.func(r.dispose)&&(r.fillInitializeParams===void 0||zt.func(r.fillInitializeParams))}t.is=e})(Cx=ht.StaticFeature||(ht.StaticFeature={}));var bx;(function(t){function e(n){let r=n;return r!=null&&zt.func(r.fillClientCapabilities)&&zt.func(r.initialize)&&zt.func(r.getState)&&zt.func(r.dispose)&&(r.fillInitializeParams===void 0||zt.func(r.fillInitializeParams))&&zt.func(r.register)&&zt.func(r.unregister)&&r.registrationType!==void 0}t.is=e})(bx=ht.DynamicFeature||(ht.DynamicFeature={}));var qo=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),n=0;for(let i of e){n++;for(let s of wi.workspace.textDocuments)if(wi.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=n>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};ht.DynamicDocumentFeature=qo;var Nf=class extends qo{constructor(e,n,r,i,s,o,a){super(e),this._event=n,this._type=r,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new wi.EventEmitter}static textDocumentFilter(e,n){for(let r of e)if(wi.languages.match(r,n)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(n=>{this.callback(n).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let n=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i).catch(),this.notificationSent(r,this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>n(i)):n(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(wi.languages.match(n,e)>0)return{send:r=>this.callback(r)}}};ht.TextDocumentEventFeature=Nf;var If=class extends qo{constructor(e,n){super(e),this._registrationType=n,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let n=e.data.registerOptions.documentSelector;n!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(n))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(Of.TextDocumentRegistrationOptions.is(n)){let r=Of.StaticRegistrationOptions.hasId(n)?n.id:ty.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(zt.boolean(n)&&n===!0||Of.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=zt.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[ty.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return zt.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&wi.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};ht.TextDocumentLanguageFeature=If;var Ff=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};ht.WorkspaceFeature=Ff});var ry=w((JM,ny)=>{ny.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);Sx(i)?n.push.apply(n,i):n.push(i)}return n};var Sx=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var cy=w((YM,ay)=>{"use strict";ay.exports=sy;function sy(t,e,n){t instanceof RegExp&&(t=iy(t,n)),e instanceof RegExp&&(e=iy(e,n));var r=oy(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function iy(t,e){var n=e.match(t);return n?n[0]:null}sy.range=oy;function oy(t,e,n){var r,i,s,o,a,c=n.indexOf(t),u=n.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(t===e)return[c,u];for(r=[],s=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(t,l+1)):r.length==1?a=[r.pop(),u]:(i=r.pop(),i<s&&(s=i,o=u),u=n.indexOf(e,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[s,o])}return a}});var my=w((QM,gy)=>{var Rx=ry(),uy=cy();gy.exports=Ex;var ly="\0SLASH"+Math.random()+"\0",dy="\0OPEN"+Math.random()+"\0",Mf="\0CLOSE"+Math.random()+"\0",fy="\0COMMA"+Math.random()+"\0",hy="\0PERIOD"+Math.random()+"\0";function Lf(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Dx(t){return t.split("\\\\").join(ly).split("\\{").join(dy).split("\\}").join(Mf).split("\\,").join(fy).split("\\.").join(hy)}function Tx(t){return t.split(ly).join("\\").split(dy).join("{").split(Mf).join("}").split(fy).join(",").split(hy).join(".")}function py(t){if(!t)return[""];var e=[],n=uy("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=py(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Ex(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),hs(Dx(t),!0).map(Tx)):[]}function xx(t){return"{"+t+"}"}function Px(t){return/^-?0\d/.test(t)}function qx(t,e){return t<=e}function Ox(t,e){return t>=e}function hs(t,e){var n=[],r=uy("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),o=i||s,a=r.body.indexOf(",")>=0;if(!o&&!a)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+Mf+r.post,hs(t)):[t];var c;if(o)c=r.body.split(/\.\./);else if(c=py(r.body),c.length===1&&(c=hs(c[0],!1).map(xx),c.length===1)){var l=r.post.length?hs(r.post,!1):[""];return l.map(function(de){return r.pre+c[0]+de})}var u=r.pre,l=r.post.length?hs(r.post,!1):[""],d;if(o){var h=Lf(c[0]),p=Lf(c[1]),m=Math.max(c[0].length,c[1].length),y=c.length==3?Math.abs(Lf(c[2])):1,_=qx,S=p<h;S&&(y*=-1,_=Ox);var T=c.some(Px);d=[];for(var x=h;_(x,p);x+=y){var k;if(s)k=String.fromCharCode(x),k==="\\"&&(k="");else if(k=String(x),T){var W=m-k.length;if(W>0){var Q=new Array(W+1).join("0");x<0?k="-"+Q+k.slice(1):k=Q+k}}d.push(k)}}else d=Rx(c,function(G){return hs(G,!1)});for(var oe=0;oe<d.length;oe++)for(var L=0;L<l.length;L++){var M=u+d[oe]+l[L];(!e||o||M)&&n.push(M)}return n}});var uc=w((ZM,Cy)=>{Cy.exports=hn;hn.Minimatch=Ot;var Oo=function(){try{return require("path")}catch{}}()||{sep:"/"};hn.sep=Oo.sep;var $f=hn.GLOBSTAR=Ot.GLOBSTAR={},kx=my(),vy={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Af="[^/]",jf=Af+"*?",Nx="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ix="(?:(?!(?:\\/|^)\\.).)*?",yy=Fx("().*{}+?[]^$\\!");function Fx(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var _y=/\/+/;hn.filter=Lx;function Lx(t,e){return e=e||{},function(n,r,i){return hn(n,t,e)}}function zr(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}hn.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return hn;var e=hn,n=function(i,s,o){return e(i,s,zr(t,o))};return n.Minimatch=function(i,s){return new e.Minimatch(i,zr(t,s))},n.Minimatch.defaults=function(i){return e.defaults(zr(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,zr(t,s))},n.defaults=function(i){return e.defaults(zr(t,i))},n.makeRe=function(i,s){return e.makeRe(i,zr(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,zr(t,s))},n.match=function(r,i,s){return e.match(r,i,zr(t,s))},n};Ot.defaults=function(t){return hn.defaults(t).Minimatch};function hn(t,e,n){return cc(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new Ot(e,n).match(t)}function Ot(t,e){if(!(this instanceof Ot))return new Ot(t,e);cc(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Oo.sep!=="/"&&(t=t.split(Oo.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Ot.prototype.debug=function(){};Ot.prototype.make=Mx;function Mx(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(_y)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}Ot.prototype.parseNegate=Ax;function Ax(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}hn.braceExpand=function(t,e){return wy(t,e)};Ot.prototype.braceExpand=wy;function wy(t,e){return e||(this instanceof Ot?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,cc(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:kx(t)}var jx=1024*64,cc=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>jx)throw new TypeError("pattern is too long")};Ot.prototype.parse=$x;var ac={};function $x(t,e){cc(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return $f;if(t==="")return"";var r="",i=!!n.nocase,s=!1,o=[],a=[],c,u=!1,l=-1,d=-1,h=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",p=this;function m(){if(c){switch(c){case"*":r+=jf,i=!0;break;case"?":r+=Af,i=!0;break;default:r+="\\"+c;break}p.debug("clearStateChar %j %j",c,r),c=!1}}for(var y=0,_=t.length,S;y<_&&(S=t.charAt(y));y++){if(this.debug("%s	%s %s %j",t,y,r,S),s&&yy[S]){r+="\\"+S,s=!1;continue}switch(S){case"/":return!1;case"\\":m(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,y,r,S),u){this.debug("  in class"),S==="!"&&y===d+1&&(S="^"),r+=S;continue}p.debug("call clearStateChar %j",c),m(),c=S,n.noext&&m();continue;case"(":if(u){r+="(";continue}if(!c){r+="\\(";continue}o.push({type:c,start:y-1,reStart:r.length,open:vy[c].open,close:vy[c].close}),r+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,r),c=!1;continue;case")":if(u||!o.length){r+="\\)";continue}m(),i=!0;var T=o.pop();r+=T.close,T.type==="!"&&a.push(T),T.reEnd=r.length;continue;case"|":if(u||!o.length||s){r+="\\|",s=!1;continue}m(),r+="|";continue;case"[":if(m(),u){r+="\\"+S;continue}u=!0,d=y,l=r.length,r+=S;continue;case"]":if(y===d+1||!u){r+="\\"+S,s=!1;continue}var x=t.substring(d+1,y);try{RegExp("["+x+"]")}catch{var k=this.parse(x,ac);r=r.substr(0,l)+"\\["+k[0]+"\\]",i=i||k[1],u=!1;continue}i=!0,u=!1,r+=S;continue;default:m(),s?s=!1:yy[S]&&!(S==="^"&&u)&&(r+="\\"),r+=S}}for(u&&(x=t.substr(d+1),k=this.parse(x,ac),r=r.substr(0,l)+"\\["+k[0],i=i||k[1]),T=o.pop();T;T=o.pop()){var W=r.slice(T.reStart+T.open.length);this.debug("setting tail",r,T),W=W.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(te,B,se){return se||(se="\\"),B+B+se+"|"}),this.debug(`tail=%j
   %s`,W,W,T,r);var Q=T.type==="*"?jf:T.type==="?"?Af:"\\"+T.type;i=!0,r=r.slice(0,T.reStart)+Q+"\\("+W}m(),s&&(r+="\\\\");var oe=!1;switch(r.charAt(0)){case"[":case".":case"(":oe=!0}for(var L=a.length-1;L>-1;L--){var M=a[L],G=r.slice(0,M.reStart),de=r.slice(M.reStart,M.reEnd-8),Z=r.slice(M.reEnd-8,M.reEnd),ie=r.slice(M.reEnd);Z+=ie;var Te=G.split("(").length-1,N=ie;for(y=0;y<Te;y++)N=N.replace(/\)[+*?]?/,"");ie=N;var D="";ie===""&&e!==ac&&(D="$");var I=G+de+ie+D+Z;r=I}if(r!==""&&i&&(r="(?=.)"+r),oe&&(r=h+r),e===ac)return[r,i];if(!i)return Hx(t);var O=n.nocase?"i":"";try{var ee=new RegExp("^"+r+"$",O)}catch{return new RegExp("$.")}return ee._glob=t,ee._src=r,ee}hn.makeRe=function(t,e){return new Ot(t,e||{}).makeRe()};Ot.prototype.makeRe=Ux;function Ux(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?jf:e.dot?Nx:Ix,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(o){return o===$f?n:typeof o=="string"?Wx(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}hn.match=function(t,e,n){n=n||{};var r=new Ot(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};Ot.prototype.match=function(e,n){if(typeof n>"u"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;Oo.sep!=="/"&&(e=e.split(Oo.sep).join("/")),e=e.split(_y),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<i.length;o++){var a=i[o],c=e;r.matchBase&&a.length===1&&(c=[s]);var u=this.matchOne(c,a,n);if(u)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};Ot.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,o=t.length,a=e.length;i<o&&s<a;i++,s++){this.debug("matchOne loop");var c=e[s],u=t[i];if(this.debug(e,c,u),c===!1)return!1;if(c===$f){this.debug("GLOBSTAR",[e,c,u]);var l=i,d=s+1;if(d===a){for(this.debug("** at the end");i<o;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;l<o;){var h=t[l];if(this.debug(`
globstar while`,t,l,e,d,h),this.matchOne(t.slice(l),e.slice(d),n))return this.debug("globstar found match!",l,o,h),!0;if(h==="."||h===".."||!r.dot&&h.charAt(0)==="."){this.debug("dot detected!",t,l,e,d);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,l,e,d),l===o))}var p;if(typeof c=="string"?(p=u===c,this.debug("string match",c,u,p)):(p=u.match(c),this.debug("pattern match",c,u,p)),!p)return!1}if(i===o&&s===a)return!0;if(i===o)return n;if(s===a)return i===o-1&&t[i]==="";throw new Error("wtf?")};function Hx(t){return t.replace(/\\(.)/g,"$1")}function Wx(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Vf=w(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.DiagnosticFeature=ur.DiagnosticPullMode=ur.vsdiag=void 0;var Bx=uc(),we=require("vscode"),at=le(),zx=et(),Uf=Ee();function lc(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Xn;(function(t){let e;(function(n){n.full="full",n.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(Xn=ur.vsdiag||(ur.vsdiag={}));var Hf;(function(t){t.onType="onType",t.onSave="onSave"})(Hf=ur.DiagnosticPullMode||(ur.DiagnosticPullMode={}));var At;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(At||(At={}));var Ci=class{constructor(){this.open=new Set,this._onOpen=new we.EventEmitter,this._onClose=new we.EventEmitter,Ci.fillTabResources(this.open);let e=n=>{if(n.closed.length===0&&n.opened.length===0)return;let r=this.open,i=new Set;Ci.fillTabResources(i);let s=new Set,o=new Set(i);for(let a of r.values())i.has(a)?o.delete(a):s.add(a);if(this.open=i,s.size>0){let a=new Set;for(let c of s)a.add(we.Uri.parse(c));this._onClose.fire(a)}if(o.size>0){let a=new Set;for(let c of o)a.add(we.Uri.parse(c));this._onOpen.fire(a)}};we.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=we.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof we.Uri?we.window.activeTextEditor?.document.uri===e:we.window.activeTextEditor?.document===e}isVisible(e){let n=e instanceof we.Uri?e:e.uri;return this.open.has(n.toString())}getTabResources(){let e=new Set;return Ci.fillTabResources(new Set,e),e}static fillTabResources(e,n){let r=e??new Set;for(let i of we.window.tabGroups.all)for(let s of i.tabs){let o=s.input,a;o instanceof we.TabInputText?a=o.uri:o instanceof we.TabInputTextDiff&&(a=o.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),n!==void 0&&n.add(a))}}},bt;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(bt||(bt={}));var Wf=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,n,r){let i=e===bt.document?this.documentPullStates:this.workspacePullStates,[s,o,a]=n instanceof we.Uri?[n.toString(),n,r]:[n.uri.toString(),n.uri,n.version],c=i.get(s);return c===void 0&&(c={document:o,pulledVersion:a,resultId:void 0},i.set(s,c)),c}update(e,n,r,i){let s=e===bt.document?this.documentPullStates:this.workspacePullStates,[o,a,c,u]=n instanceof we.Uri?[n.toString(),n,r,i]:[n.uri.toString(),n.uri,n.version,r],l=s.get(o);l===void 0?(l={document:a,pulledVersion:c,resultId:u},s.set(o,l)):(l.pulledVersion=c,l.resultId=u)}unTrack(e,n){let r=n instanceof we.Uri?n.toString():n.uri.toString();(e===bt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,n){let r=n instanceof we.Uri?n.toString():n.uri.toString();return(e===bt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,n){let r=n instanceof we.Uri?n.toString():n.uri.toString();return(e===bt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[n,r]of this.workspacePullStates)this.documentPullStates.has(n)&&(r=this.documentPullStates.get(n)),r.resultId!==void 0&&e.push({uri:n,value:r.resultId});return e}},Bf=class{constructor(e,n,r){this.client=e,this.tabs=n,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new we.EventEmitter,this.provider=this.createProvider(),this.diagnostics=we.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new Wf,this.workspaceErrorCounter=0}knows(e,n){return this.documentStates.tracks(e,n)}forget(e,n){this.documentStates.unTrack(e,n)}pull(e,n){if(this.isDisposed)return;let r=e instanceof we.Uri?e:e.uri;this.pullAsync(e).then(()=>{n&&n()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,n){if(this.isDisposed)return;let r=e instanceof we.Uri,i=r?e:e.uri,s=i.toString();n=r?n:e.version;let o=this.openRequests.get(s),a=r?this.documentStates.track(bt.document,e,n):this.documentStates.track(bt.document,e);if(o===void 0){let c=new we.CancellationTokenSource;this.openRequests.set(s,{state:At.active,document:e,version:n,tokenSource:c});let u,l;try{u=await this.provider.provideDiagnostics(e,a.resultId,c.token)??{kind:Xn.DocumentDiagnosticReportKind.full,items:[]}}catch(d){if(d instanceof Uf.LSPCancellationError&&at.DiagnosticServerCancellationData.is(d.data)&&d.data.retriggerRequest===!1&&(l={state:At.outDated,document:e}),l===void 0&&d instanceof we.CancellationError)l={state:At.reschedule,document:e};else throw d}if(l=l??this.openRequests.get(s),l===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(bt.document,e);return}if(l.state===At.outDated)return;u!==void 0&&(u.kind===Xn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,u.items),a.pulledVersion=n,a.resultId=u.resultId),l.state===At.reschedule&&this.pull(e)}else o.state===At.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:At.reschedule,document:o.document})):o.state===At.outDated&&this.openRequests.set(s,{state:At.reschedule,document:o.document})}forgetDocument(e){let n=e instanceof we.Uri?e:e.uri,r=n.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:At.reschedule,document:e}):this.pull(e,()=>{this.forget(bt.document,e)}):(i!==void 0&&(i.state===At.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:At.outDated,document:e})),this.diagnostics.delete(n),this.forget(bt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,at.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Uf.LSPCancellationError)&&!at.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,at.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new we.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(n=>({uri:this.client.protocol2CodeConverter.asUri(n.uri),value:n.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,n=>{if(!(!n||this.isDisposed))for(let r of n.items)r.kind===Xn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(bt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(bt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(n,r,i)=>{let s=(a,c,u)=>{let l={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof we.Uri?a:a.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:Xn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(at.DocumentDiagnosticRequest.type,l,u).then(async d=>d==null||this.isDisposed||u.isCancellationRequested?{kind:Xn.DocumentDiagnosticReportKind.full,items:[]}:d.kind===at.DocumentDiagnosticReportKind.Full?{kind:Xn.DocumentDiagnosticReportKind.full,resultId:d.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(d.items,u)}:{kind:Xn.DocumentDiagnosticReportKind.unChanged,resultId:d.resultId},d=>this.client.handleFailedRequest(at.DocumentDiagnosticRequest.type,u,d,{kind:Xn.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(n,r,i,s):s(n,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(n,r,i)=>{let s=async u=>u.kind===at.DocumentDiagnosticReportKind.Full?{kind:Xn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version,items:await this.client.protocol2CodeConverter.asDiagnostics(u.items,r)}:{kind:Xn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version},o=u=>{let l=[];for(let d of u)l.push({uri:this.client.code2ProtocolConverter.asUri(d.uri),value:d.value});return l},a=(u,l)=>{let d=(0,zx.generateUuid)(),h=this.client.onProgress(at.WorkspaceDiagnosticRequest.partialResult,d,async m=>{if(m==null){i(null);return}let y={items:[]};for(let _ of m.items)try{y.items.push(await s(_))}catch(S){this.client.error("Converting workspace diagnostics failed.",S)}i(y)}),p={identifier:this.options.identifier,previousResultIds:o(u),partialResultToken:d};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(at.WorkspaceDiagnosticRequest.type,p,l).then(async m=>{if(l.isCancellationRequested)return{items:[]};let y={items:[]};for(let _ of m.items)y.items.push(await s(_));return h.dispose(),i(y),{items:[]}},m=>(h.dispose(),this.client.handleFailedRequest(at.DocumentDiagnosticRequest.type,l,m,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(n,r,i,a):a(n,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,n]of this.openRequests)n.state===At.active&&n.tokenSource.cancel(),this.openRequests.set(e,{state:At.outDated,document:n.document});this.diagnostics.dispose()}},zf=class{constructor(e){this.diagnosticRequestor=e,this.documents=new at.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let n=e instanceof we.Uri?e.toString():e.uri.toString();this.documents.has(n)||(this.documents.set(n,e,at.Touch.Last),this.trigger())}remove(e){let n=e instanceof we.Uri?e.toString():e.uri.toString();this.documents.has(n)&&(this.documents.delete(n),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,at.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let n=e instanceof we.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e),this.documents.set(n,e,at.Touch.Last),e===this.endDocument&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},Gf=class{constructor(e,n,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),o=[],a=m=>{let y=r.documentSelector;if(i.match!==void 0)return i.match(y,m);for(let _ of y)if(!!at.TextDocumentFilter.is(_)){if(typeof _=="string"||_.language!==void 0&&_.language!=="*"||_.scheme!==void 0&&_.scheme!=="*"&&_.scheme!==m.scheme)return!1;if(_.pattern!==void 0){let S=new Bx.Minimatch(_.pattern,{noext:!0});if(!S.makeRe()||!S.match(m.fsPath))return!1}}return!0},c=m=>m instanceof we.Uri?a(m):we.languages.match(s,m)>0&&n.isVisible(m),u=m=>m instanceof we.Uri?this.activeTextDocument?.uri.toString()===m.toString():this.activeTextDocument===m;this.diagnosticRequestor=new Bf(e,n,r),this.backgroundScheduler=new zf(this.diagnosticRequestor);let l=m=>{!c(m)||!r.interFileDependencies||u(m)||this.backgroundScheduler.add(m)};this.activeTextDocument=we.window.activeTextEditor?.document,we.window.onDidChangeActiveTextEditor(m=>{let y=this.activeTextDocument;this.activeTextDocument=m?.document,y!==void 0&&l(y),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let d=e.getFeature(at.DidOpenTextDocumentNotification.method);o.push(d.onNotificationSent(m=>{let y=m.original;c(y)&&this.diagnosticRequestor.pull(y,()=>{l(y)})}));let h=new Set;for(let m of we.workspace.textDocuments)c(m)&&(this.diagnosticRequestor.pull(m,()=>{l(m)}),h.add(m.uri.toString()));if(i.onTabs===!0)for(let m of n.getTabResources())!h.has(m.toString())&&c(m)&&this.diagnosticRequestor.pull(m,()=>{l(m)});if(n.onOpen(m=>{for(let y of m)c(y)&&!this.diagnosticRequestor.knows(bt.document,y)&&this.diagnosticRequestor.pull(y,()=>{l(y)})}),i.onChange===!0){let m=e.getFeature(at.DidChangeTextDocumentNotification.method);o.push(m.onNotificationSent(async y=>{let _=y.original.document;(i.filter===void 0||!i.filter(_,Hf.onType))&&this.diagnosticRequestor.knows(bt.document,_)&&y.original.contentChanges.length>0&&this.diagnosticRequestor.pull(_,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let m=e.getFeature(at.DidSaveTextDocumentNotification.method);o.push(m.onNotificationSent(y=>{let _=y.original;(i.filter===void 0||!i.filter(_,Hf.onSave))&&this.diagnosticRequestor.knows(bt.document,_)&&this.diagnosticRequestor.pull(y.original,()=>{this.backgroundScheduler.trigger()})}))}let p=e.getFeature(at.DidCloseTextDocumentNotification.method);o.push(p.onNotificationSent(m=>{this.cleanUpDocument(m.original)})),n.onClose(m=>{for(let y of m)this.cleanUpDocument(y)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let m of we.workspace.textDocuments)c(m)&&this.diagnosticRequestor.pull(m)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=we.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(bt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Kf=class extends Uf.TextDocumentLanguageFeature{constructor(e){super(e,at.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let n=lc(lc(e,"textDocument"),"diagnostic");n.dynamicRegistration=!0,n.relatedDocumentSupport=!1,lc(lc(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,n){this._client.onRequest(at.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(n,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new Ci);let n=new Gf(this._client,this.tabs,e);return[n.disposable,n]}};ur.DiagnosticFeature=Kf});var Ry=w(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.NotebookDocumentSyncFeature=void 0;var jt=require("vscode"),Gx=uc(),br=le(),Kx=et(),by=Rn();function Sy(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var ps;(function(t){let e;(function(n){function r(h,p){return{version:h.version,uri:p.asUri(h.uri)}}n.asVersionedNotebookDocumentIdentifier=r;function i(h,p,m){let y=br.NotebookDocument.create(m.asUri(h.uri),h.notebookType,h.version,s(p,m));return Object.keys(h.metadata).length>0&&(y.metadata=o(h.metadata)),y}n.asNotebookDocument=i;function s(h,p){return h.map(m=>a(m,p))}n.asNotebookCells=s;function o(h){return u(new Set,h)}n.asMetadata=o;function a(h,p){let m=br.NotebookCell.create(c(h.kind),p.asUri(h.document.uri));return Object.keys(h.metadata).length>0&&(m.metadata=o(h.metadata)),h.executionSummary!==void 0&&by.number(h.executionSummary.executionOrder)&&by.boolean(h.executionSummary.success)&&(m.executionSummary={executionOrder:h.executionSummary.executionOrder,success:h.executionSummary.success}),m}n.asNotebookCell=a;function c(h){switch(h){case jt.NotebookCellKind.Markup:return br.NotebookCellKind.Markup;case jt.NotebookCellKind.Code:return br.NotebookCellKind.Code}}function u(h,p){if(h.has(p))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(p)){let m=[];for(let y of p)if(y!==null&&typeof y=="object"||Array.isArray(y))m.push(u(h,y));else{if(y instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");m.push(y)}return m}else{let m=Object.keys(p),y=Object.create(null);for(let _ of m){let S=p[_];if(S!==null&&typeof S=="object"||Array.isArray(S))y[_]=u(h,S);else{if(S instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");y[_]=S}}return y}}function l(h,p){let m=p.asChangeTextDocumentParams(h);return{document:m.textDocument,changes:m.contentChanges}}n.asTextContentChange=l;function d(h,p){let m=Object.create(null);if(h.metadata&&(m.metadata=t.c2p.asMetadata(h.metadata)),h.cells!==void 0){let y=Object.create(null),_=h.cells;_.structure&&(y.structure={array:{start:_.structure.array.start,deleteCount:_.structure.array.deleteCount,cells:_.structure.array.cells!==void 0?_.structure.array.cells.map(S=>t.c2p.asNotebookCell(S,p)):void 0},didOpen:_.structure.didOpen!==void 0?_.structure.didOpen.map(S=>p.asOpenTextDocumentParams(S.document).textDocument):void 0,didClose:_.structure.didClose!==void 0?_.structure.didClose.map(S=>p.asCloseTextDocumentParams(S.document).textDocument):void 0}),_.data!==void 0&&(y.data=_.data.map(S=>t.c2p.asNotebookCell(S,p))),_.textContent!==void 0&&(y.textContent=_.textContent.map(S=>t.c2p.asTextContentChange(S,p))),Object.keys(y).length>0&&(m.cells=y)}return m}n.asNotebookDocumentChangeEvent=d})(e=t.c2p||(t.c2p={}))})(ps||(ps={}));var Xf;(function(t){function e(a,c,u){let l=a.length,d=c.length,h=0;for(;h<d&&h<l&&n(a[h],c[h],u);)h++;if(h<d&&h<l){let p=l-1,m=d-1;for(;p>=0&&m>=0&&n(a[p],c[m],u);)p--,m--;let y=p+1-h,_=h===m+1?void 0:c.slice(h,m+1);return _!==void 0?{start:h,deleteCount:y,cells:_}:{start:h,deleteCount:y}}else return h<d?{start:h,deleteCount:0,cells:c.slice(h)}:h<l?{start:h,deleteCount:l-h}:void 0}t.computeDiff=e;function n(a,c,u=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!r(a.executionSummary,c.executionSummary)?!1:!u||u&&s(a.metadata,c.metadata)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&i(a.timing,c.timing)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function s(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;let u=Array.isArray(a),l=Array.isArray(c);if(u!==l)return!1;if(u&&l){if(a.length!==c.length)return!1;for(let d=0;d<a.length;d++)if(!s(a[d],c[d]))return!1}if(o(a)&&o(c)){let d=Object.keys(a),h=Object.keys(c);if(d.length!==h.length||(d.sort(),h.sort(),!s(d,h)))return!1;for(let p=0;p<d.length;p++){let m=d[p];if(!s(a[m],c[m]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}t.isObjectLiteral=o})(Xf||(Xf={}));var Jf;(function(t){function e(n,r){if(typeof n=="string")return n==="*"||r.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&r.notebookType!==n.notebookType)return!1;let i=r.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&i.scheme!==n.scheme)return!1;if(n.pattern!==void 0){let s=new Gx.Minimatch(n.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}t.matchNotebook=e})(Jf||(Jf={}));var dc;(function(t){function e(r){let i=r.notebookSelector,s=[];for(let o of i){let a=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",c=typeof o.notebook=="string"?void 0:o.notebook?.scheme,u=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(let l of o.cells)s.push(n(a,c,u,l.language));else s.push(n(a,c,u,void 0))}return s}t.asDocumentSelector=e;function n(r,i,s,o){return i===void 0&&s===void 0?{notebook:r,language:o}:{notebook:{notebookType:r,scheme:i,pattern:s},language:o}}})(dc||(dc={}));var fc;(function(t){function e(n){return{cells:n,uris:new Set(n.map(r=>r.document.uri.toString()))}}t.create=e})(fc||(fc={}));var gs=class{constructor(e,n){this.client=e,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(dc.asDocumentSelector(n)),jt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of jt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);jt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&jt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),jt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of jt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return jt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,n){if(jt.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,n);if(r!==void 0){let s=r.uris.has(n.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(e,n){jt.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,n){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=n.document.uri,s=r.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let o=r.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,n=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(n!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,n);i!==void 0&&this.doSendChange(i,n).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(e,n).catch(()=>{})}}didChangeNotebookDocument(e){let n=e.notebook,r=this.notebookSyncInfo.get(n.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(n);if(i===void 0)return;this.didOpen(n,i,r)}else{let i=this.getMatchingCells(n);if(i===void 0){this.didClose(n,r);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,n=this.notebookSyncInfo.get(e.uri.toString())){if(n===void 0)return;let r=e.getCells().filter(i=>n.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let n=this.getMatchingCells(e);if(n!==void 0)return this.doSendOpen(e,n)}async doSendOpen(e,n){let r=async(s,o)=>{let a=ps.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),c=o.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(br.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),fc.create(n)),i?.didOpen!==void 0?i.didOpen(e,n,r):r(e,n)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,n=this.getMatchingCells(e.notebook)){let r=async s=>{try{await this.client.sendNotification(br.DidChangeNotebookDocumentNotification.type,{notebookDocument:ps.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:ps.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),fc.create(n??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let n=async i=>{try{await this.client.sendNotification(br.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,n):n(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,n){let r=async(s,o)=>{try{await this.client.sendNotification(br.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,n,r):r(e,n)}asNotebookDocumentChangeEvent(e,n,r,i){if(n!==void 0&&n.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};n?.metadata!==void 0&&(s.metadata=ps.c2p.asMetadata(n.metadata));let o;if(n?.cellChanges!==void 0&&n.cellChanges.length>0){let a=[];o=new Set(i.map(c=>c.document.uri.toString()));for(let c of n.cellChanges)o.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if((n?.contentChanges!==void 0&&n.contentChanges.length>0||n===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,c=i,u=Xf.computeDiff(a,c,!1),l,d;if(u!==void 0){l=u.cells===void 0?new Map:new Map(u.cells.map(m=>[m.document.uri.toString(),m])),d=u.deleteCount===0?new Map:new Map(a.slice(u.start,u.start+u.deleteCount).map(m=>[m.document.uri.toString(),m]));for(let m of Array.from(d.keys()))l.has(m)&&(d.delete(m),l.delete(m));s.cells=s.cells??{};let h=[],p=[];if(l.size>0||d.size>0){for(let m of l.values())h.push(m);for(let m of d.values())p.push(m)}s.cells.structure={array:u,didOpen:h,didClose:p}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,n=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Jf.matchNotebook(r.notebook,e)){let i=this.filterCells(e,n,r.cells);return i.length===0?void 0:i}}}cellMatches(e,n){let r=this.getMatchingCells(e,[n]);return r!==void 0&&r[0]===n}filterCells(e,n,r){let i=r!==void 0?n.filter(s=>{let o=s.document.languageId;return r.some(a=>a.language==="*"||o===a.language)}):n;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},Sr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=br.NotebookDocumentSyncRegistrationType.type,jt.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==Sr.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof gs&&s.didOpenNotebookCellTextDocument(r,i)}),jt.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;let r=n.document;if(r.uri.scheme!==Sr.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let s of this.registrations.values())s instanceof gs&&s.didChangeNotebookCellTextDocument(i,n)}),jt.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==Sr.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof gs&&s.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let n=e.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let n=Sy(Sy(e,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(e){let n=e.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(dc.asDocumentSelector(n)))}initialize(e){let n=e.notebookDocumentSync;if(n===void 0)return;let r=n.id??Kx.generateUuid();this.register({id:r,registerOptions:n})}register(e){let n=new gs(this.client,e.registerOptions);this.registrations.set(e.id,n)}unregister(e){let n=this.registrations.get(e);n&&n.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==Sr.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&jt.languages.match(this.dedicatedChannel,e)>0)return!0;for(let n of this.registrations.values())if(n.handles(e))return!0;return!1}getProvider(e){for(let n of this.registrations.values())if(n.handles(e.document))return n}findNotebookDocumentAndCell(e){let n=e.uri.toString();for(let r of jt.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===n)return[r,i];return[void 0,void 0]}};hc.NotebookDocumentSyncFeature=Sr;Sr.CellScheme="vscode-notebook-cell"});var Ty=w(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.SyncConfigurationFeature=Gr.toJSONObject=Gr.ConfigurationFeature=void 0;var ms=require("vscode"),ko=le(),Vx=Rn(),Xx=et(),Dy=Ee(),Yf=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(ko.ConfigurationRequest.type,(n,r)=>{let i=o=>{let a=[];for(let c of o.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=bi(ms.workspace.getConfiguration(void 0,e).get(n));else{let s=ms.workspace.getConfiguration(n.substr(0,i),e);s&&(r=bi(s.get(n.substr(i+1))))}}else{let i=ms.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=bi(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};Gr.ConfigurationFeature=Yf;function bi(t){if(t){if(Array.isArray(t))return t.map(bi);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=bi(t[n]));return e}}return t}Gr.toJSONObject=bi;var Qf=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ko.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Dy.ensure)((0,Dy.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:Xx.generateUuid(),registerOptions:{section:e}})}register(e){let n=ms.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){let r;if(Vx.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(a=>n.affectsConfiguration(a)))return;let i=async o=>o===void 0?this._client.sendNotification(ko.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(ko.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(r,i):i(r)).catch(o=>{this._client.error(`Sending notification ${ko.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function n(s,o){let a=s;for(let c=0;c<o.length-1;c++){let u=a[o[c]];u||(u=Object.create(null),a[o[c]]=u),a=u}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),c=null;if(a>=0?c=ms.workspace.getConfiguration(o.substr(0,a),r).get(o.substr(a+1)):c=ms.workspace.getConfiguration(void 0,r).get(o),c){let u=e[s].split(".");n(i,u)[u[u.length-1]]=bi(c)}}return i}};Gr.SyncConfigurationFeature=Qf});var Ey=w(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.DidSaveTextDocumentFeature=tn.WillSaveWaitUntilFeature=tn.WillSaveFeature=tn.DidChangeTextDocumentFeature=tn.DidCloseTextDocumentFeature=tn.DidOpenTextDocumentFeature=void 0;var En=require("vscode"),vt=le(),tt=Ee(),Jx=xo(),vs=et(),Zf=class extends tt.TextDocumentEventFeature{constructor(e,n){super(e,En.workspace.onDidOpenTextDocument,vt.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,tt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,tt.ensure)((0,tt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:vs.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return vt.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);En.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&En.languages.match(n,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(r,o):o(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.set(e.uri.toString(),e)}};tn.DidOpenTextDocumentFeature=Zf;var eh=class extends tt.TextDocumentEventFeature{constructor(e,n){super(e,En.workspace.onDidCloseTextDocument,vt.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),r=>r,tt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get registrationType(){return vt.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,tt.ensure)((0,tt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:vs.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e,n,r){super.notificationSent(e,n,r),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(En.languages.match(n,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};tn.DidCloseTextDocumentFeature=eh;var th=class extends tt.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new En.EventEmitter}get registrationType(){return vt.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,tt.ensure)((0,tt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==vt.TextDocumentSyncKind.None&&this.register({id:vs.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=En.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let n=[];for(let r of this._changeData.values())if(En.languages.match(r.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let i=this._client.middleware;if(r.syncKind===vt.TextDocumentSyncKind.Incremental){let s=async o=>{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(o);await this._client.sendNotification(vt.DidChangeTextDocumentNotification.type,a),this.notificationSent(o,vt.DidChangeTextDocumentNotification.type,a)};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}else if(r.syncKind===vt.TextDocumentSyncKind.Full){let s=async o=>{let a=async c=>{let u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c.document);await this._client.sendNotification(vt.DidChangeTextDocumentNotification.type,u),this.notificationSent(c,vt.DidChangeTextDocumentNotification.type,u)};return this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>a(o))):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new Jx.Delayer(200)},this._changeDelayer.delayer.trigger(()=>a(o),-1))};n.push(i.didChange?i.didChange(e,o=>s(o)):s(e))}}return Promise.all(n).then(void 0,r=>{throw this._client.error(`Sending document notification ${vt.DidChangeTextDocumentNotification.type.method} failed`,r),r})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,n,r){this._onNotificationSent.fire({original:e,type:n,params:r})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if(En.languages.match(n.documentSelector,e)>0)return{send:r=>this.callback(r)}}};tn.DidChangeTextDocumentFeature=th;var nh=class extends tt.TextDocumentEventFeature{constructor(e){super(e,En.workspace.onWillSaveTextDocument,vt.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,r)=>tt.TextDocumentEventFeature.textDocumentFilter(n,r.document))}get registrationType(){return vt.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=(0,tt.ensure)((0,tt.ensure)(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:vs.generateUuid(),registerOptions:{documentSelector:n}})}};tn.WillSaveFeature=nh;var rh=class extends tt.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return vt.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=(0,tt.ensure)((0,tt.ensure)(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:vs.generateUuid(),registerOptions:{documentSelector:n}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=En.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(tt.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let n=this._client.middleware,r=i=>this._client.sendRequest(vt.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};tn.WillSaveWaitUntilFeature=rh;var ih=class extends tt.TextDocumentEventFeature{constructor(e){super(e,En.workspace.onDidSaveTextDocument,vt.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,tt.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return vt.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,tt.ensure)((0,tt.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:vs.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}};tn.DidSaveTextDocumentFeature=ih});var xy=w(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.CompletionItemFeature=void 0;var Yx=require("vscode"),Re=le(),sh=Ee(),Qx=et(),Zx=[Re.CompletionItemKind.Text,Re.CompletionItemKind.Method,Re.CompletionItemKind.Function,Re.CompletionItemKind.Constructor,Re.CompletionItemKind.Field,Re.CompletionItemKind.Variable,Re.CompletionItemKind.Class,Re.CompletionItemKind.Interface,Re.CompletionItemKind.Module,Re.CompletionItemKind.Property,Re.CompletionItemKind.Unit,Re.CompletionItemKind.Value,Re.CompletionItemKind.Enum,Re.CompletionItemKind.Keyword,Re.CompletionItemKind.Snippet,Re.CompletionItemKind.Color,Re.CompletionItemKind.File,Re.CompletionItemKind.Reference,Re.CompletionItemKind.Folder,Re.CompletionItemKind.EnumMember,Re.CompletionItemKind.Constant,Re.CompletionItemKind.Struct,Re.CompletionItemKind.Event,Re.CompletionItemKind.Operator,Re.CompletionItemKind.TypeParameter],oh=class extends sh.TextDocumentLanguageFeature{constructor(e){super(e,Re.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let n=(0,sh.ensure)((0,sh.ensure)(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Re.MarkupKind.Markdown,Re.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[Re.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[Re.InsertTextMode.asIs,Re.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=Re.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:Zx},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);!r||this.register({id:Qx.generateUuid(),registerOptions:r})}registerLanguageProvider(e,n){this.labelDetailsSupport.set(n,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(a,c,u,l)=>{let d=this._client,h=this._client.middleware,p=(m,y,_,S)=>d.sendRequest(Re.CompletionRequest.type,d.code2ProtocolConverter.asCompletionParams(m,y,_),S).then(T=>S.isCancellationRequested?null:d.protocol2CodeConverter.asCompletionResult(T,i,S),T=>d.handleFailedRequest(Re.CompletionRequest.type,S,T,null));return h.provideCompletionItem?h.provideCompletionItem(a,c,l,u,p):p(a,c,l,u)},resolveCompletionItem:e.resolveProvider?(a,c)=>{let u=this._client,l=this._client.middleware,d=(h,p)=>u.sendRequest(Re.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(h,!!this.labelDetailsSupport.get(n)),p).then(m=>p.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(m),m=>u.handleFailedRequest(Re.CompletionResolveRequest.type,p,m,h));return l.resolveCompletionItem?l.resolveCompletionItem(a,c,d):d(a,c)}:void 0};return[Yx.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...r),o]}};pc.CompletionItemFeature=oh});var Py=w(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.HoverFeature=void 0;var eP=require("vscode"),No=le(),ah=Ee(),tP=et(),ch=class extends ah.TextDocumentLanguageFeature{constructor(e){super(e,No.HoverRequest.type)}fillClientCapabilities(e){let n=(0,ah.ensure)((0,ah.ensure)(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[No.MarkupKind.Markdown,No.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);!r||this.register({id:tP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideHover:(i,s,o)=>{let a=this._client,c=(l,d,h)=>a.sendRequest(No.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asHover(p),p=>a.handleFailedRequest(No.HoverRequest.type,h,p,null)),u=a.middleware;return u.provideHover?u.provideHover(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return eP.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};gc.HoverFeature=ch});var qy=w(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.DefinitionFeature=void 0;var nP=require("vscode"),uh=le(),lh=Ee(),rP=et(),dh=class extends lh.TextDocumentLanguageFeature{constructor(e){super(e,uh.DefinitionRequest.type)}fillClientCapabilities(e){let n=(0,lh.ensure)((0,lh.ensure)(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);!r||this.register({id:rP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDefinition:(i,s,o)=>{let a=this._client,c=(l,d,h)=>a.sendRequest(uh.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,h),p=>a.handleFailedRequest(uh.DefinitionRequest.type,h,p,null)),u=a.middleware;return u.provideDefinition?u.provideDefinition(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return nP.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};mc.DefinitionFeature=dh});var ky=w(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.SignatureHelpFeature=void 0;var Oy=require("vscode"),Io=le(),fh=Ee(),iP=et(),hh=class extends fh.TextDocumentLanguageFeature{constructor(e){super(e,Io.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=(0,fh.ensure)((0,fh.ensure)(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[Io.MarkupKind.Markdown,Io.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);!r||this.register({id:iP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(r,i,s,o)=>{let a=this._client,c=(l,d,h,p)=>a.sendRequest(Io.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(l,d,h),p).then(m=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(m,p),m=>a.handleFailedRequest(Io.SignatureHelpRequest.type,p,m,null)),u=a.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(r,i,o,s,c):c(r,i,o,s)}};return[this.registerProvider(e,n),n]}registerProvider(e,n){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return Oy.languages.registerSignatureHelpProvider(r,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return Oy.languages.registerSignatureHelpProvider(r,n,i)}}};vc.SignatureHelpFeature=hh});var Ny=w(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.DocumentHighlightFeature=void 0;var sP=require("vscode"),ph=le(),gh=Ee(),oP=et(),mh=class extends gh.TextDocumentLanguageFeature{constructor(e){super(e,ph.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,gh.ensure)((0,gh.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);!r||this.register({id:oP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentHighlights:(i,s,o)=>{let a=this._client,c=(l,d,h)=>a.sendRequest(ph.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(p,h),p=>a.handleFailedRequest(ph.DocumentHighlightRequest.type,h,p,null)),u=a.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(i,s,o,c):c(i,s,o)}};return[sP.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};yc.DocumentHighlightFeature=mh});var _h=w(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.DocumentSymbolFeature=lr.SupportedSymbolTags=lr.SupportedSymbolKinds=void 0;var aP=require("vscode"),Ie=le(),vh=Ee(),cP=et();lr.SupportedSymbolKinds=[Ie.SymbolKind.File,Ie.SymbolKind.Module,Ie.SymbolKind.Namespace,Ie.SymbolKind.Package,Ie.SymbolKind.Class,Ie.SymbolKind.Method,Ie.SymbolKind.Property,Ie.SymbolKind.Field,Ie.SymbolKind.Constructor,Ie.SymbolKind.Enum,Ie.SymbolKind.Interface,Ie.SymbolKind.Function,Ie.SymbolKind.Variable,Ie.SymbolKind.Constant,Ie.SymbolKind.String,Ie.SymbolKind.Number,Ie.SymbolKind.Boolean,Ie.SymbolKind.Array,Ie.SymbolKind.Object,Ie.SymbolKind.Key,Ie.SymbolKind.Null,Ie.SymbolKind.EnumMember,Ie.SymbolKind.Struct,Ie.SymbolKind.Event,Ie.SymbolKind.Operator,Ie.SymbolKind.TypeParameter];lr.SupportedSymbolTags=[Ie.SymbolTag.Deprecated];var yh=class extends vh.TextDocumentLanguageFeature{constructor(e){super(e,Ie.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,vh.ensure)((0,vh.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:lr.SupportedSymbolKinds},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:lr.SupportedSymbolTags},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);!r||this.register({id:cP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentSymbols:(s,o)=>{let a=this._client,c=(l,d)=>a.sendRequest(Ie.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(l),d).then(async h=>{if(d.isCancellationRequested||h===void 0||h===null)return null;if(h.length===0)return[];{let p=h[0];return Ie.DocumentSymbol.is(p)?await a.protocol2CodeConverter.asDocumentSymbols(h,d):await a.protocol2CodeConverter.asSymbolInformations(h,d)}},h=>a.handleFailedRequest(Ie.DocumentSymbolRequest.type,d,h,null)),u=a.middleware;return u.provideDocumentSymbols?u.provideDocumentSymbols(s,o,c):c(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[aP.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,i),r]}};lr.DocumentSymbolFeature=yh});var Fy=w(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.WorkspaceSymbolFeature=void 0;var uP=require("vscode"),Fo=le(),wh=Ee(),Iy=_h(),lP=et(),Ch=class extends wh.WorkspaceFeature{constructor(e){super(e,Fo.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=(0,wh.ensure)((0,wh.ensure)(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:Iy.SupportedSymbolKinds},n.tagSupport={valueSet:Iy.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:lP.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(Fo.WorkspaceSymbolRequest.type,{query:c},u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(l,u),l=>s.handleFailedRequest(Fo.WorkspaceSymbolRequest.type,u,l,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,o):o(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let s=this._client,o=(c,u)=>s.sendRequest(Fo.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(l),l=>s.handleFailedRequest(Fo.WorkspaceSymbolResolveRequest.type,u,l,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,o):o(r,i)}:void 0};return[uP.languages.registerWorkspaceSymbolProvider(n),n]}};_c.WorkspaceSymbolFeature=Ch});var Ly=w(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.ReferencesFeature=void 0;var dP=require("vscode"),bh=le(),Sh=Ee(),fP=et(),Rh=class extends Sh.TextDocumentLanguageFeature{constructor(e){super(e,bh.ReferencesRequest.type)}fillClientCapabilities(e){(0,Sh.ensure)((0,Sh.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);!r||this.register({id:fP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideReferences:(i,s,o,a)=>{let c=this._client,u=(d,h,p,m)=>c.sendRequest(bh.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(d,h,p),m).then(y=>m.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(y,m),y=>c.handleFailedRequest(bh.ReferencesRequest.type,m,y,null)),l=c.middleware;return l.provideReferences?l.provideReferences(i,s,o,a,u):u(i,s,o,a)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return dP.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};wc.ReferencesFeature=Rh});var My=w(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.CodeActionFeature=void 0;var hP=require("vscode"),pn=le(),pP=et(),Dh=Ee(),Th=class extends Dh.TextDocumentLanguageFeature{constructor(e){super(e,pn.CodeActionRequest.type)}fillClientCapabilities(e){let n=(0,Dh.ensure)((0,Dh.ensure)(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[pn.CodeActionKind.Empty,pn.CodeActionKind.QuickFix,pn.CodeActionKind.Refactor,pn.CodeActionKind.RefactorExtract,pn.CodeActionKind.RefactorInline,pn.CodeActionKind.RefactorRewrite,pn.CodeActionKind.Source,pn.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);!r||this.register({id:pP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideCodeActions:(i,s,o,a)=>{let c=this._client,u=async(d,h,p,m)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(h),context:await c.code2ProtocolConverter.asCodeActionContext(p,m)};return c.sendRequest(pn.CodeActionRequest.type,y,m).then(_=>m.isCancellationRequested||_===null||_===void 0?null:c.protocol2CodeConverter.asCodeActionResult(_,m),_=>c.handleFailedRequest(pn.CodeActionRequest.type,m,_,null))},l=c.middleware;return l.provideCodeActions?l.provideCodeActions(i,s,o,a,u):u(i,s,o,a)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.middleware,c=async(u,l)=>o.sendRequest(pn.CodeActionResolveRequest.type,await o.code2ProtocolConverter.asCodeAction(u,l),l).then(d=>l.isCancellationRequested?u:o.protocol2CodeConverter.asCodeAction(d,l),d=>o.handleFailedRequest(pn.CodeActionResolveRequest.type,l,d,u));return a.resolveCodeAction?a.resolveCodeAction(i,s,c):c(i,s)}:void 0};return[hP.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};Cc.CodeActionFeature=Th});var jy=w(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.CodeLensFeature=void 0;var Ay=require("vscode"),ys=le(),gP=et(),Lo=Ee(),Eh=class extends Lo.TextDocumentLanguageFeature{constructor(e){super(e,ys.CodeLensRequest.type)}fillClientCapabilities(e){(0,Lo.ensure)((0,Lo.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Lo.ensure)((0,Lo.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(ys.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);!i||this.register({id:gP.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new Ay.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,o)=>{let a=this._client,c=(l,d)=>a.sendRequest(ys.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(l),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(h,d),h=>a.handleFailedRequest(ys.CodeLensRequest.type,d,h,null)),u=a.middleware;return u.provideCodeLenses?u.provideCodeLenses(s,o,c):c(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let a=this._client,c=(l,d)=>a.sendRequest(ys.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(l),d).then(h=>d.isCancellationRequested?l:a.protocol2CodeConverter.asCodeLens(h),h=>a.handleFailedRequest(ys.CodeLensResolveRequest.type,d,h,l)),u=a.middleware;return u.resolveCodeLens?u.resolveCodeLens(s,o,c):c(s,o)}:void 0};return[Ay.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};bc.CodeLensFeature=Eh});var $y=w(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.DocumentOnTypeFormattingFeature=Kr.DocumentRangeFormattingFeature=Kr.DocumentFormattingFeature=void 0;var Sc=require("vscode"),Rr=le(),Oh=et(),Dr=Ee(),Mo;(function(t){function e(n){let r=Sc.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(Mo||(Mo={}));var xh=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,Rr.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);!r||this.register({id:Oh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentFormattingEdits:(i,s,o)=>{let a=this._client,c=(l,d,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),options:a.code2ProtocolConverter.asFormattingOptions(d,Mo.fromConfiguration(l))};return a.sendRequest(Rr.DocumentFormattingRequest.type,p,h).then(m=>h.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(m,h),m=>a.handleFailedRequest(Rr.DocumentFormattingRequest.type,h,m,null))},u=a.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(i,s,o,c):c(i,s,o)}};return[Sc.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Kr.DocumentFormattingFeature=xh;var Ph=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,Rr.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);!r||this.register({id:Oh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,s,o,a)=>{let c=this._client,u=(d,h,p,m)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(h),options:c.code2ProtocolConverter.asFormattingOptions(p,Mo.fromConfiguration(d))};return c.sendRequest(Rr.DocumentRangeFormattingRequest.type,y,m).then(_=>m.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(_,m),_=>c.handleFailedRequest(Rr.DocumentRangeFormattingRequest.type,m,_,null))},l=c.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(i,s,o,a,u):u(i,s,o,a)}};return[Sc.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Kr.DocumentRangeFormattingFeature=Ph;var qh=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,Rr.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);!r||this.register({id:Oh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideOnTypeFormattingEdits:(s,o,a,c,u)=>{let l=this._client,d=(p,m,y,_,S)=>{let T={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(p),position:l.code2ProtocolConverter.asPosition(m),ch:y,options:l.code2ProtocolConverter.asFormattingOptions(_,Mo.fromConfiguration(p))};return l.sendRequest(Rr.DocumentOnTypeFormattingRequest.type,T,S).then(x=>S.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(x,S),x=>l.handleFailedRequest(Rr.DocumentOnTypeFormattingRequest.type,S,x,null))},h=l.middleware;return h.provideOnTypeFormattingEdits?h.provideOnTypeFormattingEdits(s,o,a,c,u,d):d(s,o,a,c,u)}},i=e.moreTriggerCharacter||[];return[Sc.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,e.firstTriggerCharacter,...i),r]}};Kr.DocumentOnTypeFormattingFeature=qh});var Hy=w(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.RenameFeature=void 0;var mP=require("vscode"),Si=le(),vP=et(),Uy=Rn(),kh=Ee(),Nh=class extends kh.TextDocumentLanguageFeature{constructor(e){super(e,Si.RenameRequest.type)}fillClientCapabilities(e){let n=(0,kh.ensure)((0,kh.ensure)(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=Si.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);!r||(Uy.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:vP.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n=e.documentSelector,r={provideRenameEdits:(i,s,o,a)=>{let c=this._client,u=(d,h,p,m)=>{let y={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),position:c.code2ProtocolConverter.asPosition(h),newName:p};return c.sendRequest(Si.RenameRequest.type,y,m).then(_=>m.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(_,m),_=>c.handleFailedRequest(Si.RenameRequest.type,m,_,null,!1))},l=c.middleware;return l.provideRenameEdits?l.provideRenameEdits(i,s,o,a,u):u(i,s,o,a)},prepareRename:e.prepareProvider?(i,s,o)=>{let a=this._client,c=(l,d,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),position:a.code2ProtocolConverter.asPosition(d)};return a.sendRequest(Si.PrepareRenameRequest.type,p,h).then(m=>h.isCancellationRequested?null:Si.Range.is(m)?a.protocol2CodeConverter.asRange(m):this.isDefaultBehavior(m)?m.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):m&&Si.Range.is(m.range)?{range:a.protocol2CodeConverter.asRange(m.range),placeholder:m.placeholder}:Promise.reject(new Error("The element can't be renamed.")),m=>{throw typeof m.message=="string"?new Error(m.message):new Error("The element can't be renamed.")})},u=a.middleware;return u.prepareRename?u.prepareRename(i,s,o,c):c(i,s,o)}:void 0};return[this.registerProvider(n,r),r]}registerProvider(e,n){return mP.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}isDefaultBehavior(e){let n=e;return n&&Uy.boolean(n.defaultBehavior)}};Rc.RenameFeature=Nh});var Wy=w(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.DocumentLinkFeature=void 0;var yP=require("vscode"),Ao=le(),Ih=Ee(),_P=et(),Fh=class extends Ih.TextDocumentLanguageFeature{constructor(e){super(e,Ao.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=(0,Ih.ensure)((0,Ih.ensure)(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);!r||this.register({id:_P.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDocumentLinks:(i,s)=>{let o=this._client,a=(u,l)=>o.sendRequest(Ao.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(u),l).then(d=>l.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(d,l),d=>o.handleFailedRequest(Ao.DocumentLinkRequest.type,l,d,null)),c=o.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,s,a):a(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,a=(u,l)=>o.sendRequest(Ao.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(u),l).then(d=>l.isCancellationRequested?u:o.protocol2CodeConverter.asDocumentLink(d),d=>o.handleFailedRequest(Ao.DocumentLinkResolveRequest.type,l,d,u)),c=o.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,s,a):a(i,s)}:void 0};return[yP.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Dc.DocumentLinkFeature=Fh});var zy=w(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.ExecuteCommandFeature=void 0;var wP=require("vscode"),Lh=le(),CP=et(),By=Ee(),Mh=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Lh.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,By.ensure)((0,By.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:CP.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.middleware,i=(s,o)=>{let a={command:s,arguments:o};return n.sendRequest(Lh.ExecuteCommandRequest.type,a).then(void 0,c=>n.handleFailedRequest(Lh.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(wP.commands.registerCommand(o,(...a)=>r.executeCommand?r.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}};Tc.ExecuteCommandFeature=Mh});var Gy=w(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.FileSystemWatcherFeature=void 0;var bP=require("vscode"),Ri=le(),Ec=Ee(),Ah=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Ri.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Ec.ensure)((0,Ec.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Ec.ensure)((0,Ec.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let s=!0,o=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(s=(r.kind&Ri.WatchKind.Create)!==0,o=(r.kind&Ri.WatchKind.Change)!==0,a=(r.kind&Ri.WatchKind.Delete)!==0);let c=bP.workspace.createFileSystemWatcher(i,!s,!o,!a);this.hookListeners(c,s,o,a,n),n.push(c)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,s){n&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Ri.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Ri.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Ri.FileChangeType.Deleted}),null,s)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}};xc.FileSystemWatcherFeature=Ah});var Ky=w(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.ColorProviderFeature=void 0;var SP=require("vscode"),jo=le(),jh=Ee(),$h=class extends jh.TextDocumentLanguageFeature{constructor(e){super(e,jo.DocumentColorRequest.type)}fillClientCapabilities(e){(0,jh.ensure)((0,jh.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideColorPresentations:(i,s,o)=>{let a=this._client,c=(l,d,h)=>{let p={color:l,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d.document),range:a.code2ProtocolConverter.asRange(d.range)};return a.sendRequest(jo.ColorPresentationRequest.type,p,h).then(m=>h.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(m,h),m=>a.handleFailedRequest(jo.ColorPresentationRequest.type,h,m,null))},u=a.middleware;return u.provideColorPresentations?u.provideColorPresentations(i,s,o,c):c(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,a=(u,l)=>{let d={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u)};return o.sendRequest(jo.DocumentColorRequest.type,d,l).then(h=>l.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(h,l),h=>o.handleFailedRequest(jo.DocumentColorRequest.type,l,h,null))},c=o.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,s,a):a(i,s)}};return[SP.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Pc.ColorProviderFeature=$h});var Vy=w(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.ImplementationFeature=void 0;var RP=require("vscode"),Uh=le(),Hh=Ee(),Wh=class extends Hh.TextDocumentLanguageFeature{constructor(e){super(e,Uh.ImplementationRequest.type)}fillClientCapabilities(e){let n=(0,Hh.ensure)((0,Hh.ensure)(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideImplementation:(i,s,o)=>{let a=this._client,c=(l,d,h)=>a.sendRequest(Uh.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,h),p=>a.handleFailedRequest(Uh.ImplementationRequest.type,h,p,null)),u=a.middleware;return u.provideImplementation?u.provideImplementation(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return RP.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};qc.ImplementationFeature=Wh});var Xy=w(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.TypeDefinitionFeature=void 0;var DP=require("vscode"),Bh=le(),$o=Ee(),zh=class extends $o.TextDocumentLanguageFeature{constructor(e){super(e,Bh.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,$o.ensure)((0,$o.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,$o.ensure)((0,$o.ensure)(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideTypeDefinition:(i,s,o)=>{let a=this._client,c=(l,d,h)=>a.sendRequest(Bh.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,h),p=>a.handleFailedRequest(Bh.TypeDefinitionRequest.type,h,p,null)),u=a.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return DP.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Oc.TypeDefinitionFeature=zh});var Jy=w(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.WorkspaceFoldersFeature=_s.arrayDiff=void 0;var TP=et(),kc=require("vscode"),Uo=le();function Gh(t,e){if(t!==void 0)return t[e]}function Kh(t,e){return t.filter(n=>e.indexOf(n)<0)}_s.arrayDiff=Kh;var Vh=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Uo.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=kc.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(Uo.WorkspaceFoldersRequest.type,s=>{let o=()=>{let c=kc.workspace.workspaceFolders;return c===void 0?null:c.map(l=>this.asProtocol(l))},a=n.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let r=Gh(Gh(Gh(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=TP.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let n;if(this._initialFolders&&e){let r=Kh(this._initialFolders,e),i=Kh(e,this._initialFolders);(i.length>0||r.length>0)&&(n=this.doSendEvent(i,r))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):e&&(n=this.doSendEvent(e,[]));n!==void 0&&n.catch(r=>{this._client.error(`Sending notification ${Uo.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Uo.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=kc.workspace.onDidChangeWorkspaceFolders(s=>{let o=u=>this.doSendEvent(u.added,u.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(u=>{this._client.error(`Sending notification ${Uo.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(n,i),this.sendInitialEvent(kc.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};_s.WorkspaceFoldersFeature=Vh});var Yy=w(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.FoldingRangeFeature=void 0;var EP=require("vscode"),ws=le(),Xh=Ee(),Jh=class extends Xh.TextDocumentLanguageFeature{constructor(e){super(e,ws.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=(0,Xh.ensure)((0,Xh.ensure)(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[ws.FoldingRangeKind.Comment,ws.FoldingRangeKind.Imports,ws.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1}}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideFoldingRanges:(i,s,o)=>{let a=this._client,c=(l,d,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l)};return a.sendRequest(ws.FoldingRangeRequest.type,p,h).then(m=>h.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(m,h),m=>a.handleFailedRequest(ws.FoldingRangeRequest.type,h,m,null))},u=a.middleware;return u.provideFoldingRanges?u.provideFoldingRanges(i,s,o,c):c(i,s,o)}};return[EP.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}};Nc.FoldingRangeFeature=Jh});var Qy=w(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.DeclarationFeature=void 0;var xP=require("vscode"),Yh=le(),Qh=Ee(),Zh=class extends Qh.TextDocumentLanguageFeature{constructor(e){super(e,Yh.DeclarationRequest.type)}fillClientCapabilities(e){let n=(0,Qh.ensure)((0,Qh.ensure)(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideDeclaration:(i,s,o)=>{let a=this._client,c=(l,d,h)=>a.sendRequest(Yh.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(p,h),p=>a.handleFailedRequest(Yh.DeclarationRequest.type,h,p,null)),u=a.middleware;return u.provideDeclaration?u.provideDeclaration(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return xP.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Ic.DeclarationFeature=Zh});var Zy=w(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.SelectionRangeFeature=void 0;var PP=require("vscode"),ep=le(),tp=Ee(),np=class extends tp.TextDocumentLanguageFeature{constructor(e){super(e,ep.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=(0,tp.ensure)((0,tp.ensure)(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideSelectionRanges:(i,s,o)=>{let a=this._client,c=async(l,d,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:await a.code2ProtocolConverter.asPositions(d,h)};return a.sendRequest(ep.SelectionRangeRequest.type,p,h).then(m=>h.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(m,h),m=>a.handleFailedRequest(ep.SelectionRangeRequest.type,h,m,null))},u=a.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return PP.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Fc.SelectionRangeFeature=np});var t_=w(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.ProgressFeature=void 0;var e_=le(),qP=qf();function OP(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var rp=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:e_.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){OP(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new qP.ProgressPart(this._client,i.token,n))};e.onRequest(e_.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Lc.ProgressFeature=rp});var n_=w(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.CallHierarchyFeature=void 0;var kP=require("vscode"),Di=le(),ip=Ee(),sp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(Di.CallHierarchyPrepareRequest.type,l,u).then(d=>u.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(d,u),d=>i.handleFailedRequest(Di.CallHierarchyPrepareRequest.type,u,d,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,n,r,o):o(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Di.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,a),u=>r.handleFailedRequest(Di.CallHierarchyIncomingCallsRequest.type,a,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,s):s(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Di.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,a),u=>r.handleFailedRequest(Di.CallHierarchyOutgoingCallsRequest.type,a,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,s):s(e,n)}},op=class extends ip.TextDocumentLanguageFeature{constructor(e){super(e,Di.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=e,r=(0,ip.ensure)((0,ip.ensure)(n,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new sp(n);return[kP.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Mc.CallHierarchyFeature=op});var r_=w(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.SemanticTokensFeature=void 0;var Ac=require("vscode"),fe=le(),Ho=Ee(),NP=Rn(),ap=class extends Ho.TextDocumentLanguageFeature{constructor(e){super(e,fe.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=(0,Ho.ensure)((0,Ho.ensure)(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[fe.SemanticTokenTypes.namespace,fe.SemanticTokenTypes.type,fe.SemanticTokenTypes.class,fe.SemanticTokenTypes.enum,fe.SemanticTokenTypes.interface,fe.SemanticTokenTypes.struct,fe.SemanticTokenTypes.typeParameter,fe.SemanticTokenTypes.parameter,fe.SemanticTokenTypes.variable,fe.SemanticTokenTypes.property,fe.SemanticTokenTypes.enumMember,fe.SemanticTokenTypes.event,fe.SemanticTokenTypes.function,fe.SemanticTokenTypes.method,fe.SemanticTokenTypes.macro,fe.SemanticTokenTypes.keyword,fe.SemanticTokenTypes.modifier,fe.SemanticTokenTypes.comment,fe.SemanticTokenTypes.string,fe.SemanticTokenTypes.number,fe.SemanticTokenTypes.regexp,fe.SemanticTokenTypes.operator,fe.SemanticTokenTypes.decorator],n.tokenModifiers=[fe.SemanticTokenModifiers.declaration,fe.SemanticTokenModifiers.definition,fe.SemanticTokenModifiers.readonly,fe.SemanticTokenModifiers.static,fe.SemanticTokenModifiers.deprecated,fe.SemanticTokenModifiers.abstract,fe.SemanticTokenModifiers.async,fe.SemanticTokenModifiers.modification,fe.SemanticTokenModifiers.documentation,fe.SemanticTokenModifiers.defaultLibrary],n.formats=[fe.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,Ho.ensure)((0,Ho.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(fe.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(n,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=e.documentSelector,r=NP.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new Ac.EventEmitter,o=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(p,m)=>{let y=this._client,_=y.middleware,S=(T,x)=>{let k={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(T)};return y.sendRequest(fe.SemanticTokensRequest.type,k,x).then(W=>x.isCancellationRequested?null:y.protocol2CodeConverter.asSemanticTokens(W,x),W=>y.handleFailedRequest(fe.SemanticTokensRequest.type,x,W,null))};return _.provideDocumentSemanticTokens?_.provideDocumentSemanticTokens(p,m,S):S(p,m)},provideDocumentSemanticTokensEdits:i?(p,m,y)=>{let _=this._client,S=_.middleware,T=(x,k,W)=>{let Q={textDocument:_.code2ProtocolConverter.asTextDocumentIdentifier(x),previousResultId:k};return _.sendRequest(fe.SemanticTokensDeltaRequest.type,Q,W).then(async oe=>W.isCancellationRequested?null:fe.SemanticTokens.is(oe)?await _.protocol2CodeConverter.asSemanticTokens(oe,W):await _.protocol2CodeConverter.asSemanticTokensEdits(oe,W),oe=>_.handleFailedRequest(fe.SemanticTokensDeltaRequest.type,W,oe,null))};return S.provideDocumentSemanticTokensEdits?S.provideDocumentSemanticTokensEdits(p,m,y,T):T(p,m,y)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(p,m,y)=>{let _=this._client,S=_.middleware,T=(x,k,W)=>{let Q={textDocument:_.code2ProtocolConverter.asTextDocumentIdentifier(x),range:_.code2ProtocolConverter.asRange(k)};return _.sendRequest(fe.SemanticTokensRangeRequest.type,Q,W).then(oe=>W.isCancellationRequested?null:_.protocol2CodeConverter.asSemanticTokens(oe,W),oe=>_.handleFailedRequest(fe.SemanticTokensRangeRequest.type,W,oe,null))};return S.provideDocumentRangeSemanticTokens?S.provideDocumentRangeSemanticTokens(p,m,y,T):T(p,m,y)}}:void 0,u=[],l=this._client,d=l.protocol2CodeConverter.asSemanticTokensLegend(e.legend),h=l.protocol2CodeConverter.asDocumentSelector(n);return o!==void 0&&u.push(Ac.languages.registerDocumentSemanticTokensProvider(h,o,d)),c!==void 0&&u.push(Ac.languages.registerDocumentRangeSemanticTokensProvider(h,c,d)),[new Ac.Disposable(()=>u.forEach(p=>p.dispose())),{range:c,full:o,onDidChangeSemanticTokensEmitter:s}]}};jc.SemanticTokensFeature=ap});var o_=w(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.WillDeleteFilesFeature=nn.WillRenameFilesFeature=nn.WillCreateFilesFeature=nn.DidDeleteFilesFeature=nn.DidRenameFilesFeature=nn.DidCreateFilesFeature=void 0;var xn=require("vscode"),IP=uc(),Tr=le(),FP=et();function i_(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function LP(t,e){return t[e]}function s_(t,e,n){t[e]=n}var Er=class{constructor(e,n,r,i,s){this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=i_(i_(e,"workspace"),"fileOperations");s_(n,"dynamicRegistration",!0),s_(n,this._clientCapability,!0)}initialize(e){let n=e.workspace?.fileOperations,r=n!==void 0?LP(n,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:FP.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new IP.Minimatch(r.pattern.glob,Er.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return Er.getFileType(e)}async filter(e,n){let r=await Promise.all(e.files.map(async s=>{let o=n(s),a=o.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==o.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;let l=await this.getFileType(o);if(l===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(l===xn.FileType.File&&u.kind===Tr.FileOperationPatternKind.file||l===xn.FileType.Directory&&u.kind===Tr.FileOperationPatternKind.folder)return!0}else if(u.kind===Tr.FileOperationPatternKind.folder&&await Er.getFileType(o)===xn.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return{...e,files:i}}static async getFileType(e){try{return(await xn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},$c=class extends Er{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._notificationType=r,this._accessUri=o,this._createParams=a}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(n,r)}}},Uc=class extends $c{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let n=e.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);let r=await Er.getFileType(e);return r&&this._fsPathFileTypes.set(n,r),r}async cacheFileTypes(e,n){await this.filter(e,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},cp=class extends $c{constructor(e){super(e,xn.workspace.onDidCreateFiles,Tr.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,n):n(e)}};nn.DidCreateFilesFeature=cp;var up=class extends Uc{constructor(e){super(e,xn.workspace.onDidRenameFiles,Tr.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=xn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,n=>n.oldUri))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,n):n(e)}};nn.DidRenameFilesFeature=up;var lp=class extends Uc{constructor(e){super(e,xn.workspace.onDidDeleteFiles,Tr.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=xn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,n=>n))}doSend(e,n){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,n):n(e)}};nn.DidDeleteFilesFeature=lp;var Wo=class extends Er{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s),this._requestType=r,this._accessUri=o,this._createParams=a}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},dp=class extends Wo{constructor(e){super(e,xn.workspace.onWillCreateFiles,Tr.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,n):n(e)}};nn.WillCreateFilesFeature=dp;var fp=class extends Wo{constructor(e){super(e,xn.workspace.onWillRenameFiles,Tr.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,n):n(e)}};nn.WillRenameFilesFeature=fp;var hp=class extends Wo{constructor(e){super(e,xn.workspace.onWillDeleteFiles,Tr.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,n):n(e)}};nn.WillDeleteFilesFeature=hp});var a_=w(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.LinkedEditingFeature=void 0;var MP=require("vscode"),pp=le(),gp=Ee(),mp=class extends gp.TextDocumentLanguageFeature{constructor(e){super(e,pp.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=(0,gp.ensure)((0,gp.ensure)(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r={provideLinkedEditingRanges:(i,s,o)=>{let a=this._client,c=(l,d,h)=>a.sendRequest(pp.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,d),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(p,h),p=>a.handleFailedRequest(pp.LinkedEditingRangeRequest.type,h,p,null)),u=a.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(i,s,o,c):c(i,s,o)}};return[this.registerProvider(n,r),r]}registerProvider(e,n){return MP.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Hc.LinkedEditingFeature=mp});var c_=w(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.TypeHierarchyFeature=void 0;var AP=require("vscode"),Ti=le(),vp=Ee(),yp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,n,r){let i=this.client,s=this.middleware,o=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(Ti.TypeHierarchyPrepareRequest.type,l,u).then(d=>u.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(d,u),d=>i.handleFailedRequest(Ti.TypeHierarchyPrepareRequest.type,u,d,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,n,r,o):o(e,n,r)}provideTypeHierarchySupertypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(Ti.TypeHierarchySupertypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(Ti.TypeHierarchySupertypesRequest.type,a,u,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,n,s):s(e,n)}provideTypeHierarchySubtypes(e,n){let r=this.client,i=this.middleware,s=(o,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(Ti.TypeHierarchySubtypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(Ti.TypeHierarchySubtypesRequest.type,a,u,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,n,s):s(e,n)}},_p=class extends vp.TextDocumentLanguageFeature{constructor(e){super(e,Ti.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=(0,vp.ensure)((0,vp.ensure)(e,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new yp(n);return[AP.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Wc.TypeHierarchyFeature=_p});var l_=w(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.InlineValueFeature=void 0;var u_=require("vscode"),Bc=le(),Bo=Ee(),wp=class extends Bo.TextDocumentLanguageFeature{constructor(e){super(e,Bc.InlineValueRequest.type)}fillClientCapabilities(e){(0,Bo.ensure)((0,Bo.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Bo.ensure)((0,Bo.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,n){this._client.onRequest(Bc.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(n,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new u_.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(s,o,a,c)=>{let u=this._client,l=(h,p,m,y)=>{let _={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(h),range:u.code2ProtocolConverter.asRange(p),context:u.code2ProtocolConverter.asInlineValueContext(m)};return u.sendRequest(Bc.InlineValueRequest.type,_,y).then(S=>y.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(S,y),S=>u.handleFailedRequest(Bc.InlineValueRequest.type,y,S,null))},d=u.middleware;return d.provideInlineValues?d.provideInlineValues(s,o,a,c,l):l(s,o,a,c)}};return[this.registerProvider(n,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,n){return u_.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};zc.InlineValueFeature=wp});var f_=w(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.InlayHintsFeature=void 0;var d_=require("vscode"),Cs=le(),zo=Ee(),Cp=class extends zo.TextDocumentLanguageFeature{constructor(e){super(e,Cs.InlayHintRequest.type)}fillClientCapabilities(e){let n=(0,zo.ensure)((0,zo.ensure)(e,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,zo.ensure)((0,zo.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,n){this._client.onRequest(Cs.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(n,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=e.documentSelector,r=new d_.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(s,o,a)=>{let c=this._client,u=async(d,h,p)=>{let m={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(h)};try{let y=await c.sendRequest(Cs.InlayHintRequest.type,m,p);return p.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(y,p)}catch(y){return c.handleFailedRequest(Cs.InlayHintRequest.type,p,y,null)}},l=c.middleware;return l.provideInlayHints?l.provideInlayHints(s,o,a,u):u(s,o,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let a=this._client,c=async(l,d)=>{try{let h=await a.sendRequest(Cs.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(l),d);if(d.isCancellationRequested)return null;let p=a.protocol2CodeConverter.asInlayHint(h,d);return d.isCancellationRequested?null:p}catch(h){return a.handleFailedRequest(Cs.InlayHintResolveRequest.type,d,h,null)}},u=a.middleware;return u.resolveInlayHint?u.resolveInlayHint(s,o,c):c(s,o)}:void 0,[this.registerProvider(n,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,n){return d_.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),n)}};Gc.InlayHintsFeature=Cp});var Dp=w(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.ProposedFeatures=Ve.BaseLanguageClient=Ve.MessageTransports=Ve.SuspendMode=Ve.State=Ve.CloseAction=Ve.ErrorAction=Ve.RevealOutputChannelOn=void 0;var je=require("vscode"),U=le(),jP=Gv(),$P=Xv(),Pn=Rn(),h_=xo(),p_=et(),UP=qf(),Jn=Ee(),HP=Vf(),g_=Ry(),m_=Ty(),bs=Ey(),WP=xy(),BP=Py(),zP=qy(),GP=ky(),KP=Ny(),VP=_h(),XP=Fy(),JP=Ly(),YP=My(),QP=jy(),bp=$y(),ZP=Hy(),eq=Wy(),tq=zy(),nq=Gy(),rq=Ky(),iq=Vy(),sq=Xy(),oq=Jy(),aq=Yy(),cq=Qy(),uq=Zy(),lq=t_(),dq=n_(),fq=r_(),Ss=o_(),hq=a_(),pq=c_(),gq=l_(),mq=f_(),Go;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Go=Ve.RevealOutputChannelOn||(Ve.RevealOutputChannelOn={}));var Vc;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(Vc=Ve.ErrorAction||(Ve.ErrorAction={}));var Ei;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(Ei=Ve.CloseAction||(Ve.CloseAction={}));var Kc;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(Kc=Ve.State||(Ve.State={}));var vq;(function(t){t.off="off",t.on="on"})(vq=Ve.SuspendMode||(Ve.SuspendMode={}));var Sp=class{constructor(e,n){this.client=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?{action:Vc.Continue}:{action:Vc.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Ei.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Ei.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Ei.Restart})}},Ce;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(Ce||(Ce={}));var yq;(function(t){function e(n){return n&&U.MessageReader.is(n.reader)&&U.MessageWriter.is(n.writer)}t.is=e})(yq=Ve.MessageTransports||(Ve.MessageTransports={}));var xi=class{constructor(e,n,r){this._traceFormat=U.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new h_.Semaphore(1),this._id=e,this._name=n,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??Go.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Ce.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new h_.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new U.Emitter,this._stateChangeEmitter=new U.Emitter,this._trace=U.Trace.Off,this._tracer={log:(s,o)=>{Pn.string(s)?this.logTrace(s,o):this.logObjectTrace(s)}},this._c2p=jP.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=$P.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=je.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){switch(this.$state){case Ce.Starting:return Kc.Starting;case Ce.Running:return Kc.Running;default:return Kc.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...n){if(this.$state===Ce.StartFailed||this.$state===Ce.Stopping||this.$state===Ce.Stopped)return Promise.reject(new U.ResponseError(U.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${Pn.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,n)),s={dispose:()=>{let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,n),s={dispose:()=>{this._pendingRequestHandlers.delete(r);let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),s.dispose()}}}async sendNotification(e,n){if(this.$state===Ce.StartFailed||this.$state===Ce.Stopping||this.$state===Ce.Stopped)return Promise.reject(new U.ResponseError(U.ErrorCodes.ConnectionInactive,"Client is not running"));try{let r=await this.$start();return await this.forceDocumentSync(),r.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${Pn.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,n);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,n)),s={dispose:()=>{let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,n),s={dispose:()=>{this._pendingNotificationHandlers.delete(r);let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),s.dispose()}}}async sendProgress(e,n,r){if(this.$state===Ce.StartFailed||this.$state===Ce.Stopping||this.$state===Ce.Stopped)return Promise.reject(new U.ResponseError(U.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}onProgress(e,n,r){this._progressHandlers.set(n,{type:e,handler:r});let i=this.activeConnection(),s,o=this._clientOptions.middleware?.handleWorkDoneProgress,a=U.WorkDoneProgress.is(e)&&o!==void 0?c=>{o(n,c,()=>r(c))}:r;return i!==void 0?(this._progressDisposables.set(n,i.onProgress(e,n,a)),s={dispose:()=>{let c=this._progressDisposables.get(n);c!==void 0&&(c.dispose(),this._progressDisposables.delete(n))}}):(this._pendingProgressHandlers.set(n,{type:e,handler:r}),s={dispose:()=>{this._pendingProgressHandlers.delete(n);let c=this._progressDisposables.get(n);c!==void 0&&(c.dispose(),this._progressDisposables.delete(n))}}),{dispose:()=>{this._progressHandlers.delete(n),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Sp(this,e??4)}async setTrace(e){this._trace=e;let n=this.activeConnection();n!==void 0&&await n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof U.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?Pn.string(e.stack)?e.stack:e.message:Pn.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Go.Info&&this.showNotificationMessage(U.MessageType.Info,e)}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Go.Warn&&this.showNotificationMessage(U.MessageType.Warning,e)}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n!=null&&this.outputChannel.appendLine(this.data2String(n)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=Go.Error)&&this.showNotificationMessage(U.MessageType.Error,e)}showNotificationMessage(e,n){n=n??"A request has failed. See the output for more information.",(e===U.MessageType.Error?je.window.showErrorMessage:e===U.MessageType.Warning?je.window.showWarningMessage:je.window.showInformationMessage)(n,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Ce.Initial||this.$state===Ce.Stopping||this.$state===Ce.Stopped}needsStop(){return this.$state===Ce.Starting||this.$state===Ce.Running}activeConnection(){return this.$state===Ce.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Ce.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Ce.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,n,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?je.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):je.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=Ce.Starting;try{let i=await this.createConnection();i.onNotification(U.LogMessageNotification.type,s=>{switch(s.type){case U.MessageType.Error:this.error(s.message,void 0,!1);break;case U.MessageType.Warning:this.warn(s.message,void 0,!1);break;case U.MessageType.Info:this.info(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(U.ShowMessageNotification.type,s=>{switch(s.type){case U.MessageType.Error:je.window.showErrorMessage(s.message);break;case U.MessageType.Warning:je.window.showWarningMessage(s.message);break;case U.MessageType.Info:je.window.showInformationMessage(s.message);break;default:je.window.showInformationMessage(s.message)}}),i.onRequest(U.ShowMessageRequest.type,s=>{let o;switch(s.type){case U.MessageType.Error:o=je.window.showErrorMessage;break;case U.MessageType.Warning:o=je.window.showWarningMessage;break;case U.MessageType.Info:o=je.window.showInformationMessage;break;default:o=je.window.showInformationMessage}let a=s.actions||[];return o(s.message,...a)}),i.onNotification(U.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(U.ShowDocumentRequest.type,async s=>{let o=async c=>{let u=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await je.env.openExternal(u)};{let l={};return c.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?l.preserveFocus=!0:c.takeFocus===!0&&(l.preserveFocus=!1),await je.window.showTextDocument(u,l),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(s,o):o(s)}),i.listen(),await this.initialize(i),n()}catch(i){this.$state=Ce.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,n;return[new Promise((i,s)=>{e=i,n=s}),e,n]}async initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:je.env.appName,version:je.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(je.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Pn.func(n)?n():n,trace:U.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=p_.generateUuid(),a=new UP.ProgressPart(e,o);s.workDoneToken=o;try{let c=await this.doInitialize(e,s);return a.done(),c}catch(c){throw a.cancel(),c}}else return this.doInitialize(e,s)}async doInitialize(e,n){try{let r=await e.initialize(n);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==U.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=Ce.Running;let i;Pn.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===U.TextDocumentSyncKind.None?i={openClose:!1,change:U.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(U.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(U.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(U.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(U.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(U.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof U.ResponseError&&r.data&&r.data.retry?je.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&je.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=je.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,n){if(this.$state===Ce.Stopped||this.$state===Ce.Initial)return;if(this.$state===Ce.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==Ce.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Ce.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,U.RAL)().timer.setTimeout(o,n)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(r);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=Ce.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let n=this._listeners.splice(0,this._listeners.length);for(let r of n)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let n=this;async function r(s){return n._fileEvents.push(s),n._fileEventDelayer.trigger(async()=>{let o=await n.$start();await n.forceDocumentSync();let a=o.sendNotification(U.DidChangeWatchedFilesNotification.type,{changes:n._fileEvents});return n._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(s=>{n.error("Notify file events failed.",s)})}async forceDocumentSync(){return this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(U.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===n&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,U.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[n,r]=e.value;this._diagnosticQueue.delete(n);let i=new je.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:n,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(n),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(o,s,(c,u)=>this.setDiagnostics(c,u)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,n){!this._diagnostics||this._diagnostics.set(e,n)}async $start(){if(this.$state===Ce.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o)},n=()=>{this.handleConnectionClosed()},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=_q(r.reader,r.writer,e,n,this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===Ce.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Ei.DoNotRestart};if(this.$state!==Ce.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Ei.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===Ce.Starting?this.$state=Ce.StartFailed:this.$state=Ce.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Ei.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=Ce.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(n=>this.error("Restarting server failed",n,"force")))}handleConnectionError(e,n,r){let i=this._clientOptions.errorHandler.error(e,n,r);i.action===Vc.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)}))}hookConfigurationChanged(e){this._listeners.push(je.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,n=!1){let r=je.workspace.getConfiguration(this._id),i=U.Trace.Off,s=U.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=U.Trace.fromString(o):(i=U.Trace.fromString(r.get("trace.server.verbosity","off")),s=U.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;Pn.array(n)?r=n:r=[n],r&&this._dynamicFeatures.get(U.DidChangeWatchedFilesNotification.type.method).registerRaw(p_.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),Jn.DynamicFeature.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let n=this.getFeature(U.NotebookDocumentSyncRegistrationType.method);return n===void 0||!(n instanceof g_.NotebookDocumentSyncFeature)?!1:n.handles(e)}registerBuiltinFeatures(){this.registerFeature(new m_.ConfigurationFeature(this)),this.registerFeature(new bs.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new bs.DidChangeTextDocumentFeature(this)),this.registerFeature(new bs.WillSaveFeature(this)),this.registerFeature(new bs.WillSaveWaitUntilFeature(this)),this.registerFeature(new bs.DidSaveTextDocumentFeature(this)),this.registerFeature(new bs.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new nq.FileSystemWatcherFeature(this,e=>this.notifyFileEvent(e))),this.registerFeature(new WP.CompletionItemFeature(this)),this.registerFeature(new BP.HoverFeature(this)),this.registerFeature(new GP.SignatureHelpFeature(this)),this.registerFeature(new zP.DefinitionFeature(this)),this.registerFeature(new JP.ReferencesFeature(this)),this.registerFeature(new KP.DocumentHighlightFeature(this)),this.registerFeature(new VP.DocumentSymbolFeature(this)),this.registerFeature(new XP.WorkspaceSymbolFeature(this)),this.registerFeature(new YP.CodeActionFeature(this)),this.registerFeature(new QP.CodeLensFeature(this)),this.registerFeature(new bp.DocumentFormattingFeature(this)),this.registerFeature(new bp.DocumentRangeFormattingFeature(this)),this.registerFeature(new bp.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new ZP.RenameFeature(this)),this.registerFeature(new eq.DocumentLinkFeature(this)),this.registerFeature(new tq.ExecuteCommandFeature(this)),this.registerFeature(new m_.SyncConfigurationFeature(this)),this.registerFeature(new sq.TypeDefinitionFeature(this)),this.registerFeature(new iq.ImplementationFeature(this)),this.registerFeature(new rq.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new oq.WorkspaceFoldersFeature(this)),this.registerFeature(new aq.FoldingRangeFeature(this)),this.registerFeature(new cq.DeclarationFeature(this)),this.registerFeature(new uq.SelectionRangeFeature(this)),this.registerFeature(new lq.ProgressFeature(this)),this.registerFeature(new dq.CallHierarchyFeature(this)),this.registerFeature(new fq.SemanticTokensFeature(this)),this.registerFeature(new hq.LinkedEditingFeature(this)),this.registerFeature(new Ss.DidCreateFilesFeature(this)),this.registerFeature(new Ss.DidRenameFilesFeature(this)),this.registerFeature(new Ss.DidDeleteFilesFeature(this)),this.registerFeature(new Ss.WillCreateFilesFeature(this)),this.registerFeature(new Ss.WillRenameFilesFeature(this)),this.registerFeature(new Ss.WillDeleteFilesFeature(this)),this.registerFeature(new pq.TypeHierarchyFeature(this)),this.registerFeature(new gq.InlineValueFeature(this)),this.registerFeature(new mq.InlayHintsFeature(this)),this.registerFeature(new HP.DiagnosticFeature(this)),this.registerFeature(new g_.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(v_.createAll(this))}fillInitializeParams(e){for(let n of this._features)Pn.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Jn.ensure)(e,"workspace").applyEdit=!0;let n=(0,Jn.ensure)((0,Jn.ensure)(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[U.ResourceOperationKind.Create,U.ResourceOperationKind.Rename,U.ResourceOperationKind.Delete],n.failureHandling=U.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,Jn.ensure)((0,Jn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[U.DiagnosticTag.Unnecessary,U.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,Jn.ensure)(e,"window"),s=(0,Jn.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,Jn.ensure)(i,"showDocument");o.support=!0;let a=(0,Jn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(xi.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)Pn.func(r.preInitialize)&&r.preInitialize(this._capabilities,n);for(let r of this._features)r.initialize(this._capabilities,n)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let n of e.registrations)this._ignoredRegistrations.add(n.id);return}for(let n of e.registrations){let r=this._dynamicFeatures.get(n.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Registration failed.`));let i=n.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:n.id,registerOptions:i};try{r.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){for(let n of e.unregisterations){if(this._ignoredRegistrations.has(n.id))continue;let r=this._dynamicFeatures.get(n.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${n.method} found. Unregistration failed.`));r.unregister(n.id)}}async handleApplyWorkspaceEdit(e){let n=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(n)),i=new Map;je.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(n.documentChanges){for(let o of n.documentChanges)if(U.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let a=i.get(o.textDocument.uri);if(a&&a.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):Pn.asPromise(je.workspace.applyEdit(r).then(o=>({applied:o})))}handleFailedRequest(e,n,r,i,s=!0){if(r instanceof U.ResponseError){if(r.code===U.ErrorCodes.PendingResponseRejected||r.code===U.ErrorCodes.ConnectionInactive)return i;if(r.code===U.LSPErrorCodes.RequestCancelled||r.code===U.LSPErrorCodes.ServerCancelled){if(n!==void 0&&n.isCancellationRequested)return i;throw r.data!==void 0?new Jn.LSPCancellationError(r.data):new je.CancellationError}else if(r.code===U.LSPErrorCodes.ContentModified){if(xi.RequestsToCancelOnContentModified.has(e.method))throw new je.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,s),r}};Ve.BaseLanguageClient=xi;xi.RequestsToCancelOnContentModified=new Set([U.SemanticTokensRequest.method,U.SemanticTokensRangeRequest.method,U.SemanticTokensDeltaRequest.method]);var Rp=class{error(e){(0,U.RAL)().console.error(e)}warn(e){(0,U.RAL)().console.warn(e)}info(e){(0,U.RAL)().console.info(e)}log(e){(0,U.RAL)().console.log(e)}};function _q(t,e,n,r,i){let s=-1,o=new Rp,a=(0,U.createProtocolConnection)(t,e,o,i);return a.onError(u=>{n(u[0],u[1],u[2])}),a.onClose(r),{get lastUsed(){return s},resetLastUsed:()=>{s=-1},listen:()=>a.listen(),sendRequest:(u,...l)=>(s=Date.now(),a.sendRequest(u,...l)),onRequest:(u,l)=>a.onRequest(u,l),hasPendingResponse:()=>a.hasPendingResponse(),sendNotification:(u,l)=>(s=Date.now(),a.sendNotification(u,l)),onNotification:(u,l)=>a.onNotification(u,l),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(u,l,d)=>{let h={sendNotification:!1,traceFormat:U.TraceFormat.Text};return d===void 0?a.trace(u,l,h):(Pn.boolean(d),a.trace(u,l,d))},initialize:u=>(s=Date.now(),a.sendRequest(U.InitializeRequest.type,u)),shutdown:()=>(s=Date.now(),a.sendRequest(U.ShutdownRequest.type,void 0)),exit:()=>(s=Date.now(),a.sendNotification(U.ExitNotification.type)),end:()=>a.end(),dispose:()=>a.dispose()}}var v_;(function(t){function e(n){return[]}t.createAll=e})(v_=Ve.ProposedFeatures||(Ve.ProposedFeatures={}))});var __=w(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.terminate=void 0;var y_=require("child_process"),wq=require("path"),Cq=process.platform==="win32",bq=process.platform==="darwin",Sq=process.platform==="linux";function Rq(t,e){if(Cq)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),y_.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(Sq||bq)try{var n=(0,wq.join)(__dirname,"terminateProcess.sh"),r=y_.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}Xc.terminate=Rq});var Tp=w((LA,w_)=>{"use strict";w_.exports=le()});var Jc=w((MA,C_)=>{var Dq="2.0.0",Tq=Number.MAX_SAFE_INTEGER||9007199254740991,Eq=16;C_.exports={SEMVER_SPEC_VERSION:Dq,MAX_LENGTH:256,MAX_SAFE_INTEGER:Tq,MAX_SAFE_COMPONENT_LENGTH:Eq}});var Ko=w((AA,b_)=>{var xq=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};b_.exports=xq});var Vo=w((Vr,S_)=>{var{MAX_SAFE_COMPONENT_LENGTH:Ep}=Jc(),Pq=Ko();Vr=S_.exports={};var qq=Vr.re=[],V=Vr.src=[],X=Vr.t={},Oq=0,ve=(t,e,n)=>{let r=Oq++;Pq(t,r,e),X[t]=r,V[r]=e,qq[r]=new RegExp(e,n?"g":void 0)};ve("NUMERICIDENTIFIER","0|[1-9]\\d*");ve("NUMERICIDENTIFIERLOOSE","[0-9]+");ve("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ve("MAINVERSION",`(${V[X.NUMERICIDENTIFIER]})\\.(${V[X.NUMERICIDENTIFIER]})\\.(${V[X.NUMERICIDENTIFIER]})`);ve("MAINVERSIONLOOSE",`(${V[X.NUMERICIDENTIFIERLOOSE]})\\.(${V[X.NUMERICIDENTIFIERLOOSE]})\\.(${V[X.NUMERICIDENTIFIERLOOSE]})`);ve("PRERELEASEIDENTIFIER",`(?:${V[X.NUMERICIDENTIFIER]}|${V[X.NONNUMERICIDENTIFIER]})`);ve("PRERELEASEIDENTIFIERLOOSE",`(?:${V[X.NUMERICIDENTIFIERLOOSE]}|${V[X.NONNUMERICIDENTIFIER]})`);ve("PRERELEASE",`(?:-(${V[X.PRERELEASEIDENTIFIER]}(?:\\.${V[X.PRERELEASEIDENTIFIER]})*))`);ve("PRERELEASELOOSE",`(?:-?(${V[X.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${V[X.PRERELEASEIDENTIFIERLOOSE]})*))`);ve("BUILDIDENTIFIER","[0-9A-Za-z-]+");ve("BUILD",`(?:\\+(${V[X.BUILDIDENTIFIER]}(?:\\.${V[X.BUILDIDENTIFIER]})*))`);ve("FULLPLAIN",`v?${V[X.MAINVERSION]}${V[X.PRERELEASE]}?${V[X.BUILD]}?`);ve("FULL",`^${V[X.FULLPLAIN]}$`);ve("LOOSEPLAIN",`[v=\\s]*${V[X.MAINVERSIONLOOSE]}${V[X.PRERELEASELOOSE]}?${V[X.BUILD]}?`);ve("LOOSE",`^${V[X.LOOSEPLAIN]}$`);ve("GTLT","((?:<|>)?=?)");ve("XRANGEIDENTIFIERLOOSE",`${V[X.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ve("XRANGEIDENTIFIER",`${V[X.NUMERICIDENTIFIER]}|x|X|\\*`);ve("XRANGEPLAIN",`[v=\\s]*(${V[X.XRANGEIDENTIFIER]})(?:\\.(${V[X.XRANGEIDENTIFIER]})(?:\\.(${V[X.XRANGEIDENTIFIER]})(?:${V[X.PRERELEASE]})?${V[X.BUILD]}?)?)?`);ve("XRANGEPLAINLOOSE",`[v=\\s]*(${V[X.XRANGEIDENTIFIERLOOSE]})(?:\\.(${V[X.XRANGEIDENTIFIERLOOSE]})(?:\\.(${V[X.XRANGEIDENTIFIERLOOSE]})(?:${V[X.PRERELEASELOOSE]})?${V[X.BUILD]}?)?)?`);ve("XRANGE",`^${V[X.GTLT]}\\s*${V[X.XRANGEPLAIN]}$`);ve("XRANGELOOSE",`^${V[X.GTLT]}\\s*${V[X.XRANGEPLAINLOOSE]}$`);ve("COERCE",`(^|[^\\d])(\\d{1,${Ep}})(?:\\.(\\d{1,${Ep}}))?(?:\\.(\\d{1,${Ep}}))?(?:$|[^\\d])`);ve("COERCERTL",V[X.COERCE],!0);ve("LONETILDE","(?:~>?)");ve("TILDETRIM",`(\\s*)${V[X.LONETILDE]}\\s+`,!0);Vr.tildeTrimReplace="$1~";ve("TILDE",`^${V[X.LONETILDE]}${V[X.XRANGEPLAIN]}$`);ve("TILDELOOSE",`^${V[X.LONETILDE]}${V[X.XRANGEPLAINLOOSE]}$`);ve("LONECARET","(?:\\^)");ve("CARETTRIM",`(\\s*)${V[X.LONECARET]}\\s+`,!0);Vr.caretTrimReplace="$1^";ve("CARET",`^${V[X.LONECARET]}${V[X.XRANGEPLAIN]}$`);ve("CARETLOOSE",`^${V[X.LONECARET]}${V[X.XRANGEPLAINLOOSE]}$`);ve("COMPARATORLOOSE",`^${V[X.GTLT]}\\s*(${V[X.LOOSEPLAIN]})$|^$`);ve("COMPARATOR",`^${V[X.GTLT]}\\s*(${V[X.FULLPLAIN]})$|^$`);ve("COMPARATORTRIM",`(\\s*)${V[X.GTLT]}\\s*(${V[X.LOOSEPLAIN]}|${V[X.XRANGEPLAIN]})`,!0);Vr.comparatorTrimReplace="$1$2$3";ve("HYPHENRANGE",`^\\s*(${V[X.XRANGEPLAIN]})\\s+-\\s+(${V[X.XRANGEPLAIN]})\\s*$`);ve("HYPHENRANGELOOSE",`^\\s*(${V[X.XRANGEPLAINLOOSE]})\\s+-\\s+(${V[X.XRANGEPLAINLOOSE]})\\s*$`);ve("STAR","(<|>)?=?\\s*\\*");ve("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ve("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Xo=w((jA,R_)=>{var kq=["includePrerelease","loose","rtl"],Nq=t=>t?typeof t!="object"?{loose:!0}:kq.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};R_.exports=Nq});var x_=w(($A,E_)=>{var D_=/^[0-9]+$/,T_=(t,e)=>{let n=D_.test(t),r=D_.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Iq=(t,e)=>T_(e,t);E_.exports={compareIdentifiers:T_,rcompareIdentifiers:Iq}});var Jo=w((UA,k_)=>{var Yc=Ko(),{MAX_LENGTH:P_,MAX_SAFE_INTEGER:Qc}=Jc(),{re:q_,t:O_}=Vo(),Fq=Xo(),{compareIdentifiers:Rs}=x_(),gn=class{constructor(e,n){if(n=Fq(n),e instanceof gn){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>P_)throw new TypeError(`version is longer than ${P_} characters`);Yc("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?q_[O_.LOOSE]:q_[O_.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Qc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Qc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Qc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Qc)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Yc("SemVer.compare",this.version,this.options,e),!(e instanceof gn)){if(typeof e=="string"&&e===this.version)return 0;e=new gn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof gn||(e=new gn(e,this.options)),Rs(this.major,e.major)||Rs(this.minor,e.minor)||Rs(this.patch,e.patch)}comparePre(e){if(e instanceof gn||(e=new gn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(Yc("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Rs(r,i)}while(++n)}compareBuild(e){e instanceof gn||(e=new gn(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(Yc("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Rs(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(Rs(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};k_.exports=gn});var M_=w((HA,L_)=>{var{MAX_LENGTH:Lq}=Jc(),{re:N_,t:I_}=Vo(),F_=Jo(),Mq=Xo(),Aq=(t,e)=>{if(e=Mq(e),t instanceof F_)return t;if(typeof t!="string"||t.length>Lq||!(e.loose?N_[I_.LOOSE]:N_[I_.FULL]).test(t))return null;try{return new F_(t,e)}catch{return null}};L_.exports=Aq});var j_=w((WA,A_)=>{"use strict";A_.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var U_=w((BA,$_)=>{"use strict";$_.exports=Pe;Pe.Node=Pi;Pe.create=Pe;function Pe(t){var e=this;if(e instanceof Pe||(e=new Pe),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}Pe.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Pe.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Pe.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Pe.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)$q(this,arguments[t]);return this.length};Pe.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Uq(this,arguments[t]);return this.length};Pe.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Pe.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Pe.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};Pe.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};Pe.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};Pe.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};Pe.prototype.map=function(t,e){e=e||this;for(var n=new Pe,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};Pe.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Pe,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};Pe.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};Pe.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};Pe.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};Pe.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};Pe.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Pe;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};Pe.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Pe;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};Pe.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=jq(this,i,n[r]);return s};Pe.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function jq(t,e,n){var r=e===t.head?new Pi(n,null,e,t):new Pi(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function $q(t,e){t.tail=new Pi(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Uq(t,e){t.head=new Pi(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Pi(t,e,n,r){if(!(this instanceof Pi))return new Pi(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{j_()(Pe)}catch{}});var kp=w((zA,z_)=>{"use strict";var Hq=U_(),qi=Symbol("max"),Pr=Symbol("length"),Ds=Symbol("lengthCalculator"),Qo=Symbol("allowStale"),Oi=Symbol("maxAge"),xr=Symbol("dispose"),H_=Symbol("noDisposeOnSet"),St=Symbol("lruList"),Yn=Symbol("cache"),B_=Symbol("updateAgeOnGet"),xp=()=>1,qp=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[qi]=e.max||1/0,r=e.length||xp;if(this[Ds]=typeof r!="function"?xp:r,this[Qo]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Oi]=e.maxAge||0,this[xr]=e.dispose,this[H_]=e.noDisposeOnSet||!1,this[B_]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[qi]=e||1/0,Yo(this)}get max(){return this[qi]}set allowStale(e){this[Qo]=!!e}get allowStale(){return this[Qo]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Oi]=e,Yo(this)}get maxAge(){return this[Oi]}set lengthCalculator(e){typeof e!="function"&&(e=xp),e!==this[Ds]&&(this[Ds]=e,this[Pr]=0,this[St].forEach(n=>{n.length=this[Ds](n.value,n.key),this[Pr]+=n.length})),Yo(this)}get lengthCalculator(){return this[Ds]}get length(){return this[Pr]}get itemCount(){return this[St].length}rforEach(e,n){n=n||this;for(let r=this[St].tail;r!==null;){let i=r.prev;W_(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[St].head;r!==null;){let i=r.next;W_(this,e,r,n),r=i}}keys(){return this[St].toArray().map(e=>e.key)}values(){return this[St].toArray().map(e=>e.value)}reset(){this[xr]&&this[St]&&this[St].length&&this[St].forEach(e=>this[xr](e.key,e.value)),this[Yn]=new Map,this[St]=new Hq,this[Pr]=0}dump(){return this[St].map(e=>Zc(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[St]}set(e,n,r){if(r=r||this[Oi],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[Ds](n,e);if(this[Yn].has(e)){if(s>this[qi])return Ts(this,this[Yn].get(e)),!1;let c=this[Yn].get(e).value;return this[xr]&&(this[H_]||this[xr](e,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Pr]+=s-c.length,c.length=s,this.get(e),Yo(this),!0}let o=new Op(e,n,s,i,r);return o.length>this[qi]?(this[xr]&&this[xr](e,n),!1):(this[Pr]+=o.length,this[St].unshift(o),this[Yn].set(e,this[St].head),Yo(this),!0)}has(e){if(!this[Yn].has(e))return!1;let n=this[Yn].get(e).value;return!Zc(this,n)}get(e){return Pp(this,e,!0)}peek(e){return Pp(this,e,!1)}pop(){let e=this[St].tail;return e?(Ts(this,e),e.value):null}del(e){Ts(this,this[Yn].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Yn].forEach((e,n)=>Pp(this,n,!1))}},Pp=(t,e,n)=>{let r=t[Yn].get(e);if(r){let i=r.value;if(Zc(t,i)){if(Ts(t,r),!t[Qo])return}else n&&(t[B_]&&(r.value.now=Date.now()),t[St].unshiftNode(r));return i.value}},Zc=(t,e)=>{if(!e||!e.maxAge&&!t[Oi])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Oi]&&n>t[Oi]},Yo=t=>{if(t[Pr]>t[qi])for(let e=t[St].tail;t[Pr]>t[qi]&&e!==null;){let n=e.prev;Ts(t,e),e=n}},Ts=(t,e)=>{if(e){let n=e.value;t[xr]&&t[xr](n.key,n.value),t[Pr]-=n.length,t[Yn].delete(n.key),t[St].removeNode(e)}},Op=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}},W_=(t,e,n,r)=>{let i=n.value;Zc(t,i)&&(Ts(t,n),t[Qo]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};z_.exports=qp});var ki=w((GA,K_)=>{var G_=Jo(),Wq=(t,e,n)=>new G_(t,n).compare(new G_(e,n));K_.exports=Wq});var X_=w((KA,V_)=>{var Bq=ki(),zq=(t,e,n)=>Bq(t,e,n)===0;V_.exports=zq});var Y_=w((VA,J_)=>{var Gq=ki(),Kq=(t,e,n)=>Gq(t,e,n)!==0;J_.exports=Kq});var Z_=w((XA,Q_)=>{var Vq=ki(),Xq=(t,e,n)=>Vq(t,e,n)>0;Q_.exports=Xq});var tw=w((JA,ew)=>{var Jq=ki(),Yq=(t,e,n)=>Jq(t,e,n)>=0;ew.exports=Yq});var rw=w((YA,nw)=>{var Qq=ki(),Zq=(t,e,n)=>Qq(t,e,n)<0;nw.exports=Zq});var sw=w((QA,iw)=>{var eO=ki(),tO=(t,e,n)=>eO(t,e,n)<=0;iw.exports=tO});var aw=w((ZA,ow)=>{var nO=X_(),rO=Y_(),iO=Z_(),sO=tw(),oO=rw(),aO=sw(),cO=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return nO(t,n,r);case"!=":return rO(t,n,r);case">":return iO(t,n,r);case">=":return sO(t,n,r);case"<":return oO(t,n,r);case"<=":return aO(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};ow.exports=cO});var hw=w((ej,fw)=>{var Zo=Symbol("SemVer ANY"),Es=class{static get ANY(){return Zo}constructor(e,n){if(n=uO(n),e instanceof Es){if(e.loose===!!n.loose)return e;e=e.value}Ip("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===Zo?this.value="":this.value=this.operator+this.semver.version,Ip("comp",this)}parse(e){let n=this.options.loose?cw[uw.COMPARATORLOOSE]:cw[uw.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new lw(r[2],this.options.loose):this.semver=Zo}toString(){return this.value}test(e){if(Ip("Comparator.test",e,this.options.loose),this.semver===Zo||e===Zo)return!0;if(typeof e=="string")try{e=new lw(e,this.options)}catch{return!1}return Np(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof Es))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new dw(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new dw(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Np(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Np(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&o||a||c}};fw.exports=Es;var uO=Xo(),{re:cw,t:uw}=Vo(),Np=aw(),Ip=Ko(),lw=Jo(),dw=Fp()});var Fp=w((tj,vw)=>{var Ni=class{constructor(e,n){if(n=dO(n),e instanceof Ni)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new Ni(e.raw,n);if(e instanceof Lp)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!gw(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&mO(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=pw.get(r);if(i)return i;let s=this.options.loose,o=s?rn[Gt.HYPHENRANGELOOSE]:rn[Gt.HYPHENRANGE];e=e.replace(o,TO(this.options.includePrerelease)),nt("hyphen replace",e),e=e.replace(rn[Gt.COMPARATORTRIM],hO),nt("comparator trim",e),e=e.replace(rn[Gt.TILDETRIM],pO),e=e.replace(rn[Gt.CARETTRIM],gO),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(d=>vO(d,this.options)).join(" ").split(/\s+/).map(d=>DO(d,this.options));s&&(a=a.filter(d=>(nt("loose invalid filter",d,this.options),!!d.match(rn[Gt.COMPARATORLOOSE])))),nt("range list",a);let c=new Map,u=a.map(d=>new Lp(d,this.options));for(let d of u){if(gw(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return pw.set(r,l),l}intersects(e,n){if(!(e instanceof Ni))throw new TypeError("a Range is required");return this.set.some(r=>mw(r,n)&&e.set.some(i=>mw(i,n)&&r.every(s=>i.every(o=>s.intersects(o,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new fO(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(EO(this.set[n],e,this.options))return!0;return!1}};vw.exports=Ni;var lO=kp(),pw=new lO({max:1e3}),dO=Xo(),Lp=hw(),nt=Ko(),fO=Jo(),{re:rn,t:Gt,comparatorTrimReplace:hO,tildeTrimReplace:pO,caretTrimReplace:gO}=Vo(),gw=t=>t.value==="<0.0.0-0",mO=t=>t.value==="",mw=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},vO=(t,e)=>(nt("comp",t,e),t=wO(t,e),nt("caret",t),t=yO(t,e),nt("tildes",t),t=bO(t,e),nt("xrange",t),t=RO(t,e),nt("stars",t),t),Kt=t=>!t||t.toLowerCase()==="x"||t==="*",yO=(t,e)=>t.trim().split(/\s+/).map(n=>_O(n,e)).join(" "),_O=(t,e)=>{let n=e.loose?rn[Gt.TILDELOOSE]:rn[Gt.TILDE];return t.replace(n,(r,i,s,o,a)=>{nt("tilde",t,r,i,s,o,a);let c;return Kt(i)?c="":Kt(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Kt(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(nt("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,nt("tilde return",c),c})},wO=(t,e)=>t.trim().split(/\s+/).map(n=>CO(n,e)).join(" "),CO=(t,e)=>{nt("caret",t,e);let n=e.loose?rn[Gt.CARETLOOSE]:rn[Gt.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,o,a,c)=>{nt("caret",t,i,s,o,a,c);let u;return Kt(s)?u="":Kt(o)?u=`>=${s}.0.0${r} <${+s+1}.0.0-0`:Kt(a)?s==="0"?u=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:c?(nt("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(nt("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),nt("caret return",u),u})},bO=(t,e)=>(nt("replaceXRanges",t,e),t.split(/\s+/).map(n=>SO(n,e)).join(" ")),SO=(t,e)=>{t=t.trim();let n=e.loose?rn[Gt.XRANGELOOSE]:rn[Gt.XRANGE];return t.replace(n,(r,i,s,o,a,c)=>{nt("xRange",t,r,i,s,o,a,c);let u=Kt(s),l=u||Kt(o),d=l||Kt(a),h=d;return i==="="&&h&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&h?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(c="-0"),r=`${i+s}.${o}.${a}${c}`):l?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:d&&(r=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),nt("xRange return",r),r})},RO=(t,e)=>(nt("replaceStars",t,e),t.trim().replace(rn[Gt.STAR],"")),DO=(t,e)=>(nt("replaceGTE0",t,e),t.trim().replace(rn[e.includePrerelease?Gt.GTE0PRE:Gt.GTE0],"")),TO=t=>(e,n,r,i,s,o,a,c,u,l,d,h,p)=>(Kt(r)?n="":Kt(i)?n=`>=${r}.0.0${t?"-0":""}`:Kt(s)?n=`>=${r}.${i}.0${t?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Kt(u)?c="":Kt(l)?c=`<${+u+1}.0.0-0`:Kt(d)?c=`<${u}.${+l+1}.0-0`:h?c=`<=${u}.${l}.${d}-${h}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),EO=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(nt(t[r].semver),t[r].semver!==Lp.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var _w=w((nj,yw)=>{var xO=Fp(),PO=(t,e,n)=>{try{e=new xO(e,n)}catch{return!1}return e.test(t)};yw.exports=PO});var Cw=w(mn=>{"use strict";var qO=mn&&mn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Mp=mn&&mn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&qO(e,t,n)};Object.defineProperty(mn,"__esModule",{value:!0});mn.DiagnosticPullMode=mn.vsdiag=void 0;Mp(le(),mn);Mp(Ee(),mn);var ww=Vf();Object.defineProperty(mn,"vsdiag",{enumerable:!0,get:function(){return ww.vsdiag}});Object.defineProperty(mn,"DiagnosticPullMode",{enumerable:!0,get:function(){return ww.DiagnosticPullMode}});Mp(Dp(),mn)});var eu=w(Vt=>{"use strict";var OO=Vt&&Vt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Rw=Vt&&Vt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&OO(e,t,n)};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.SettingMonitor=Vt.LanguageClient=Vt.TransportKind=void 0;var qr=require("child_process"),Ap=require("fs"),jp=require("path"),Jr=require("vscode"),Xe=Rn(),bw=Dp(),kO=__(),rt=Tp(),NO=M_(),IO=_w();Rw(Tp(),Vt);Rw(Cw(),Vt);var Sw="^1.67.0",ct;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(ct=Vt.TransportKind||(Vt.TransportKind={}));var Xr;(function(t){function e(n){let r=n;return r&&r.kind===ct.socket&&Xe.number(r.port)}t.isSocket=e})(Xr||(Xr={}));var $p;(function(t){function e(n){return Xe.string(n.command)}t.is=e})($p||($p={}));var Up;(function(t){function e(n){return Xe.string(n.module)}t.is=e})(Up||(Up={}));var Hp;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(Hp||(Hp={}));var Wp;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(Wp||(Wp={}));var Bp=class extends bw.BaseLanguageClient{constructor(e,n,r,i,s){let o,a,c,u,l;Xe.string(n)?(o=e,a=n,c=r,u=i,l=!!s):(o=e.toLowerCase(),a=e,c=n,u=r,l=i),l===void 0&&(l=!1),super(o,a,u),this._serverOptions=c,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(d){throw Xe.string(d.message)&&this.outputChannel.appendLine(d.message),d}}checkVersion(){let e=NO(Jr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Jr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!IO(e,Sw))throw new Error(`The language client requires VS Code version ${Sw} but received version ${Jr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let n=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(n),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,kO.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(l,d){if(!l&&!d)return;let h=Object.create(null);return Object.keys(process.env).forEach(p=>h[p]=process.env[p]),d&&(h.ELECTRON_RUN_AS_NODE="1",h.ELECTRON_NO_ASAR="1"),l&&Object.keys(l).forEach(p=>h[p]=l[p]),h}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let l=process.execArgv;return l?l.some(d=>r.some(h=>d.startsWith(h))||i.some(h=>d===h)):!1}function o(l){if(l.stdin===null||l.stdout===null||l.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Xe.func(a))return a().then(l=>{if(bw.MessageTransports.is(l))return this._isDetached=!!l.detached,l;if(Hp.is(l))return this._isDetached=!!l.detached,{reader:new rt.StreamMessageReader(l.reader),writer:new rt.StreamMessageWriter(l.writer)};{let d;return Wp.is(l)?(d=l.process,this._isDetached=l.detached):(d=l,this._isDetached=!1),d.stderr.on("data",h=>this.outputChannel.append(Xe.string(h)?h:h.toString(e))),{reader:new rt.StreamMessageReader(d.stdout),writer:new rt.StreamMessageWriter(d.stdin)}}});let c,u=a;return u.run||u.debug?this._forceDebug||s()?(c=u.debug,this._isInDebugMode=!0):(c=u.run,this._isInDebugMode=!1):c=a,this._getServerWorkingDir(c.options).then(l=>{if(Up.is(c)&&c.module){let d=c,h=d.transport||ct.stdio;if(d.runtime){let p=[],m=d.options??Object.create(null);m.execArgv&&m.execArgv.forEach(T=>p.push(T)),p.push(d.module),d.args&&d.args.forEach(T=>p.push(T));let y=Object.create(null);y.cwd=l,y.env=n(m.env,!1);let _=this._getRuntimePath(d.runtime,l),S;if(h===ct.ipc?(y.stdio=[null,null,null,"ipc"],p.push("--node-ipc")):h===ct.stdio?p.push("--stdio"):h===ct.pipe?(S=(0,rt.generateRandomPipeName)(),p.push(`--pipe=${S}`)):Xr.isSocket(h)&&p.push(`--socket=${h.port}`),p.push(`--clientProcessId=${process.pid.toString()}`),h===ct.ipc||h===ct.stdio){let T=qr.spawn(_,p,y);return!T||!T.pid?xs(T,`Launching server using runtime ${_} failed.`):(this._serverProcess=T,T.stderr.on("data",x=>this.outputChannel.append(Xe.string(x)?x:x.toString(e))),h===ct.ipc?(T.stdout.on("data",x=>this.outputChannel.append(Xe.string(x)?x:x.toString(e))),Promise.resolve({reader:new rt.IPCMessageReader(T),writer:new rt.IPCMessageWriter(T)})):Promise.resolve({reader:new rt.StreamMessageReader(T.stdout),writer:new rt.StreamMessageWriter(T.stdin)}))}else{if(h===ct.pipe)return(0,rt.createClientPipeTransport)(S).then(T=>{let x=qr.spawn(_,p,y);return!x||!x.pid?xs(x,`Launching server using runtime ${_} failed.`):(this._serverProcess=x,x.stderr.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),x.stdout.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),T.onConnected().then(k=>({reader:k[0],writer:k[1]})))});if(Xr.isSocket(h))return(0,rt.createClientSocketTransport)(h.port).then(T=>{let x=qr.spawn(_,p,y);return!x||!x.pid?xs(x,`Launching server using runtime ${_} failed.`):(this._serverProcess=x,x.stderr.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),x.stdout.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),T.onConnected().then(k=>({reader:k[0],writer:k[1]})))})}}else{let p;return new Promise((m,y)=>{let _=(d.args&&d.args.slice())??[];h===ct.ipc?_.push("--node-ipc"):h===ct.stdio?_.push("--stdio"):h===ct.pipe?(p=(0,rt.generateRandomPipeName)(),_.push(`--pipe=${p}`)):Xr.isSocket(h)&&_.push(`--socket=${h.port}`),_.push(`--clientProcessId=${process.pid.toString()}`);let S=d.options??Object.create(null);if(S.env=n(S.env,!0),S.execArgv=S.execArgv||[],S.cwd=l,S.silent=!0,h===ct.ipc||h===ct.stdio){let T=qr.fork(d.module,_||[],S);o(T),this._serverProcess=T,T.stderr.on("data",x=>this.outputChannel.append(Xe.string(x)?x:x.toString(e))),h===ct.ipc?(T.stdout.on("data",x=>this.outputChannel.append(Xe.string(x)?x:x.toString(e))),m({reader:new rt.IPCMessageReader(this._serverProcess),writer:new rt.IPCMessageWriter(this._serverProcess)})):m({reader:new rt.StreamMessageReader(T.stdout),writer:new rt.StreamMessageWriter(T.stdin)})}else h===ct.pipe?(0,rt.createClientPipeTransport)(p).then(T=>{let x=qr.fork(d.module,_||[],S);o(x),this._serverProcess=x,x.stderr.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),x.stdout.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),T.onConnected().then(k=>{m({reader:k[0],writer:k[1]})},y)},y):Xr.isSocket(h)&&(0,rt.createClientSocketTransport)(h.port).then(T=>{let x=qr.fork(d.module,_||[],S);o(x),this._serverProcess=x,x.stderr.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),x.stdout.on("data",k=>this.outputChannel.append(Xe.string(k)?k:k.toString(e))),T.onConnected().then(k=>{m({reader:k[0],writer:k[1]})},y)},y)})}}else if($p.is(c)&&c.command){let d=c,h=c.args!==void 0?c.args.slice(0):[],p,m=c.transport;if(m===ct.stdio)h.push("--stdio");else if(m===ct.pipe)p=(0,rt.generateRandomPipeName)(),h.push(`--pipe=${p}`);else if(Xr.isSocket(m))h.push(`--socket=${m.port}`);else if(m===ct.ipc)throw new Error("Transport kind ipc is not support for command executable");let y=Object.assign({},d.options);if(y.cwd=y.cwd||l,m===void 0||m===ct.stdio){let _=qr.spawn(d.command,h,y);return!_||!_.pid?xs(_,`Launching server using command ${d.command} failed.`):(_.stderr.on("data",S=>this.outputChannel.append(Xe.string(S)?S:S.toString(e))),this._serverProcess=_,this._isDetached=!!y.detached,Promise.resolve({reader:new rt.StreamMessageReader(_.stdout),writer:new rt.StreamMessageWriter(_.stdin)}))}else{if(m===ct.pipe)return(0,rt.createClientPipeTransport)(p).then(_=>{let S=qr.spawn(d.command,h,y);return!S||!S.pid?xs(S,`Launching server using command ${d.command} failed.`):(this._serverProcess=S,this._isDetached=!!y.detached,S.stderr.on("data",T=>this.outputChannel.append(Xe.string(T)?T:T.toString(e))),S.stdout.on("data",T=>this.outputChannel.append(Xe.string(T)?T:T.toString(e))),_.onConnected().then(T=>({reader:T[0],writer:T[1]})))});if(Xr.isSocket(m))return(0,rt.createClientSocketTransport)(m.port).then(_=>{let S=qr.spawn(d.command,h,y);return!S||!S.pid?xs(S,`Launching server using command ${d.command} failed.`):(this._serverProcess=S,this._isDetached=!!y.detached,S.stderr.on("data",T=>this.outputChannel.append(Xe.string(T)?T:T.toString(e))),S.stdout.on("data",T=>this.outputChannel.append(Xe.string(T)?T:T.toString(e))),_.onConnected().then(T=>({reader:T[0],writer:T[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,n){if(jp.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=jp.join(r,e);if(Ap.existsSync(i))return i}if(n!==void 0){let i=jp.join(n,e);if(Ap.existsSync(i))return i}return e}_mainGetRootPath(){let e=Jr.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{Ap.lstat(n,(i,s)=>{r(!i&&s.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch{}return n===void 0||typeof n.locale!="string"?"en":n.locale}};Vt.LanguageClient=Bp;var zp=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return Jr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Jr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Jr.workspace.getConfiguration(n).get(r,!1):Jr.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};Vt.SettingMonitor=zp;function xs(t,e){return t===null?Promise.reject(e):new Promise((n,r)=>{t.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var Tw=w((sj,Dw)=>{"use strict";Dw.exports=eu()});var ea=w(Yr=>{var Gp=Yr&&Yr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.quickPick=Yr.register=void 0;var sn=require("vscode"),FO=Ct();function LO(t,e){let n=i();t.subscriptions.push(sn.commands.registerCommand("volar.action.splitEditors",r));function r(){var s;return Gp(this,void 0,void 0,function*(){let o=sn.window.activeTextEditor;if(!o)return;let a=(s=yield sn.workspace.getConfiguration("volar").get("splitEditors.layout"))!==null&&s!==void 0?s:{left:[],right:[]},c=o.document,{descriptor:u}=yield n(c.getText()),l=[],d=[];u.script&&(a.left.includes("script")&&l.push(u.script),a.right.includes("script")&&d.push(u.script)),u.scriptSetup&&(a.left.includes("scriptSetup")&&l.push(u.scriptSetup),a.right.includes("scriptSetup")&&d.push(u.scriptSetup)),u.template&&(a.left.includes("template")&&l.push(u.template),a.right.includes("template")&&d.push(u.template)),a.left.includes("styles")&&(l=l.concat(u.styles)),a.right.includes("styles")&&(d=d.concat(u.styles)),a.left.includes("customBlocks")&&(l=l.concat(u.customBlocks)),a.right.includes("customBlocks")&&(d=d.concat(u.customBlocks)),yield h(l),yield sn.commands.executeCommand("workbench.action.toggleSplitEditorInGroup"),yield h(d);function h(p){return Gp(this,void 0,void 0,function*(){let m=sn.window.activeTextEditor;if(!m)return;m.selections=p.length?p.map(_=>new sn.Selection(c.positionAt(_.loc.start.offset),c.positionAt(_.loc.start.offset))):[new sn.Selection(c.positionAt(c.getText().length),c.positionAt(c.getText().length))],yield sn.commands.executeCommand("editor.unfoldAll"),yield sn.commands.executeCommand("editor.foldLevel1");let y=p.sort((_,S)=>_.loc.start.offset-S.loc.start.offset)[0];y&&m.revealRange(new sn.Range(c.positionAt(y.loc.start.offset),new sn.Position(m.document.lineCount,0)),sn.TextEditorRevealType.AtTop)})}})}function i(){let s="",o;return a;function a(c){return Gp(this,void 0,void 0,function*(){return c!==s&&(s=c,o=yield e.sendRequest(FO.ParseSFCRequest.type,c)),o})}}}Yr.register=LO;function MO(t,e){return new Promise(n=>{let r=sn.window.createQuickPick(),i=[];for(let s of Array.isArray(t)?t:[t]){let o=Object.values(s);if(o.length){i.length&&i.push({label:"",kind:sn.QuickPickItemKind.Separator});for(let a of o)a&&i.push(a)}}r.items=i,r.placeholder=e,r.onDidChangeSelection(s=>{if(s[0])for(let o of Array.isArray(t)?t:[t])for(let a in o){let c=o[a];if(s[0]===c){n(a),r.hide();break}}}),r.onDidHide(()=>{r.dispose(),n(void 0)}),r.show()})}Yr.quickPick=MO});var Kp=w(ze=>{var ta=ze&&ze.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(ze,"__esModule",{value:!0});ze.activate=ze.tagNameCasings=ze.attrNameCasings=void 0;var Xt=require("vscode"),AO=ea(),jO=eu(),Be=Ct(),Ew=na();ze.attrNameCasings=new Map;ze.tagNameCasings=new Map;function $O(t,e){var n;return ta(this,void 0,void 0,function*(){let r=Xt.window.createStatusBarItem(Xt.StatusBarAlignment.Right);r.command="volar.action.nameCasing",u((n=Xt.window.activeTextEditor)===null||n===void 0?void 0:n.document);let i=Xt.window.onDidChangeActiveTextEditor(h=>{u(h?.document)}),s=Xt.workspace.onDidCloseTextDocument(h=>{ze.attrNameCasings.delete(h.uri.toString()),ze.tagNameCasings.delete(h.uri.toString())}),o=Xt.commands.registerCommand("volar.action.nameCasing",()=>ta(this,void 0,void 0,function*(){var h;if(!(!((h=Xt.window.activeTextEditor)===null||h===void 0)&&h.document))return;let p=Xt.window.activeTextEditor.document,m=ze.attrNameCasings.get(p.uri.toString()),y=ze.tagNameCasings.get(p.uri.toString()),_=yield(0,AO.quickPick)([{1:{label:(y===Be.TagNameCasing.Kebab?"\u2022 ":"")+"Component Name Using kebab-case"},2:{label:(y===Be.TagNameCasing.Pascal?"\u2022 ":"")+"Component Name Using PascalCase"},3:{label:"Convert Component Name to kebab-case"},4:{label:"Convert Component Name to PascalCase"}},{5:{label:(m===Be.AttrNameCasing.Kebab?"\u2022 ":"")+"Prop Name Using kebab-case"},6:{label:(m===Be.AttrNameCasing.Camel?"\u2022 ":"")+"Prop Name Using camelCase"},7:{label:"Convert Prop Name to kebab-case"},8:{label:"Convert Prop Name to camelCase"}}]);_!==void 0&&(_==="1"&&ze.tagNameCasings.set(p.uri.toString(),Be.TagNameCasing.Kebab),_==="2"&&ze.tagNameCasings.set(p.uri.toString(),Be.TagNameCasing.Pascal),_==="3"&&(yield a(Xt.window.activeTextEditor,Be.TagNameCasing.Kebab)),_==="4"&&(yield a(Xt.window.activeTextEditor,Be.TagNameCasing.Pascal)),_==="5"&&ze.attrNameCasings.set(p.uri.toString(),Be.AttrNameCasing.Kebab),_==="6"&&ze.attrNameCasings.set(p.uri.toString(),Be.AttrNameCasing.Camel),_==="7"&&(yield c(Xt.window.activeTextEditor,Be.AttrNameCasing.Kebab)),_==="8"&&(yield c(Xt.window.activeTextEditor,Be.AttrNameCasing.Camel)),d())}));e.onDidChangeState(h=>{h.newState===jO.State.Stopped&&(i.dispose(),s.dispose(),o.dispose(),r.dispose())});function a(h,p){return ta(this,void 0,void 0,function*(){let m=yield e.sendRequest(Be.GetConvertTagCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(h.document),casing:p}),y=yield e.protocol2CodeConverter.asTextEdits(m);y&&h.edit(_=>{for(let S of y)_.replace(S.range,S.newText)}),ze.tagNameCasings.set(h.document.uri.toString(),p),d()})}function c(h,p){return ta(this,void 0,void 0,function*(){let m=yield e.sendRequest(Be.GetConvertAttrCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(h.document),casing:p}),y=yield e.protocol2CodeConverter.asTextEdits(m);y&&h.edit(_=>{for(let S of y)_.replace(S.range,S.newText)}),ze.attrNameCasings.set(h.document.uri.toString(),p),d()})}function u(h){return ta(this,void 0,void 0,function*(){if(h?.languageId==="vue"||(0,Ew.processMd)()&&h?.languageId==="markdown"||(0,Ew.processHtml)()&&h?.languageId==="html"){let p,m=ze.attrNameCasings.get(h.uri.toString()),y=ze.tagNameCasings.get(h.uri.toString());if(!m){let _=Xt.workspace.getConfiguration("volar").get("completion.preferredAttrNameCase");_==="kebab"?m=Be.AttrNameCasing.Kebab:_==="camel"?m=Be.AttrNameCasing.Camel:(p??(p=yield l(h)),p?.attr.length===1?m=p.attr[0]:_==="auto-camel"?m=Be.AttrNameCasing.Camel:m=Be.AttrNameCasing.Kebab),ze.attrNameCasings.set(h.uri.toString(),m)}if(!y){let _=Xt.workspace.getConfiguration("volar").get("completion.preferredTagNameCase");_==="kebab"?y=Be.TagNameCasing.Kebab:_==="pascal"?y=Be.TagNameCasing.Pascal:(p??(p=yield l(h)),p?.tag.length===1?y=p.tag[0]:y=Be.TagNameCasing.Pascal),ze.tagNameCasings.set(h.uri.toString(),y)}d(),r.show()}else r.hide()})}function l(h){return e.sendRequest(Be.DetectNameCasingRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(h)})}function d(){var h;let p=(h=Xt.window.activeTextEditor)===null||h===void 0?void 0:h.document;if(!p)return;let m=ze.attrNameCasings.get(p.uri.toString()),y=ze.tagNameCasings.get(p.uri.toString()),_="<";y===Be.TagNameCasing.Kebab?_+="tag-name ":y===Be.TagNameCasing.Pascal?_+="TagName ":_+="? ",m===Be.AttrNameCasing.Kebab?_+="prop-name":m===Be.AttrNameCasing.Camel?_+="propName":_+="?",_+=" />",r.text=_}})}ze.activate=$O});var ra=w((cj,xw)=>{xw.exports=require("path")});var Ow=w(Qr=>{var Pw=Qr&&Qr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.exists=Qr.readFile=void 0;var qw=require("vscode");function UO(t){return Pw(this,void 0,void 0,function*(){let e=yield qw.workspace.fs.readFile(t);return new TextDecoder("utf8").decode(e)})}Qr.readFile=UO;function HO(t){return Pw(this,void 0,void 0,function*(){try{return yield qw.workspace.fs.stat(t),!0}catch{return!1}})}Qr.exists=HO});var kw=w(pt=>{Object.defineProperty(pt,"__esModule",{value:!0});pt.getLineText=pt.getOverlapRange2=pt.getOverlapRange=pt.getWordRange=pt.isInsideRange=pt.notEmpty=pt.languageIdToSyntax=pt.syntaxToLanguageId=pt.sleep=void 0;function WO(t){return new Promise(e=>setTimeout(e,t))}pt.sleep=WO;function BO(t){switch(t){case"js":return"javascript";case"cjs":return"javascript";case"mjs":return"javascript";case"ts":return"typescript";case"cts":return"typescript";case"mts":return"typescript";case"jsx":return"javascriptreact";case"tsx":return"typescriptreact";case"pug":return"jade";case"md":return"markdown"}return t}pt.syntaxToLanguageId=BO;function zO(t){switch(t){case"javascript":return"js";case"typescript":return"ts";case"javascriptreact":return"jsx";case"typescriptreact":return"tsx";case"jade":return"pug";case"markdown":return"md"}return t}pt.languageIdToSyntax=zO;function GO(t){return t!=null}pt.notEmpty=GO;function KO(t,e){return!(e.start.line<t.start.line||e.end.line>t.end.line||e.start.line===t.start.line&&e.start.character<t.start.character||e.end.line===t.end.line&&e.end.character>t.end.character)}pt.isInsideRange=KO;function VO(t,e,n){let r={line:e.line,character:0},i={line:e.line+1,character:0},s=n.offsetAt(e),o=n.offsetAt(r),a=n.getText({start:r,end:i});for(let c of a.matchAll(t)){if(c.index===void 0)continue;let u=c.index+o,l=u+c[0].length;if(s>=u&&s<=l)return{start:n.positionAt(u),end:n.positionAt(l)}}}pt.getWordRange=VO;function XO(t,e){let n={line:Math.max(t.start.line,e.start.line),character:t.start.line===e.start.line?Math.max(t.start.character,e.start.character):t.start.line>e.start.line?t.start.character:e.start.character},r={line:Math.min(t.end.line,e.end.line),character:t.end.line===e.end.line?Math.min(t.end.character,e.end.character):t.end.line<e.end.line?t.end.character:e.end.character};if(!(n.line>r.line||n.line===r.line&&n.character>r.character))return{start:n,end:r}}pt.getOverlapRange=XO;function JO(t,e,n,r){let i=Math.max(t,n),s=Math.min(e,r);if(!(i>s))return{start:i,end:s}}pt.getOverlapRange2=JO;function YO(t,e){return t.getText({start:{line:e,character:0},end:{line:e+1,character:0}}).slice(0,-1)}pt.getLineText=YO});var Nw=w(tu=>{Object.defineProperty(tu,"__esModule",{value:!0});tu.getTsCompletions=void 0;function QO(t){return t.Completions}tu.getTsCompletions=QO});var ia={};ju(ia,{URI:()=>ZO,Utils:()=>ek});var Iw,ZO,ek,sa=Au(()=>{(()=>{"use strict";var t={470:i=>{function s(c){if(typeof c!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(c))}function o(c,u){for(var l,d="",h=0,p=-1,m=0,y=0;y<=c.length;++y){if(y<c.length)l=c.charCodeAt(y);else{if(l===47)break;l=47}if(l===47){if(!(p===y-1||m===1))if(p!==y-1&&m===2){if(d.length<2||h!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var _=d.lastIndexOf("/");if(_!==d.length-1){_===-1?(d="",h=0):h=(d=d.slice(0,_)).length-1-d.lastIndexOf("/"),p=y,m=0;continue}}else if(d.length===2||d.length===1){d="",h=0,p=y,m=0;continue}}u&&(d.length>0?d+="/..":d="..",h=2)}else d.length>0?d+="/"+c.slice(p+1,y):d=c.slice(p+1,y),h=y-p-1;p=y,m=0}else l===46&&m!==-1?++m:m=-1}return d}var a={resolve:function(){for(var c,u="",l=!1,d=arguments.length-1;d>=-1&&!l;d--){var h;d>=0?h=arguments[d]:(c===void 0&&(c=process.cwd()),h=c),s(h),h.length!==0&&(u=h+"/"+u,l=h.charCodeAt(0)===47)}return u=o(u,!l),l?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(c){if(s(c),c.length===0)return".";var u=c.charCodeAt(0)===47,l=c.charCodeAt(c.length-1)===47;return(c=o(c,!u)).length!==0||u||(c="."),c.length>0&&l&&(c+="/"),u?"/"+c:c},isAbsolute:function(c){return s(c),c.length>0&&c.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var c,u=0;u<arguments.length;++u){var l=arguments[u];s(l),l.length>0&&(c===void 0?c=l:c+="/"+l)}return c===void 0?".":a.normalize(c)},relative:function(c,u){if(s(c),s(u),c===u||(c=a.resolve(c))===(u=a.resolve(u)))return"";for(var l=1;l<c.length&&c.charCodeAt(l)===47;++l);for(var d=c.length,h=d-l,p=1;p<u.length&&u.charCodeAt(p)===47;++p);for(var m=u.length-p,y=h<m?h:m,_=-1,S=0;S<=y;++S){if(S===y){if(m>y){if(u.charCodeAt(p+S)===47)return u.slice(p+S+1);if(S===0)return u.slice(p+S)}else h>y&&(c.charCodeAt(l+S)===47?_=S:S===0&&(_=0));break}var T=c.charCodeAt(l+S);if(T!==u.charCodeAt(p+S))break;T===47&&(_=S)}var x="";for(S=l+_+1;S<=d;++S)S!==d&&c.charCodeAt(S)!==47||(x.length===0?x+="..":x+="/..");return x.length>0?x+u.slice(p+_):(p+=_,u.charCodeAt(p)===47&&++p,u.slice(p))},_makeLong:function(c){return c},dirname:function(c){if(s(c),c.length===0)return".";for(var u=c.charCodeAt(0),l=u===47,d=-1,h=!0,p=c.length-1;p>=1;--p)if((u=c.charCodeAt(p))===47){if(!h){d=p;break}}else h=!1;return d===-1?l?"/":".":l&&d===1?"//":c.slice(0,d)},basename:function(c,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');s(c);var l,d=0,h=-1,p=!0;if(u!==void 0&&u.length>0&&u.length<=c.length){if(u.length===c.length&&u===c)return"";var m=u.length-1,y=-1;for(l=c.length-1;l>=0;--l){var _=c.charCodeAt(l);if(_===47){if(!p){d=l+1;break}}else y===-1&&(p=!1,y=l+1),m>=0&&(_===u.charCodeAt(m)?--m==-1&&(h=l):(m=-1,h=y))}return d===h?h=y:h===-1&&(h=c.length),c.slice(d,h)}for(l=c.length-1;l>=0;--l)if(c.charCodeAt(l)===47){if(!p){d=l+1;break}}else h===-1&&(p=!1,h=l+1);return h===-1?"":c.slice(d,h)},extname:function(c){s(c);for(var u=-1,l=0,d=-1,h=!0,p=0,m=c.length-1;m>=0;--m){var y=c.charCodeAt(m);if(y!==47)d===-1&&(h=!1,d=m+1),y===46?u===-1?u=m:p!==1&&(p=1):u!==-1&&(p=-1);else if(!h){l=m+1;break}}return u===-1||d===-1||p===0||p===1&&u===d-1&&u===l+1?"":c.slice(u,d)},format:function(c){if(c===null||typeof c!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof c);return function(u,l){var d=l.dir||l.root,h=l.base||(l.name||"")+(l.ext||"");return d?d===l.root?d+h:d+"/"+h:h}(0,c)},parse:function(c){s(c);var u={root:"",dir:"",base:"",ext:"",name:""};if(c.length===0)return u;var l,d=c.charCodeAt(0),h=d===47;h?(u.root="/",l=1):l=0;for(var p=-1,m=0,y=-1,_=!0,S=c.length-1,T=0;S>=l;--S)if((d=c.charCodeAt(S))!==47)y===-1&&(_=!1,y=S+1),d===46?p===-1?p=S:T!==1&&(T=1):p!==-1&&(T=-1);else if(!_){m=S+1;break}return p===-1||y===-1||T===0||T===1&&p===y-1&&p===m+1?y!==-1&&(u.base=u.name=m===0&&h?c.slice(1,y):c.slice(m,y)):(m===0&&h?(u.name=c.slice(1,p),u.base=c.slice(1,y)):(u.name=c.slice(m,p),u.base=c.slice(m,y)),u.ext=c.slice(p,y)),m>0?u.dir=c.slice(0,m-1):h&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,i.exports=a}},e={};function n(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(i,s)=>{for(var o in s)n.o(s,o)&&!n.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:s[o]})},n.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{var i;if(n.r(r),n.d(r,{URI:()=>y,Utils:()=>G}),typeof process=="object")i=process.platform==="win32";else if(typeof navigator=="object"){var s=navigator.userAgent;i=s.indexOf("Windows")>=0}var o,a,c=(o=function(N,D){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var ee in O)Object.prototype.hasOwnProperty.call(O,ee)&&(I[ee]=O[ee])},o(N,D)},function(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function I(){this.constructor=N}o(N,D),N.prototype=D===null?Object.create(D):(I.prototype=D.prototype,new I)}),u=/^\w[\w\d+.-]*$/,l=/^\//,d=/^\/\//,h="",p="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=function(){function N(D,I,O,ee,te,B){B===void 0&&(B=!1),typeof D=="object"?(this.scheme=D.scheme||h,this.authority=D.authority||h,this.path=D.path||h,this.query=D.query||h,this.fragment=D.fragment||h):(this.scheme=function(se,Ge){return se||Ge?se:"file"}(D,B),this.authority=I||h,this.path=function(se,Ge){switch(se){case"https":case"http":case"file":Ge?Ge[0]!==p&&(Ge=p+Ge):Ge=p}return Ge}(this.scheme,O||h),this.query=ee||h,this.fragment=te||h,function(se,Ge){if(!se.scheme&&Ge)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(se.authority,'", path: "').concat(se.path,'", query: "').concat(se.query,'", fragment: "').concat(se.fragment,'"}'));if(se.scheme&&!u.test(se.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(se.path){if(se.authority){if(!l.test(se.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(se.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,B))}return N.isUri=function(D){return D instanceof N||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"},Object.defineProperty(N.prototype,"fsPath",{get:function(){return W(this,!1)},enumerable:!1,configurable:!0}),N.prototype.with=function(D){if(!D)return this;var I=D.scheme,O=D.authority,ee=D.path,te=D.query,B=D.fragment;return I===void 0?I=this.scheme:I===null&&(I=h),O===void 0?O=this.authority:O===null&&(O=h),ee===void 0?ee=this.path:ee===null&&(ee=h),te===void 0?te=this.query:te===null&&(te=h),B===void 0?B=this.fragment:B===null&&(B=h),I===this.scheme&&O===this.authority&&ee===this.path&&te===this.query&&B===this.fragment?this:new S(I,O,ee,te,B)},N.parse=function(D,I){I===void 0&&(I=!1);var O=m.exec(D);return O?new S(O[2]||h,M(O[4]||h),M(O[5]||h),M(O[7]||h),M(O[9]||h),I):new S(h,h,h,h,h)},N.file=function(D){var I=h;if(i&&(D=D.replace(/\\/g,p)),D[0]===p&&D[1]===p){var O=D.indexOf(p,2);O===-1?(I=D.substring(2),D=p):(I=D.substring(2,O),D=D.substring(O)||p)}return new S("file",I,D,h,h)},N.from=function(D){return new S(D.scheme,D.authority,D.path,D.query,D.fragment)},N.prototype.toString=function(D){return D===void 0&&(D=!1),Q(this,D)},N.prototype.toJSON=function(){return this},N.revive=function(D){if(D){if(D instanceof N)return D;var I=new S(D);return I._formatted=D.external,I._fsPath=D._sep===_?D.fsPath:null,I}return D},N}(),_=i?1:void 0,S=function(N){function D(){var I=N!==null&&N.apply(this,arguments)||this;return I._formatted=null,I._fsPath=null,I}return c(D,N),Object.defineProperty(D.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=W(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),D.prototype.toString=function(I){return I===void 0&&(I=!1),I?Q(this,!0):(this._formatted||(this._formatted=Q(this,!1)),this._formatted)},D.prototype.toJSON=function(){var I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=_),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I},D}(y),T=((a={})[58]="%3A",a[47]="%2F",a[63]="%3F",a[35]="%23",a[91]="%5B",a[93]="%5D",a[64]="%40",a[33]="%21",a[36]="%24",a[38]="%26",a[39]="%27",a[40]="%28",a[41]="%29",a[42]="%2A",a[43]="%2B",a[44]="%2C",a[59]="%3B",a[61]="%3D",a[32]="%20",a);function x(N,D){for(var I=void 0,O=-1,ee=0;ee<N.length;ee++){var te=N.charCodeAt(ee);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47)O!==-1&&(I+=encodeURIComponent(N.substring(O,ee)),O=-1),I!==void 0&&(I+=N.charAt(ee));else{I===void 0&&(I=N.substr(0,ee));var B=T[te];B!==void 0?(O!==-1&&(I+=encodeURIComponent(N.substring(O,ee)),O=-1),I+=B):O===-1&&(O=ee)}}return O!==-1&&(I+=encodeURIComponent(N.substring(O))),I!==void 0?I:N}function k(N){for(var D=void 0,I=0;I<N.length;I++){var O=N.charCodeAt(I);O===35||O===63?(D===void 0&&(D=N.substr(0,I)),D+=T[O]):D!==void 0&&(D+=N[I])}return D!==void 0?D:N}function W(N,D){var I;return I=N.authority&&N.path.length>1&&N.scheme==="file"?"//".concat(N.authority).concat(N.path):N.path.charCodeAt(0)===47&&(N.path.charCodeAt(1)>=65&&N.path.charCodeAt(1)<=90||N.path.charCodeAt(1)>=97&&N.path.charCodeAt(1)<=122)&&N.path.charCodeAt(2)===58?D?N.path.substr(1):N.path[1].toLowerCase()+N.path.substr(2):N.path,i&&(I=I.replace(/\//g,"\\")),I}function Q(N,D){var I=D?k:x,O="",ee=N.scheme,te=N.authority,B=N.path,se=N.query,Ge=N.fragment;if(ee&&(O+=ee,O+=":"),(te||ee==="file")&&(O+=p,O+=p),te){var It=te.indexOf("@");if(It!==-1){var Fn=te.substr(0,It);te=te.substr(It+1),(It=Fn.indexOf(":"))===-1?O+=I(Fn,!1):(O+=I(Fn.substr(0,It),!1),O+=":",O+=I(Fn.substr(It+1),!1)),O+="@"}(It=(te=te.toLowerCase()).indexOf(":"))===-1?O+=I(te,!1):(O+=I(te.substr(0,It),!1),O+=te.substr(It))}if(B){if(B.length>=3&&B.charCodeAt(0)===47&&B.charCodeAt(2)===58)(Zt=B.charCodeAt(1))>=65&&Zt<=90&&(B="/".concat(String.fromCharCode(Zt+32),":").concat(B.substr(3)));else if(B.length>=2&&B.charCodeAt(1)===58){var Zt;(Zt=B.charCodeAt(0))>=65&&Zt<=90&&(B="".concat(String.fromCharCode(Zt+32),":").concat(B.substr(2)))}O+=I(B,!0)}return se&&(O+="?",O+=I(se,!1)),Ge&&(O+="#",O+=D?Ge:x(Ge,!1)),O}function oe(N){try{return decodeURIComponent(N)}catch{return N.length>3?N.substr(0,3)+oe(N.substr(3)):N}}var L=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function M(N){return N.match(L)?N.replace(L,function(D){return oe(D)}):N}var G,de=n(470),Z=function(N,D,I){if(I||arguments.length===2)for(var O,ee=0,te=D.length;ee<te;ee++)!O&&ee in D||(O||(O=Array.prototype.slice.call(D,0,ee)),O[ee]=D[ee]);return N.concat(O||Array.prototype.slice.call(D))},ie=de.posix||de,Te="/";(function(N){N.joinPath=function(D){for(var I=[],O=1;O<arguments.length;O++)I[O-1]=arguments[O];return D.with({path:ie.join.apply(ie,Z([D.path],I,!1))})},N.resolvePath=function(D){for(var I=[],O=1;O<arguments.length;O++)I[O-1]=arguments[O];var ee=D.path,te=!1;ee[0]!==Te&&(ee=Te+ee,te=!0);var B=ie.resolve.apply(ie,Z([ee],I,!1));return te&&B[0]===Te&&!D.authority&&(B=B.substring(1)),D.with({path:B})},N.dirname=function(D){if(D.path.length===0||D.path===Te)return D;var I=ie.dirname(D.path);return I.length===1&&I.charCodeAt(0)===46&&(I=""),D.with({path:I})},N.basename=function(D){return ie.basename(D.path)},N.extname=function(D){return ie.extname(D.path)}})(G||(G={}))})(),Iw=r})();({URI:ZO,Utils:ek}=Iw)});var Vp=w(qn=>{Object.defineProperty(qn,"__esModule",{value:!0});qn.isFileInDir=qn.getUriByPath=qn.normalizeUri=qn.normalizeFileName=qn.getPathOfUri=void 0;var nu=(sa(),jr(ia)),Fw=ra();function tk(t){return nu.URI.parse(t).fsPath.replace(/\\/g,"/")}qn.getPathOfUri=tk;function nk(t){return nu.URI.file(t).fsPath.replace(/\\/g,"/")}qn.normalizeFileName=nk;function rk(t){return nu.URI.parse(t).toString()}qn.normalizeUri=rk;function ik(t,e){return nu.URI.file(e).with({scheme:t.scheme,authority:t.authority}).toString()}qn.getUriByPath=ik;function sk(t,e){let n=Fw.relative(e,t);return!!n&&!n.startsWith("..")&&!Fw.isAbsolute(n)}qn.isFileInDir=sk});var Lw=w(Ps=>{Object.defineProperty(Ps,"__esModule",{value:!0});Ps.createUriMap=Ps._=void 0;var ok=(sa(),jr(ia)),ak=Vp();Ps._=(sa(),jr(ia));function ck(t=new Map){let e=new Map,n=new WeakMap;return{clear:s,values:o,uriDelete:a,uriGet:c,uriHas:u,uriSet:l,pathDelete:d,pathGet:h,pathHas:p,pathSet:m};function r(y){return e.has(y)||e.set(y,uk(y).toLowerCase()),e.get(y)}function i(y,_){let S=n.get(y);return S||(S=new Map,n.set(y,S)),S.has(_)||S.set(_,(0,ak.getUriByPath)(y,_).toLowerCase()),S.get(_)}function s(){return t.clear()}function o(){return t.values()}function a(y){return t.delete(r(y))}function c(y){return t.get(r(y))}function u(y){return t.has(r(y))}function l(y,_){return t.set(r(y),_)}function d(y,_){return a(i(y,_))}function h(y,_){return c(i(y,_))}function p(y,_){return c(i(y,_))}function m(y,_,S){return l(i(y,_),S)}}Ps.createUriMap=ck;function uk(t){try{return ok.URI.parse(t).toString()}catch{return""}}});var jw={};ju(jw,{TextDocument:()=>Xp});function Jp(t,e){if(t.length<=1)return t;let n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);Jp(r,e),Jp(i,e);let s=0,o=0,a=0;for(;s<r.length&&o<i.length;)e(r[s],i[o])<=0?t[a++]=r[s++]:t[a++]=i[o++];for(;s<r.length;)t[a++]=r[s++];for(;o<i.length;)t[a++]=i[o++];return t}function Mw(t,e,n=0){let r=e?[n]:[];for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);(s===13||s===10)&&(s===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Aw(t){let e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}function lk(t){let e=Aw(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var Ii,Xp,$w=Au(()=>{"use strict";Ii=class{constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let r of e)if(Ii.isIncremental(r)){let i=Aw(r.range),s=this.offsetAt(i.start),o=this.offsetAt(i.end);this._content=this._content.substring(0,s)+r.text+this._content.substring(o,this._content.length);let a=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,l=Mw(r.text,!1,s);if(c-a===l.length)for(let h=0,p=l.length;h<p;h++)u[h+a+1]=l[h];else l.length<1e4?u.splice(a+1,c-a,...l):this._lineOffsets=u=u.slice(0,a+1).concat(l,u.slice(c+1));let d=r.text.length-(o-s);if(d!==0)for(let h=a+1+l.length,p=u.length;h<p;h++)u[h]=u[h]+d}else if(Ii.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Mw(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){let o=Math.floor((r+i)/2);n[o]>e?i=o:r=o+1}let s=r-1;return{line:s,character:e-n[s]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}};(function(t){function e(i,s,o,a){return new Ii(i,s,o,a)}t.create=e;function n(i,s,o){if(i instanceof Ii)return i.update(s,o),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=n;function r(i,s){let o=i.getText(),a=Jp(s.map(lk),(l,d)=>{let h=l.range.start.line-d.range.start.line;return h===0?l.range.start.character-d.range.start.character:h}),c=0,u=[];for(let l of a){let d=i.offsetAt(l.range.start);if(d<c)throw new Error("Overlapping edit");d>c&&u.push(o.substring(c,d)),l.newText.length&&u.push(l.newText),c=i.offsetAt(l.range.end)}return u.push(o.substr(c)),u.join("")}t.applyEdits=r})(Xp||(Xp={}))});var Uw=w(on=>{var dk=on&&on.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ru=on&&on.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&dk(e,t,n)};Object.defineProperty(on,"__esModule",{value:!0});on._2=on._1=void 0;ru(kw(),on);ru(Nw(),on);ru(Vp(),on);ru(Lw(),on);on._1=($w(),jr(jw));on._2=(sa(),jr(ia))});var Zr=w((gj,Hw)=>{"use strict";Hw.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var oa=w((mj,iu)=>{"use strict";var{EMPTY_BUFFER:fk}=Zr();function hk(t,e){if(t.length===0)return fk;if(t.length===1)return t[0];let n=Buffer.allocUnsafe(e),r=0;for(let i=0;i<t.length;i++){let s=t[i];n.set(s,r),r+=s.length}return r<e?n.slice(0,r):n}function Ww(t,e,n,r,i){for(let s=0;s<i;s++)n[r+s]=t[s]^e[s&3]}function Bw(t,e){for(let n=0;n<t.length;n++)t[n]^=e[n&3]}function pk(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function Yp(t){if(Yp.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=Buffer.from(t):ArrayBuffer.isView(t)?e=Buffer.from(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),Yp.readOnly=!1),e}iu.exports={concat:hk,mask:Ww,toArrayBuffer:pk,toBuffer:Yp,unmask:Bw};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");iu.exports.mask=function(e,n,r,i,s){s<48?Ww(e,n,r,i,s):t.mask(e,n,r,i,s)},iu.exports.unmask=function(e,n){e.length<32?Bw(e,n):t.unmask(e,n)}}catch{}});var Kw=w((vj,Gw)=>{"use strict";var zw=Symbol("kDone"),Qp=Symbol("kRun"),Zp=class{constructor(e){this[zw]=()=>{this.pending--,this[Qp]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Qp]()}[Qp](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[zw])}}};Gw.exports=Zp});var ua=w((yj,Yw)=>{"use strict";var aa=require("zlib"),Vw=oa(),gk=Kw(),{kStatusCode:Xw}=Zr(),mk=Buffer.from([0,0,255,255]),au=Symbol("permessage-deflate"),Or=Symbol("total-length"),ca=Symbol("callback"),ei=Symbol("buffers"),ou=Symbol("error"),su,eg=class{constructor(e,n,r){if(this._maxPayload=r|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!n,this._deflate=null,this._inflate=null,this.params=null,!su){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;su=new gk(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[ca];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let n=this._options,r=e.find(i=>!(n.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(n.serverMaxWindowBits===!1||typeof n.serverMaxWindowBits=="number"&&n.serverMaxWindowBits>i.server_max_window_bits)||typeof n.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return n.serverNoContextTakeover&&(r.server_no_context_takeover=!0),n.clientNoContextTakeover&&(r.client_no_context_takeover=!0),typeof n.serverMaxWindowBits=="number"&&(r.server_max_window_bits=n.serverMaxWindowBits),typeof n.clientMaxWindowBits=="number"?r.client_max_window_bits=n.clientMaxWindowBits:(r.client_max_window_bits===!0||n.clientMaxWindowBits===!1)&&delete r.client_max_window_bits,r}acceptAsClient(e){let n=e[0];if(this._options.clientNoContextTakeover===!1&&n.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!n.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(n.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&n.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return n}normalizeParams(e){return e.forEach(n=>{Object.keys(n).forEach(r=>{let i=n[r];if(i.length>1)throw new Error(`Parameter "${r}" must have only a single value`);if(i=i[0],r==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${r}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${r}": ${i}`)}else if(r==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${r}": ${i}`);i=s}else if(r==="client_no_context_takeover"||r==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${r}": ${i}`)}else throw new Error(`Unknown parameter "${r}"`);n[r]=i})}),e}decompress(e,n,r){su.add(i=>{this._decompress(e,n,(s,o)=>{i(),r(s,o)})})}compress(e,n,r){su.add(i=>{this._compress(e,n,(s,o)=>{i(),r(s,o)})})}_decompress(e,n,r){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?aa.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=aa.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[au]=this,this._inflate[Or]=0,this._inflate[ei]=[],this._inflate.on("error",yk),this._inflate.on("data",Jw)}this._inflate[ca]=r,this._inflate.write(e),n&&this._inflate.write(mk),this._inflate.flush(()=>{let s=this._inflate[ou];if(s){this._inflate.close(),this._inflate=null,r(s);return}let o=Vw.concat(this._inflate[ei],this._inflate[Or]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Or]=0,this._inflate[ei]=[],n&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,o)})}_compress(e,n,r){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?aa.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=aa.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Or]=0,this._deflate[ei]=[],this._deflate.on("data",vk)}this._deflate[ca]=r,this._deflate.write(e),this._deflate.flush(aa.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=Vw.concat(this._deflate[ei],this._deflate[Or]);n&&(s=s.slice(0,s.length-4)),this._deflate[ca]=null,this._deflate[Or]=0,this._deflate[ei]=[],n&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,s)})}};Yw.exports=eg;function vk(t){this[ei].push(t),this[Or]+=t.length}function Jw(t){if(this[Or]+=t.length,this[au]._maxPayload<1||this[Or]<=this[au]._maxPayload){this[ei].push(t);return}this[ou]=new RangeError("Max payload size exceeded"),this[ou].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[ou][Xw]=1009,this.removeListener("data",Jw),this.reset()}function yk(t){this[au]._inflate=null,t[Xw]=1007,this[ca](t)}});var la=w((_j,tg)=>{"use strict";var _k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function wk(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Qw(t){let e=t.length,n=0;for(;n<e;)if((t[n]&128)===0)n++;else if((t[n]&224)===192){if(n+1===e||(t[n+1]&192)!==128||(t[n]&254)===192)return!1;n+=2}else if((t[n]&240)===224){if(n+2>=e||(t[n+1]&192)!==128||(t[n+2]&192)!==128||t[n]===224&&(t[n+1]&224)===128||t[n]===237&&(t[n+1]&224)===160)return!1;n+=3}else if((t[n]&248)===240){if(n+3>=e||(t[n+1]&192)!==128||(t[n+2]&192)!==128||(t[n+3]&192)!==128||t[n]===240&&(t[n+1]&240)===128||t[n]===244&&t[n+1]>143||t[n]>244)return!1;n+=4}else return!1;return!0}tg.exports={isValidStatusCode:wk,isValidUTF8:Qw,tokenChars:_k};if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");tg.exports.isValidUTF8=function(e){return e.length<150?Qw(e):t(e)}}catch{}});var sg=w((wj,sC)=>{"use strict";var{Writable:Ck}=require("stream"),Zw=ua(),{BINARY_TYPES:bk,EMPTY_BUFFER:eC,kStatusCode:Sk,kWebSocket:Rk}=Zr(),{concat:ng,toArrayBuffer:Dk,unmask:Tk}=oa(),{isValidStatusCode:Ek,isValidUTF8:tC}=la(),da=0,nC=1,rC=2,iC=3,rg=4,xk=5,ig=class extends Ck{constructor(e={}){super(),this._binaryType=e.binaryType||bk[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Rk]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=da,this._loop=!1}_write(e,n,r){if(this._opcode===8&&this._state==da)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let r=this._buffers[0];return this._buffers[0]=r.slice(e),r.slice(0,e)}let n=Buffer.allocUnsafe(e);do{let r=this._buffers[0],i=n.length-e;e>=r.length?n.set(this._buffers.shift(),i):(n.set(new Uint8Array(r.buffer,r.byteOffset,e),i),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return n}startLoop(e){let n;this._loop=!0;do switch(this._state){case da:n=this.getInfo();break;case nC:n=this.getPayloadLength16();break;case rC:n=this.getPayloadLength64();break;case iC:this.getMask();break;case rg:n=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(n)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((e[0]&48)!==0)return this._loop=!1,yt(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let n=(e[0]&64)===64;if(n&&!this._extensions[Zw.extensionName])return this._loop=!1,yt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(n)return this._loop=!1,yt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,yt(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,yt(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,yt(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(n)return this._loop=!1,yt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,yt(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,yt(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,yt(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,yt(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=nC;else if(this._payloadLength===127)this._state=rC;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),n=e.readUInt32BE(0);return n>Math.pow(2,53-32)-1?(this._loop=!1,yt(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=n*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,yt(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=iC:this._state=rg}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=rg}getData(e){let n=eC;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}n=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&Tk(n,this._mask)}if(this._opcode>7)return this.controlMessage(n);if(this._compressed){this._state=xk,this.decompress(n,e);return}return n.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(n)),this.dataMessage()}decompress(e,n){this._extensions[Zw.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return n(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return n(yt(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}let o=this.dataMessage();if(o)return n(o);this.startLoop(n)})}dataMessage(){if(this._fin){let e=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let r;this._binaryType==="nodebuffer"?r=ng(n,e):this._binaryType==="arraybuffer"?r=Dk(ng(n,e)):r=n,this.emit("message",r,!0)}else{let r=ng(n,e);if(!this._skipUTF8Validation&&!tC(r))return this._loop=!1,yt(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=da}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,eC),this.end();else{if(e.length===1)return yt(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let n=e.readUInt16BE(0);if(!Ek(n))return yt(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let r=e.slice(2);if(!this._skipUTF8Validation&&!tC(r))return yt(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",n,r),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=da}};sC.exports=ig;function yt(t,e,n,r,i){let s=new t(n?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(s,yt),s.code=i,s[Sk]=r,s}});var og=w((Sj,cC)=>{"use strict";var Cj=require("net"),bj=require("tls"),{randomFillSync:Pk}=require("crypto"),oC=ua(),{EMPTY_BUFFER:qk}=Zr(),{isValidStatusCode:Ok}=la(),{mask:aC,toBuffer:qs}=oa(),Qn=Symbol("kByteLength"),kk=Buffer.alloc(4),dr=class{constructor(e,n,r){this._extensions=n||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,n){let r,i=!1,s=2,o=!1;n.mask&&(r=n.maskBuffer||kk,n.generateMask?n.generateMask(r):Pk(r,0,4),o=(r[0]|r[1]|r[2]|r[3])===0,s=6);let a;typeof e=="string"?(!n.mask||o)&&n[Qn]!==void 0?a=n[Qn]:(e=Buffer.from(e),a=e.length):(a=e.length,i=n.mask&&n.readOnly&&!o);let c=a;a>=65536?(s+=8,c=127):a>125&&(s+=2,c=126);let u=Buffer.allocUnsafe(i?a+s:s);return u[0]=n.fin?n.opcode|128:n.opcode,n.rsv1&&(u[0]|=64),u[1]=c,c===126?u.writeUInt16BE(a,2):c===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),n.mask?(u[1]|=128,u[s-4]=r[0],u[s-3]=r[1],u[s-2]=r[2],u[s-1]=r[3],o?[u,e]:i?(aC(e,r,u,s,a),[u]):(aC(e,r,e,0,a),[u,e])):[u,e]}close(e,n,r,i){let s;if(e===void 0)s=qk;else{if(typeof e!="number"||!Ok(e))throw new TypeError("First argument must be a valid error code number");if(n===void 0||!n.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(n);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof n=="string"?s.write(n,2):s.set(n,2)}}let o={[Qn]:s.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(dr.frame(s,o),i)}ping(e,n,r){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):(e=qs(e),i=e.length,s=qs.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Qn]:i,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(dr.frame(e,o),r)}pong(e,n,r){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):(e=qs(e),i=e.length,s=qs.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Qn]:i,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(dr.frame(e,o),r)}send(e,n,r){let i=this._extensions[oC.extensionName],s=n.binary?2:1,o=n.compress,a,c;if(typeof e=="string"?(a=Buffer.byteLength(e),c=!1):(e=qs(e),a=e.length,c=qs.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=i._threshold),this._compress=o):(o=!1,s=0),n.fin&&(this._firstFragment=!0),i){let u={[Qn]:a,fin:n.fin,generateMask:this._generateMask,mask:n.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:c,rsv1:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}else this.sendFrame(dr.frame(e,{[Qn]:a,fin:n.fin,generateMask:this._generateMask,mask:n.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:c,rsv1:!1}),r)}dispatch(e,n,r,i){if(!n){this.sendFrame(dr.frame(e,r),i);return}let s=this._extensions[oC.extensionName];this._bufferedBytes+=r[Qn],this._deflating=!0,s.compress(e,r.fin,(o,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(c);for(let u=0;u<this._queue.length;u++){let l=this._queue[u],d=l[l.length-1];typeof d=="function"&&d(c)}return}this._bufferedBytes-=r[Qn],this._deflating=!1,r.readOnly=!1,this.sendFrame(dr.frame(a,r),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Qn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Qn],this._queue.push(e)}sendFrame(e,n){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],n),this._socket.uncork()):this._socket.write(e[0],n)}};cC.exports=dr});var yC=w((Rj,vC)=>{"use strict";var{kForOnEventAttribute:ag,kListener:uC}=Zr(),lC=Symbol("kCode"),dC=Symbol("kData"),fC=Symbol("kError"),hC=Symbol("kMessage"),pC=Symbol("kReason"),Os=Symbol("kTarget"),gC=Symbol("kType"),mC=Symbol("kWasClean"),kr=class{constructor(e){this[Os]=null,this[gC]=e}get target(){return this[Os]}get type(){return this[gC]}};Object.defineProperty(kr.prototype,"target",{enumerable:!0});Object.defineProperty(kr.prototype,"type",{enumerable:!0});var Fi=class extends kr{constructor(e,n={}){super(e),this[lC]=n.code===void 0?0:n.code,this[pC]=n.reason===void 0?"":n.reason,this[mC]=n.wasClean===void 0?!1:n.wasClean}get code(){return this[lC]}get reason(){return this[pC]}get wasClean(){return this[mC]}};Object.defineProperty(Fi.prototype,"code",{enumerable:!0});Object.defineProperty(Fi.prototype,"reason",{enumerable:!0});Object.defineProperty(Fi.prototype,"wasClean",{enumerable:!0});var ks=class extends kr{constructor(e,n={}){super(e),this[fC]=n.error===void 0?null:n.error,this[hC]=n.message===void 0?"":n.message}get error(){return this[fC]}get message(){return this[hC]}};Object.defineProperty(ks.prototype,"error",{enumerable:!0});Object.defineProperty(ks.prototype,"message",{enumerable:!0});var fa=class extends kr{constructor(e,n={}){super(e),this[dC]=n.data===void 0?null:n.data}get data(){return this[dC]}};Object.defineProperty(fa.prototype,"data",{enumerable:!0});var Nk={addEventListener(t,e,n={}){let r;if(t==="message")r=function(s,o){let a=new fa("message",{data:o?s:s.toString()});a[Os]=this,e.call(this,a)};else if(t==="close")r=function(s,o){let a=new Fi("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Os]=this,e.call(this,a)};else if(t==="error")r=function(s){let o=new ks("error",{error:s,message:s.message});o[Os]=this,e.call(this,o)};else if(t==="open")r=function(){let s=new kr("open");s[Os]=this,e.call(this,s)};else return;r[ag]=!!n[ag],r[uC]=e,n.once?this.once(t,r):this.on(t,r)},removeEventListener(t,e){for(let n of this.listeners(t))if(n[uC]===e&&!n[ag]){this.removeListener(t,n);break}}};vC.exports={CloseEvent:Fi,ErrorEvent:ks,Event:kr,EventTarget:Nk,MessageEvent:fa}});var cg=w((Dj,_C)=>{"use strict";var{tokenChars:ha}=la();function fr(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}function Ik(t){let e=Object.create(null),n=Object.create(null),r=!1,i=!1,s=!1,o,a,c=-1,u=-1,l=-1,d=0;for(;d<t.length;d++)if(u=t.charCodeAt(d),o===void 0)if(l===-1&&ha[u]===1)c===-1&&(c=d);else if(d!==0&&(u===32||u===9))l===-1&&c!==-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let p=t.slice(c,l);u===44?(fr(e,p,n),n=Object.create(null)):o=p,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(l===-1&&ha[u]===1)c===-1&&(c=d);else if(u===32||u===9)l===-1&&c!==-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d),fr(n,t.slice(c,l),!0),u===44&&(fr(e,o,n),n=Object.create(null),o=void 0),c=l=-1}else if(u===61&&c!==-1&&l===-1)a=t.slice(c,d),c=l=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(i){if(ha[u]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);c===-1?c=d:r||(r=!0),i=!1}else if(s)if(ha[u]===1)c===-1&&(c=d);else if(u===34&&c!==-1)s=!1,l=d;else if(u===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(u===34&&t.charCodeAt(d-1)===61)s=!0;else if(l===-1&&ha[u]===1)c===-1&&(c=d);else if(c!==-1&&(u===32||u===9))l===-1&&(l=d);else if(u===59||u===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let p=t.slice(c,l);r&&(p=p.replace(/\\/g,""),r=!1),fr(n,a,p),u===44&&(fr(e,o,n),n=Object.create(null),o=void 0),a=void 0,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(c===-1||s||u===32||u===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=d);let h=t.slice(c,l);return o===void 0?fr(e,h,n):(a===void 0?fr(n,h,!0):r?fr(n,a,h.replace(/\\/g,"")):fr(n,a,h),fr(e,o,n)),e}function Fk(t){return Object.keys(t).map(e=>{let n=t[e];return Array.isArray(n)||(n=[n]),n.map(r=>[e].concat(Object.keys(r).map(i=>{let s=r[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}_C.exports={format:Fk,parse:Ik}});var hg=w((Ej,qC)=>{"use strict";var Lk=require("events"),Mk=require("https"),Ak=require("http"),bC=require("net"),jk=require("tls"),{randomBytes:$k,createHash:Uk}=require("crypto"),{Readable:Tj}=require("stream"),{URL:ug}=require("url"),ti=ua(),Hk=sg(),Wk=og(),{BINARY_TYPES:wC,EMPTY_BUFFER:cu,GUID:Bk,kForOnEventAttribute:lg,kListener:zk,kStatusCode:Gk,kWebSocket:$t,NOOP:SC}=Zr(),{EventTarget:{addEventListener:Kk,removeEventListener:Vk}}=yC(),{format:Xk,parse:Jk}=cg(),{toBuffer:Yk}=oa(),Qk=30*1e3,RC=Symbol("kAborted"),dg=[8,13],Nr=["CONNECTING","OPEN","CLOSING","CLOSED"],Zk=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,he=class extends Lk{constructor(e,n,r){super(),this._binaryType=wC[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=cu,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=he.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,n===void 0?n=[]:Array.isArray(n)||(typeof n=="object"&&n!==null?(r=n,n=[]):n=[n]),DC(this,e,n,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){!wC.includes(e)||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,n,r){let i=new Hk({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new Wk(e,this._extensions,r.generateMask),this._receiver=i,this._socket=e,i[$t]=this,e[$t]=this,i.on("conclude",nN),i.on("drain",rN),i.on("error",iN),i.on("message",sN),i.on("ping",oN),i.on("pong",aN),e.setTimeout(0),e.setNoDelay(),n.length>0&&e.unshift(n),e.on("close",EC),e.on("data",lu),e.on("end",xC),e.on("error",PC),this._readyState=he.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=he.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[ti.extensionName]&&this._extensions[ti.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=he.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,n){if(this.readyState!==he.CLOSED){if(this.readyState===he.CONNECTING){let r="WebSocket was closed before the connection was established";return vn(this,this._req,r)}if(this.readyState===he.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=he.CLOSING,this._sender.close(e,n,!this._isServer,r=>{r||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Qk)}}pause(){this.readyState===he.CONNECTING||this.readyState===he.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,n,r){if(this.readyState===he.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=n=void 0):typeof n=="function"&&(r=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==he.OPEN){fg(this,e,r);return}n===void 0&&(n=!this._isServer),this._sender.ping(e||cu,n,r)}pong(e,n,r){if(this.readyState===he.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=n=void 0):typeof n=="function"&&(r=n,n=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==he.OPEN){fg(this,e,r);return}n===void 0&&(n=!this._isServer),this._sender.pong(e||cu,n,r)}resume(){this.readyState===he.CONNECTING||this.readyState===he.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,n,r){if(this.readyState===he.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof n=="function"&&(r=n,n={}),typeof e=="number"&&(e=e.toString()),this.readyState!==he.OPEN){fg(this,e,r);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...n};this._extensions[ti.extensionName]||(i.compress=!1),this._sender.send(e||cu,i,r)}terminate(){if(this.readyState!==he.CLOSED){if(this.readyState===he.CONNECTING){let e="WebSocket was closed before the connection was established";return vn(this,this._req,e)}this._socket&&(this._readyState=he.CLOSING,this._socket.destroy())}}};Object.defineProperty(he,"CONNECTING",{enumerable:!0,value:Nr.indexOf("CONNECTING")});Object.defineProperty(he.prototype,"CONNECTING",{enumerable:!0,value:Nr.indexOf("CONNECTING")});Object.defineProperty(he,"OPEN",{enumerable:!0,value:Nr.indexOf("OPEN")});Object.defineProperty(he.prototype,"OPEN",{enumerable:!0,value:Nr.indexOf("OPEN")});Object.defineProperty(he,"CLOSING",{enumerable:!0,value:Nr.indexOf("CLOSING")});Object.defineProperty(he.prototype,"CLOSING",{enumerable:!0,value:Nr.indexOf("CLOSING")});Object.defineProperty(he,"CLOSED",{enumerable:!0,value:Nr.indexOf("CLOSED")});Object.defineProperty(he.prototype,"CLOSED",{enumerable:!0,value:Nr.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(he.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(he.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[lg])return e[zk];return null},set(e){for(let n of this.listeners(t))if(n[lg]){this.removeListener(t,n);break}typeof e=="function"&&this.addEventListener(t,e,{[lg]:!0})}})});he.prototype.addEventListener=Kk;he.prototype.removeEventListener=Vk;qC.exports=he;function DC(t,e,n,r){let i={protocolVersion:dg[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...r,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!dg.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${dg.join(", ")})`);let s;if(e instanceof ug)s=e,t._url=e.href;else{try{s=new ug(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}t._url=e}let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",c;if(s.protocol!=="ws:"&&!o&&!a?c=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:a&&!s.pathname?c="The URL's pathname is empty":s.hash&&(c="The URL contains a fragment identifier"),c){let y=new SyntaxError(c);if(t._redirects===0)throw y;uu(t,y);return}let u=o?443:80,l=$k(16).toString("base64"),d=o?Mk.request:Ak.request,h=new Set,p;if(i.createConnection=o?tN:eN,i.defaultPort=i.defaultPort||u,i.port=s.port||u,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(p=new ti(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=Xk({[ti.extensionName]:p.offer()})),n.length){for(let y of n){if(typeof y!="string"||!Zk.test(y)||h.has(y))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(y)}i.headers["Sec-WebSocket-Protocol"]=n.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){let y=i.path.split(":");i.socketPath=y[0],i.path=y[1]}let m;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?i.socketPath:s.host;let y=r&&r.headers;if(r={...r,headers:{}},y)for(let[_,S]of Object.entries(y))r.headers[_.toLowerCase()]=S}else if(t.listenerCount("redirect")===0){let y=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!y||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,y||delete i.headers.host,i.auth=void 0)}i.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),m=t._req=d(i),t._redirects&&t.emit("redirect",t.url,m)}else m=t._req=d(i);i.timeout&&m.on("timeout",()=>{vn(t,m,"Opening handshake has timed out")}),m.on("error",y=>{m===null||m[RC]||(m=t._req=null,uu(t,y))}),m.on("response",y=>{let _=y.headers.location,S=y.statusCode;if(_&&i.followRedirects&&S>=300&&S<400){if(++t._redirects>i.maxRedirects){vn(t,m,"Maximum redirects exceeded");return}m.abort();let T;try{T=new ug(_,e)}catch{let k=new SyntaxError(`Invalid URL: ${_}`);uu(t,k);return}DC(t,T,n,r)}else t.emit("unexpected-response",m,y)||vn(t,m,`Unexpected server response: ${y.statusCode}`)}),m.on("upgrade",(y,_,S)=>{if(t.emit("upgrade",y),t.readyState!==he.CONNECTING)return;if(m=t._req=null,y.headers.upgrade.toLowerCase()!=="websocket"){vn(t,_,"Invalid Upgrade header");return}let T=Uk("sha1").update(l+Bk).digest("base64");if(y.headers["sec-websocket-accept"]!==T){vn(t,_,"Invalid Sec-WebSocket-Accept header");return}let x=y.headers["sec-websocket-protocol"],k;if(x!==void 0?h.size?h.has(x)||(k="Server sent an invalid subprotocol"):k="Server sent a subprotocol but none was requested":h.size&&(k="Server sent no subprotocol"),k){vn(t,_,k);return}x&&(t._protocol=x);let W=y.headers["sec-websocket-extensions"];if(W!==void 0){if(!p){vn(t,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let Q;try{Q=Jk(W)}catch{vn(t,_,"Invalid Sec-WebSocket-Extensions header");return}let oe=Object.keys(Q);if(oe.length!==1||oe[0]!==ti.extensionName){vn(t,_,"Server indicated an extension that was not requested");return}try{p.accept(Q[ti.extensionName])}catch{vn(t,_,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[ti.extensionName]=p}t.setSocket(_,S,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),m.end()}function uu(t,e){t._readyState=he.CLOSING,t.emit("error",e),t.emitClose()}function eN(t){return t.path=t.socketPath,bC.connect(t)}function tN(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=bC.isIP(t.host)?"":t.host),jk.connect(t)}function vn(t,e,n){t._readyState=he.CLOSING;let r=new Error(n);Error.captureStackTrace(r,vn),e.setHeader?(e[RC]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(uu,t,r)):(e.destroy(r),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function fg(t,e,n){if(e){let r=Yk(e).length;t._socket?t._sender._bufferedBytes+=r:t._bufferedAmount+=r}if(n){let r=new Error(`WebSocket is not open: readyState ${t.readyState} (${Nr[t.readyState]})`);n(r)}}function nN(t,e){let n=this[$t];n._closeFrameReceived=!0,n._closeMessage=e,n._closeCode=t,n._socket[$t]!==void 0&&(n._socket.removeListener("data",lu),process.nextTick(TC,n._socket),t===1005?n.close():n.close(t,e))}function rN(){let t=this[$t];t.isPaused||t._socket.resume()}function iN(t){let e=this[$t];e._socket[$t]!==void 0&&(e._socket.removeListener("data",lu),process.nextTick(TC,e._socket),e.close(t[Gk])),e.emit("error",t)}function CC(){this[$t].emitClose()}function sN(t,e){this[$t].emit("message",t,e)}function oN(t){let e=this[$t];e.pong(t,!e._isServer,SC),e.emit("ping",t)}function aN(t){this[$t].emit("pong",t)}function TC(t){t.resume()}function EC(){let t=this[$t];this.removeListener("close",EC),this.removeListener("data",lu),this.removeListener("end",xC),t._readyState=he.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[$t]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",CC),t._receiver.on("finish",CC))}function lu(t){this[$t]._receiver.write(t)||this.pause()}function xC(){let t=this[$t];t._readyState=he.CLOSING,t._receiver.end(),this.end()}function PC(){let t=this[$t];this.removeListener("error",PC),this.on("error",SC),t&&(t._readyState=he.CLOSING,this.destroy())}});var IC=w((xj,NC)=>{"use strict";var{Duplex:cN}=require("stream");function OC(t){t.emit("close")}function uN(){!this.destroyed&&this._writableState.finished&&this.destroy()}function kC(t){this.removeListener("error",kC),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function lN(t,e){let n=!0,r=new cN({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&r._readableState.objectMode?s.toString():s;r.push(a)||t.pause()}),t.once("error",function(s){r.destroyed||(n=!1,r.destroy(s))}),t.once("close",function(){r.destroyed||r.push(null)}),r._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(OC,r);return}let o=!1;t.once("error",function(c){o=!0,s(c)}),t.once("close",function(){o||s(i),process.nextTick(OC,r)}),n&&t.terminate()},r._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){r._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),r._readableState.endEmitted&&r.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},r._read=function(){t.isPaused&&t.resume()},r._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){r._write(i,s,o)});return}t.send(i,o)},r.on("end",uN),r.on("error",kC),r}NC.exports=lN});var LC=w((Pj,FC)=>{"use strict";var{tokenChars:dN}=la();function fN(t){let e=new Set,n=-1,r=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(r===-1&&dN[o]===1)n===-1&&(n=i);else if(i!==0&&(o===32||o===9))r===-1&&n!==-1&&(r=i);else if(o===44){if(n===-1)throw new SyntaxError(`Unexpected character at index ${i}`);r===-1&&(r=i);let a=t.slice(n,r);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),n=r=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(n===-1||r!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(n,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}FC.exports={parse:fN}});var WC=w((Nj,HC)=>{"use strict";var hN=require("events"),du=require("http"),qj=require("https"),Oj=require("net"),kj=require("tls"),{createHash:pN}=require("crypto"),MC=cg(),Li=ua(),gN=LC(),mN=hg(),{GUID:vN,kWebSocket:yN}=Zr(),_N=/^[+/0-9A-Za-z]{22}==$/,AC=0,jC=1,UC=2,pg=class extends hN{constructor(e,n){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:mN,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=du.createServer((r,i)=>{let s=du.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,n)):e.server&&(this._server=e.server),this._server){let r=this.emit.bind(this,"connection");this._removeListeners=wN(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,r)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=AC}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===UC){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(pa,this);return}if(e&&this.once("close",e),this._state!==jC)if(this._state=jC,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(pa,this):process.nextTick(pa,this);else{let n=this._server;this._removeListeners(),this._removeListeners=this._server=null,n.close(()=>{pa(this)})}}shouldHandle(e){if(this.options.path){let n=e.url.indexOf("?");if((n!==-1?e.url.slice(0,n):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,n,r,i){n.on("error",$C);let s=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Mi(this,e,n,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Mi(this,e,n,400,"Invalid Upgrade header");return}if(!s||!_N.test(s)){Mi(this,e,n,400,"Missing or invalid Sec-WebSocket-Key header");return}if(o!==8&&o!==13){Mi(this,e,n,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){ga(n,400);return}let a=e.headers["sec-websocket-protocol"],c=new Set;if(a!==void 0)try{c=gN.parse(a)}catch{Mi(this,e,n,400,"Invalid Sec-WebSocket-Protocol header");return}let u=e.headers["sec-websocket-extensions"],l={};if(this.options.perMessageDeflate&&u!==void 0){let d=new Li(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let h=MC.parse(u);h[Li.extensionName]&&(d.accept(h[Li.extensionName]),l[Li.extensionName]=d)}catch{Mi(this,e,n,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let d={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(d,(h,p,m,y)=>{if(!h)return ga(n,p||401,m,y);this.completeUpgrade(l,s,c,e,n,r,i)});return}if(!this.options.verifyClient(d))return ga(n,401)}this.completeUpgrade(l,s,c,e,n,r,i)}completeUpgrade(e,n,r,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[yN])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>AC)return ga(s,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${pN("sha1").update(n+vN).digest("base64")}`],l=new this.options.WebSocket(null);if(r.size){let d=this.options.handleProtocols?this.options.handleProtocols(r,i):r.values().next().value;d&&(u.push(`Sec-WebSocket-Protocol: ${d}`),l._protocol=d)}if(e[Li.extensionName]){let d=e[Li.extensionName].params,h=MC.format({[Li.extensionName]:[d]});u.push(`Sec-WebSocket-Extensions: ${h}`),l._extensions=e}this.emit("headers",u,i),s.write(u.concat(`\r
`).join(`\r
`)),s.removeListener("error",$C),l.setSocket(s,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(pa,this)})),a(l,i)}};HC.exports=pg;function wN(t,e){for(let n of Object.keys(e))t.on(n,e[n]);return function(){for(let r of Object.keys(e))t.removeListener(r,e[r])}}function pa(t){t._state=UC,t.emit("close")}function $C(){this.destroy()}function ga(t,e,n,r){n=n||du.STATUS_CODES[e],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...r},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${du.STATUS_CODES[e]}\r
`+Object.keys(r).map(i=>`${i}: ${r[i]}`).join(`\r
`)+`\r
\r
`+n)}function Mi(t,e,n,r,i){if(t.listenerCount("wsClientError")){let s=new Error(i);Error.captureStackTrace(s,Mi),t.emit("wsClientError",s,n,e)}else ga(n,r,i)}});var zC=w((Ij,BC)=>{"use strict";var Ir=hg();Ir.createWebSocketStream=IC();Ir.Server=WC();Ir.Receiver=sg();Ir.Sender=og();Ir.WebSocket=Ir;Ir.WebSocketServer=Ir.Server;BC.exports=Ir});var GC=w(fu=>{Object.defineProperty(fu,"__esModule",{value:!0});fu.createPreviewConnection=void 0;var CN=zC();function bN(t){let e=[],n,r=0;return n=new CN.Server({port:56789}),n.on("connection",a=>{e.push(a),a.on("message",c=>{let u=JSON.parse(c.toString());if(u.command==="goToTemplate"){let l=++r,d=u.data,h={get isCancelled(){return l!==r}};t.onGotoCode(d.fileName,d.range,h)}if(u.command==="requestOpenFile"){let l=u.data,d=t.getFileHref(l.fileName,l.range);a.send(JSON.stringify({command:"openFile",data:d}))}})}),{stop:i,highlight:s,unhighlight:o};function i(){n?.close(),e.length=0}function s(a,c,u){let l={command:"highlightSelections",data:{fileName:a,ranges:c,isDirty:u}};for(let d of e)d.send(JSON.stringify(l))}function o(){let a={command:"highlightSelections",data:void 0};for(let c of e)c.send(JSON.stringify(a))}}fu.createPreviewConnection=bN});var VC=w(ni=>{var SN=ni&&ni.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(ni,"__esModule",{value:!0});ni.getLocalHostAvailablePort=ni.isLocalHostPortUsing=void 0;var RN=require("http");function KC(t){return new Promise(e=>{RN.get(`http://localhost:${t}/`,{headers:{accept:"*/*"}},n=>{e(n.statusCode===200)}).on("error",()=>e(!1)).end()})}ni.isLocalHostPortUsing=KC;function DN(t){return SN(this,void 0,void 0,function*(){return(yield KC(t))&&t++,t})}ni.getLocalHostAvailablePort=DN});var QC=w(Ns=>{var an=Ns&&Ns.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.register=void 0;var $=require("vscode"),kt=ra(),XC=Ow(),JC=Uw(),gg=ea(),YC=GC(),TN=VC(),EN=Ct();function xN(t,e){return an(this,void 0,void 0,function*(){let n=new Set,r=new Map,i,s,o=!1,a,c=$.window.createStatusBarItem($.StatusBarAlignment.Right,-1);c.command="volar.previewMenu",c.backgroundColor=new $.ThemeColor("statusBarItem.warningBackground"),t.subscriptions.push(c);let u,l=!0,d=new $.EventEmitter,h=$.window.terminals.find(L=>L.name.startsWith("volar-preview:"));h&&(u=YC.createPreviewConnection({onGotoCode:k,getFileHref:(L,M)=>(o=!1,a?.(),"vscode://files:/"+L)}),d.fire(),c.text="Preview Port: "+h.name.split(":")[1],c.show()),$.window.onDidOpenTerminal(L=>{L.name.startsWith("volar-preview:")&&(u=YC.createPreviewConnection({onGotoCode:k,getFileHref:(M,G)=>(o=!1,a?.(),"vscode://files:/"+M)}),d.fire(),c.text="Preview Port: "+L.name.split(":")[1],c.show())}),$.window.onDidCloseTerminal(L=>{L.name.startsWith("volar-preview:")&&(u?.stop(),u=void 0,d.fire(),c.hide())});let p=new WeakMap;class m{resolveWebviewView(M,G,de){let Z;M.webview.options={enableScripts:!0},ie(!0),a=ie,$.window.onDidChangeActiveTextEditor(()=>{o||!$.window.activeTextEditor||Z===$.window.activeTextEditor.document||ie(!1)}),$.workspace.onDidChangeTextDocument(()=>ie(!1)),$.workspace.onDidChangeConfiguration(()=>ie(!0)),M.onDidChangeVisibility(()=>ie(!1));function ie(Te){var N;return an(this,void 0,void 0,function*(){if(!M.visible||(((N=$.window.activeTextEditor)===null||N===void 0?void 0:N.document.languageId)==="vue"&&(Z=$.window.activeTextEditor.document),!Z))return;let D=Z.fileName,I=$.window.terminals.find(se=>se.name.startsWith("volar-preview:")),O,ee=yield Q(D,"vite");if(!ee)return;if(I)O=Number(I.name.split(":")[1]);else{let se=kt.dirname(ee),Ge=yield W(se,"vite");I=Ge.terminal,O=Ge.port}let te=JC.normalizeFileName(kt.relative(kt.dirname(ee),D)),B=`http://localhost:${O}/__preview${te}#`;if(Z.isDirty&&(B+=btoa(Z.getText())),Te){let se=$.Uri.file(kt.join(t.extensionPath,"images/preview-bg.png")),Ge=M.webview.asWebviewUri(se);M.webview.html="",M.webview.html=oe(B,void 0,Ge.toString())}else M.webview.postMessage({sender:"volar",command:"updateUrl",data:B})})}}}class y{deserializeWebviewPanel(M,G){return an(this,void 0,void 0,function*(){if(!$.window.terminals.find(ie=>ie.name.startsWith("volar-preview:")))return;let Z=yield x("volar-webview",G.fileName,G.mode,M);M.webview.html=oe(`http://localhost:${Z}`,G)})}}$.window.registerWebviewViewProvider("vueComponentPreview",new m),t.subscriptions.push($.commands.registerCommand("volar.previewMenu",()=>an(this,void 0,void 0,function*(){let L={},M={},G={};L.kill={label:"Kill Preview Server"},L.browser={label:"Open in Browser"};for(let Z of n)M["url::"+r.get(Z)]={label:"Input WebView URL",detail:r.get(Z)};G["highlight-on"]={label:(l?"\u2022 ":"")+"Highlight DOM Elements"},G["highlight-off"]={label:(l?"":"\u2022 ")+"Don't Highlight DOM Elements"};let de=yield(0,gg.quickPick)([L,M,G]);if(de?.startsWith("url::")){let Z=de.split("::")[1],ie=yield $.window.showInputBox({value:Z});for(let Te of n)r.get(Te)===Z&&ie!==void 0&&ie!==c.text&&(Te.webview.html=oe(ie))}if(de==="kill")for(let Z of $.window.terminals){Z.name.startsWith("volar-preview:")&&Z.dispose();for(let ie of n)ie.dispose()}de==="browser"&&$.env.openExternal($.Uri.parse("http://localhost:"+c.text.split(":")[1].trim())),de==="highlight-on"&&(l=!0,$.window.activeTextEditor&&T($.window.activeTextEditor)),de==="highlight-off"&&(l=!1,$.window.activeTextEditor&&T($.window.activeTextEditor))}))),t.subscriptions.push($.commands.registerCommand("volar.action.vite",()=>an(this,void 0,void 0,function*(){let L=$.window.activeTextEditor;if(!L)return;let M=yield Q(L.document.fileName,"vite"),G=yield(0,gg.quickPick)({["volar-webview"]:{label:"Preview Vite App",detail:$.workspace.rootPath&&M?kt.relative($.workspace.rootPath,M):M},["volar-start-server"]:{label:"Preview Vite App in External Browser",detail:$.workspace.rootPath&&M?kt.relative($.workspace.rootPath,M):M,description:"Press `Alt` to use go to code in Browser"},["volar-component-preview"]:{label:"Preview Component in External Browser",detail:$.workspace.rootPath?kt.relative($.workspace.rootPath,L.document.fileName):L.document.fileName}});G!==void 0&&x(G,L.document.fileName,"vite")}))),t.subscriptions.push($.commands.registerCommand("volar.action.nuxt",()=>an(this,void 0,void 0,function*(){let L=$.window.activeTextEditor;if(!L)return;let M=yield Q(L.document.fileName,"nuxt"),G=yield(0,gg.quickPick)({["volar-webview"]:{label:"Preview Nuxt App",detail:$.workspace.rootPath&&M?kt.relative($.workspace.rootPath,M):M},["volar-start-server"]:{label:"Preview Nuxt App in External Browser",detail:$.workspace.rootPath&&M?kt.relative($.workspace.rootPath,M):M,description:"Press `Alt` to use go to code in Browser"}});G!==void 0&&x(G,L.document.fileName,"nuxt")}))),t.subscriptions.push($.commands.registerCommand("volar.action.selectElement",()=>{let L=[...n].find(M=>M.active);L&&L.webview.postMessage({sender:"volar",command:"selectElement"})})),t.subscriptions.push($.commands.registerCommand("volar.action.openInBrowser",()=>{for(let L of n)$.env.openExternal($.Uri.parse(r.get(L)))})),t.subscriptions.push($.window.onDidChangeTextEditorSelection(L=>{T(L.textEditor)})),t.subscriptions.push($.workspace.onDidChangeTextDocument(L=>{$.window.activeTextEditor&&T($.window.activeTextEditor)})),t.subscriptions.push($.workspace.onDidSaveTextDocument(L=>{$.window.activeTextEditor&&T($.window.activeTextEditor)})),t.subscriptions.push($.window.registerWebviewPanelSerializer("volar-webview",new y)),t.subscriptions.push($.window.onDidChangeActiveTextEditor(S)),S();function _(L){return an(this,void 0,void 0,function*(){let M=p.get(L);if(!M||M.version!==L.version){let G=yield e.sendRequest(EN.ParseSFCRequest.type,L.getText());M={version:L.version,sfc:G},p.set(L,M)}return M.sfc})}function S(){var L;return an(this,void 0,void 0,function*(){if(((L=$.window.activeTextEditor)===null||L===void 0?void 0:L.document.languageId)==="vue"){let M=yield Q($.window.activeTextEditor.document.fileName,"vite"),G=yield Q($.window.activeTextEditor.document.fileName,"nuxt");$.commands.executeCommand("setContext","volar.foundViteDir",M!==void 0),$.commands.executeCommand("setContext","volar.foundNuxtDir",G!==void 0)}})}function T(L){var M,G;return an(this,void 0,void 0,function*(){if(L.document.languageId==="vue"&&l){let Z=(G=(M=(yield _(L.document)).descriptor.template)===null||M===void 0?void 0:M.loc.start.offset)!==null&&G!==void 0?G:0;u?.highlight(L.document.fileName,L.selections.map(ie=>({start:L.document.offsetAt(ie.start)-Z,end:L.document.offsetAt(ie.end)-Z})),L.document.isDirty)}else u?.unhighlight()})}function x(L,M,G,de){var Z;return an(this,void 0,void 0,function*(){let ie=yield Q(M,G);if(!ie)return;let Te=$.window.terminals.find(B=>B.name.startsWith("volar-preview:")),N;if(Te)N=Number(Te.name.split(":")[1]);else{let B=kt.dirname(ie),se=yield W(B,G);Te=se.terminal,N=se.port}let D=de??$.window.createWebviewPanel(L,"Preview "+kt.relative((Z=$.workspace.rootPath)!==null&&Z!==void 0?Z:"",ie),$.ViewColumn.Beside,{retainContextWhenHidden:!0,enableScripts:!0,enableFindWidget:!0});O();let I=[];if(D.onDidDispose(()=>{for(let B of I)B.dispose();n.delete(D),D!==s&&n.size===0&&Te?.dispose()}),I.push(D.webview.onDidReceiveMessage(te)),L==="volar-start-server"){Te.show(),D.webview.html=oe(`http://localhost:${N}`,void 0,void 0,!0),s=D;return}else if(L==="volar-component-preview"){Te.show();let B=JC.normalizeFileName(kt.relative(kt.dirname(ie),M));D.webview.html=oe(`http://localhost:${N}/__preview${B}`,void 0,void 0,!0),s=D;return}return n.add(D),L==="volar-webview"&&(I.push($.workspace.onDidChangeConfiguration(()=>{D.webview.html=oe(`http://localhost:${N}`,{fileName:M,mode:G})})),D.webview.html=oe(`http://localhost:${N}`,{fileName:M,mode:G})),N;function O(){D.onDidChangeViewState(({webviewPanel:B})=>{ee(B.active),i=B.active?D:void 0}),D.onDidDispose(()=>{i===D&&(ee(!1),i=void 0)})}function ee(B){$.commands.executeCommand("setContext","volarPreviewFocus",B)}function te(B){return an(this,void 0,void 0,function*(){switch(B.command){case"openUrl":{let se=B.data;$.env.openExternal($.Uri.parse(se));break}case"closeExternalBrowserPanel":{s?.dispose();break}case"urlChanged":{let se=B.data;r.set(D,se);break}case"log":{let se=B.data;$.window.showInformationMessage(se);break}case"warn":{let se=B.data;$.window.showWarningMessage(se);break}case"error":{let se=B.data;$.window.showErrorMessage(se);break}}})}})}function k(L,M,G){var de,Z;return an(this,void 0,void 0,function*(){o=!0;let ie=yield $.workspace.openTextDocument(L);if(G.isCancelled)return;let N=(Z=(de=(yield _(ie)).descriptor.template)===null||de===void 0?void 0:de.loc.start.offset)!==null&&Z!==void 0?Z:0,D=ie.positionAt(M[0]+N),I=ie.positionAt(M[1]+N);if(yield $.window.showTextDocument(ie,$.ViewColumn.One),G.isCancelled)return;let O=$.window.activeTextEditor;O&&(O.selection=new $.Selection(D,I),O.revealRange(new $.Range(D,I)))})}function W(L,M){var G;return an(this,void 0,void 0,function*(){let de=yield(0,TN.getLocalHostAvailablePort)($.workspace.getConfiguration("volar").get("preview.port")),Z=(G=yield $.workspace.getConfiguration("volar").get("preview.script."+(M==="nuxt"?"nuxi":"vite")))!==null&&G!==void 0?G:"";Z.indexOf("{VITE_BIN}")>=0&&(Z=Z.replace("{VITE_BIN}",JSON.stringify(require.resolve("./dist/preview-bin/vite",{paths:[t.extensionPath]})))),Z.indexOf("{NUXI_BIN}")>=0&&(Z=Z.replace("{NUXI_BIN}",JSON.stringify(require.resolve("./dist/preview-bin/nuxi",{paths:[t.extensionPath]})))),Z.indexOf("{PORT}")>=0&&(Z=Z.replace("{PORT}",de.toString()));let ie=$.window.createTerminal("volar-preview:"+de);return ie.sendText(`cd ${L}`),ie.sendText(Z),{port:de,terminal:ie}})}function Q(L,M){return an(this,void 0,void 0,function*(){let G=kt.dirname(L),de;for(;;){let Z=kt.join(G,M+".config.ts"),ie=kt.join(G,M+".config.js");if(yield XC.exists($.Uri.file(Z))){de=Z;break}if(yield XC.exists($.Uri.file(ie))){de=ie;break}let Te=kt.dirname(G);if(Te===G)break;G=Te}return de})}function oe(L,M,G,de){let Z=$.workspace.getConfiguration("volar");return`
			<style>
			body {
				padding: 0;
				background-color: ${Z.get("preview.backgroundColor")};
				${G&&Z.get("preview.transparentGrid")?`background-image: url(${G});`:""}
			}
			</style>

			<script>

			const vscode = acquireVsCodeApi();
			${M?`vscode.setState(${JSON.stringify(M)});`:""}

			let preview;

			window.addEventListener('message', e => {
				if (e.data.sender === 'volar') {
					if (e.data.command === 'updateUrl') {
						preview.src = e.data.data;
					}
					else {
						preview.contentWindow.postMessage(e.data, '*');
					}
				}
				else {
					vscode.postMessage(e.data);
				}
			});

			const start = Date.now();

			(async () => {

				while (Date.now() - start < 10000 && !(await isServerStart())) {
					await sleep(250);
				}

				preview = document.createElement('iframe');
				preview.src = '${L}';
				preview.onload = previewFrameLoaded;
				preview.frameBorder = '0';
				preview.style.display = 'block';
				preview.style.margin = '0';
				preview.style.overflow = 'hidden';
				preview.style.width = '100%';
				preview.style.height = '0';

				document.body.append(preview);
			})();

			function previewFrameLoaded() {
				preview.onload = undefined;
				${de?`
					vscode.postMessage({ command: 'openUrl', data: '${L}' });
					vscode.postMessage({ command: 'closeExternalBrowserPanel' });
				`:`
					preview.style.height = '100vh';
					document.getElementById('loading').remove();
				`}
			};
			function sleep(ms) {
				return new Promise(resolve => setTimeout(resolve, ms));
			}
			function isServerStart() {
				return new Promise(resolve => {
					fetch('${L}',{method: 'GET', headers: { accept: '*/*' } })
						.then(() => resolve(true))
						.catch(() => resolve(false))
				});
			}
			<\/script>

			<div id="loading">
				<div style="display: flex; align-items: center; flex-direction: column; min-height: 100vh; justify-content: space-evenly;">
					<a href="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/company/sponsors.svg" target="_top">
						<img src="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/company/sponsors.svg?time=${Math.round(Date.now()/1e3/3600)}" />
					</a>

					<div style="height: 35px; width: 116px; display: flex;">
						<a
							style="box-shadow: none; background-color: rgb(250, 251, 252); border-block: 1px solid rgba(27, 31, 35, 0.15); border-bottom-left-radius: 6px; border-bottom-right-radius: 6px; border-inline: 1px solid rgba(27, 31, 35, 0.15); border-start-end-radius: 6px; border-start-start-radius: 6px; caret-color: rgb(36, 41, 46); color: rgb(36, 41, 46); display: block; font-size: 14px; font-weight: 500; inline-size: 100%; line-height: 20px; padding-block: 5px; padding-inline: 16px; position: relative; text-align: center; transition-duration: 0.2s; transition-property: background-color; transition-timing-function: cubic-bezier(0.3, 0, 0.5, 1); user-select: none; vertical-align: middle; white-space: nowrap; text-decoration: none; display: inline-flex; align-items: center;"
							aria-label="Sponsor @johnsoncodehk"
							target="_top"
							href="https://github.com/sponsors/johnsoncodehk?o=esb"
						>
							<svg
								aria-hidden="true"
								height="16"
								viewBox="0 0 16 16"
								version="1.1"
								width="16"
								data-view-component="true"
								style="border-block-color: rgb(106, 115, 125); border-inline-color: rgb(106, 115, 125); caret-color: rgb(106, 115, 125); color: rgb(106, 115, 125); display: inline-block; fill: rgb(106, 115, 125); margin-inline-end: 8px; overflow: visible; transform: scale(1, 1); transition-duration: 0.15s; transition-property: transform; transition-timing-function: cubic-bezier(0.2, 0, 0.13, 2); vertical-align: text-bottom;"
							>
								<path
									fill-rule="evenodd"
									d="M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"
								/>
							</svg>
							<span>Sponsor</span>
						</a>
					</div>
				</div>

				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; display: block; shape-rendering: auto; position: absolute; right: 0; bottom: 0;" width="200px" height="100px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
					<g transform="translate(20 50)">
						<circle cx="0" cy="0" r="6" fill="#41b883">
							<animateTransform attributeName="transform" type="scale" begin="-0.375s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
					<g transform="translate(40 50)">
						<circle cx="0" cy="0" r="6" fill="#34495e">
							<animateTransform attributeName="transform" type="scale" begin="-0.25s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
					<g transform="translate(60 50)">
						<circle cx="0" cy="0" r="6" fill="#34495e">
							<animateTransform attributeName="transform" type="scale" begin="-0.125s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
					<g transform="translate(80 50)">
						<circle cx="0" cy="0" r="6" fill="#41b883">
							<animateTransform attributeName="transform" type="scale" begin="0s" calcMode="spline" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" values="0;1;0" keyTimes="0;0.5;1" dur="1s" repeatCount="indefinite"></animateTransform>
						</circle>
					</g>
				</svg>
			</div>
		`}})}Ns.register=xN});var ZC=w(Fs=>{var PN=Fs&&Fs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.activate=void 0;var Is=require("vscode"),qN=Ct();function ON(t,e){return PN(this,void 0,void 0,function*(){t.subscriptions.push(e.onNotification(qN.ShowReferencesNotification.type,n=>{let r=n.textDocument.uri,i=n.position,s=n.references;Is.commands.executeCommand("editor.action.showReferences",Is.Uri.parse(r),new Is.Position(i.line,i.character),s.map(o=>new Is.Location(Is.Uri.parse(o.uri),new Is.Range(o.range.start.line,o.range.start.character,o.range.end.line,o.range.end.character))))}))})}Fs.activate=ON});var nb=w(Ls=>{var eb=Ls&&Ls.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.register=void 0;var On=require("vscode"),tb=Ct();function kN(t,e,n){return eb(this,void 0,void 0,function*(){let r={vue:!0,markdown:!0,javascript:!0,typescript:!0,javascriptreact:!0,typescriptreact:!0},i=[];On.workspace.onDidChangeTextDocument(c,null,i);let s=!1;a(),On.window.onDidChangeActiveTextEditor(a,null,i);let o;function a(){s=!1;let l=On.window.activeTextEditor;if(!l)return;let d=l.document;!r[d.languageId]||(s=!0)}function c({document:l,contentChanges:d,reason:h}){var p;if(!s||d.length===0||h===On.TextDocumentChangeReason.Undo||h===On.TextDocumentChangeReason.Redo)return;let m=(p=On.window.activeTextEditor)===null||p===void 0?void 0:p.document;if(l!==m)return;o&&(clearTimeout(o),o=void 0);let y=d[d.length-1];u(l,y,(_,S,T)=>eb(this,void 0,void 0,function*(){var x;let k=Object.assign(Object.assign({},e.code2ProtocolConverter.asTextDocumentPositionParams(_,S)),{options:{lastChange:Object.assign(Object.assign({},T),{range:e.code2ProtocolConverter.asRange(T.range)})}}),W=(x=yield e.sendRequest(tb.AutoInsertRequest.type,k))!==null&&x!==void 0?x:yield n.sendRequest(tb.AutoInsertRequest.type,k);return typeof W=="string"?W:e.protocol2CodeConverter.asTextEdit(W)}))}function u(l,d,h){let p=d.range.start,m=l.version;o=setTimeout(()=>{let y=new On.Position(p.line,p.character+d.text.length);h(l,y,d).then(_=>{if(_&&s){let S=On.window.activeTextEditor;if(S){let T=S.document;if(l===T&&T.version===m)if(typeof _=="string"){let x=S.selections;x.length&&x.some(k=>k.active.isEqual(y))?S.insertSnippet(new On.SnippetString(_),x.map(k=>k.active)):S.insertSnippet(new On.SnippetString(_),y)}else S.insertSnippet(new On.SnippetString(_.newText),_.range)}}}),o=void 0},100)}return On.Disposable.from(...i)})}Ls.register=kN});var ib=w(hr=>{var mg=hr&&hr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(hr,"__esModule",{value:!0});hr.getTsVersion=hr.getCurrentTsdk=hr.register=void 0;var Fr=ra(),Rt=require("vscode"),NN=ea(),vg=na(),hu=require("fs"),ma="node_modules/typescript/lib";function IN(t,e,n){return mg(this,void 0,void 0,function*(){let r=Rt.window.createStatusBarItem(Rt.StatusBarAlignment.Right);r.command=t;let i=Rt.commands.registerCommand(t,()=>mg(this,void 0,void 0,function*(){var c,u;let l=pu(e).isWorkspacePath,d=gu(),h=yield(0,NN.quickPick)([{use_vscode_tsdk:{label:(l?"":"\u2022 ")+"Use VS Code's Version",description:va(rb())},use_workspace_tsdk:d?{label:(l?"\u2022 ":"")+"Use Workspace Version",description:(c=va(yg(d)))!==null&&c!==void 0?c:"Could not load the TypeScript version at this path",detail:d}:void 0,use_workspace_tsdk_default:d!==ma?{label:(l?"\u2022 ":"")+"Use Workspace Version",description:(u=va(yg(ma)))!==null&&u!==void 0?u:"Could not load the TypeScript version at this path",detail:ma}:void 0},{takeover:{label:"What is Takeover Mode?"}}]);if(h===void 0)return;if(h==="takeover"){Rt.env.openExternal(Rt.Uri.parse("https://vuejs.org/guide/typescript/overview.html#volar-takeover-mode"));return}h==="use_workspace_tsdk_default"&&(yield Rt.workspace.getConfiguration("typescript").update("tsdk",ma));let p=h!=="use_vscode_tsdk";p!==_g(e)&&(e.workspaceState.update("typescript.useWorkspaceTsdk",p),a()),o()}));e.subscriptions.push(i);let s=gu();Rt.workspace.onDidChangeConfiguration(()=>{let c=gu();c!==s&&(s=c,_g(e)&&a())}),o(),Rt.window.onDidChangeActiveTextEditor(o,void 0,e.subscriptions);function o(){var c,u,l;if(((c=Rt.window.activeTextEditor)===null||c===void 0?void 0:c.document.languageId)!=="vue"&&((u=Rt.window.activeTextEditor)===null||u===void 0?void 0:u.document.languageId)!=="markdown"&&((l=Rt.window.activeTextEditor)===null||l===void 0?void 0:l.document.languageId)!=="html"&&!((0,vg.takeOverModeEnabled)()&&Rt.window.activeTextEditor&&["javascript","typescript","javascriptreact","typescriptreact"].includes(Rt.window.activeTextEditor.document.languageId)))r.hide();else{let d=va(pu(e).tsdk);r.text=""+d,(0,vg.takeOverModeEnabled)()&&(r.text+=" (takeover)"),(0,vg.noProjectReferences)()&&(r.text+=" (noProjectReferences)"),r.show()}}function a(){return mg(this,void 0,void 0,function*(){let c=pu(e),u=Object.assign(Object.assign({},n.clientOptions.initializationOptions),{typescript:c});n.clientOptions.initializationOptions=u,Rt.commands.executeCommand("volar.action.restartServer")})}})}hr.register=IN;function pu(t){if(_g(t)){let e=yg(gu()||ma);if(e)return{tsdk:e,isWorkspacePath:!0}}return{tsdk:rb(),isWorkspacePath:!1}}hr.getCurrentTsdk=pu;function yg(t){var e;if(Fr.isAbsolute(t))try{if(require.resolve("./typescript.js",{paths:[t]}))return t}catch{}let n=((e=Rt.workspace.workspaceFolders)!==null&&e!==void 0?e:[]).map(r=>r.uri.fsPath);for(let r of n){let i=Fr.join(r,t);try{if(require.resolve("./typescript.js",{paths:[i]}))return i}catch{}}}function rb(){let t=Rt.extensions.getExtension("ms-vscode.vscode-typescript-next");return t?Fr.join(t.extensionPath,"node_modules/typescript/lib"):Fr.join(Rt.env.appRoot,"extensions/node_modules/typescript/lib")}function gu(){var t;return(t=Rt.workspace.getConfiguration("typescript").get("tsdk"))!==null&&t!==void 0?t:""}function _g(t){return t.workspaceState.get("typescript.useWorkspaceTsdk",!1)}function va(t){if(!t||!hu.existsSync(t))return;let e=t.split(Fr.sep);if(e.length<=1)return;let r=e.slice(0,-1).join(Fr.sep),i=Fr.join(r,"package.json");if(hu.existsSync(i)||Fr.basename(r)==="built"&&(i=Fr.join(r,"../package.json")),!hu.existsSync(i))return;let s=hu.readFileSync(i).toString(),o=null;try{o=JSON.parse(s)}catch{return}if(!(!o||!o.version))return o.version}hr.getTsVersion=va});var sb=w(Ms=>{var FN=Ms&&Ms.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.register=void 0;var wg=require("vscode"),LN=Ct();function MN(t,e){return FN(this,void 0,void 0,function*(){t.subscriptions.push(wg.commands.registerCommand("volar.action.verifyAllScripts",()=>{wg.window.activeTextEditor&&e.sendNotification(LN.VerifyAllScriptsNotification.type,e.code2ProtocolConverter.asTextDocumentIdentifier(wg.window.activeTextEditor.document))}))})}Ms.register=MN});var ob=w(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.toString=As.getLength=void 0;function AN(t){let e=0;for(let n of t)e+=typeof n=="string"?n.length:n[0].length;return e}As.getLength=AN;function jN(t){return t.map(e=>typeof e=="string"?e:e[0]).join("")}As.toString=jN});var ab=w(Zn=>{var $N=Zn&&Zn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),UN=Zn&&Zn.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&$N(e,t,n)};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.buildMappings=Zn.SourceMapBase=void 0;UN(ob(),Zn);var Cg=class{get memo(){if(!this._memo){let r=function(i){let s=new Set;for(let c of n.mappings)s.add(c[i][0]),s.add(c[i][1]);let o=[...s].sort((c,u)=>c-u).map(c=>({offset:c,mappings:new Set}));for(let c of n.mappings){let u=a(c[i][0]),l=a(c[i][1]);for(let d=u;d<=l;d++)o[d].mappings.add(c)}return o;function a(c){let u=0,l=o.length-1;for(;u<=l;){let d=Math.floor((u+l)/2),h=o[d];if(h.offset<c)u=d+1;else if(h.offset>c)l=d-1;else return d}}};var e=r;let n=this;this._memo={sourceRange:r("sourceRange"),generatedRange:r("generatedRange")}}return this._memo}constructor(e){this.mappings=e}toSourceOffset(e){for(let n of this.matcing(e,"generatedRange","sourceRange"))return n}toGeneratedOffset(e){for(let n of this.matcing(e,"sourceRange","generatedRange"))return n}toSourceOffsets(e){return this.matcing(e,"generatedRange","sourceRange")}toGeneratedOffsets(e){return this.matcing(e,"sourceRange","generatedRange")}*matcing(e,n,r){let i=this.memo[n];if(i.length===0)return;let{low:s,high:o}=this.binarySearchMemo(i,e),a=new Set;for(let c=s;c<=o;c++)for(let u of i[c].mappings){if(a.has(u))continue;a.add(u);let l=this.matchOffset(e,u[n],u[r]);l&&(yield[l,u])}}matchOffset(e,n,r){if(e>=n[0]&&e<=n[1])return r[0]+e-n[0]}binarySearchMemo(e,n){let r=0,i=e.length-1;for(;r<=i;){let s=Math.floor((r+i)/2),o=e[s];if(o.offset<n)r=s+1;else if(o.offset>n)i=s-1;else{r=s,i=s;break}}return{low:Math.max(Math.min(r,i,e.length-1),0),high:Math.min(Math.max(r,i,0),e.length-1)}}};Zn.SourceMapBase=Cg;function HN(t){let e=0,n=[];for(let r of t)typeof r=="string"?e+=r.length:(n.push({generatedRange:[e,e+r[0].length],source:r[1],sourceRange:typeof r[2]=="number"?[r[2],r[2]+r[0].length]:r[2],data:r[3]}),e+=r[0].length);return n}Zn.buildMappings=HN});var db=w(js=>{var bg=js&&js.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(js,"__esModule",{value:!0});js.register=void 0;var qe=require("vscode"),Sg=Ct(),WN=ab(),cb="volar-virtual-file",ub=qe.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",overviewRulerColor:"blue",overviewRulerLane:qe.OverviewRulerLane.Right,light:{borderColor:"darkblue"},dark:{borderColor:"lightblue"}}),lb=qe.window.createTextEditorDecorationType({cursor:"crosshair",backgroundColor:"darkblue"});function BN(t,e){return bg(this,void 0,void 0,function*(){let n=new Map,r=new Map,i=new Map,s=new qe.EventEmitter,o;t.subscriptions.push(qe.window.onDidChangeActiveTextEditor(a)),t.subscriptions.push(qe.window.onDidChangeTextEditorSelection(a)),t.subscriptions.push(qe.window.onDidChangeVisibleTextEditors(a)),t.subscriptions.push(qe.workspace.onDidChangeTextDocument(c=>{let u=n.get(c.document.uri.toString());if(u)for(let l of u)s.fire(qe.Uri.parse(l))})),t.subscriptions.push(qe.workspace.registerTextDocumentContentProvider(cb,{onDidChange:s.event,provideTextDocumentContent(c){return bg(this,void 0,void 0,function*(){let u=c.with({scheme:"file"}).fsPath,l=r.get(c.toString());if(l){let d=yield e.sendRequest(Sg.GetVirtualFileRequest.type,{sourceFileUri:l.document.uri.toString(),virtualFileName:u});return i.set(c.toString(),[l.document.version,new WN.SourceMapBase(d.mappings)]),clearTimeout(o),o=setTimeout(a,100),d.content}})}})),t.subscriptions.push(qe.commands.registerCommand("volar.action.showVirtualFiles",()=>bg(this,void 0,void 0,function*(){let c=qe.window.activeTextEditor;if(c){let l=(yield e.sendRequest(Sg.GetVirtualFileNamesRequest.type,e.code2ProtocolConverter.asTextDocumentIdentifier(c.document))).map(d=>qe.Uri.file(d).with({scheme:cb}));n.set(c.document.uri.toString(),l.map(d=>d.toString()));for(let d of l)r.set(d.toString(),c),qe.window.showTextDocument(d,{viewColumn:qe.ViewColumn.Two,preview:!1})}}))),t.subscriptions.push(qe.commands.registerCommand("volar.action.writeVirtualFiles",()=>{qe.window.activeTextEditor&&e.sendNotification(Sg.WriteVirtualFilesNotification.type,e.code2ProtocolConverter.asTextDocumentIdentifier(qe.window.activeTextEditor.document))}));function a(){var c,u;if(qe.window.activeTextEditor){let l=(c=r.get(qe.window.activeTextEditor.document.uri.toString()))!==null&&c!==void 0?c:qe.window.activeTextEditor,d=n.get(l.document.uri.toString()),h=qe.window.visibleTextEditors.filter(_=>d?.includes(_.document.uri.toString())),p=[],m=[],y=h.length===0;for(let _ of h){let[S,T]=(u=i.get(_.document.uri.toString()))!==null&&u!==void 0?u:[void 0,void 0];if(T&&S===l.document.version){y=!0,p=p.concat(T.mappings.map(Q=>new qe.Range(l.document.positionAt(Q.sourceRange[0]),l.document.positionAt(Q.sourceRange[1])))),_.setDecorations(ub,T.mappings.map(Q=>new qe.Range(_.document.positionAt(Q.generatedRange[0]),_.document.positionAt(Q.generatedRange[1]))));let x=qe.window.activeTextEditor.selection,k=qe.window.activeTextEditor.document.offsetAt(x.start),W=qe.window.activeTextEditor===l?[...T.toGeneratedOffsets(k)]:[...T.toSourceOffsets(k)];for(let Q of W)m.push(new qe.Range(l.document.positionAt(Q[1].sourceRange[0]),l.document.positionAt(Q[1].sourceRange[1])));if(_.setDecorations(lb,W.map(Q=>new qe.Range(_.document.positionAt(Q[1].generatedRange[0]),_.document.positionAt(Q[1].generatedRange[1])))),W.length)if(qe.window.activeTextEditor===l){let Q=W.sort((oe,L)=>oe[1].generatedRange[0]-L[1].generatedRange[0])[0];_.revealRange(new qe.Range(_.document.positionAt(Q[1].generatedRange[0]),_.document.positionAt(Q[1].generatedRange[1])))}else{let Q=W.sort((oe,L)=>oe[1].sourceRange[0]-L[1].sourceRange[0])[0];l.revealRange(new qe.Range(l.document.positionAt(Q[1].sourceRange[0]),l.document.positionAt(Q[1].sourceRange[1])))}}}y&&(l.setDecorations(ub,p),l.setDecorations(lb,m))}}})}js.register=BN});var pb=w($s=>{var fb=$s&&$s.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty($s,"__esModule",{value:!0});$s.register=void 0;var hb=require("vscode"),zN=Ct();function GN(t,e){return fb(this,void 0,void 0,function*(){t.subscriptions.push(hb.commands.registerCommand("volar.action.serverStats",()=>fb(this,void 0,void 0,function*(){yield e.sendNotification(zN.ReportStats.type),yield hb.commands.executeCommand("workbench.action.output.toggleOutput")})))})}$s.register=GN});var mb=w(Us=>{var Rg=Us&&Us.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Us,"__esModule",{value:!0});Us.register=void 0;var Lr=require("vscode"),KN=Ct(),gb="vue-component-meta";function VN(t,e){return Rg(this,void 0,void 0,function*(){let n=new Map,r=new Map,i=new Lr.EventEmitter;t.subscriptions.push(Lr.workspace.onDidChangeTextDocument(s=>{let o=n.get(s.document.uri.toString());o&&i.fire(Lr.Uri.parse(o))})),t.subscriptions.push(Lr.workspace.registerTextDocumentContentProvider(gb,{onDidChange:i.event,provideTextDocumentContent(s){return Rg(this,void 0,void 0,function*(){let o=r.get(s.toString());if(o){let a=yield e.sendRequest(KN.GetComponentMeta.type,{uri:o.document.uri.toString()});return JSON.stringify(a,void 0,"	")}})}})),t.subscriptions.push(Lr.commands.registerCommand("volar.action.showComponentMeta",()=>Rg(this,void 0,void 0,function*(){let s=Lr.window.activeTextEditor;if(s){let o=s.document.uri.with({scheme:gb}).toString()+".meta.json";n.set(s.document.uri.toString(),o),r.set(o,s),Lr.window.showTextDocument(Lr.Uri.parse(o),{viewColumn:Lr.ViewColumn.Two,preview:!1})}})))})}Us.register=VN});var vb=w(Hs=>{var Dg=Hs&&Hs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.register=void 0;var yn=require("vscode"),XN=ra(),Tg=na(),JN=Ct();function YN(t,e,n){return Dg(this,void 0,void 0,function*(){let r=yn.window.createStatusBarItem(yn.StatusBarAlignment.Right),i="";s(),yn.window.onDidChangeActiveTextEditor(s,void 0,e.subscriptions),yn.commands.registerCommand(t,()=>Dg(this,void 0,void 0,function*(){let o=yield yn.workspace.openTextDocument(i);yield yn.window.showTextDocument(o)}));function s(){var o,a,c;return Dg(this,void 0,void 0,function*(){if(((o=yn.window.activeTextEditor)===null||o===void 0?void 0:o.document.languageId)!=="vue"&&!((0,Tg.processMd)()&&((a=yn.window.activeTextEditor)===null||a===void 0?void 0:a.document.languageId)==="markdown")&&!((0,Tg.processHtml)()&&((c=yn.window.activeTextEditor)===null||c===void 0?void 0:c.document.languageId)==="html")&&!((0,Tg.takeOverModeEnabled)()&&yn.window.activeTextEditor&&["javascript","typescript","javascriptreact","typescriptreact"].includes(yn.window.activeTextEditor.document.languageId)))r.hide();else{let u=yield n.sendRequest(JN.GetMatchTsConfigRequest.type,n.code2ProtocolConverter.asTextDocumentIdentifier(yn.window.activeTextEditor.document));u?.fileName?(r.text=XN.relative(yn.workspace.rootPath,u.fileName),r.command=t,i=u.fileName):(r.text="No tsconfig",r.command=void 0),r.show()}})}})}Hs.register=YN});var ya=w((Vj,yb)=>{var QN="2.0.0",ZN=Number.MAX_SAFE_INTEGER||9007199254740991,e1=16;yb.exports={SEMVER_SPEC_VERSION:QN,MAX_LENGTH:256,MAX_SAFE_INTEGER:ZN,MAX_SAFE_COMPONENT_LENGTH:e1}});var _a=w((Xj,_b)=>{var t1=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};_b.exports=t1});var Ai=w((ri,wb)=>{var{MAX_SAFE_COMPONENT_LENGTH:Eg}=ya(),n1=_a();ri=wb.exports={};var r1=ri.re=[],J=ri.src=[],Y=ri.t={},i1=0,ye=(t,e,n)=>{let r=i1++;n1(t,r,e),Y[t]=r,J[r]=e,r1[r]=new RegExp(e,n?"g":void 0)};ye("NUMERICIDENTIFIER","0|[1-9]\\d*");ye("NUMERICIDENTIFIERLOOSE","[0-9]+");ye("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ye("MAINVERSION",`(${J[Y.NUMERICIDENTIFIER]})\\.(${J[Y.NUMERICIDENTIFIER]})\\.(${J[Y.NUMERICIDENTIFIER]})`);ye("MAINVERSIONLOOSE",`(${J[Y.NUMERICIDENTIFIERLOOSE]})\\.(${J[Y.NUMERICIDENTIFIERLOOSE]})\\.(${J[Y.NUMERICIDENTIFIERLOOSE]})`);ye("PRERELEASEIDENTIFIER",`(?:${J[Y.NUMERICIDENTIFIER]}|${J[Y.NONNUMERICIDENTIFIER]})`);ye("PRERELEASEIDENTIFIERLOOSE",`(?:${J[Y.NUMERICIDENTIFIERLOOSE]}|${J[Y.NONNUMERICIDENTIFIER]})`);ye("PRERELEASE",`(?:-(${J[Y.PRERELEASEIDENTIFIER]}(?:\\.${J[Y.PRERELEASEIDENTIFIER]})*))`);ye("PRERELEASELOOSE",`(?:-?(${J[Y.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${J[Y.PRERELEASEIDENTIFIERLOOSE]})*))`);ye("BUILDIDENTIFIER","[0-9A-Za-z-]+");ye("BUILD",`(?:\\+(${J[Y.BUILDIDENTIFIER]}(?:\\.${J[Y.BUILDIDENTIFIER]})*))`);ye("FULLPLAIN",`v?${J[Y.MAINVERSION]}${J[Y.PRERELEASE]}?${J[Y.BUILD]}?`);ye("FULL",`^${J[Y.FULLPLAIN]}$`);ye("LOOSEPLAIN",`[v=\\s]*${J[Y.MAINVERSIONLOOSE]}${J[Y.PRERELEASELOOSE]}?${J[Y.BUILD]}?`);ye("LOOSE",`^${J[Y.LOOSEPLAIN]}$`);ye("GTLT","((?:<|>)?=?)");ye("XRANGEIDENTIFIERLOOSE",`${J[Y.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ye("XRANGEIDENTIFIER",`${J[Y.NUMERICIDENTIFIER]}|x|X|\\*`);ye("XRANGEPLAIN",`[v=\\s]*(${J[Y.XRANGEIDENTIFIER]})(?:\\.(${J[Y.XRANGEIDENTIFIER]})(?:\\.(${J[Y.XRANGEIDENTIFIER]})(?:${J[Y.PRERELEASE]})?${J[Y.BUILD]}?)?)?`);ye("XRANGEPLAINLOOSE",`[v=\\s]*(${J[Y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[Y.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[Y.XRANGEIDENTIFIERLOOSE]})(?:${J[Y.PRERELEASELOOSE]})?${J[Y.BUILD]}?)?)?`);ye("XRANGE",`^${J[Y.GTLT]}\\s*${J[Y.XRANGEPLAIN]}$`);ye("XRANGELOOSE",`^${J[Y.GTLT]}\\s*${J[Y.XRANGEPLAINLOOSE]}$`);ye("COERCE",`(^|[^\\d])(\\d{1,${Eg}})(?:\\.(\\d{1,${Eg}}))?(?:\\.(\\d{1,${Eg}}))?(?:$|[^\\d])`);ye("COERCERTL",J[Y.COERCE],!0);ye("LONETILDE","(?:~>?)");ye("TILDETRIM",`(\\s*)${J[Y.LONETILDE]}\\s+`,!0);ri.tildeTrimReplace="$1~";ye("TILDE",`^${J[Y.LONETILDE]}${J[Y.XRANGEPLAIN]}$`);ye("TILDELOOSE",`^${J[Y.LONETILDE]}${J[Y.XRANGEPLAINLOOSE]}$`);ye("LONECARET","(?:\\^)");ye("CARETTRIM",`(\\s*)${J[Y.LONECARET]}\\s+`,!0);ri.caretTrimReplace="$1^";ye("CARET",`^${J[Y.LONECARET]}${J[Y.XRANGEPLAIN]}$`);ye("CARETLOOSE",`^${J[Y.LONECARET]}${J[Y.XRANGEPLAINLOOSE]}$`);ye("COMPARATORLOOSE",`^${J[Y.GTLT]}\\s*(${J[Y.LOOSEPLAIN]})$|^$`);ye("COMPARATOR",`^${J[Y.GTLT]}\\s*(${J[Y.FULLPLAIN]})$|^$`);ye("COMPARATORTRIM",`(\\s*)${J[Y.GTLT]}\\s*(${J[Y.LOOSEPLAIN]}|${J[Y.XRANGEPLAIN]})`,!0);ri.comparatorTrimReplace="$1$2$3";ye("HYPHENRANGE",`^\\s*(${J[Y.XRANGEPLAIN]})\\s+-\\s+(${J[Y.XRANGEPLAIN]})\\s*$`);ye("HYPHENRANGELOOSE",`^\\s*(${J[Y.XRANGEPLAINLOOSE]})\\s+-\\s+(${J[Y.XRANGEPLAINLOOSE]})\\s*$`);ye("STAR","(<|>)?=?\\s*\\*");ye("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ye("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var wa=w((Jj,Cb)=>{var s1=["includePrerelease","loose","rtl"],o1=t=>t?typeof t!="object"?{loose:!0}:s1.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};Cb.exports=o1});var xg=w((Yj,Rb)=>{var bb=/^[0-9]+$/,Sb=(t,e)=>{let n=bb.test(t),r=bb.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},a1=(t,e)=>Sb(e,t);Rb.exports={compareIdentifiers:Sb,rcompareIdentifiers:a1}});var Ut=w((Qj,xb)=>{var mu=_a(),{MAX_LENGTH:Db,MAX_SAFE_INTEGER:vu}=ya(),{re:Tb,t:Eb}=Ai(),c1=wa(),{compareIdentifiers:Ws}=xg(),_n=class{constructor(e,n){if(n=c1(n),e instanceof _n){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Db)throw new TypeError(`version is longer than ${Db} characters`);mu("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?Tb[Eb.LOOSE]:Tb[Eb.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>vu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vu||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<vu)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(mu("SemVer.compare",this.version,this.options,e),!(e instanceof _n)){if(typeof e=="string"&&e===this.version)return 0;e=new _n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof _n||(e=new _n(e,this.options)),Ws(this.major,e.major)||Ws(this.minor,e.minor)||Ws(this.patch,e.patch)}comparePre(e){if(e instanceof _n||(e=new _n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(mu("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ws(r,i)}while(++n)}compareBuild(e){e instanceof _n||(e=new _n(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(mu("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ws(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(Ws(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};xb.exports=_n});var ji=w((Zj,kb)=>{var{MAX_LENGTH:u1}=ya(),{re:Pb,t:qb}=Ai(),Ob=Ut(),l1=wa(),d1=(t,e)=>{if(e=l1(e),t instanceof Ob)return t;if(typeof t!="string"||t.length>u1||!(e.loose?Pb[qb.LOOSE]:Pb[qb.FULL]).test(t))return null;try{return new Ob(t,e)}catch{return null}};kb.exports=d1});var Ib=w((e$,Nb)=>{var f1=ji(),h1=(t,e)=>{let n=f1(t,e);return n?n.version:null};Nb.exports=h1});var Lb=w((t$,Fb)=>{var p1=ji(),g1=(t,e)=>{let n=p1(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};Fb.exports=g1});var jb=w((n$,Ab)=>{var Mb=Ut(),m1=(t,e,n,r)=>{typeof n=="string"&&(r=n,n=void 0);try{return new Mb(t instanceof Mb?t.version:t,n).inc(e,r).version}catch{return null}};Ab.exports=m1});var kn=w((r$,Ub)=>{var $b=Ut(),v1=(t,e,n)=>new $b(t,n).compare(new $b(e,n));Ub.exports=v1});var yu=w((i$,Hb)=>{var y1=kn(),_1=(t,e,n)=>y1(t,e,n)===0;Hb.exports=_1});var zb=w((s$,Bb)=>{var Wb=ji(),w1=yu(),C1=(t,e)=>{if(w1(t,e))return null;{let n=Wb(t),r=Wb(e),i=n.prerelease.length||r.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let a in n)if((a==="major"||a==="minor"||a==="patch")&&n[a]!==r[a])return s+a;return o}};Bb.exports=C1});var Kb=w((o$,Gb)=>{var b1=Ut(),S1=(t,e)=>new b1(t,e).major;Gb.exports=S1});var Xb=w((a$,Vb)=>{var R1=Ut(),D1=(t,e)=>new R1(t,e).minor;Vb.exports=D1});var Yb=w((c$,Jb)=>{var T1=Ut(),E1=(t,e)=>new T1(t,e).patch;Jb.exports=E1});var Zb=w((u$,Qb)=>{var x1=ji(),P1=(t,e)=>{let n=x1(t,e);return n&&n.prerelease.length?n.prerelease:null};Qb.exports=P1});var tS=w((l$,eS)=>{var q1=kn(),O1=(t,e,n)=>q1(e,t,n);eS.exports=O1});var rS=w((d$,nS)=>{var k1=kn(),N1=(t,e)=>k1(t,e,!0);nS.exports=N1});var _u=w((f$,sS)=>{var iS=Ut(),I1=(t,e,n)=>{let r=new iS(t,n),i=new iS(e,n);return r.compare(i)||r.compareBuild(i)};sS.exports=I1});var aS=w((h$,oS)=>{var F1=_u(),L1=(t,e)=>t.sort((n,r)=>F1(n,r,e));oS.exports=L1});var uS=w((p$,cS)=>{var M1=_u(),A1=(t,e)=>t.sort((n,r)=>M1(r,n,e));cS.exports=A1});var Ca=w((g$,lS)=>{var j1=kn(),$1=(t,e,n)=>j1(t,e,n)>0;lS.exports=$1});var wu=w((m$,dS)=>{var U1=kn(),H1=(t,e,n)=>U1(t,e,n)<0;dS.exports=H1});var Pg=w((v$,fS)=>{var W1=kn(),B1=(t,e,n)=>W1(t,e,n)!==0;fS.exports=B1});var Cu=w((y$,hS)=>{var z1=kn(),G1=(t,e,n)=>z1(t,e,n)>=0;hS.exports=G1});var bu=w((_$,pS)=>{var K1=kn(),V1=(t,e,n)=>K1(t,e,n)<=0;pS.exports=V1});var qg=w((w$,gS)=>{var X1=yu(),J1=Pg(),Y1=Ca(),Q1=Cu(),Z1=wu(),eI=bu(),tI=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return X1(t,n,r);case"!=":return J1(t,n,r);case">":return Y1(t,n,r);case">=":return Q1(t,n,r);case"<":return Z1(t,n,r);case"<=":return eI(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};gS.exports=tI});var vS=w((C$,mS)=>{var nI=Ut(),rI=ji(),{re:Su,t:Ru}=Ai(),iI=(t,e)=>{if(t instanceof nI)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(Su[Ru.COERCE]);else{let r;for(;(r=Su[Ru.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),Su[Ru.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;Su[Ru.COERCERTL].lastIndex=-1}return n===null?null:rI(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};mS.exports=iI});var Nn=w((b$,CS)=>{var $i=class{constructor(e,n){if(n=oI(n),e instanceof $i)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new $i(e.raw,n);if(e instanceof Og)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!_S(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&dI(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=yS.get(r);if(i)return i;let s=this.options.loose,o=s?cn[Jt.HYPHENRANGELOOSE]:cn[Jt.HYPHENRANGE];e=e.replace(o,CI(this.options.includePrerelease)),it("hyphen replace",e),e=e.replace(cn[Jt.COMPARATORTRIM],cI),it("comparator trim",e),e=e.replace(cn[Jt.TILDETRIM],uI),e=e.replace(cn[Jt.CARETTRIM],lI),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(d=>fI(d,this.options)).join(" ").split(/\s+/).map(d=>wI(d,this.options));s&&(a=a.filter(d=>(it("loose invalid filter",d,this.options),!!d.match(cn[Jt.COMPARATORLOOSE])))),it("range list",a);let c=new Map,u=a.map(d=>new Og(d,this.options));for(let d of u){if(_S(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return yS.set(r,l),l}intersects(e,n){if(!(e instanceof $i))throw new TypeError("a Range is required");return this.set.some(r=>wS(r,n)&&e.set.some(i=>wS(i,n)&&r.every(s=>i.every(o=>s.intersects(o,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new aI(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(bI(this.set[n],e,this.options))return!0;return!1}};CS.exports=$i;var sI=kp(),yS=new sI({max:1e3}),oI=wa(),Og=ba(),it=_a(),aI=Ut(),{re:cn,t:Jt,comparatorTrimReplace:cI,tildeTrimReplace:uI,caretTrimReplace:lI}=Ai(),_S=t=>t.value==="<0.0.0-0",dI=t=>t.value==="",wS=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},fI=(t,e)=>(it("comp",t,e),t=gI(t,e),it("caret",t),t=hI(t,e),it("tildes",t),t=vI(t,e),it("xrange",t),t=_I(t,e),it("stars",t),t),Yt=t=>!t||t.toLowerCase()==="x"||t==="*",hI=(t,e)=>t.trim().split(/\s+/).map(n=>pI(n,e)).join(" "),pI=(t,e)=>{let n=e.loose?cn[Jt.TILDELOOSE]:cn[Jt.TILDE];return t.replace(n,(r,i,s,o,a)=>{it("tilde",t,r,i,s,o,a);let c;return Yt(i)?c="":Yt(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Yt(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(it("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,it("tilde return",c),c})},gI=(t,e)=>t.trim().split(/\s+/).map(n=>mI(n,e)).join(" "),mI=(t,e)=>{it("caret",t,e);let n=e.loose?cn[Jt.CARETLOOSE]:cn[Jt.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,o,a,c)=>{it("caret",t,i,s,o,a,c);let u;return Yt(s)?u="":Yt(o)?u=`>=${s}.0.0${r} <${+s+1}.0.0-0`:Yt(a)?s==="0"?u=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:c?(it("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(it("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),it("caret return",u),u})},vI=(t,e)=>(it("replaceXRanges",t,e),t.split(/\s+/).map(n=>yI(n,e)).join(" ")),yI=(t,e)=>{t=t.trim();let n=e.loose?cn[Jt.XRANGELOOSE]:cn[Jt.XRANGE];return t.replace(n,(r,i,s,o,a,c)=>{it("xRange",t,r,i,s,o,a,c);let u=Yt(s),l=u||Yt(o),d=l||Yt(a),h=d;return i==="="&&h&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&h?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(c="-0"),r=`${i+s}.${o}.${a}${c}`):l?r=`>=${s}.0.0${c} <${+s+1}.0.0-0`:d&&(r=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),it("xRange return",r),r})},_I=(t,e)=>(it("replaceStars",t,e),t.trim().replace(cn[Jt.STAR],"")),wI=(t,e)=>(it("replaceGTE0",t,e),t.trim().replace(cn[e.includePrerelease?Jt.GTE0PRE:Jt.GTE0],"")),CI=t=>(e,n,r,i,s,o,a,c,u,l,d,h,p)=>(Yt(r)?n="":Yt(i)?n=`>=${r}.0.0${t?"-0":""}`:Yt(s)?n=`>=${r}.${i}.0${t?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Yt(u)?c="":Yt(l)?c=`<${+u+1}.0.0-0`:Yt(d)?c=`<${u}.${+l+1}.0-0`:h?c=`<=${u}.${l}.${d}-${h}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),bI=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(it(t[r].semver),t[r].semver!==Og.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ba=w((S$,TS)=>{var Sa=Symbol("SemVer ANY"),Bs=class{static get ANY(){return Sa}constructor(e,n){if(n=SI(n),e instanceof Bs){if(e.loose===!!n.loose)return e;e=e.value}Ng("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===Sa?this.value="":this.value=this.operator+this.semver.version,Ng("comp",this)}parse(e){let n=this.options.loose?bS[SS.COMPARATORLOOSE]:bS[SS.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new RS(r[2],this.options.loose):this.semver=Sa}toString(){return this.value}test(e){if(Ng("Comparator.test",e,this.options.loose),this.semver===Sa||e===Sa)return!0;if(typeof e=="string")try{e=new RS(e,this.options)}catch{return!1}return kg(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof Bs))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new DS(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new DS(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=kg(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=kg(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&o||a||c}};TS.exports=Bs;var SI=wa(),{re:bS,t:SS}=Ai(),kg=qg(),Ng=_a(),RS=Ut(),DS=Nn()});var Ra=w((R$,ES)=>{var RI=Nn(),DI=(t,e,n)=>{try{e=new RI(e,n)}catch{return!1}return e.test(t)};ES.exports=DI});var PS=w((D$,xS)=>{var TI=Nn(),EI=(t,e)=>new TI(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));xS.exports=EI});var OS=w((T$,qS)=>{var xI=Ut(),PI=Nn(),qI=(t,e,n)=>{let r=null,i=null,s=null;try{s=new PI(e,n)}catch{return null}return t.forEach(o=>{s.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new xI(r,n))}),r};qS.exports=qI});var NS=w((E$,kS)=>{var OI=Ut(),kI=Nn(),NI=(t,e,n)=>{let r=null,i=null,s=null;try{s=new kI(e,n)}catch{return null}return t.forEach(o=>{s.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new OI(r,n))}),r};kS.exports=NI});var LS=w((x$,FS)=>{var Ig=Ut(),II=Nn(),IS=Ca(),FI=(t,e)=>{t=new II(t,e);let n=new Ig("0.0.0");if(t.test(n)||(n=new Ig("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],s=null;i.forEach(o=>{let a=new Ig(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||IS(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!n||IS(n,s))&&(n=s)}return n&&t.test(n)?n:null};FS.exports=FI});var AS=w((P$,MS)=>{var LI=Nn(),MI=(t,e)=>{try{return new LI(t,e).range||"*"}catch{return null}};MS.exports=MI});var Du=w((q$,HS)=>{var AI=Ut(),US=ba(),{ANY:jI}=US,$I=Nn(),UI=Ra(),jS=Ca(),$S=wu(),HI=bu(),WI=Cu(),BI=(t,e,n,r)=>{t=new AI(t,r),e=new $I(e,r);let i,s,o,a,c;switch(n){case">":i=jS,s=HI,o=$S,a=">",c=">=";break;case"<":i=$S,s=WI,o=jS,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(UI(t,e,r))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,h=null;if(l.forEach(p=>{p.semver===jI&&(p=new US(">=0.0.0")),d=d||p,h=h||p,i(p.semver,d.semver,r)?d=p:o(p.semver,h.semver,r)&&(h=p)}),d.operator===a||d.operator===c||(!h.operator||h.operator===a)&&s(t,h.semver))return!1;if(h.operator===c&&o(t,h.semver))return!1}return!0};HS.exports=BI});var BS=w((O$,WS)=>{var zI=Du(),GI=(t,e,n)=>zI(t,e,">",n);WS.exports=GI});var GS=w((k$,zS)=>{var KI=Du(),VI=(t,e,n)=>KI(t,e,"<",n);zS.exports=VI});var XS=w((N$,VS)=>{var KS=Nn(),XI=(t,e,n)=>(t=new KS(t,n),e=new KS(e,n),t.intersects(e));VS.exports=XI});var YS=w((I$,JS)=>{var JI=Ra(),YI=kn();JS.exports=(t,e,n)=>{let r=[],i=null,s=null,o=t.sort((l,d)=>YI(l,d,n));for(let l of o)JI(l,e,n)?(s=l,i||(i=l)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let a=[];for(let[l,d]of r)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var n0=w((F$,t0)=>{var QS=Nn(),Tu=ba(),{ANY:Fg}=Tu,Da=Ra(),Lg=kn(),QI=(t,e,n={})=>{if(t===e)return!0;t=new QS(t,n),e=new QS(e,n);let r=!1;e:for(let i of t.set){for(let s of e.set){let o=ZI(i,s,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},ZI=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Fg){if(e.length===1&&e[0].semver===Fg)return!0;n.includePrerelease?t=[new Tu(">=0.0.0-0")]:t=[new Tu(">=0.0.0")]}if(e.length===1&&e[0].semver===Fg){if(n.includePrerelease)return!0;e=[new Tu(">=0.0.0")]}let r=new Set,i,s;for(let p of t)p.operator===">"||p.operator===">="?i=ZS(i,p,n):p.operator==="<"||p.operator==="<="?s=e0(s,p,n):r.add(p.semver);if(r.size>1)return null;let o;if(i&&s){if(o=Lg(i.semver,s.semver,n),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let p of r){if(i&&!Da(p,String(i),n)||s&&!Da(p,String(s),n))return null;for(let m of e)if(!Da(p,String(m),n))return!1;return!0}let a,c,u,l,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let p of e){if(l=l||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",i){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator===">"||p.operator===">="){if(a=ZS(i,p,n),a===p&&a!==i)return!1}else if(i.operator===">="&&!Da(i.semver,String(p),n))return!1}if(s){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator==="<"||p.operator==="<="){if(c=e0(s,p,n),c===p&&c!==s)return!1}else if(s.operator==="<="&&!Da(s.semver,String(p),n))return!1}if(!p.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&l&&!i&&o!==0||h||d)},ZS=(t,e,n)=>{if(!t)return e;let r=Lg(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},e0=(t,e,n)=>{if(!t)return e;let r=Lg(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};t0.exports=QI});var s0=w((L$,i0)=>{var Mg=Ai(),eF=ya(),tF=Ut(),r0=xg(),nF=ji(),rF=Ib(),iF=Lb(),sF=jb(),oF=zb(),aF=Kb(),cF=Xb(),uF=Yb(),lF=Zb(),dF=kn(),fF=tS(),hF=rS(),pF=_u(),gF=aS(),mF=uS(),vF=Ca(),yF=wu(),_F=yu(),wF=Pg(),CF=Cu(),bF=bu(),SF=qg(),RF=vS(),DF=ba(),TF=Nn(),EF=Ra(),xF=PS(),PF=OS(),qF=NS(),OF=LS(),kF=AS(),NF=Du(),IF=BS(),FF=GS(),LF=XS(),MF=YS(),AF=n0();i0.exports={parse:nF,valid:rF,clean:iF,inc:sF,diff:oF,major:aF,minor:cF,patch:uF,prerelease:lF,compare:dF,rcompare:fF,compareLoose:hF,compareBuild:pF,sort:gF,rsort:mF,gt:vF,lt:yF,eq:_F,neq:wF,gte:CF,lte:bF,cmp:SF,coerce:RF,Comparator:DF,Range:TF,satisfies:EF,toComparators:xF,maxSatisfying:PF,minSatisfying:qF,minVersion:OF,validRange:kF,outside:NF,gtr:IF,ltr:FF,intersects:LF,simplifyRange:MF,subset:AF,SemVer:tF,re:Mg.re,src:Mg.src,tokens:Mg.t,SEMVER_SPEC_VERSION:eF.SEMVER_SPEC_VERSION,compareIdentifiers:r0.compareIdentifiers,rcompareIdentifiers:r0.rcompareIdentifiers}});var c0=w(zs=>{var Eu=zs&&zs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(zs,"__esModule",{value:!0});zs.register=void 0;var Qt=require("vscode"),Ui=s0(),Ag=Ct(),o0="vue-doctor",a0={postcss:["cpylua.language-postcss","vunguyentuan.vscode-postcss","csstools.postcss"],stylus:["sysoev.language-stylus"],sass:["Syler.sass-indented"]};function jF(t,e){return Eu(this,void 0,void 0,function*(){let n=Qt.window.createStatusBarItem(Qt.StatusBarAlignment.Right);n.backgroundColor=new Qt.ThemeColor("statusBarItem.warningBackground"),n.command="volar.action.doctor";let r=new Qt.EventEmitter;s(Qt.window.activeTextEditor),t.subscriptions.push(Qt.window.onDidChangeActiveTextEditor(s)),t.subscriptions.push(Qt.workspace.registerTextDocumentContentProvider(o0,{onDidChange:r.event,provideTextDocumentContent(a){return Eu(this,void 0,void 0,function*(){let c=a.with({scheme:"file",path:a.path.substring(0,a.path.length-10)}),u=yield o(c),l=`# ${c.path.split("/").pop()} Doctor

`;for(let d of u)l+="## \u2757 "+d.title+`

`,l+=d.message+`

`;return l+=`---

`,l+=`> Have any questions about the report message? You can see how it is composed by inspecting the [source code](https://github.com/johnsoncodehk/volar/blob/master/extensions/vscode-vue-language-features/src/features/doctor.ts).

`,l.trim()})}})),t.subscriptions.push(Qt.commands.registerCommand("volar.action.doctor",()=>{var a;let c=(a=Qt.window.activeTextEditor)===null||a===void 0?void 0:a.document;c?.languageId==="vue"&&c.uri.scheme==="file"&&Qt.commands.executeCommand("markdown.showPreviewToSide",i(c.uri))}));function i(a){return a.with({scheme:o0,path:a.path+"/Doctor.md"})}function s(a){var c;return Eu(this,void 0,void 0,function*(){if(Qt.workspace.getConfiguration("volar").get("doctor.statusBarItem")&&a&&a.document.languageId==="vue"&&a.document.uri.scheme==="file"){let u=yield o(a.document.uri);u.length&&((c=Qt.window.activeTextEditor)===null||c===void 0?void 0:c.document)===a.document&&(n.show(),n.text=u.length+(u.length===1?" known issue":" known issues"),r.fire(i(a.document.uri)))}else n.hide()})}function o(a){var c,u,l,d;return Eu(this,void 0,void 0,function*(){let h=Qt.workspace.textDocuments.find(Q=>Q.fileName===a.fsPath),[p,m,y]=yield Promise.all([e.sendRequest(Ag.GetMatchTsConfigRequest.type,{uri:a.toString()}),e.sendRequest(Ag.GetVueCompilerOptionsRequest.type,{uri:a.toString()}),h?e.sendRequest(Ag.ParseSFCRequest.type,h.getText()):void 0]),_=xu(a.fsPath,"vue"),S=xu(a.fsPath,"@vue/compiler-dom"),T=[];if(_||T.push({title:"`vue` module not found",message:"Vue module not found from workspace, you may not have installed `node_modules` yet."}),_){let Q=Ui.gte(_.json.version,"3.0.0")?3:Ui.gte(_.json.version,"2.7.0")?2.7:2,oe=(c=m?.target)!==null&&c!==void 0?c:3,L=[`Target version mismatch. You can specify the target version in \`vueCompilerOptions.target\` in tsconfig.json / jsconfig.json. (Expected \`"target": ${Q}\`)`,"","- vue version: "+_.json.version,"- tsconfig target: "+oe+(m?.target!==void 0?"":" (default)"),"- vue: "+_.path,"- tsconfig: "+((u=p?.fileName)!==null&&u!==void 0?u:"Not found"),"- vueCompilerOptions:","  ```json",JSON.stringify(m,void 0,2).split(`
`).map(M=>"  "+M).join(`
`),"  ```"];Q!==oe&&T.push({title:"Incorrect Target",message:L.join(`
`)})}_&&Ui.lt(_.json.version,"2.7.0")&&!S&&T.push({title:"`@vue/compiler-dom` missing for Vue 2",message:["Vue 2 does not have JSX types definitions, so template type checking will not work correctly. You can resolve this problem by installing `@vue/compiler-dom` and adding it to your project's `devDependencies`.","","- vue: "+_.path].join(`
`)}),_&&Ui.gte(_.json.version,"2.7.0")&&Ui.lt(_.json.version,"3.0.0")&&S&&T.push({title:"Unnecessary `@vue/compiler-dom`",message:["Vue 2.7 already includes JSX type definitions. You can remove the `@vue/compiler-dom` dependency from package.json.","","- vue: "+_.path,"- @vue/compiler-dom: "+S.path].join(`
`)});let x=xu(a.fsPath,"vue-tsc");x&&x.json.version!==t.extension.packageJSON.version&&T.push({title:"Different `vue-tsc` version",message:[`The \`${t.extension.packageJSON.displayName}\`'s version is \`${t.extension.packageJSON.version}\`, but the workspace's \`vue-tsc\` version is \`${x.json.version}\`. This may produce different type checking behavior.`,"","- vue-tsc: "+x.path].join(`
`)});let k=xu(a.fsPath,"@types/node");k&&Ui.gte(k.json.version,"18.8.1")&&Ui.lte(k.json.version,"18.11.0")&&T.push({title:"Incompatible `@types/node` version",message:["`@types/node`'s version `"+k.json.version+"` is incompatible with Vue. It will cause broken DOM event types in template.","","You can update `@types/node` to `18.11.1` or later to resolve.","","- @types/node: "+k.path,"- Issue: https://github.com/johnsoncodehk/volar/issues/1985"].join(`
`)});let W=Qt.extensions.getExtension("octref.vetur");if(W?.isActive&&T.push({title:"Use @volar-plugins/vetur instead of Vetur",message:"Detected Vetur enabled. Consider disabling Vetur and use [@volar-plugins/vetur](https://github.com/johnsoncodehk/volar-plugins/tree/master/packages/vetur) instead."}),((l=y?.descriptor.template)===null||l===void 0?void 0:l.lang)==="pug"&&!(!((d=m?.plugins)===null||d===void 0)&&d.includes("@volar/vue-language-plugin-pug"))&&T.push({title:"`@volar/vue-language-plugin-pug` missing",message:['For `<template lang="pug">`, the `@volar/vue-language-plugin-pug` plugin is required. Install it using `$ npm install -D @volar/vue-language-plugin-pug` and add it to `vueCompilerOptions.plugins` to support TypeScript intellisense in Pug templates.',"","- tsconfig.json / jsconfig.json","```jsonc",JSON.stringify({vueCompilerOptions:{plugins:["@volar/vue-language-plugin-pug"]}},void 0,2),"```"].join(`
`)}),y){let Q=[y.descriptor.template,y.descriptor.script,y.descriptor.scriptSetup,...y.descriptor.styles,...y.descriptor.customBlocks];for(let oe of Q)if(!!oe&&oe.lang&&oe.lang in a0){let L=a0[oe.lang];L.some(G=>!!Qt.extensions.getExtension(G))||T.push({title:"Syntax Highlighting for "+oe.lang,message:`Did not find a valid syntax highlighter extension for ${oe.lang} language block; you can choose to install one of the following:

`+L.map(G=>`- [${G}](https://marketplace.visualstudio.com/items?itemName=${G})
`)})}}return T})}})}zs.register=jF;function xu(t,e){try{let n=require.resolve(e+"/package.json",{paths:[t]});return{path:n,json:require(n)}}catch{}}});var Hg=w(Ug=>{"use strict";Object.defineProperty(Ug,"__esModule",{value:!0});var jg;function $g(){if(jg===void 0)throw new Error("No runtime abstraction layer installed");return jg}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");jg=n}t.install=e})($g||($g={}));Ug.default=$g});var Bg=w(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.config=Je.loadMessageBundle=Je.localize=Je.format=Je.setPseudo=Je.isPseudo=Je.isDefined=Je.BundleFormat=Je.MessageFormat=void 0;var l0=Hg(),$F;(function(t){t.file="file",t.bundle="bundle",t.both="both"})($F=Je.MessageFormat||(Je.MessageFormat={}));var UF;(function(t){t.standalone="standalone",t.languagePack="languagePack"})(UF=Je.BundleFormat||(Je.BundleFormat={}));var u0;(function(t){function e(n){var r=n;return r&&Wg(r.key)&&Wg(r.comment)}t.is=e})(u0||(u0={}));function Wg(t){return typeof t<"u"}Je.isDefined=Wg;Je.isPseudo=!1;function HF(t){Je.isPseudo=t}Je.setPseudo=HF;function d0(t,e){var n;return Je.isPseudo&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),e.length===0?n=t:n=t.replace(/\{(\d+)\}/g,function(r,i){var s=i[0],o=e[s],a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),n}Je.format=d0;function WF(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return d0(e,n)}Je.localize=WF;function BF(t){return(0,l0.default)().loadMessageBundle(t)}Je.loadMessageBundle=BF;function zF(t){return(0,l0.default)().config(t)}Je.config=zF});var m0=w(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.config=pr.loadMessageBundle=pr.BundleFormat=pr.MessageFormat=void 0;var er=require("path"),In=require("fs"),GF=Hg(),un=Bg(),h0=Bg();Object.defineProperty(pr,"MessageFormat",{enumerable:!0,get:function(){return h0.MessageFormat}});Object.defineProperty(pr,"BundleFormat",{enumerable:!0,get:function(){return h0.BundleFormat}});var p0=Object.prototype.toString;function KF(t){return p0.call(t)==="[object Number]"}function Mr(t){return p0.call(t)==="[object String]"}function VF(t){return t===!0||t===!1}function Gs(t){return JSON.parse(In.readFileSync(t,"utf8"))}var Pu,De;function XF(){if(De={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:un.MessageFormat.bundle},Mr(process.env.VSCODE_NLS_CONFIG))try{var t=JSON.parse(process.env.VSCODE_NLS_CONFIG),e=void 0;if(t.availableLanguages){var n=t.availableLanguages["*"];Mr(n)&&(e=n)}if(Mr(t.locale)&&(De.locale=t.locale.toLowerCase()),e===void 0?De.language=De.locale:e!=="en"&&(De.language=e),VF(t._languagePackSupport)&&(De.languagePackSupport=t._languagePackSupport),Mr(t._cacheRoot)&&(De.cacheRoot=t._cacheRoot),Mr(t._languagePackId)&&(De.languagePackId=t._languagePackId),Mr(t._translationsConfigFile)){De.translationsConfigFile=t._translationsConfigFile;try{De.translationsConfig=Gs(De.translationsConfigFile)}catch{if(t._corruptedFile){var r=er.dirname(t._corruptedFile);In.exists(r,function(s){s&&In.writeFile(t._corruptedFile,"corrupted","utf8",function(o){console.error(o)})})}}}}catch{}(0,un.setPseudo)(De.locale==="pseudo"),Pu=Object.create(null)}XF();function JF(){return De.languagePackSupport===!0&&De.cacheRoot!==void 0&&De.languagePackId!==void 0&&De.translationsConfigFile!==void 0&&De.translationsConfig!==void 0}function zg(t){return function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(KF(e)){if(e>=t.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack));return}return(0,un.format)(t[e],r)}else{if(Mr(n))return console.warn("Message ".concat(n," didn't get externalized correctly.")),(0,un.format)(n,r);console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}}function YF(t){var e;if(De.cacheLanguageResolution&&e)e=e;else{if(un.isPseudo||!De.language)e=".nls.json";else for(var n=De.language;n;){var r=".nls."+n+".json";if(In.existsSync(t+r)){e=r;break}else{var i=n.lastIndexOf("-");i>0?n=n.substring(0,i):(e=".nls.json",n=null)}}De.cacheLanguageResolution&&(e=e)}return t+e}function QF(t){for(var e=De.language;e;){var n=er.join(t,"nls.bundle.".concat(e,".json"));if(In.existsSync(n))return n;var r=e.lastIndexOf("-");r>0?e=e.substring(0,r):e=void 0}if(e===void 0){var n=er.join(t,"nls.bundle.json");if(In.existsSync(n))return n}}function ZF(t){var e=Gs(er.join(t,"nls.metadata.json")),n=Object.create(null);for(var r in e){var i=e[r];n[r]=i.messages}return n}function eL(t,e){var n=De.translationsConfig[t.id];if(!!n){var r=Gs(n).contents,i=Gs(er.join(e,"nls.metadata.json")),s=Object.create(null);for(var o in i){var a=i[o],c=r["".concat(t.outDir,"/").concat(o)];if(c){for(var u=[],l=0;l<a.keys.length;l++){var d=a.keys[l],h=Mr(d)?d:d.key,p=c[h];p===void 0&&(p=a.messages[l]),u.push(p)}s[o]=u}else s[o]=a.messages}return s}}function tL(t){var e=new Date;In.utimes(t,e,e,function(){})}function Gg(t,e){return Pu[t]=e,e}function nL(t,e){var n,r=er.join(De.cacheRoot,"".concat(t.id,"-").concat(t.hash,".json")),i=!1,s=!1;try{return n=JSON.parse(In.readFileSync(r,{encoding:"utf8",flag:"r"})),tL(r),n}catch(o){if(o.code==="ENOENT")s=!0;else if(o instanceof SyntaxError)console.log("Syntax error parsing message bundle: ".concat(o.message,".")),In.unlink(r,function(a){a&&console.error("Deleting corrupted bundle ".concat(r," failed."))}),i=!0;else throw o}if(n=eL(t,e),!n||i)return n;if(s)try{In.writeFileSync(r,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(o){if(o.code==="EEXIST")return n;throw o}return n}function f0(t){try{return ZF(t)}catch(e){console.log("Generating default bundle from meta data failed.",e);return}}function rL(t,e){var n;if(JF())try{n=nL(t,e)}catch(i){console.log("Load or create bundle failed ",i)}if(!n){if(De.languagePackSupport)return f0(e);var r=QF(e);if(r)try{return Gs(r)}catch(i){console.log("Loading in the box message bundle failed.",i)}n=f0(e)}return n}function iL(t){for(var e,n=er.dirname(t);e=er.join(n,"nls.metadata.header.json"),!In.existsSync(e);){var r=er.dirname(n);if(r===n){e=void 0;break}else n=r}return e}function Kg(t){if(!t)return un.localize;var e=er.extname(t);if(e&&(t=t.substr(0,t.length-e.length)),De.messageFormat===un.MessageFormat.both||De.messageFormat===un.MessageFormat.bundle){var n=iL(t);if(n){var r=er.dirname(n),i=Pu[r];if(i===void 0)try{var s=JSON.parse(In.readFileSync(n,"utf8"));try{var o=rL(s,r);i=Gg(r,o?{header:s,nlsBundle:o}:null)}catch(l){console.error("Failed to load nls bundle",l),i=Gg(r,null)}}catch(l){console.error("Failed to read header file",l),i=Gg(r,null)}if(i){var a=t.substr(r.length+1).replace(/\\/g,"/"),c=i.nlsBundle[a];return c===void 0?(console.error("Messages for file ".concat(t," not found. See console for details.")),function(){return"Messages not found."}):zg(c)}}}if(De.messageFormat===un.MessageFormat.both||De.messageFormat===un.MessageFormat.file)try{var u=Gs(YF(t));return Array.isArray(u)?zg(u):(0,un.isDefined)(u.messages)&&(0,un.isDefined)(u.keys)?zg(u.messages):(console.error("String bundle '".concat(t,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(l){l.code!=="ENOENT"&&console.error("Failed to load single file bundle",l)}return console.error("Failed to load message bundle for file ".concat(t)),function(){return"Failed to load message bundle. See console for details."}}pr.loadMessageBundle=Kg;function g0(t){return t&&(Mr(t.locale)&&(De.locale=t.locale.toLowerCase(),De.language=De.locale,Pu=Object.create(null)),t.messageFormat!==void 0&&(De.messageFormat=t.messageFormat),t.bundleFormat===un.BundleFormat.standalone&&De.languagePackSupport===!0&&(De.languagePackSupport=!1)),(0,un.setPseudo)(De.locale==="pseudo"),Kg}pr.config=g0;GF.default.install(Object.freeze({loadMessageBundle:Kg,config:g0}))});var v0=w(Ks=>{var Vg=Ks&&Ks.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.register=void 0;var Hi=require("vscode"),sL=m0(),oL=Ct(),aL=sL.loadMessageBundle();function cL(t,e){return Vg(this,void 0,void 0,function*(){Hi.commands.registerCommand(t,n=>Vg(this,void 0,void 0,function*(){yield Hi.window.withProgress({location:Hi.ProgressLocation.Window,title:aL("progress.title","Finding file references")},(r,i)=>Vg(this,void 0,void 0,function*(){var s;if(!n){let l=Hi.window.activeTextEditor;if(!l)return;n=l.document.uri}let o=yield e.sendRequest(oL.FindFileReferenceRequest.type,{textDocument:{uri:n.toString()}});if(!o)return;let a=o.map(l=>e.protocol2CodeConverter.asLocation(l)),c=Hi.workspace.getConfiguration("references"),u=c.inspect("preferredLocation");yield c.update("preferredLocation","view");try{yield Hi.commands.executeCommand("editor.action.showReferences",n,new Hi.Position(0,0),a)}finally{yield c.update("preferredLocation",(s=u?.workspaceFolderValue)!==null&&s!==void 0?s:u?.workspaceValue)}}))}))})}Ks.register=cL});var y0=w(Vs=>{var uL=Vs&&Vs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.register=void 0;var Xg=require("vscode"),lL=Ct();function dL(t,e,n){return uL(this,void 0,void 0,function*(){e.subscriptions.push(Xg.commands.registerCommand(t,()=>{Xg.window.activeTextEditor&&n.sendNotification(lL.ReloadProjectNotification.type,n.code2ProtocolConverter.asTextDocumentIdentifier(Xg.window.activeTextEditor.document))}))})}Vs.register=dL});var _0=w(Xs=>{var qu=Xs&&Xs.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.activate=void 0;var Jg=require("vscode"),Yg=Ct();function fL(t,e){return qu(this,void 0,void 0,function*(){t.subscriptions.push(e.onRequest(Yg.FsStatRequest.type,n=>qu(this,void 0,void 0,function*(){try{return yield Jg.workspace.fs.stat(e.protocol2CodeConverter.asUri(n))}catch{return}}))),t.subscriptions.push(e.onRequest(Yg.FsReadFileRequest.type,n=>qu(this,void 0,void 0,function*(){try{let r=yield Jg.workspace.fs.readFile(e.protocol2CodeConverter.asUri(n));return new TextDecoder("utf8").decode(r)}catch{return}}))),t.subscriptions.push(e.onRequest(Yg.FsReadDirectoryRequest.type,n=>qu(this,void 0,void 0,function*(){try{return yield Jg.workspace.fs.readDirectory(e.protocol2CodeConverter.asUri(n))}catch{return[]}})))})}Xs.activate=fL});var na=w(gt=>{var Js=gt&&gt.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(gt,"__esModule",{value:!0});gt.diagnosticModel=gt.noProjectReferences=gt.processMd=gt.processHtml=gt.getDocumentSelector=gt.takeOverModeEnabled=gt.deactivate=gt.activate=void 0;var Nt=require("vscode"),Ou=eu(),hL=Kp(),pL=QC(),gL=ZC(),mL=ea(),vL=nb(),b0=ib(),yL=sb(),_L=db(),wL=pb(),CL=mb(),bL=vb(),SL=c0(),RL=v0(),DL=y0(),TL=_0(),Wi=Ct(),Bi;(function(t){t[t.Semantic=0]="Semantic",t[t.Syntactic=1]="Syntactic"})(Bi||(Bi={}));var Dt,ii;function EL(t,e){return Js(this,void 0,void 0,function*(){let n=Nt.window.onDidChangeActiveTextEditor(r);r();function r(){if(!Nt.window.activeTextEditor){Qg(t,e),n.dispose();return}let i=Nt.window.activeTextEditor.document.languageId;(i==="vue"||i==="markdown"&&Nu()||i==="html"&&ku())&&(Qg(t,e),n.dispose()),em()&&["javascript","typescript","javascriptreact","typescriptreact"].includes(i)&&(Qg(t,e),n.dispose())}})}gt.activate=EL;function Qg(t,e){return Js(this,void 0,void 0,function*(){Nt.commands.executeCommand("setContext","volar.activated",!0),[Dt,ii]=yield Promise.all([e("vue-semantic-server","Vue Semantic Server",Zg(Wi.ServerMode.Semantic),C0(Wi.ServerMode.Semantic,t),w0([Bi.Semantic]),6009),e("vue-syntactic-server","Vue Syntactic Server",Zg(Wi.ServerMode.Syntactic),C0(Wi.ServerMode.Syntactic,t),w0([Bi.Syntactic]),6011)]);let n=[Dt,ii];i(),s(),o(),mL.register(t,ii),pL.register(t,ii),SL.register(t,Dt),b0.register("volar.selectTypeScriptVersion",t,Dt),DL.register("volar.action.reloadProject",t,Dt),Dt&&(bL.register("volar.openTsconfig",t,Dt),RL.register("volar.vue.findAllFileReferences",Dt),yL.register(t,Dt),vL.register(t,ii,Dt),_L.register(t,Dt),wL.register(t,Dt),CL.register(t,Dt));function r(){return Js(this,void 0,void 0,function*(){(yield Nt.window.showInformationMessage("Please reload VSCode to restart language servers.","Reload Window"))!==void 0&&Nt.commands.executeCommand("workbench.action.reloadWindow")})}function i(){Nt.workspace.onDidChangeConfiguration(a=>Js(this,void 0,void 0,function*(){if(a.affectsConfiguration("volar.vueserver.maxOldSpaceSize")||a.affectsConfiguration("volar.vueserver.diagnosticModel")||a.affectsConfiguration("volar.vueserver.noProjectReferences")||a.affectsConfiguration("volar.vueserver.petiteVue.processHtmlFile")||a.affectsConfiguration("volar.vueserver.vitePress.processMdFile")||a.affectsConfiguration("volar.vueserver.additionalExtensions"))return r()}))}function s(){return Js(this,void 0,void 0,function*(){t.subscriptions.push(Nt.commands.registerCommand("volar.action.restartServer",()=>Js(this,void 0,void 0,function*(){yield Promise.all(n.map(a=>a.stop())),yield Promise.all(n.map(a=>a.start())),o()})))})}function o(){for(let a of n)gL.activate(t,a),TL.activate(t,a);Dt&&hL.activate(t,Dt)}})}function xL(){return Promise.all([Dt?.stop(),ii?.stop()])}gt.deactivate=xL;function em(){return Nt.workspace.getConfiguration("volar").get("takeOverMode.enabled")?!Nt.extensions.getExtension("vscode.typescript-language-features"):!1}gt.takeOverModeEnabled=em;function Zg(t){let e=em(),n=e?["vue","javascript","typescript","javascriptreact","typescriptreact"]:["vue"];return e&&t===Wi.ServerMode.Semantic&&n.push("json"),ku()&&n.push("html"),Nu()&&n.push("markdown"),n}gt.getDocumentSelector=Zg;function ku(){return!!Nt.workspace.getConfiguration("volar").get("vueserver.petiteVue.processHtmlFile")}gt.processHtml=ku;function Nu(){return!!Nt.workspace.getConfiguration("volar").get("vueserver.vitePress.processMdFile")}gt.processMd=Nu;function S0(){return!!Nt.workspace.getConfiguration("volar").get("vueserver.noProjectReferences")}gt.noProjectReferences=S0;function R0(){return Nt.workspace.getConfiguration("volar").get("vueserver.diagnosticModel")}gt.diagnosticModel=R0;function PL(){var t;return(t=Nt.workspace.getConfiguration("volar").get("vueserver.additionalExtensions"))!==null&&t!==void 0?t:[]}function w0(t){return function(e){e.locale=Nt.env.language,e.capabilities.textDocument&&(t.includes(Bi.Semantic)||(e.capabilities.textDocument.references=void 0,e.capabilities.textDocument.implementation=void 0,e.capabilities.textDocument.definition=void 0,e.capabilities.textDocument.typeDefinition=void 0,e.capabilities.textDocument.callHierarchy=void 0,e.capabilities.textDocument.hover=void 0,e.capabilities.textDocument.rename=void 0,e.capabilities.textDocument.signatureHelp=void 0,e.capabilities.textDocument.codeAction=void 0,e.capabilities.textDocument.completion=void 0,e.capabilities.textDocument.documentHighlight=void 0,e.capabilities.textDocument.documentLink=void 0,e.capabilities.textDocument.codeLens=void 0,e.capabilities.textDocument.semanticTokens=void 0,e.capabilities.textDocument.inlayHint=void 0,e.capabilities.textDocument.diagnostic=void 0),t.includes(Bi.Syntactic)||(e.capabilities.textDocument.selectionRange=void 0,e.capabilities.textDocument.foldingRange=void 0,e.capabilities.textDocument.linkedEditingRange=void 0,e.capabilities.textDocument.documentSymbol=void 0,e.capabilities.textDocument.colorProvider=void 0,e.capabilities.textDocument.formatting=void 0,e.capabilities.textDocument.rangeFormatting=void 0,e.capabilities.textDocument.onTypeFormatting=void 0)),e.capabilities.workspace&&(t.includes(Bi.Semantic)||(e.capabilities.workspace.symbol=void 0,e.capabilities.workspace.fileOperations=void 0))}}function C0(t,e){let n=Nt.workspace.getConfiguration("volar").get("vueserver.textDocumentSync");return{serverMode:t,diagnosticModel:R0()==="pull"?Wi.DiagnosticModel.Pull:Wi.DiagnosticModel.Push,textDocumentSync:n?{incremental:Ou.TextDocumentSyncKind.Incremental,full:Ou.TextDocumentSyncKind.Full,none:Ou.TextDocumentSyncKind.None}[n]:Ou.TextDocumentSyncKind.Incremental,typescript:b0.getCurrentTsdk(e),petiteVue:{processHtmlFile:ku()},vitePress:{processMdFile:Nu()},noProjectReferences:S0(),additionalExtensions:PL()}}});var T0=w(Fu=>{Object.defineProperty(Fu,"__esModule",{value:!0});Fu.middleware=void 0;var Iu=Ct(),tm=require("vscode"),D0=Kp();Fu.middleware={handleDiagnostics:(t,e,n)=>{let r=tm.workspace.textDocuments.find(i=>i.uri.toString()===t.toString());if(r){let i=!1;for(let s of e){let o=s.data;if(typeof o=="object"&&"version"in o&&r.version!==o.version){i=!0;break}}if(i)return}n(t,e)},workspace:{configuration(t,e,n){return t.items.some(r=>r.section==="volar.completion.preferredAttrNameCase"||r.section==="volar.completion.preferredTagNameCase")?t.items.map(r=>{if(r.scopeUri){if(r.section==="volar.completion.preferredTagNameCase"){let i=D0.tagNameCasings.get(r.scopeUri);if(i===Iu.TagNameCasing.Kebab)return"kebab";if(i===Iu.TagNameCasing.Pascal)return"pascal"}if(r.section==="volar.completion.preferredAttrNameCase"){let i=D0.attrNameCasings.get(r.scopeUri);if(i===Iu.AttrNameCasing.Kebab)return"kebab";if(i===Iu.AttrNameCasing.Camel)return"camel"}}return tm.workspace.getConfiguration(r.section,r.scopeUri?tm.Uri.parse(r.scopeUri):void 0)}):n(t,e)}}}});var qL=exports&&exports.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});exports.deactivate=exports.activate=void 0;var OL=Ct(),kL=require("fs"),NL=require("os"),IL=require("path"),nm=require("vscode"),rm=Tw(),im=na(),FL=T0();function LL(t){let e=IL.join(NL.tmpdir(),`vscode-${t.extension.id}-cancellation-pipe.tmp`),n=(0,im.getDocumentSelector)(OL.ServerMode.Semantic),r;return nm.workspace.onDidChangeTextDocument(i=>{let s=i.document.uri.toString()+"|"+i.document.version;if(r===void 0){r=s;return}n.includes(i.document.languageId)&&r!==s&&(r=s,kL.writeFileSync(e,""))}),(0,im.activate)(t,(i,s,o,a,c,u)=>qL(this,void 0,void 0,function*(){a.cancellationPipeName=e;class l extends rm.LanguageClient{fillInitializeParams(x){c(x)}}let d=nm.Uri.joinPath(t.extensionUri,"server.js"),h=nm.workspace.getConfiguration("volar").get("vueserver.maxOldSpaceSize"),p={execArgv:[]};h&&p.execArgv.push("--max-old-space-size="+h);let m={execArgv:["--nolazy","--inspect="+u]},y={run:{module:d.fsPath,transport:rm.TransportKind.ipc,options:p},debug:{module:d.fsPath,transport:rm.TransportKind.ipc,options:m}},_={middleware:FL.middleware,documentSelector:o.map(T=>({language:T})),initializationOptions:a,progressOnInitialization:!0},S=new l(i,s,y,_);return yield S.start(),S}))}exports.activate=LL;function ML(){return(0,im.deactivate)()}exports.deactivate=ML;
