var xu=Object.defineProperty;var TD=Object.getOwnPropertyDescriptor;var PD=Object.getOwnPropertyNames;var qD=Object.prototype.hasOwnProperty;var cm=(n,e)=>()=>(n&&(e=n(n=0)),e);var D=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),um=(n,e)=>{for(var t in e)xu(n,t,{get:e[t],enumerable:!0})},xD=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PD(e))!qD.call(n,i)&&i!==t&&xu(n,i,{get:()=>e[i],enumerable:!(r=TD(e,i))||r.enumerable});return n};var ia=n=>xD(xu({},"__esModule",{value:!0}),n);var Hi=D(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.stringArray=Et.array=Et.func=Et.error=Et.number=Et.string=Et.boolean=void 0;function kD(n){return n===!0||n===!1}Et.boolean=kD;function lm(n){return typeof n=="string"||n instanceof String}Et.string=lm;function ED(n){return typeof n=="number"||n instanceof Number}Et.number=ED;function OD(n){return n instanceof Error}Et.error=OD;function FD(n){return typeof n=="function"}Et.func=FD;function dm(n){return Array.isArray(n)}Et.array=dm;function ND(n){return dm(n)&&n.every(e=>lm(e))}Et.stringArray=ND});var Yu=D(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Message=Q.NotificationType9=Q.NotificationType8=Q.NotificationType7=Q.NotificationType6=Q.NotificationType5=Q.NotificationType4=Q.NotificationType3=Q.NotificationType2=Q.NotificationType1=Q.NotificationType0=Q.NotificationType=Q.RequestType9=Q.RequestType8=Q.RequestType7=Q.RequestType6=Q.RequestType5=Q.RequestType4=Q.RequestType3=Q.RequestType2=Q.RequestType1=Q.RequestType=Q.RequestType0=Q.AbstractMessageSignature=Q.ParameterStructures=Q.ResponseError=Q.ErrorCodes=void 0;var ni=Hi(),fm;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(fm=Q.ErrorCodes||(Q.ErrorCodes={}));var Ko=class extends Error{constructor(e,t,r){super(t),this.code=ni.number(e)?e:fm.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,Ko.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Q.ResponseError=Ko;var Ct=class{constructor(e){this.kind=e}static is(e){return e===Ct.auto||e===Ct.byName||e===Ct.byPosition}toString(){return this.kind}};Q.ParameterStructures=Ct;Ct.auto=new Ct("auto");Ct.byPosition=new Ct("byPosition");Ct.byName=new Ct("byName");var Ue=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Ct.auto}};Q.AbstractMessageSignature=Ue;var ku=class extends Ue{constructor(e){super(e,0)}};Q.RequestType0=ku;var Eu=class extends Ue{constructor(e,t=Ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.RequestType=Eu;var Ou=class extends Ue{constructor(e,t=Ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.RequestType1=Ou;var Fu=class extends Ue{constructor(e){super(e,2)}};Q.RequestType2=Fu;var Nu=class extends Ue{constructor(e){super(e,3)}};Q.RequestType3=Nu;var Iu=class extends Ue{constructor(e){super(e,4)}};Q.RequestType4=Iu;var Mu=class extends Ue{constructor(e){super(e,5)}};Q.RequestType5=Mu;var ju=class extends Ue{constructor(e){super(e,6)}};Q.RequestType6=ju;var Au=class extends Ue{constructor(e){super(e,7)}};Q.RequestType7=Au;var Lu=class extends Ue{constructor(e){super(e,8)}};Q.RequestType8=Lu;var Hu=class extends Ue{constructor(e){super(e,9)}};Q.RequestType9=Hu;var $u=class extends Ue{constructor(e,t=Ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.NotificationType=$u;var Wu=class extends Ue{constructor(e){super(e,0)}};Q.NotificationType0=Wu;var Uu=class extends Ue{constructor(e,t=Ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};Q.NotificationType1=Uu;var zu=class extends Ue{constructor(e){super(e,2)}};Q.NotificationType2=zu;var Ku=class extends Ue{constructor(e){super(e,3)}};Q.NotificationType3=Ku;var Bu=class extends Ue{constructor(e){super(e,4)}};Q.NotificationType4=Bu;var Gu=class extends Ue{constructor(e){super(e,5)}};Q.NotificationType5=Gu;var Vu=class extends Ue{constructor(e){super(e,6)}};Q.NotificationType6=Vu;var Xu=class extends Ue{constructor(e){super(e,7)}};Q.NotificationType7=Xu;var Ju=class extends Ue{constructor(e){super(e,8)}};Q.NotificationType8=Ju;var Qu=class extends Ue{constructor(e){super(e,9)}};Q.NotificationType9=Qu;var ID;(function(n){function e(i){let o=i;return o&&ni.string(o.method)&&(ni.string(o.id)||ni.number(o.id))}n.isRequest=e;function t(i){let o=i;return o&&ni.string(o.method)&&i.id===void 0}n.isNotification=t;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(ni.string(o.id)||ni.number(o.id)||o.id===null)}n.isResponse=r})(ID=Q.Message||(Q.Message={}))});var el=D(hr=>{"use strict";var hm;Object.defineProperty(hr,"__esModule",{value:!0});hr.LRUCache=hr.LinkedMap=hr.Touch=void 0;var Ht;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(Ht=hr.Touch||(hr.Touch={}));var oa=class{constructor(){this[hm]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=Ht.None){let r=this._map.get(e);if(!!r)return t!==Ht.None&&this.touch(r,t),r.value}set(e,t,r=Ht.None){let i=this._map.get(e);if(i)i.value=t,r!==Ht.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case Ht.None:this.addItemLast(i);break;case Ht.First:this.addItemFirst(i);break;case Ht.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[(hm=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Ht.First&&t!==Ht.Last)){if(t===Ht.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Ht.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};hr.LinkedMap=oa;var Zu=class extends oa{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Ht.AsNew){return super.get(e,t)}peek(e){return super.get(e,Ht.None)}set(e,t){return super.set(e,t,Ht.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};hr.LRUCache=Zu});var pm=D(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.Disposable=void 0;var MD;(function(n){function e(t){return{dispose:t}}n.create=e})(MD=Bo.Disposable||(Bo.Disposable={}))});var Nr=D(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var tl;function nl(){if(tl===void 0)throw new Error("No runtime abstraction layer installed");return tl}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");tl=t}n.install=e})(nl||(nl={}));rl.default=nl});var Wi=D(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.Emitter=ri.Event=void 0;var jD=Nr(),AD;(function(n){let e={dispose(){}};n.None=function(){return e}})(AD=ri.Event||(ri.Event={}));var il=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{t.push(r[o].apply(i[o],e))}catch(a){(0,jD.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},$i=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new il),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,t),i.dispose=$i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ri.Emitter=$i;$i._noop=function(){}});var aa=D(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.CancellationTokenSource=ii.CancellationToken=void 0;var LD=Nr(),HD=Hi(),ol=Wi(),sl;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ol.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ol.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||HD.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(sl=ii.CancellationToken||(ii.CancellationToken={}));var $D=Object.freeze(function(n,e){let t=(0,LD.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),sa=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?$D:(this._emitter||(this._emitter=new ol.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},al=class{get token(){return this._token||(this._token=new sa),this._token}cancel(){this._token?this._token.cancel():this._token=sl.Cancelled}dispose(){this._token?this._token instanceof sa&&this._token.dispose():this._token=sl.None}};ii.CancellationTokenSource=al});var gm=D(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.SharedArrayReceiverStrategy=Ui.SharedArraySenderStrategy=void 0;var WD=aa(),Go;(function(n){n.Continue=0,n.Cancelled=1})(Go||(Go={}));var cl=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=Go.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,Go.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Ui.SharedArraySenderStrategy=cl;var ul=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Go.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},ll=class{constructor(e){this.token=new ul(e)}cancel(){}dispose(){}},dl=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new WD.CancellationTokenSource:new ll(t)}};Ui.SharedArrayReceiverStrategy=dl});var hl=D(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.Semaphore=void 0;var UD=Nr(),fl=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,UD.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};ca.Semaphore=fl});var mm=D(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.ReadableStreamMessageReader=pr.AbstractMessageReader=pr.MessageReader=void 0;var gl=Nr(),zi=Hi(),pl=Wi(),zD=hl(),KD;(function(n){function e(t){let r=t;return r&&zi.func(r.listen)&&zi.func(r.dispose)&&zi.func(r.onError)&&zi.func(r.onClose)&&zi.func(r.onPartialMessage)}n.is=e})(KD=pr.MessageReader||(pr.MessageReader={}));var ua=class{constructor(){this.errorEmitter=new pl.Emitter,this.closeEmitter=new pl.Emitter,this.partialMessageEmitter=new pl.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${zi.string(e.message)?e.message:"unknown"}`)}};pr.AbstractMessageReader=ua;var ml;(function(n){function e(t){let r,i,o,s=new Map,a,c=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(o=t.contentDecoder,s.set(o.name,o)),t.contentDecoders!==void 0)for(let u of t.contentDecoders)s.set(u.name,u);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,c.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let u of t.contentTypeDecoders)c.set(u.name,u)}return a===void 0&&(a=(0,gl.default)().applicationJson.decoder,c.set(a.name,a)),{charset:r,contentDecoder:o,contentDecoders:s,contentTypeDecoder:a,contentTypeDecoders:c}}n.fromOptions=e})(ml||(ml={}));var vl=class extends ua{constructor(e,t){super(),this.readable=e,this.options=ml.fromOptions(t),this.buffer=(0,gl.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new zD.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=o}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,gl.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};pr.ReadableStreamMessageReader=vl});var Cm=D(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.WriteableStreamMessageWriter=gr.AbstractMessageWriter=gr.MessageWriter=void 0;var vm=Nr(),Vo=Hi(),BD=hl(),ym=Wi(),GD="Content-Length: ",_m=`\r
`,VD;(function(n){function e(t){let r=t;return r&&Vo.func(r.dispose)&&Vo.func(r.onClose)&&Vo.func(r.onError)&&Vo.func(r.write)}n.is=e})(VD=gr.MessageWriter||(gr.MessageWriter={}));var la=class{constructor(){this.errorEmitter=new ym.Emitter,this.closeEmitter=new ym.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Vo.string(e.message)?e.message:"unknown"}`)}};gr.AbstractMessageWriter=la;var yl;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,vm.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,vm.default)().applicationJson.encoder}}n.fromOptions=e})(yl||(yl={}));var _l=class extends la{constructor(e,t){super(),this.writable=e,this.options=yl.fromOptions(t),this.errorCount=0,this.writeSemaphore=new BD.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(GD,r.byteLength.toString(),_m),i.push(_m),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};gr.WriteableStreamMessageWriter=_l});var bm=D(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.AbstractMessageBuffer=void 0;var XD=13,JD=10,QD=`\r
`,Cl=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let u=this._chunks[r];i=0;t:for(;i<u.length;){switch(u[i]){case XD:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case JD:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}o+=u.byteLength,r++}if(t!==4)return;let s=this._read(o+i),a=new Map,c=this.toString(s,"ascii").split(QD);if(c.length<2)return a;for(let u=0;u<c.length-2;u++){let l=c[u],f=l.indexOf(":");if(f===-1)throw new Error("Message header must separate key and value using :");let h=l.substr(0,f),p=l.substr(f+1).trim();a.set(e?h.toLowerCase():h,p)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],s=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,s}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let s=o.slice(0,e);t.set(s,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else t.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return t}};da.AbstractMessageBuffer=Cl});var qm=D(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.createMessageConnection=X.ConnectionOptions=X.MessageStrategy=X.CancellationStrategy=X.CancellationSenderStrategy=X.CancellationReceiverStrategy=X.RequestCancellationReceiverStrategy=X.IdCancellationReceiverStrategy=X.ConnectionStrategy=X.ConnectionError=X.ConnectionErrors=X.LogTraceNotification=X.SetTraceNotification=X.TraceFormat=X.TraceValues=X.Trace=X.NullLogger=X.ProgressType=X.ProgressToken=void 0;var wm=Nr(),Ve=Hi(),te=Yu(),Dm=el(),Xo=Wi(),bl=aa(),Qo;(function(n){n.type=new te.NotificationType("$/cancelRequest")})(Qo||(Qo={}));var Rm;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(Rm=X.ProgressToken||(X.ProgressToken={}));var Jo;(function(n){n.type=new te.NotificationType("$/progress")})(Jo||(Jo={}));var wl=class{constructor(){}};X.ProgressType=wl;var Dl;(function(n){function e(t){return Ve.func(t)}n.is=e})(Dl||(Dl={}));X.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Fe;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(Fe=X.Trace||(X.Trace={}));var YD;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(YD=X.TraceValues||(X.TraceValues={}));(function(n){function e(r){if(!Ve.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Fe=X.Trace||(X.Trace={}));var Nn;(function(n){n.Text="text",n.JSON="json"})(Nn=X.TraceFormat||(X.TraceFormat={}));(function(n){function e(t){return Ve.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(Nn=X.TraceFormat||(X.TraceFormat={}));var Sm;(function(n){n.type=new te.NotificationType("$/setTrace")})(Sm=X.SetTraceNotification||(X.SetTraceNotification={}));var Rl;(function(n){n.type=new te.NotificationType("$/logTrace")})(Rl=X.LogTraceNotification||(X.LogTraceNotification={}));var fa;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(fa=X.ConnectionErrors||(X.ConnectionErrors={}));var Ir=class extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,Ir.prototype)}};X.ConnectionError=Ir;var Tm;(function(n){function e(t){let r=t;return r&&Ve.func(r.cancelUndispatched)}n.is=e})(Tm=X.ConnectionStrategy||(X.ConnectionStrategy={}));var Pl;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&Ve.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ve.func(r.dispose))}n.is=e})(Pl=X.IdCancellationReceiverStrategy||(X.IdCancellationReceiverStrategy={}));var Pm;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&Ve.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ve.func(r.dispose))}n.is=e})(Pm=X.RequestCancellationReceiverStrategy||(X.RequestCancellationReceiverStrategy={}));var Sl;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new bl.CancellationTokenSource}});function e(t){return Pl.is(t)||Pm.is(t)}n.is=e})(Sl=X.CancellationReceiverStrategy||(X.CancellationReceiverStrategy={}));var Tl;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(Qo.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&Ve.func(r.sendCancellation)&&Ve.func(r.cleanup)}n.is=e})(Tl=X.CancellationSenderStrategy||(X.CancellationSenderStrategy={}));var ql;(function(n){n.Message=Object.freeze({receiver:Sl.Message,sender:Tl.Message});function e(t){let r=t;return r&&Sl.is(r.receiver)&&Tl.is(r.sender)}n.is=e})(ql=X.CancellationStrategy||(X.CancellationStrategy={}));var xl;(function(n){function e(t){let r=t;return r&&Ve.func(r.handleMessage)}n.is=e})(xl=X.MessageStrategy||(X.MessageStrategy={}));var ZD;(function(n){function e(t){let r=t;return r&&(ql.is(r.cancellationStrategy)||Tm.is(r.connectionStrategy)||xl.is(r.messageStrategy))}n.is=e})(ZD=X.ConnectionOptions||(X.ConnectionOptions={}));var In;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(In||(In={}));function eR(n,e,t,r){let i=t!==void 0?t:X.NullLogger,o=0,s=0,a=0,c="2.0",u,l=new Map,f,h=new Map,p=new Map,g,C=new Dm.LinkedMap,b=new Map,R=new Set,y=new Map,_=Fe.Off,T=Nn.Text,N,V=In.New,U=new Xo.Emitter,re=new Xo.Emitter,ee=new Xo.Emitter,Ne=new Xo.Emitter,ge=new Xo.Emitter,st=r&&r.cancellationStrategy?r.cancellationStrategy:ql.Message;function On(w){if(w===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+w.toString()}function yt(w){return w===null?"res-unknown-"+(++a).toString():"res-"+w.toString()}function pt(){return"not-"+(++s).toString()}function I(w,E){te.Message.isRequest(E)?w.set(On(E.id),E):te.Message.isResponse(E)?w.set(yt(E.id),E):w.set(pt(),E)}function x(w){}function F(){return V===In.Listening}function j(){return V===In.Closed}function Z(){return V===In.Disposed}function se(){(V===In.New||V===In.Listening)&&(V=In.Closed,re.fire(void 0))}function J(w){U.fire([w,void 0,void 0])}function kt(w){U.fire(w)}n.onClose(se),n.onError(J),e.onClose(se),e.onError(kt);function gt(){g||C.size===0||(g=(0,wm.default)().timer.setImmediate(()=>{g=void 0,vn()}))}function wt(w){te.Message.isRequest(w)?Uo(w):te.Message.isNotification(w)?Ii(w):te.Message.isResponse(w)?Ni(w):zo(w)}function vn(){if(C.size===0)return;let w=C.shift();try{let E=r?.messageStrategy;xl.is(E)?E.handleMessage(w,wt):wt(w)}finally{gt()}}let Jt=w=>{try{if(te.Message.isNotification(w)&&w.method===Qo.type.method){let E=w.params.id,L=On(E),z=C.get(L);if(te.Message.isRequest(z)){let Se=r?.connectionStrategy,Ie=Se&&Se.cancelUndispatched?Se.cancelUndispatched(z,x):void 0;if(Ie&&(Ie.error!==void 0||Ie.result!==void 0)){C.delete(L),y.delete(E),Ie.id=z.id,Yn(Ie,w.method,Date.now()),e.write(Ie).catch(()=>i.error("Sending response for canceled message failed."));return}}let qe=y.get(E);if(qe!==void 0){qe.cancel(),sn(w);return}else R.add(E)}I(C,w)}finally{gt()}};function Uo(w){if(Z())return;function E(fe,Ee,m){let q={jsonrpc:c,id:w.id};fe instanceof te.ResponseError?q.error=fe.toJson():q.result=fe===void 0?null:fe,Yn(q,Ee,m),e.write(q).catch(()=>i.error("Sending response failed."))}function L(fe,Ee,m){let q={jsonrpc:c,id:w.id,error:fe.toJson()};Yn(q,Ee,m),e.write(q).catch(()=>i.error("Sending response failed."))}function z(fe,Ee,m){fe===void 0&&(fe=null);let q={jsonrpc:c,id:w.id,result:fe};Yn(q,Ee,m),e.write(q).catch(()=>i.error("Sending response failed."))}ji(w);let qe=l.get(w.method),Se,Ie;qe&&(Se=qe.type,Ie=qe.handler);let We=Date.now();if(Ie||u){let fe=w.id??String(Date.now()),Ee=Pl.is(st.receiver)?st.receiver.createCancellationTokenSource(fe):st.receiver.createCancellationTokenSource(w);w.id!==null&&R.has(w.id)&&Ee.cancel(),w.id!==null&&y.set(fe,Ee);try{let m;if(Ie)if(w.params===void 0){if(Se!==void 0&&Se.numberOfParams!==0){L(new te.ResponseError(te.ErrorCodes.InvalidParams,`Request ${w.method} defines ${Se.numberOfParams} params but received none.`),w.method,We);return}m=Ie(Ee.token)}else if(Array.isArray(w.params)){if(Se!==void 0&&Se.parameterStructures===te.ParameterStructures.byName){L(new te.ResponseError(te.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by name but received parameters by position`),w.method,We);return}m=Ie(...w.params,Ee.token)}else{if(Se!==void 0&&Se.parameterStructures===te.ParameterStructures.byPosition){L(new te.ResponseError(te.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by position but received parameters by name`),w.method,We);return}m=Ie(w.params,Ee.token)}else u&&(m=u(w.method,w.params,Ee.token));let q=m;m?q.then?q.then(H=>{y.delete(fe),E(H,w.method,We)},H=>{y.delete(fe),H instanceof te.ResponseError?L(H,w.method,We):H&&Ve.string(H.message)?L(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${H.message}`),w.method,We):L(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,We)}):(y.delete(fe),E(m,w.method,We)):(y.delete(fe),z(m,w.method,We))}catch(m){y.delete(fe),m instanceof te.ResponseError?E(m,w.method,We):m&&Ve.string(m.message)?L(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${m.message}`),w.method,We):L(new te.ResponseError(te.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,We)}}else L(new te.ResponseError(te.ErrorCodes.MethodNotFound,`Unhandled method ${w.method}`),w.method,We)}function Ni(w){if(!Z())if(w.id===null)w.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(w.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let E=w.id,L=b.get(E);if(Zr(w,L),L!==void 0){b.delete(E);try{if(w.error){let z=w.error;L.reject(new te.ResponseError(z.code,z.message,z.data))}else if(w.result!==void 0)L.resolve(w.result);else throw new Error("Should never happen.")}catch(z){z.message?i.error(`Response handler '${L.method}' failed with message: ${z.message}`):i.error(`Response handler '${L.method}' failed unexpectedly.`)}}}}function Ii(w){if(Z())return;let E,L;if(w.method===Qo.type.method){let z=w.params.id;R.delete(z),sn(w);return}else{let z=h.get(w.method);z&&(L=z.handler,E=z.type)}if(L||f)try{if(sn(w),L)if(w.params===void 0)E!==void 0&&E.numberOfParams!==0&&E.parameterStructures!==te.ParameterStructures.byName&&i.error(`Notification ${w.method} defines ${E.numberOfParams} params but received none.`),L();else if(Array.isArray(w.params)){let z=w.params;w.method===Jo.type.method&&z.length===2&&Rm.is(z[0])?L({token:z[0],value:z[1]}):(E!==void 0&&(E.parameterStructures===te.ParameterStructures.byName&&i.error(`Notification ${w.method} defines parameters by name but received parameters by position`),E.numberOfParams!==w.params.length&&i.error(`Notification ${w.method} defines ${E.numberOfParams} params but received ${z.length} arguments`)),L(...z))}else E!==void 0&&E.parameterStructures===te.ParameterStructures.byPosition&&i.error(`Notification ${w.method} defines parameters by position but received parameters by name`),L(w.params);else f&&f(w.method,w.params)}catch(z){z.message?i.error(`Notification handler '${w.method}' failed with message: ${z.message}`):i.error(`Notification handler '${w.method}' failed unexpectedly.`)}else ee.fire(w)}function zo(w){if(!w){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(w,null,4)}`);let E=w;if(Ve.string(E.id)||Ve.number(E.id)){let L=E.id,z=b.get(L);z&&z.reject(new Error("The received response has neither a result nor an error property."))}}function Dt(w){if(w!=null)switch(_){case Fe.Verbose:return JSON.stringify(w,null,4);case Fe.Compact:return JSON.stringify(w);default:return}}function Mi(w){if(!(_===Fe.Off||!N))if(T===Nn.Text){let E;(_===Fe.Verbose||_===Fe.Compact)&&w.params&&(E=`Params: ${Dt(w.params)}

`),N.log(`Sending request '${w.method} - (${w.id})'.`,E)}else mt("send-request",w)}function Fr(w){if(!(_===Fe.Off||!N))if(T===Nn.Text){let E;(_===Fe.Verbose||_===Fe.Compact)&&(w.params?E=`Params: ${Dt(w.params)}

`:E=`No parameters provided.

`),N.log(`Sending notification '${w.method}'.`,E)}else mt("send-notification",w)}function Yn(w,E,L){if(!(_===Fe.Off||!N))if(T===Nn.Text){let z;(_===Fe.Verbose||_===Fe.Compact)&&(w.error&&w.error.data?z=`Error data: ${Dt(w.error.data)}

`:w.result?z=`Result: ${Dt(w.result)}

`:w.error===void 0&&(z=`No result returned.

`)),N.log(`Sending response '${E} - (${w.id})'. Processing request took ${Date.now()-L}ms`,z)}else mt("send-response",w)}function ji(w){if(!(_===Fe.Off||!N))if(T===Nn.Text){let E;(_===Fe.Verbose||_===Fe.Compact)&&w.params&&(E=`Params: ${Dt(w.params)}

`),N.log(`Received request '${w.method} - (${w.id})'.`,E)}else mt("receive-request",w)}function sn(w){if(!(_===Fe.Off||!N||w.method===Rl.type.method))if(T===Nn.Text){let E;(_===Fe.Verbose||_===Fe.Compact)&&(w.params?E=`Params: ${Dt(w.params)}

`:E=`No parameters provided.

`),N.log(`Received notification '${w.method}'.`,E)}else mt("receive-notification",w)}function Zr(w,E){if(!(_===Fe.Off||!N))if(T===Nn.Text){let L;if((_===Fe.Verbose||_===Fe.Compact)&&(w.error&&w.error.data?L=`Error data: ${Dt(w.error.data)}

`:w.result?L=`Result: ${Dt(w.result)}

`:w.error===void 0&&(L=`No result returned.

`)),E){let z=w.error?` Request failed: ${w.error.message} (${w.error.code}).`:"";N.log(`Received response '${E.method} - (${w.id})' in ${Date.now()-E.timerStart}ms.${z}`,L)}else N.log(`Received response ${w.id} without active response promise.`,L)}else mt("receive-response",w)}function mt(w,E){if(!N||_===Fe.Off)return;let L={isLSPMessage:!0,type:w,message:E,timestamp:Date.now()};N.log(L)}function dr(){if(j())throw new Ir(fa.Closed,"Connection is closed.");if(Z())throw new Ir(fa.Disposed,"Connection is disposed.")}function an(){if(F())throw new Ir(fa.AlreadyListening,"Connection is already listening")}function ei(){if(!F())throw new Error("Call listen() first.")}function fr(w){return w===void 0?null:w}function ti(w){if(w!==null)return w}function Ai(w){return w!=null&&!Array.isArray(w)&&typeof w=="object"}function yn(w,E){switch(w){case te.ParameterStructures.auto:return Ai(E)?ti(E):[fr(E)];case te.ParameterStructures.byName:if(!Ai(E))throw new Error("Received parameters by name but param is not an object literal.");return ti(E);case te.ParameterStructures.byPosition:return[fr(E)];default:throw new Error(`Unknown parameter structure ${w.toString()}`)}}function Li(w,E){let L,z=w.numberOfParams;switch(z){case 0:L=void 0;break;case 1:L=yn(w.parameterStructures,E[0]);break;default:L=[];for(let qe=0;qe<E.length&&qe<z;qe++)L.push(fr(E[qe]));if(E.length<z)for(let qe=E.length;qe<z;qe++)L.push(null);break}return L}let Fn={sendNotification:(w,...E)=>{dr();let L,z;if(Ve.string(w)){L=w;let Se=E[0],Ie=0,We=te.ParameterStructures.auto;te.ParameterStructures.is(Se)&&(Ie=1,We=Se);let fe=E.length,Ee=fe-Ie;switch(Ee){case 0:z=void 0;break;case 1:z=yn(We,E[Ie]);break;default:if(We===te.ParameterStructures.byName)throw new Error(`Received ${Ee} parameters for 'by Name' notification parameter structure.`);z=E.slice(Ie,fe).map(m=>fr(m));break}}else{let Se=E;L=w.method,z=Li(w,Se)}let qe={jsonrpc:c,method:L,params:z};return Fr(qe),e.write(qe).catch(Se=>{throw i.error("Sending notification failed."),Se})},onNotification:(w,E)=>{dr();let L;return Ve.func(w)?f=w:E&&(Ve.string(w)?(L=w,h.set(w,{type:void 0,handler:E})):(L=w.method,h.set(w.method,{type:w,handler:E}))),{dispose:()=>{L!==void 0?h.delete(L):f=void 0}}},onProgress:(w,E,L)=>{if(p.has(E))throw new Error(`Progress handler for token ${E} already registered`);return p.set(E,L),{dispose:()=>{p.delete(E)}}},sendProgress:(w,E,L)=>Fn.sendNotification(Jo.type,{token:E,value:L}),onUnhandledProgress:Ne.event,sendRequest:(w,...E)=>{dr(),ei();let L,z,qe;if(Ve.string(w)){L=w;let fe=E[0],Ee=E[E.length-1],m=0,q=te.ParameterStructures.auto;te.ParameterStructures.is(fe)&&(m=1,q=fe);let H=E.length;bl.CancellationToken.is(Ee)&&(H=H-1,qe=Ee);let de=H-m;switch(de){case 0:z=void 0;break;case 1:z=yn(q,E[m]);break;default:if(q===te.ParameterStructures.byName)throw new Error(`Received ${de} parameters for 'by Name' request parameter structure.`);z=E.slice(m,H).map(xe=>fr(xe));break}}else{let fe=E;L=w.method,z=Li(w,fe);let Ee=w.numberOfParams;qe=bl.CancellationToken.is(fe[Ee])?fe[Ee]:void 0}let Se=o++,Ie;qe&&(Ie=qe.onCancellationRequested(()=>{let fe=st.sender.sendCancellation(Fn,Se);return fe===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Se}`),Promise.resolve()):fe.catch(()=>{i.log(`Sending cancellation messages for id ${Se} failed`)})}));let We={jsonrpc:c,id:Se,method:L,params:z};return Mi(We),typeof st.sender.enableCancellation=="function"&&st.sender.enableCancellation(We),new Promise(async(fe,Ee)=>{let m=de=>{fe(de),st.sender.cleanup(Se),Ie?.dispose()},q=de=>{Ee(de),st.sender.cleanup(Se),Ie?.dispose()},H={method:L,timerStart:Date.now(),resolve:m,reject:q};try{await e.write(We),b.set(Se,H)}catch(de){throw i.error("Sending request failed."),H.reject(new te.ResponseError(te.ErrorCodes.MessageWriteError,de.message?de.message:"Unknown reason")),de}})},onRequest:(w,E)=>{dr();let L=null;return Dl.is(w)?(L=void 0,u=w):Ve.string(w)?(L=null,E!==void 0&&(L=w,l.set(w,{handler:E,type:void 0}))):E!==void 0&&(L=w.method,l.set(w.method,{type:w,handler:E})),{dispose:()=>{L!==null&&(L!==void 0?l.delete(L):u=void 0)}}},hasPendingResponse:()=>b.size>0,trace:async(w,E,L)=>{let z=!1,qe=Nn.Text;L!==void 0&&(Ve.boolean(L)?z=L:(z=L.sendNotification||!1,qe=L.traceFormat||Nn.Text)),_=w,T=qe,_===Fe.Off?N=void 0:N=E,z&&!j()&&!Z()&&await Fn.sendNotification(Sm.type,{value:Fe.toString(w)})},onError:U.event,onClose:re.event,onUnhandledNotification:ee.event,onDispose:ge.event,end:()=>{e.end()},dispose:()=>{if(Z())return;V=In.Disposed,ge.fire(void 0);let w=new te.ResponseError(te.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let E of b.values())E.reject(w);b=new Map,y=new Map,R=new Set,C=new Dm.LinkedMap,Ve.func(e.dispose)&&e.dispose(),Ve.func(n.dispose)&&n.dispose()},listen:()=>{dr(),an(),V=In.Listening,n.listen(Jt)},inspect:()=>{(0,wm.default)().console.log("inspect")}};return Fn.onNotification(Rl.type,w=>{if(_===Fe.Off||!N)return;let E=_===Fe.Verbose||_===Fe.Compact;N.log(w.message,E?w.verbose:void 0)}),Fn.onNotification(Jo.type,w=>{let E=p.get(w.token);E?E(w.value):Ne.fire(w)}),Fn}X.createMessageConnection=eR});var ha=D(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.ProgressType=k.ProgressToken=k.createMessageConnection=k.NullLogger=k.ConnectionOptions=k.ConnectionStrategy=k.AbstractMessageBuffer=k.WriteableStreamMessageWriter=k.AbstractMessageWriter=k.MessageWriter=k.ReadableStreamMessageReader=k.AbstractMessageReader=k.MessageReader=k.SharedArrayReceiverStrategy=k.SharedArraySenderStrategy=k.CancellationToken=k.CancellationTokenSource=k.Emitter=k.Event=k.Disposable=k.LRUCache=k.Touch=k.LinkedMap=k.ParameterStructures=k.NotificationType9=k.NotificationType8=k.NotificationType7=k.NotificationType6=k.NotificationType5=k.NotificationType4=k.NotificationType3=k.NotificationType2=k.NotificationType1=k.NotificationType0=k.NotificationType=k.ErrorCodes=k.ResponseError=k.RequestType9=k.RequestType8=k.RequestType7=k.RequestType6=k.RequestType5=k.RequestType4=k.RequestType3=k.RequestType2=k.RequestType1=k.RequestType0=k.RequestType=k.Message=k.RAL=void 0;k.MessageStrategy=k.CancellationStrategy=k.CancellationSenderStrategy=k.CancellationReceiverStrategy=k.ConnectionError=k.ConnectionErrors=k.LogTraceNotification=k.SetTraceNotification=k.TraceFormat=k.TraceValues=k.Trace=void 0;var Ae=Yu();Object.defineProperty(k,"Message",{enumerable:!0,get:function(){return Ae.Message}});Object.defineProperty(k,"RequestType",{enumerable:!0,get:function(){return Ae.RequestType}});Object.defineProperty(k,"RequestType0",{enumerable:!0,get:function(){return Ae.RequestType0}});Object.defineProperty(k,"RequestType1",{enumerable:!0,get:function(){return Ae.RequestType1}});Object.defineProperty(k,"RequestType2",{enumerable:!0,get:function(){return Ae.RequestType2}});Object.defineProperty(k,"RequestType3",{enumerable:!0,get:function(){return Ae.RequestType3}});Object.defineProperty(k,"RequestType4",{enumerable:!0,get:function(){return Ae.RequestType4}});Object.defineProperty(k,"RequestType5",{enumerable:!0,get:function(){return Ae.RequestType5}});Object.defineProperty(k,"RequestType6",{enumerable:!0,get:function(){return Ae.RequestType6}});Object.defineProperty(k,"RequestType7",{enumerable:!0,get:function(){return Ae.RequestType7}});Object.defineProperty(k,"RequestType8",{enumerable:!0,get:function(){return Ae.RequestType8}});Object.defineProperty(k,"RequestType9",{enumerable:!0,get:function(){return Ae.RequestType9}});Object.defineProperty(k,"ResponseError",{enumerable:!0,get:function(){return Ae.ResponseError}});Object.defineProperty(k,"ErrorCodes",{enumerable:!0,get:function(){return Ae.ErrorCodes}});Object.defineProperty(k,"NotificationType",{enumerable:!0,get:function(){return Ae.NotificationType}});Object.defineProperty(k,"NotificationType0",{enumerable:!0,get:function(){return Ae.NotificationType0}});Object.defineProperty(k,"NotificationType1",{enumerable:!0,get:function(){return Ae.NotificationType1}});Object.defineProperty(k,"NotificationType2",{enumerable:!0,get:function(){return Ae.NotificationType2}});Object.defineProperty(k,"NotificationType3",{enumerable:!0,get:function(){return Ae.NotificationType3}});Object.defineProperty(k,"NotificationType4",{enumerable:!0,get:function(){return Ae.NotificationType4}});Object.defineProperty(k,"NotificationType5",{enumerable:!0,get:function(){return Ae.NotificationType5}});Object.defineProperty(k,"NotificationType6",{enumerable:!0,get:function(){return Ae.NotificationType6}});Object.defineProperty(k,"NotificationType7",{enumerable:!0,get:function(){return Ae.NotificationType7}});Object.defineProperty(k,"NotificationType8",{enumerable:!0,get:function(){return Ae.NotificationType8}});Object.defineProperty(k,"NotificationType9",{enumerable:!0,get:function(){return Ae.NotificationType9}});Object.defineProperty(k,"ParameterStructures",{enumerable:!0,get:function(){return Ae.ParameterStructures}});var kl=el();Object.defineProperty(k,"LinkedMap",{enumerable:!0,get:function(){return kl.LinkedMap}});Object.defineProperty(k,"LRUCache",{enumerable:!0,get:function(){return kl.LRUCache}});Object.defineProperty(k,"Touch",{enumerable:!0,get:function(){return kl.Touch}});var tR=pm();Object.defineProperty(k,"Disposable",{enumerable:!0,get:function(){return tR.Disposable}});var xm=Wi();Object.defineProperty(k,"Event",{enumerable:!0,get:function(){return xm.Event}});Object.defineProperty(k,"Emitter",{enumerable:!0,get:function(){return xm.Emitter}});var km=aa();Object.defineProperty(k,"CancellationTokenSource",{enumerable:!0,get:function(){return km.CancellationTokenSource}});Object.defineProperty(k,"CancellationToken",{enumerable:!0,get:function(){return km.CancellationToken}});var Em=gm();Object.defineProperty(k,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Em.SharedArraySenderStrategy}});Object.defineProperty(k,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Em.SharedArrayReceiverStrategy}});var El=mm();Object.defineProperty(k,"MessageReader",{enumerable:!0,get:function(){return El.MessageReader}});Object.defineProperty(k,"AbstractMessageReader",{enumerable:!0,get:function(){return El.AbstractMessageReader}});Object.defineProperty(k,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return El.ReadableStreamMessageReader}});var Ol=Cm();Object.defineProperty(k,"MessageWriter",{enumerable:!0,get:function(){return Ol.MessageWriter}});Object.defineProperty(k,"AbstractMessageWriter",{enumerable:!0,get:function(){return Ol.AbstractMessageWriter}});Object.defineProperty(k,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Ol.WriteableStreamMessageWriter}});var nR=bm();Object.defineProperty(k,"AbstractMessageBuffer",{enumerable:!0,get:function(){return nR.AbstractMessageBuffer}});var St=qm();Object.defineProperty(k,"ConnectionStrategy",{enumerable:!0,get:function(){return St.ConnectionStrategy}});Object.defineProperty(k,"ConnectionOptions",{enumerable:!0,get:function(){return St.ConnectionOptions}});Object.defineProperty(k,"NullLogger",{enumerable:!0,get:function(){return St.NullLogger}});Object.defineProperty(k,"createMessageConnection",{enumerable:!0,get:function(){return St.createMessageConnection}});Object.defineProperty(k,"ProgressToken",{enumerable:!0,get:function(){return St.ProgressToken}});Object.defineProperty(k,"ProgressType",{enumerable:!0,get:function(){return St.ProgressType}});Object.defineProperty(k,"Trace",{enumerable:!0,get:function(){return St.Trace}});Object.defineProperty(k,"TraceValues",{enumerable:!0,get:function(){return St.TraceValues}});Object.defineProperty(k,"TraceFormat",{enumerable:!0,get:function(){return St.TraceFormat}});Object.defineProperty(k,"SetTraceNotification",{enumerable:!0,get:function(){return St.SetTraceNotification}});Object.defineProperty(k,"LogTraceNotification",{enumerable:!0,get:function(){return St.LogTraceNotification}});Object.defineProperty(k,"ConnectionErrors",{enumerable:!0,get:function(){return St.ConnectionErrors}});Object.defineProperty(k,"ConnectionError",{enumerable:!0,get:function(){return St.ConnectionError}});Object.defineProperty(k,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return St.CancellationReceiverStrategy}});Object.defineProperty(k,"CancellationSenderStrategy",{enumerable:!0,get:function(){return St.CancellationSenderStrategy}});Object.defineProperty(k,"CancellationStrategy",{enumerable:!0,get:function(){return St.CancellationStrategy}});Object.defineProperty(k,"MessageStrategy",{enumerable:!0,get:function(){return St.MessageStrategy}});var rR=Nr();k.RAL=rR.default});var Nm=D(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var Om=require("util"),mr=ha(),Ki=class extends mr.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Ki.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Om.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};Ki.emptyBuffer=Buffer.allocUnsafe(0);var Fl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),mr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),mr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),mr.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),mr.Disposable.create(()=>this.stream.off("data",e))}},Nl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),mr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),mr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),mr.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let o=s=>{s==null?r():i(s)};typeof e=="string"?this.stream.write(e,t,o):this.stream.write(e,o)})}end(){this.stream.end()}},Fm=Object.freeze({messageBuffer:Object.freeze({create:n=>new Ki(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Om.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new Fl(n),asWritableStream:n=>new Nl(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function Il(){return Fm}(function(n){function e(){mr.RAL.install(Fm)}n.install=e})(Il||(Il={}));Ml.default=Il});var ai=D(_e=>{"use strict";var iR=_e&&_e.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),oR=_e&&_e.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&iR(e,n,t)};Object.defineProperty(_e,"__esModule",{value:!0});_e.createMessageConnection=_e.createServerSocketTransport=_e.createClientSocketTransport=_e.createServerPipeTransport=_e.createClientPipeTransport=_e.generateRandomPipeName=_e.StreamMessageWriter=_e.StreamMessageReader=_e.SocketMessageWriter=_e.SocketMessageReader=_e.PortMessageWriter=_e.PortMessageReader=_e.IPCMessageWriter=_e.IPCMessageReader=void 0;var Bi=Nm();Bi.default.install();var Im=require("path"),sR=require("os"),aR=require("crypto"),ma=require("net"),un=ha();oR(ha(),_e);var jl=class extends un.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),un.Disposable.create(()=>this.process.off("message",e))}};_e.IPCMessageReader=jl;var Al=class extends un.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};_e.IPCMessageWriter=Al;var Ll=class extends un.AbstractMessageReader{constructor(e){super(),this.onData=new un.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};_e.PortMessageReader=Ll;var Hl=class extends un.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};_e.PortMessageWriter=Hl;var oi=class extends un.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,Bi.default)().stream.asReadableStream(e),t)}};_e.SocketMessageReader=oi;var si=class extends un.WriteableStreamMessageWriter{constructor(e,t){super((0,Bi.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};_e.SocketMessageWriter=si;var pa=class extends un.ReadableStreamMessageReader{constructor(e,t){super((0,Bi.default)().stream.asReadableStream(e),t)}};_e.StreamMessageReader=pa;var ga=class extends un.WriteableStreamMessageWriter{constructor(e,t){super((0,Bi.default)().stream.asWritableStream(e),t)}};_e.StreamMessageWriter=ga;var Mm=process.env.XDG_RUNTIME_DIR,cR=new Map([["linux",107],["darwin",103]]);function uR(){let n=(0,aR.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;Mm?e=Im.join(Mm,`vscode-ipc-${n}.sock`):e=Im.join(sR.tmpdir(),`vscode-${n}.sock`);let t=cR.get(process.platform);return t!==void 0&&e.length>t&&(0,Bi.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}_e.generateRandomPipeName=uR;function lR(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,ma.createServer)(a=>{s.close(),t([new oi(a,e),new si(a,e)])});s.on("error",o),s.listen(n,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}_e.createClientPipeTransport=lR;function dR(n,e="utf-8"){let t=(0,ma.createConnection)(n);return[new oi(t,e),new si(t,e)]}_e.createServerPipeTransport=dR;function fR(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,ma.createServer)(a=>{s.close(),t([new oi(a,e),new si(a,e)])});s.on("error",o),s.listen(n,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}_e.createClientSocketTransport=fR;function hR(n,e="utf-8"){let t=(0,ma.createConnection)(n,"127.0.0.1");return[new oi(t,e),new si(t,e)]}_e.createServerSocketTransport=hR;function pR(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function gR(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function mR(n,e,t,r){t||(t=un.NullLogger);let i=pR(n)?new pa(n):n,o=gR(e)?new ga(e):e;return un.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,un.createMessageConnection)(i,o,t,r)}_e.createMessageConnection=mR});var $l=D((PI,jm)=>{"use strict";jm.exports=ai()});var Sa={};um(Sa,{AnnotatedTextEdit:()=>vr,ChangeAnnotation:()=>ci,ChangeAnnotationIdentifier:()=>Tt,CodeAction:()=>bd,CodeActionContext:()=>Cd,CodeActionKind:()=>_d,CodeActionTriggerKind:()=>is,CodeDescription:()=>Ql,CodeLens:()=>wd,Color:()=>_a,ColorInformation:()=>Kl,ColorPresentation:()=>Bl,Command:()=>ui,CompletionItem:()=>ad,CompletionItemKind:()=>td,CompletionItemLabelDetails:()=>sd,CompletionItemTag:()=>rd,CompletionList:()=>cd,CreateFile:()=>Gi,DeleteFile:()=>Xi,Diagnostic:()=>es,DiagnosticRelatedInformation:()=>Ca,DiagnosticSeverity:()=>Xl,DiagnosticTag:()=>Jl,DocumentHighlight:()=>hd,DocumentHighlightKind:()=>fd,DocumentLink:()=>Rd,DocumentSymbol:()=>yd,DocumentUri:()=>Wl,EOL:()=>yR,FoldingRange:()=>Vl,FoldingRangeKind:()=>Gl,FormattingOptions:()=>Dd,Hover:()=>ud,InlayHint:()=>Fd,InlayHintKind:()=>Da,InlayHintLabelPart:()=>Ra,InlineValueContext:()=>Od,InlineValueEvaluatableExpression:()=>Ed,InlineValueText:()=>xd,InlineValueVariableLookup:()=>kd,InsertReplaceEdit:()=>id,InsertTextFormat:()=>nd,InsertTextMode:()=>od,Location:()=>Zo,LocationLink:()=>zl,MarkedString:()=>rs,MarkupContent:()=>Ji,MarkupKind:()=>wa,OptionalVersionedTextDocumentIdentifier:()=>ns,ParameterInformation:()=>ld,Position:()=>_n,Range:()=>tt,RenameFile:()=>Vi,SelectionRange:()=>Sd,SemanticTokenModifiers:()=>Pd,SemanticTokenTypes:()=>Td,SemanticTokens:()=>qd,SignatureInformation:()=>dd,SymbolInformation:()=>md,SymbolKind:()=>pd,SymbolTag:()=>gd,TextDocument:()=>Id,TextDocumentEdit:()=>ts,TextDocumentIdentifier:()=>Yl,TextDocumentItem:()=>ed,TextEdit:()=>tr,URI:()=>ya,VersionedTextDocumentIdentifier:()=>Zl,WorkspaceChange:()=>vR,WorkspaceEdit:()=>ba,WorkspaceFolder:()=>Nd,WorkspaceSymbol:()=>vd,integer:()=>Ul,uinteger:()=>Yo});var Wl,ya,Ul,Yo,_n,tt,Zo,zl,_a,Kl,Bl,Gl,Vl,Ca,Xl,Jl,Ql,es,ui,tr,ci,Tt,vr,ts,Gi,Vi,Xi,ba,va,Am,vR,Yl,Zl,ns,ed,wa,Ji,td,nd,rd,id,od,sd,ad,cd,rs,ud,ld,dd,fd,hd,pd,gd,md,vd,yd,_d,is,Cd,bd,wd,Dd,Rd,Sd,Td,Pd,qd,xd,kd,Ed,Od,Da,Ra,Fd,Nd,yR,Id,_R,P,Ta=cm(()=>{"use strict";(function(n){function e(t){return typeof t=="string"}n.is=e})(Wl||(Wl={}));(function(n){function e(t){return typeof t=="string"}n.is=e})(ya||(ya={}));(function(n){n.MIN_VALUE=-2147483648,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(Ul||(Ul={}));(function(n){n.MIN_VALUE=0,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(Yo||(Yo={}));(function(n){function e(r,i){return r===Number.MAX_VALUE&&(r=Yo.MAX_VALUE),i===Number.MAX_VALUE&&(i=Yo.MAX_VALUE),{line:r,character:i}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&P.uinteger(i.line)&&P.uinteger(i.character)}n.is=t})(_n||(_n={}));(function(n){function e(r,i,o,s){if(P.uinteger(r)&&P.uinteger(i)&&P.uinteger(o)&&P.uinteger(s))return{start:_n.create(r,i),end:_n.create(o,s)};if(_n.is(r)&&_n.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(o,", ").concat(s,"]"))}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&_n.is(i.start)&&_n.is(i.end)}n.is=t})(tt||(tt={}));(function(n){function e(r,i){return{uri:r,range:i}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&tt.is(i.range)&&(P.string(i.uri)||P.undefined(i.uri))}n.is=t})(Zo||(Zo={}));(function(n){function e(r,i,o,s){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&tt.is(i.targetRange)&&P.string(i.targetUri)&&tt.is(i.targetSelectionRange)&&(tt.is(i.originSelectionRange)||P.undefined(i.originSelectionRange))}n.is=t})(zl||(zl={}));(function(n){function e(r,i,o,s){return{red:r,green:i,blue:o,alpha:s}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&P.numberRange(i.red,0,1)&&P.numberRange(i.green,0,1)&&P.numberRange(i.blue,0,1)&&P.numberRange(i.alpha,0,1)}n.is=t})(_a||(_a={}));(function(n){function e(r,i){return{range:r,color:i}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&tt.is(i.range)&&_a.is(i.color)}n.is=t})(Kl||(Kl={}));(function(n){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&P.string(i.label)&&(P.undefined(i.textEdit)||tr.is(i))&&(P.undefined(i.additionalTextEdits)||P.typedArray(i.additionalTextEdits,tr.is))}n.is=t})(Bl||(Bl={}));(function(n){n.Comment="comment",n.Imports="imports",n.Region="region"})(Gl||(Gl={}));(function(n){function e(r,i,o,s,a,c){var u={startLine:r,endLine:i};return P.defined(o)&&(u.startCharacter=o),P.defined(s)&&(u.endCharacter=s),P.defined(a)&&(u.kind=a),P.defined(c)&&(u.collapsedText=c),u}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&P.uinteger(i.startLine)&&P.uinteger(i.startLine)&&(P.undefined(i.startCharacter)||P.uinteger(i.startCharacter))&&(P.undefined(i.endCharacter)||P.uinteger(i.endCharacter))&&(P.undefined(i.kind)||P.string(i.kind))}n.is=t})(Vl||(Vl={}));(function(n){function e(r,i){return{location:r,message:i}}n.create=e;function t(r){var i=r;return P.defined(i)&&Zo.is(i.location)&&P.string(i.message)}n.is=t})(Ca||(Ca={}));(function(n){n.Error=1,n.Warning=2,n.Information=3,n.Hint=4})(Xl||(Xl={}));(function(n){n.Unnecessary=1,n.Deprecated=2})(Jl||(Jl={}));(function(n){function e(t){var r=t;return P.objectLiteral(r)&&P.string(r.href)}n.is=e})(Ql||(Ql={}));(function(n){function e(r,i,o,s,a,c){var u={range:r,message:i};return P.defined(o)&&(u.severity=o),P.defined(s)&&(u.code=s),P.defined(a)&&(u.source=a),P.defined(c)&&(u.relatedInformation=c),u}n.create=e;function t(r){var i,o=r;return P.defined(o)&&tt.is(o.range)&&P.string(o.message)&&(P.number(o.severity)||P.undefined(o.severity))&&(P.integer(o.code)||P.string(o.code)||P.undefined(o.code))&&(P.undefined(o.codeDescription)||P.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(P.string(o.source)||P.undefined(o.source))&&(P.undefined(o.relatedInformation)||P.typedArray(o.relatedInformation,Ca.is))}n.is=t})(es||(es={}));(function(n){function e(r,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:r,command:i};return P.defined(o)&&o.length>0&&(a.arguments=o),a}n.create=e;function t(r){var i=r;return P.defined(i)&&P.string(i.title)&&P.string(i.command)}n.is=t})(ui||(ui={}));(function(n){function e(o,s){return{range:o,newText:s}}n.replace=e;function t(o,s){return{range:{start:o,end:o},newText:s}}n.insert=t;function r(o){return{range:o,newText:""}}n.del=r;function i(o){var s=o;return P.objectLiteral(s)&&P.string(s.newText)&&tt.is(s.range)}n.is=i})(tr||(tr={}));(function(n){function e(r,i,o){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&P.string(i.label)&&(P.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(P.string(i.description)||i.description===void 0)}n.is=t})(ci||(ci={}));(function(n){function e(t){var r=t;return P.string(r)}n.is=e})(Tt||(Tt={}));(function(n){function e(o,s,a){return{range:o,newText:s,annotationId:a}}n.replace=e;function t(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}n.insert=t;function r(o,s){return{range:o,newText:"",annotationId:s}}n.del=r;function i(o){var s=o;return tr.is(s)&&(ci.is(s.annotationId)||Tt.is(s.annotationId))}n.is=i})(vr||(vr={}));(function(n){function e(r,i){return{textDocument:r,edits:i}}n.create=e;function t(r){var i=r;return P.defined(i)&&ns.is(i.textDocument)&&Array.isArray(i.edits)}n.is=t})(ts||(ts={}));(function(n){function e(r,i,o){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}n.create=e;function t(r){var i=r;return i&&i.kind==="create"&&P.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||P.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||P.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Tt.is(i.annotationId))}n.is=t})(Gi||(Gi={}));(function(n){function e(r,i,o,s){var a={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}n.create=e;function t(r){var i=r;return i&&i.kind==="rename"&&P.string(i.oldUri)&&P.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||P.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||P.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Tt.is(i.annotationId))}n.is=t})(Vi||(Vi={}));(function(n){function e(r,i,o){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}n.create=e;function t(r){var i=r;return i&&i.kind==="delete"&&P.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||P.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||P.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Tt.is(i.annotationId))}n.is=t})(Xi||(Xi={}));(function(n){function e(t){var r=t;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return P.string(i.kind)?Gi.is(i)||Vi.is(i)||Xi.is(i):ts.is(i)}))}n.is=e})(ba||(ba={}));va=function(){function n(e,t){this.edits=e,this.changeAnnotations=t}return n.prototype.insert=function(e,t,r){var i,o;if(r===void 0?i=tr.insert(e,t):Tt.is(r)?(o=r,i=vr.insert(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=vr.insert(e,t,o)),this.edits.push(i),o!==void 0)return o},n.prototype.replace=function(e,t,r){var i,o;if(r===void 0?i=tr.replace(e,t):Tt.is(r)?(o=r,i=vr.replace(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=vr.replace(e,t,o)),this.edits.push(i),o!==void 0)return o},n.prototype.delete=function(e,t){var r,i;if(t===void 0?r=tr.del(e):Tt.is(t)?(i=t,r=vr.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(t),r=vr.del(e,i)),this.edits.push(r),i!==void 0)return i},n.prototype.add=function(e){this.edits.push(e)},n.prototype.all=function(){return this.edits},n.prototype.clear=function(){this.edits.splice(0,this.edits.length)},n.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},n}(),Am=function(){function n(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return n.prototype.all=function(){return this._annotations},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),n.prototype.manage=function(e,t){var r;if(Tt.is(e)?r=e:(r=this.nextId(),t=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(t===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=t,this._size++,r},n.prototype.nextId=function(){return this._counter++,this._counter.toString()},n}(),vR=function(){function n(e){var t=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Am(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(ts.is(r)){var i=new va(r.edits,t._changeAnnotations);t._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new va(e.changes[r]);t._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(n.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),n.prototype.getTextEditChange=function(e){if(ns.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version},r=this._textEditChanges[t.uri];if(!r){var i=[],o={textDocument:t,edits:i};this._workspaceEdit.documentChanges.push(o),r=new va(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new va(i),this._textEditChanges[e]=r}return r}},n.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Am,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},n.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},n.prototype.createFile=function(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ci.is(t)||Tt.is(t)?i=t:r=t;var o,s;if(i===void 0?o=Gi.create(e,r):(s=Tt.is(i)?i:this._changeAnnotations.manage(i),o=Gi.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},n.prototype.renameFile=function(e,t,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ci.is(r)||Tt.is(r)?o=r:i=r;var s,a;if(o===void 0?s=Vi.create(e,t,i):(a=Tt.is(o)?o:this._changeAnnotations.manage(o),s=Vi.create(e,t,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},n.prototype.deleteFile=function(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ci.is(t)||Tt.is(t)?i=t:r=t;var o,s;if(i===void 0?o=Xi.create(e,r):(s=Tt.is(i)?i:this._changeAnnotations.manage(i),o=Xi.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},n}();(function(n){function e(r){return{uri:r}}n.create=e;function t(r){var i=r;return P.defined(i)&&P.string(i.uri)}n.is=t})(Yl||(Yl={}));(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){var i=r;return P.defined(i)&&P.string(i.uri)&&P.integer(i.version)}n.is=t})(Zl||(Zl={}));(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){var i=r;return P.defined(i)&&P.string(i.uri)&&(i.version===null||P.integer(i.version))}n.is=t})(ns||(ns={}));(function(n){function e(r,i,o,s){return{uri:r,languageId:i,version:o,text:s}}n.create=e;function t(r){var i=r;return P.defined(i)&&P.string(i.uri)&&P.string(i.languageId)&&P.integer(i.version)&&P.string(i.text)}n.is=t})(ed||(ed={}));(function(n){n.PlainText="plaintext",n.Markdown="markdown";function e(t){var r=t;return r===n.PlainText||r===n.Markdown}n.is=e})(wa||(wa={}));(function(n){function e(t){var r=t;return P.objectLiteral(t)&&wa.is(r.kind)&&P.string(r.value)}n.is=e})(Ji||(Ji={}));(function(n){n.Text=1,n.Method=2,n.Function=3,n.Constructor=4,n.Field=5,n.Variable=6,n.Class=7,n.Interface=8,n.Module=9,n.Property=10,n.Unit=11,n.Value=12,n.Enum=13,n.Keyword=14,n.Snippet=15,n.Color=16,n.File=17,n.Reference=18,n.Folder=19,n.EnumMember=20,n.Constant=21,n.Struct=22,n.Event=23,n.Operator=24,n.TypeParameter=25})(td||(td={}));(function(n){n.PlainText=1,n.Snippet=2})(nd||(nd={}));(function(n){n.Deprecated=1})(rd||(rd={}));(function(n){function e(r,i,o){return{newText:r,insert:i,replace:o}}n.create=e;function t(r){var i=r;return i&&P.string(i.newText)&&tt.is(i.insert)&&tt.is(i.replace)}n.is=t})(id||(id={}));(function(n){n.asIs=1,n.adjustIndentation=2})(od||(od={}));(function(n){function e(t){var r=t;return r&&(P.string(r.detail)||r.detail===void 0)&&(P.string(r.description)||r.description===void 0)}n.is=e})(sd||(sd={}));(function(n){function e(t){return{label:t}}n.create=e})(ad||(ad={}));(function(n){function e(t,r){return{items:t||[],isIncomplete:!!r}}n.create=e})(cd||(cd={}));(function(n){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}n.fromPlainText=e;function t(r){var i=r;return P.string(i)||P.objectLiteral(i)&&P.string(i.language)&&P.string(i.value)}n.is=t})(rs||(rs={}));(function(n){function e(t){var r=t;return!!r&&P.objectLiteral(r)&&(Ji.is(r.contents)||rs.is(r.contents)||P.typedArray(r.contents,rs.is))&&(t.range===void 0||tt.is(t.range))}n.is=e})(ud||(ud={}));(function(n){function e(t,r){return r?{label:t,documentation:r}:{label:t}}n.create=e})(ld||(ld={}));(function(n){function e(t,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s={label:t};return P.defined(r)&&(s.documentation=r),P.defined(i)?s.parameters=i:s.parameters=[],s}n.create=e})(dd||(dd={}));(function(n){n.Text=1,n.Read=2,n.Write=3})(fd||(fd={}));(function(n){function e(t,r){var i={range:t};return P.number(r)&&(i.kind=r),i}n.create=e})(hd||(hd={}));(function(n){n.File=1,n.Module=2,n.Namespace=3,n.Package=4,n.Class=5,n.Method=6,n.Property=7,n.Field=8,n.Constructor=9,n.Enum=10,n.Interface=11,n.Function=12,n.Variable=13,n.Constant=14,n.String=15,n.Number=16,n.Boolean=17,n.Array=18,n.Object=19,n.Key=20,n.Null=21,n.EnumMember=22,n.Struct=23,n.Event=24,n.Operator=25,n.TypeParameter=26})(pd||(pd={}));(function(n){n.Deprecated=1})(gd||(gd={}));(function(n){function e(t,r,i,o,s){var a={name:t,kind:r,location:{uri:o,range:i}};return s&&(a.containerName=s),a}n.create=e})(md||(md={}));(function(n){function e(t,r,i,o){return o!==void 0?{name:t,kind:r,location:{uri:i,range:o}}:{name:t,kind:r,location:{uri:i}}}n.create=e})(vd||(vd={}));(function(n){function e(r,i,o,s,a,c){var u={name:r,detail:i,kind:o,range:s,selectionRange:a};return c!==void 0&&(u.children=c),u}n.create=e;function t(r){var i=r;return i&&P.string(i.name)&&P.number(i.kind)&&tt.is(i.range)&&tt.is(i.selectionRange)&&(i.detail===void 0||P.string(i.detail))&&(i.deprecated===void 0||P.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}n.is=t})(yd||(yd={}));(function(n){n.Empty="",n.QuickFix="quickfix",n.Refactor="refactor",n.RefactorExtract="refactor.extract",n.RefactorInline="refactor.inline",n.RefactorRewrite="refactor.rewrite",n.Source="source",n.SourceOrganizeImports="source.organizeImports",n.SourceFixAll="source.fixAll"})(_d||(_d={}));(function(n){n.Invoked=1,n.Automatic=2})(is||(is={}));(function(n){function e(r,i,o){var s={diagnostics:r};return i!=null&&(s.only=i),o!=null&&(s.triggerKind=o),s}n.create=e;function t(r){var i=r;return P.defined(i)&&P.typedArray(i.diagnostics,es.is)&&(i.only===void 0||P.typedArray(i.only,P.string))&&(i.triggerKind===void 0||i.triggerKind===is.Invoked||i.triggerKind===is.Automatic)}n.is=t})(Cd||(Cd={}));(function(n){function e(r,i,o){var s={title:r},a=!0;return typeof i=="string"?(a=!1,s.kind=i):ui.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}n.create=e;function t(r){var i=r;return i&&P.string(i.title)&&(i.diagnostics===void 0||P.typedArray(i.diagnostics,es.is))&&(i.kind===void 0||P.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ui.is(i.command))&&(i.isPreferred===void 0||P.boolean(i.isPreferred))&&(i.edit===void 0||ba.is(i.edit))}n.is=t})(bd||(bd={}));(function(n){function e(r,i){var o={range:r};return P.defined(i)&&(o.data=i),o}n.create=e;function t(r){var i=r;return P.defined(i)&&tt.is(i.range)&&(P.undefined(i.command)||ui.is(i.command))}n.is=t})(wd||(wd={}));(function(n){function e(r,i){return{tabSize:r,insertSpaces:i}}n.create=e;function t(r){var i=r;return P.defined(i)&&P.uinteger(i.tabSize)&&P.boolean(i.insertSpaces)}n.is=t})(Dd||(Dd={}));(function(n){function e(r,i,o){return{range:r,target:i,data:o}}n.create=e;function t(r){var i=r;return P.defined(i)&&tt.is(i.range)&&(P.undefined(i.target)||P.string(i.target))}n.is=t})(Rd||(Rd={}));(function(n){function e(r,i){return{range:r,parent:i}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&tt.is(i.range)&&(i.parent===void 0||n.is(i.parent))}n.is=t})(Sd||(Sd={}));(function(n){n.namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator",n.decorator="decorator"})(Td||(Td={}));(function(n){n.declaration="declaration",n.definition="definition",n.readonly="readonly",n.static="static",n.deprecated="deprecated",n.abstract="abstract",n.async="async",n.modification="modification",n.documentation="documentation",n.defaultLibrary="defaultLibrary"})(Pd||(Pd={}));(function(n){function e(t){var r=t;return P.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}n.is=e})(qd||(qd={}));(function(n){function e(r,i){return{range:r,text:i}}n.create=e;function t(r){var i=r;return i!=null&&tt.is(i.range)&&P.string(i.text)}n.is=t})(xd||(xd={}));(function(n){function e(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}n.create=e;function t(r){var i=r;return i!=null&&tt.is(i.range)&&P.boolean(i.caseSensitiveLookup)&&(P.string(i.variableName)||i.variableName===void 0)}n.is=t})(kd||(kd={}));(function(n){function e(r,i){return{range:r,expression:i}}n.create=e;function t(r){var i=r;return i!=null&&tt.is(i.range)&&(P.string(i.expression)||i.expression===void 0)}n.is=t})(Ed||(Ed={}));(function(n){function e(r,i){return{frameId:r,stoppedLocation:i}}n.create=e;function t(r){var i=r;return P.defined(i)&&tt.is(r.stoppedLocation)}n.is=t})(Od||(Od={}));(function(n){n.Type=1,n.Parameter=2;function e(t){return t===1||t===2}n.is=e})(Da||(Da={}));(function(n){function e(r){return{value:r}}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&(i.tooltip===void 0||P.string(i.tooltip)||Ji.is(i.tooltip))&&(i.location===void 0||Zo.is(i.location))&&(i.command===void 0||ui.is(i.command))}n.is=t})(Ra||(Ra={}));(function(n){function e(r,i,o){var s={position:r,label:i};return o!==void 0&&(s.kind=o),s}n.create=e;function t(r){var i=r;return P.objectLiteral(i)&&_n.is(i.position)&&(P.string(i.label)||P.typedArray(i.label,Ra.is))&&(i.kind===void 0||Da.is(i.kind))&&i.textEdits===void 0||P.typedArray(i.textEdits,tr.is)&&(i.tooltip===void 0||P.string(i.tooltip)||Ji.is(i.tooltip))&&(i.paddingLeft===void 0||P.boolean(i.paddingLeft))&&(i.paddingRight===void 0||P.boolean(i.paddingRight))}n.is=t})(Fd||(Fd={}));(function(n){function e(t){var r=t;return P.objectLiteral(r)&&ya.is(r.uri)&&P.string(r.name)}n.is=e})(Nd||(Nd={}));yR=[`
`,`\r
`,"\r"];(function(n){function e(o,s,a,c){return new _R(o,s,a,c)}n.create=e;function t(o){var s=o;return!!(P.defined(s)&&P.string(s.uri)&&(P.undefined(s.languageId)||P.string(s.languageId))&&P.uinteger(s.lineCount)&&P.func(s.getText)&&P.func(s.positionAt)&&P.func(s.offsetAt))}n.is=t;function r(o,s){for(var a=o.getText(),c=i(s,function(g,C){var b=g.range.start.line-C.range.start.line;return b===0?g.range.start.character-C.range.start.character:b}),u=a.length,l=c.length-1;l>=0;l--){var f=c[l],h=o.offsetAt(f.range.start),p=o.offsetAt(f.range.end);if(p<=u)a=a.substring(0,h)+f.newText+a.substring(p,a.length);else throw new Error("Overlapping edit");u=h}return a}n.applyEdits=r;function i(o,s){if(o.length<=1)return o;var a=o.length/2|0,c=o.slice(0,a),u=o.slice(a);i(c,s),i(u,s);for(var l=0,f=0,h=0;l<c.length&&f<u.length;){var p=s(c[l],u[f]);p<=0?o[h++]=c[l++]:o[h++]=u[f++]}for(;l<c.length;)o[h++]=c[l++];for(;f<u.length;)o[h++]=u[f++];return o}})(Id||(Id={}));_R=function(){function n(e,t,r,i){this._uri=e,this._languageId=t,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(n.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),n.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content},n.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},n.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],t=this._content,r=!0,i=0;i<t.length;i++){r&&(e.push(i),r=!1);var o=t.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<t.length&&t.charAt(i+1)===`
`&&i++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},n.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),r=0,i=t.length;if(i===0)return _n.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);t[o]>e?i=o:r=o+1}var s=r-1;return _n.create(s,e-t[s])},n.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var r=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(n.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),n}();(function(n){var e=Object.prototype.toString;function t(p){return typeof p<"u"}n.defined=t;function r(p){return typeof p>"u"}n.undefined=r;function i(p){return p===!0||p===!1}n.boolean=i;function o(p){return e.call(p)==="[object String]"}n.string=o;function s(p){return e.call(p)==="[object Number]"}n.number=s;function a(p,g,C){return e.call(p)==="[object Number]"&&g<=p&&p<=C}n.numberRange=a;function c(p){return e.call(p)==="[object Number]"&&-2147483648<=p&&p<=2147483647}n.integer=c;function u(p){return e.call(p)==="[object Number]"&&0<=p&&p<=2147483647}n.uinteger=u;function l(p){return e.call(p)==="[object Function]"}n.func=l;function f(p){return p!==null&&typeof p=="object"}n.objectLiteral=f;function h(p,g){return Array.isArray(p)&&p.every(g)}n.typedArray=h})(P||(P={}))});var Xe=D($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.ProtocolNotificationType=$t.ProtocolNotificationType0=$t.ProtocolRequestType=$t.ProtocolRequestType0=$t.RegistrationType=$t.MessageDirection=void 0;var Qi=ai(),CR;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(CR=$t.MessageDirection||($t.MessageDirection={}));var Md=class{constructor(e){this.method=e}};$t.RegistrationType=Md;var jd=class extends Qi.RequestType0{constructor(e){super(e)}};$t.ProtocolRequestType0=jd;var Ad=class extends Qi.RequestType{constructor(e){super(e,Qi.ParameterStructures.byName)}};$t.ProtocolRequestType=Ad;var Ld=class extends Qi.NotificationType0{constructor(e){super(e)}};$t.ProtocolNotificationType0=Ld;var Hd=class extends Qi.NotificationType{constructor(e){super(e,Qi.ParameterStructures.byName)}};$t.ProtocolNotificationType=Hd});var Pa=D(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.objectLiteral=ct.typedArray=ct.stringArray=ct.array=ct.func=ct.error=ct.number=ct.string=ct.boolean=void 0;function bR(n){return n===!0||n===!1}ct.boolean=bR;function Lm(n){return typeof n=="string"||n instanceof String}ct.string=Lm;function wR(n){return typeof n=="number"||n instanceof Number}ct.number=wR;function DR(n){return n instanceof Error}ct.error=DR;function RR(n){return typeof n=="function"}ct.func=RR;function Hm(n){return Array.isArray(n)}ct.array=Hm;function SR(n){return Hm(n)&&n.every(e=>Lm(e))}ct.stringArray=SR;function TR(n,e){return Array.isArray(n)&&n.every(e)}ct.typedArray=TR;function PR(n){return n!==null&&typeof n=="object"}ct.objectLiteral=PR});var Wm=D(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.ImplementationRequest=void 0;var $m=Xe(),qR;(function(n){n.method="textDocument/implementation",n.messageDirection=$m.MessageDirection.clientToServer,n.type=new $m.ProtocolRequestType(n.method)})(qR=os.ImplementationRequest||(os.ImplementationRequest={}))});var zm=D(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.TypeDefinitionRequest=void 0;var Um=Xe(),xR;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=Um.MessageDirection.clientToServer,n.type=new Um.ProtocolRequestType(n.method)})(xR=ss.TypeDefinitionRequest||(ss.TypeDefinitionRequest={}))});var Km=D(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.DidChangeWorkspaceFoldersNotification=Mr.WorkspaceFoldersRequest=void 0;var qa=Xe(),kR;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=qa.MessageDirection.serverToClient,n.type=new qa.ProtocolRequestType0(n.method)})(kR=Mr.WorkspaceFoldersRequest||(Mr.WorkspaceFoldersRequest={}));var ER;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=qa.MessageDirection.clientToServer,n.type=new qa.ProtocolNotificationType(n.method)})(ER=Mr.DidChangeWorkspaceFoldersNotification||(Mr.DidChangeWorkspaceFoldersNotification={}))});var Gm=D(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.ConfigurationRequest=void 0;var Bm=Xe(),OR;(function(n){n.method="workspace/configuration",n.messageDirection=Bm.MessageDirection.serverToClient,n.type=new Bm.ProtocolRequestType(n.method)})(OR=as.ConfigurationRequest||(as.ConfigurationRequest={}))});var Vm=D(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.ColorPresentationRequest=jr.DocumentColorRequest=void 0;var xa=Xe(),FR;(function(n){n.method="textDocument/documentColor",n.messageDirection=xa.MessageDirection.clientToServer,n.type=new xa.ProtocolRequestType(n.method)})(FR=jr.DocumentColorRequest||(jr.DocumentColorRequest={}));var NR;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=xa.MessageDirection.clientToServer,n.type=new xa.ProtocolRequestType(n.method)})(NR=jr.ColorPresentationRequest||(jr.ColorPresentationRequest={}))});var Jm=D(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.FoldingRangeRequest=void 0;var Xm=Xe(),IR;(function(n){n.method="textDocument/foldingRange",n.messageDirection=Xm.MessageDirection.clientToServer,n.type=new Xm.ProtocolRequestType(n.method)})(IR=cs.FoldingRangeRequest||(cs.FoldingRangeRequest={}))});var Ym=D(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.DeclarationRequest=void 0;var Qm=Xe(),MR;(function(n){n.method="textDocument/declaration",n.messageDirection=Qm.MessageDirection.clientToServer,n.type=new Qm.ProtocolRequestType(n.method)})(MR=us.DeclarationRequest||(us.DeclarationRequest={}))});var ev=D(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.SelectionRangeRequest=void 0;var Zm=Xe(),jR;(function(n){n.method="textDocument/selectionRange",n.messageDirection=Zm.MessageDirection.clientToServer,n.type=new Zm.ProtocolRequestType(n.method)})(jR=ls.SelectionRangeRequest||(ls.SelectionRangeRequest={}))});var tv=D(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.WorkDoneProgressCancelNotification=Mn.WorkDoneProgressCreateRequest=Mn.WorkDoneProgress=void 0;var AR=ai(),ka=Xe(),LR;(function(n){n.type=new AR.ProgressType;function e(t){return t===n.type}n.is=e})(LR=Mn.WorkDoneProgress||(Mn.WorkDoneProgress={}));var HR;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=ka.MessageDirection.serverToClient,n.type=new ka.ProtocolRequestType(n.method)})(HR=Mn.WorkDoneProgressCreateRequest||(Mn.WorkDoneProgressCreateRequest={}));var $R;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=ka.MessageDirection.clientToServer,n.type=new ka.ProtocolNotificationType(n.method)})($R=Mn.WorkDoneProgressCancelNotification||(Mn.WorkDoneProgressCancelNotification={}))});var nv=D(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.CallHierarchyOutgoingCallsRequest=jn.CallHierarchyIncomingCallsRequest=jn.CallHierarchyPrepareRequest=void 0;var Yi=Xe(),WR;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=Yi.MessageDirection.clientToServer,n.type=new Yi.ProtocolRequestType(n.method)})(WR=jn.CallHierarchyPrepareRequest||(jn.CallHierarchyPrepareRequest={}));var UR;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=Yi.MessageDirection.clientToServer,n.type=new Yi.ProtocolRequestType(n.method)})(UR=jn.CallHierarchyIncomingCallsRequest||(jn.CallHierarchyIncomingCallsRequest={}));var zR;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=Yi.MessageDirection.clientToServer,n.type=new Yi.ProtocolRequestType(n.method)})(zR=jn.CallHierarchyOutgoingCallsRequest||(jn.CallHierarchyOutgoingCallsRequest={}))});var rv=D(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.SemanticTokensRefreshRequest=ut.SemanticTokensRangeRequest=ut.SemanticTokensDeltaRequest=ut.SemanticTokensRequest=ut.SemanticTokensRegistrationType=ut.TokenFormat=void 0;var yr=Xe(),KR;(function(n){n.Relative="relative"})(KR=ut.TokenFormat||(ut.TokenFormat={}));var Ea;(function(n){n.method="textDocument/semanticTokens",n.type=new yr.RegistrationType(n.method)})(Ea=ut.SemanticTokensRegistrationType||(ut.SemanticTokensRegistrationType={}));var BR;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=yr.MessageDirection.clientToServer,n.type=new yr.ProtocolRequestType(n.method),n.registrationMethod=Ea.method})(BR=ut.SemanticTokensRequest||(ut.SemanticTokensRequest={}));var GR;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=yr.MessageDirection.clientToServer,n.type=new yr.ProtocolRequestType(n.method),n.registrationMethod=Ea.method})(GR=ut.SemanticTokensDeltaRequest||(ut.SemanticTokensDeltaRequest={}));var VR;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=yr.MessageDirection.clientToServer,n.type=new yr.ProtocolRequestType(n.method),n.registrationMethod=Ea.method})(VR=ut.SemanticTokensRangeRequest||(ut.SemanticTokensRangeRequest={}));var XR;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=yr.MessageDirection.serverToClient,n.type=new yr.ProtocolRequestType0(n.method)})(XR=ut.SemanticTokensRefreshRequest||(ut.SemanticTokensRefreshRequest={}))});var ov=D(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.ShowDocumentRequest=void 0;var iv=Xe(),JR;(function(n){n.method="window/showDocument",n.messageDirection=iv.MessageDirection.serverToClient,n.type=new iv.ProtocolRequestType(n.method)})(JR=ds.ShowDocumentRequest||(ds.ShowDocumentRequest={}))});var av=D(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.LinkedEditingRangeRequest=void 0;var sv=Xe(),QR;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=sv.MessageDirection.clientToServer,n.type=new sv.ProtocolRequestType(n.method)})(QR=fs.LinkedEditingRangeRequest||(fs.LinkedEditingRangeRequest={}))});var cv=D(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.WillDeleteFilesRequest=Je.DidDeleteFilesNotification=Je.DidRenameFilesNotification=Je.WillRenameFilesRequest=Je.DidCreateFilesNotification=Je.WillCreateFilesRequest=Je.FileOperationPatternKind=void 0;var Cn=Xe(),YR;(function(n){n.file="file",n.folder="folder"})(YR=Je.FileOperationPatternKind||(Je.FileOperationPatternKind={}));var ZR;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=Cn.MessageDirection.clientToServer,n.type=new Cn.ProtocolRequestType(n.method)})(ZR=Je.WillCreateFilesRequest||(Je.WillCreateFilesRequest={}));var eS;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=Cn.MessageDirection.clientToServer,n.type=new Cn.ProtocolNotificationType(n.method)})(eS=Je.DidCreateFilesNotification||(Je.DidCreateFilesNotification={}));var tS;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=Cn.MessageDirection.clientToServer,n.type=new Cn.ProtocolRequestType(n.method)})(tS=Je.WillRenameFilesRequest||(Je.WillRenameFilesRequest={}));var nS;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=Cn.MessageDirection.clientToServer,n.type=new Cn.ProtocolNotificationType(n.method)})(nS=Je.DidRenameFilesNotification||(Je.DidRenameFilesNotification={}));var rS;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=Cn.MessageDirection.clientToServer,n.type=new Cn.ProtocolNotificationType(n.method)})(rS=Je.DidDeleteFilesNotification||(Je.DidDeleteFilesNotification={}));var iS;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=Cn.MessageDirection.clientToServer,n.type=new Cn.ProtocolRequestType(n.method)})(iS=Je.WillDeleteFilesRequest||(Je.WillDeleteFilesRequest={}))});var lv=D(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.MonikerRequest=An.MonikerKind=An.UniquenessLevel=void 0;var uv=Xe(),oS;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(oS=An.UniquenessLevel||(An.UniquenessLevel={}));var sS;(function(n){n.$import="import",n.$export="export",n.local="local"})(sS=An.MonikerKind||(An.MonikerKind={}));var aS;(function(n){n.method="textDocument/moniker",n.messageDirection=uv.MessageDirection.clientToServer,n.type=new uv.ProtocolRequestType(n.method)})(aS=An.MonikerRequest||(An.MonikerRequest={}))});var dv=D(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.TypeHierarchySubtypesRequest=Ln.TypeHierarchySupertypesRequest=Ln.TypeHierarchyPrepareRequest=void 0;var Zi=Xe(),cS;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=Zi.MessageDirection.clientToServer,n.type=new Zi.ProtocolRequestType(n.method)})(cS=Ln.TypeHierarchyPrepareRequest||(Ln.TypeHierarchyPrepareRequest={}));var uS;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=Zi.MessageDirection.clientToServer,n.type=new Zi.ProtocolRequestType(n.method)})(uS=Ln.TypeHierarchySupertypesRequest||(Ln.TypeHierarchySupertypesRequest={}));var lS;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=Zi.MessageDirection.clientToServer,n.type=new Zi.ProtocolRequestType(n.method)})(lS=Ln.TypeHierarchySubtypesRequest||(Ln.TypeHierarchySubtypesRequest={}))});var fv=D(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.InlineValueRefreshRequest=Ar.InlineValueRequest=void 0;var Oa=Xe(),dS;(function(n){n.method="textDocument/inlineValue",n.messageDirection=Oa.MessageDirection.clientToServer,n.type=new Oa.ProtocolRequestType(n.method)})(dS=Ar.InlineValueRequest||(Ar.InlineValueRequest={}));var fS;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=Oa.MessageDirection.serverToClient,n.type=new Oa.ProtocolRequestType0(n.method)})(fS=Ar.InlineValueRefreshRequest||(Ar.InlineValueRefreshRequest={}))});var hv=D(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.InlayHintRefreshRequest=Hn.InlayHintResolveRequest=Hn.InlayHintRequest=void 0;var eo=Xe(),hS;(function(n){n.method="textDocument/inlayHint",n.messageDirection=eo.MessageDirection.clientToServer,n.type=new eo.ProtocolRequestType(n.method)})(hS=Hn.InlayHintRequest||(Hn.InlayHintRequest={}));var pS;(function(n){n.method="inlayHint/resolve",n.messageDirection=eo.MessageDirection.clientToServer,n.type=new eo.ProtocolRequestType(n.method)})(pS=Hn.InlayHintResolveRequest||(Hn.InlayHintResolveRequest={}));var gS;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=eo.MessageDirection.serverToClient,n.type=new eo.ProtocolRequestType0(n.method)})(gS=Hn.InlayHintRefreshRequest||(Hn.InlayHintRefreshRequest={}))});var gv=D(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.DiagnosticRefreshRequest=Pt.WorkspaceDiagnosticRequest=Pt.DocumentDiagnosticRequest=Pt.DocumentDiagnosticReportKind=Pt.DiagnosticServerCancellationData=void 0;var pv=ai(),mS=Pa(),to=Xe(),vS;(function(n){function e(t){let r=t;return r&&mS.boolean(r.retriggerRequest)}n.is=e})(vS=Pt.DiagnosticServerCancellationData||(Pt.DiagnosticServerCancellationData={}));var yS;(function(n){n.Full="full",n.Unchanged="unchanged"})(yS=Pt.DocumentDiagnosticReportKind||(Pt.DocumentDiagnosticReportKind={}));var _S;(function(n){n.method="textDocument/diagnostic",n.messageDirection=to.MessageDirection.clientToServer,n.type=new to.ProtocolRequestType(n.method),n.partialResult=new pv.ProgressType})(_S=Pt.DocumentDiagnosticRequest||(Pt.DocumentDiagnosticRequest={}));var CS;(function(n){n.method="workspace/diagnostic",n.messageDirection=to.MessageDirection.clientToServer,n.type=new to.ProtocolRequestType(n.method),n.partialResult=new pv.ProgressType})(CS=Pt.WorkspaceDiagnosticRequest||(Pt.WorkspaceDiagnosticRequest={}));var bS;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=to.MessageDirection.serverToClient,n.type=new to.ProtocolRequestType0(n.method)})(bS=Pt.DiagnosticRefreshRequest||(Pt.DiagnosticRefreshRequest={}))});var yv=D(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.DidCloseNotebookDocumentNotification=De.DidSaveNotebookDocumentNotification=De.DidChangeNotebookDocumentNotification=De.NotebookCellArrayChange=De.DidOpenNotebookDocumentNotification=De.NotebookDocumentSyncRegistrationType=De.NotebookDocument=De.NotebookCell=De.ExecutionSummary=De.NotebookCellKind=void 0;var hs=(Ta(),ia(Sa)),$n=Pa(),nr=Xe(),mv;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(mv=De.NotebookCellKind||(De.NotebookCellKind={}));var vv;(function(n){function e(i,o){let s={executionOrder:i};return(o===!0||o===!1)&&(s.success=o),s}n.create=e;function t(i){let o=i;return $n.objectLiteral(o)&&hs.uinteger.is(o.executionOrder)&&(o.success===void 0||$n.boolean(o.success))}n.is=t;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}n.equals=r})(vv=De.ExecutionSummary||(De.ExecutionSummary={}));var $d;(function(n){function e(o,s){return{kind:o,document:s}}n.create=e;function t(o){let s=o;return $n.objectLiteral(s)&&mv.is(s.kind)&&hs.DocumentUri.is(s.document)&&(s.metadata===void 0||$n.objectLiteral(s.metadata))}n.is=t;function r(o,s){let a=new Set;return o.document!==s.document&&a.add("document"),o.kind!==s.kind&&a.add("kind"),o.executionSummary!==s.executionSummary&&a.add("executionSummary"),(o.metadata!==void 0||s.metadata!==void 0)&&!i(o.metadata,s.metadata)&&a.add("metadata"),(o.executionSummary!==void 0||s.executionSummary!==void 0)&&!vv.equals(o.executionSummary,s.executionSummary)&&a.add("executionSummary"),a}n.diff=r;function i(o,s){if(o===s)return!0;if(o==null||s===null||s===void 0||typeof o!=typeof s||typeof o!="object")return!1;let a=Array.isArray(o),c=Array.isArray(s);if(a!==c)return!1;if(a&&c){if(o.length!==s.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],s[u]))return!1}if($n.objectLiteral(o)&&$n.objectLiteral(s)){let u=Object.keys(o),l=Object.keys(s);if(u.length!==l.length||(u.sort(),l.sort(),!i(u,l)))return!1;for(let f=0;f<u.length;f++){let h=u[f];if(!i(o[h],s[h]))return!1}}return!0}})($d=De.NotebookCell||(De.NotebookCell={}));var wS;(function(n){function e(r,i,o,s){return{uri:r,notebookType:i,version:o,cells:s}}n.create=e;function t(r){let i=r;return $n.objectLiteral(i)&&$n.string(i.uri)&&hs.integer.is(i.version)&&$n.typedArray(i.cells,$d.is)}n.is=t})(wS=De.NotebookDocument||(De.NotebookDocument={}));var ps;(function(n){n.method="notebookDocument/sync",n.messageDirection=nr.MessageDirection.clientToServer,n.type=new nr.RegistrationType(n.method)})(ps=De.NotebookDocumentSyncRegistrationType||(De.NotebookDocumentSyncRegistrationType={}));var DS;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=nr.MessageDirection.clientToServer,n.type=new nr.ProtocolNotificationType(n.method),n.registrationMethod=ps.method})(DS=De.DidOpenNotebookDocumentNotification||(De.DidOpenNotebookDocumentNotification={}));var RS;(function(n){function e(r){let i=r;return $n.objectLiteral(i)&&hs.uinteger.is(i.start)&&hs.uinteger.is(i.deleteCount)&&(i.cells===void 0||$n.typedArray(i.cells,$d.is))}n.is=e;function t(r,i,o){let s={start:r,deleteCount:i};return o!==void 0&&(s.cells=o),s}n.create=t})(RS=De.NotebookCellArrayChange||(De.NotebookCellArrayChange={}));var SS;(function(n){n.method="notebookDocument/didChange",n.messageDirection=nr.MessageDirection.clientToServer,n.type=new nr.ProtocolNotificationType(n.method),n.registrationMethod=ps.method})(SS=De.DidChangeNotebookDocumentNotification||(De.DidChangeNotebookDocumentNotification={}));var TS;(function(n){n.method="notebookDocument/didSave",n.messageDirection=nr.MessageDirection.clientToServer,n.type=new nr.ProtocolNotificationType(n.method),n.registrationMethod=ps.method})(TS=De.DidSaveNotebookDocumentNotification||(De.DidSaveNotebookDocumentNotification={}));var PS;(function(n){n.method="notebookDocument/didClose",n.messageDirection=nr.MessageDirection.clientToServer,n.type=new nr.ProtocolNotificationType(n.method),n.registrationMethod=ps.method})(PS=De.DidCloseNotebookDocumentNotification||(De.DidCloseNotebookDocumentNotification={}))});var Pv=D(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.WorkspaceSymbolRequest=v.CodeActionResolveRequest=v.CodeActionRequest=v.DocumentSymbolRequest=v.DocumentHighlightRequest=v.ReferencesRequest=v.DefinitionRequest=v.SignatureHelpRequest=v.SignatureHelpTriggerKind=v.HoverRequest=v.CompletionResolveRequest=v.CompletionRequest=v.CompletionTriggerKind=v.PublishDiagnosticsNotification=v.WatchKind=v.RelativePattern=v.FileChangeType=v.DidChangeWatchedFilesNotification=v.WillSaveTextDocumentWaitUntilRequest=v.WillSaveTextDocumentNotification=v.TextDocumentSaveReason=v.DidSaveTextDocumentNotification=v.DidCloseTextDocumentNotification=v.DidChangeTextDocumentNotification=v.TextDocumentContentChangeEvent=v.DidOpenTextDocumentNotification=v.TextDocumentSyncKind=v.TelemetryEventNotification=v.LogMessageNotification=v.ShowMessageRequest=v.ShowMessageNotification=v.MessageType=v.DidChangeConfigurationNotification=v.ExitNotification=v.ShutdownRequest=v.InitializedNotification=v.InitializeErrorCodes=v.InitializeRequest=v.WorkDoneProgressOptions=v.TextDocumentRegistrationOptions=v.StaticRegistrationOptions=v.PositionEncodingKind=v.FailureHandlingKind=v.ResourceOperationKind=v.UnregistrationRequest=v.RegistrationRequest=v.DocumentSelector=v.NotebookCellTextDocumentFilter=v.NotebookDocumentFilter=v.TextDocumentFilter=void 0;v.TypeHierarchySubtypesRequest=v.TypeHierarchyPrepareRequest=v.MonikerRequest=v.MonikerKind=v.UniquenessLevel=v.WillDeleteFilesRequest=v.DidDeleteFilesNotification=v.WillRenameFilesRequest=v.DidRenameFilesNotification=v.WillCreateFilesRequest=v.DidCreateFilesNotification=v.FileOperationPatternKind=v.LinkedEditingRangeRequest=v.ShowDocumentRequest=v.SemanticTokensRegistrationType=v.SemanticTokensRefreshRequest=v.SemanticTokensRangeRequest=v.SemanticTokensDeltaRequest=v.SemanticTokensRequest=v.TokenFormat=v.CallHierarchyPrepareRequest=v.CallHierarchyOutgoingCallsRequest=v.CallHierarchyIncomingCallsRequest=v.WorkDoneProgressCancelNotification=v.WorkDoneProgressCreateRequest=v.WorkDoneProgress=v.SelectionRangeRequest=v.DeclarationRequest=v.FoldingRangeRequest=v.ColorPresentationRequest=v.DocumentColorRequest=v.ConfigurationRequest=v.DidChangeWorkspaceFoldersNotification=v.WorkspaceFoldersRequest=v.TypeDefinitionRequest=v.ImplementationRequest=v.ApplyWorkspaceEditRequest=v.ExecuteCommandRequest=v.PrepareRenameRequest=v.RenameRequest=v.PrepareSupportDefaultBehavior=v.DocumentOnTypeFormattingRequest=v.DocumentRangeFormattingRequest=v.DocumentFormattingRequest=v.DocumentLinkResolveRequest=v.DocumentLinkRequest=v.CodeLensRefreshRequest=v.CodeLensResolveRequest=v.CodeLensRequest=v.WorkspaceSymbolResolveRequest=void 0;v.DidCloseNotebookDocumentNotification=v.DidSaveNotebookDocumentNotification=v.DidChangeNotebookDocumentNotification=v.NotebookCellArrayChange=v.DidOpenNotebookDocumentNotification=v.NotebookDocumentSyncRegistrationType=v.NotebookDocument=v.NotebookCell=v.ExecutionSummary=v.NotebookCellKind=v.DiagnosticRefreshRequest=v.WorkspaceDiagnosticRequest=v.DocumentDiagnosticRequest=v.DocumentDiagnosticReportKind=v.DiagnosticServerCancellationData=v.InlayHintRefreshRequest=v.InlayHintResolveRequest=v.InlayHintRequest=v.InlineValueRefreshRequest=v.InlineValueRequest=v.TypeHierarchySupertypesRequest=void 0;var A=Xe(),_v=(Ta(),ia(Sa)),qt=Pa(),qS=Wm();Object.defineProperty(v,"ImplementationRequest",{enumerable:!0,get:function(){return qS.ImplementationRequest}});var xS=zm();Object.defineProperty(v,"TypeDefinitionRequest",{enumerable:!0,get:function(){return xS.TypeDefinitionRequest}});var Cv=Km();Object.defineProperty(v,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Cv.WorkspaceFoldersRequest}});Object.defineProperty(v,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Cv.DidChangeWorkspaceFoldersNotification}});var kS=Gm();Object.defineProperty(v,"ConfigurationRequest",{enumerable:!0,get:function(){return kS.ConfigurationRequest}});var bv=Vm();Object.defineProperty(v,"DocumentColorRequest",{enumerable:!0,get:function(){return bv.DocumentColorRequest}});Object.defineProperty(v,"ColorPresentationRequest",{enumerable:!0,get:function(){return bv.ColorPresentationRequest}});var ES=Jm();Object.defineProperty(v,"FoldingRangeRequest",{enumerable:!0,get:function(){return ES.FoldingRangeRequest}});var OS=Ym();Object.defineProperty(v,"DeclarationRequest",{enumerable:!0,get:function(){return OS.DeclarationRequest}});var FS=ev();Object.defineProperty(v,"SelectionRangeRequest",{enumerable:!0,get:function(){return FS.SelectionRangeRequest}});var Wd=tv();Object.defineProperty(v,"WorkDoneProgress",{enumerable:!0,get:function(){return Wd.WorkDoneProgress}});Object.defineProperty(v,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Wd.WorkDoneProgressCreateRequest}});Object.defineProperty(v,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Wd.WorkDoneProgressCancelNotification}});var Ud=nv();Object.defineProperty(v,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ud.CallHierarchyIncomingCallsRequest}});Object.defineProperty(v,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ud.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(v,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ud.CallHierarchyPrepareRequest}});var no=rv();Object.defineProperty(v,"TokenFormat",{enumerable:!0,get:function(){return no.TokenFormat}});Object.defineProperty(v,"SemanticTokensRequest",{enumerable:!0,get:function(){return no.SemanticTokensRequest}});Object.defineProperty(v,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return no.SemanticTokensDeltaRequest}});Object.defineProperty(v,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return no.SemanticTokensRangeRequest}});Object.defineProperty(v,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return no.SemanticTokensRefreshRequest}});Object.defineProperty(v,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return no.SemanticTokensRegistrationType}});var NS=ov();Object.defineProperty(v,"ShowDocumentRequest",{enumerable:!0,get:function(){return NS.ShowDocumentRequest}});var IS=av();Object.defineProperty(v,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return IS.LinkedEditingRangeRequest}});var li=cv();Object.defineProperty(v,"FileOperationPatternKind",{enumerable:!0,get:function(){return li.FileOperationPatternKind}});Object.defineProperty(v,"DidCreateFilesNotification",{enumerable:!0,get:function(){return li.DidCreateFilesNotification}});Object.defineProperty(v,"WillCreateFilesRequest",{enumerable:!0,get:function(){return li.WillCreateFilesRequest}});Object.defineProperty(v,"DidRenameFilesNotification",{enumerable:!0,get:function(){return li.DidRenameFilesNotification}});Object.defineProperty(v,"WillRenameFilesRequest",{enumerable:!0,get:function(){return li.WillRenameFilesRequest}});Object.defineProperty(v,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return li.DidDeleteFilesNotification}});Object.defineProperty(v,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return li.WillDeleteFilesRequest}});var zd=lv();Object.defineProperty(v,"UniquenessLevel",{enumerable:!0,get:function(){return zd.UniquenessLevel}});Object.defineProperty(v,"MonikerKind",{enumerable:!0,get:function(){return zd.MonikerKind}});Object.defineProperty(v,"MonikerRequest",{enumerable:!0,get:function(){return zd.MonikerRequest}});var Kd=dv();Object.defineProperty(v,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Kd.TypeHierarchyPrepareRequest}});Object.defineProperty(v,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Kd.TypeHierarchySubtypesRequest}});Object.defineProperty(v,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Kd.TypeHierarchySupertypesRequest}});var wv=fv();Object.defineProperty(v,"InlineValueRequest",{enumerable:!0,get:function(){return wv.InlineValueRequest}});Object.defineProperty(v,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return wv.InlineValueRefreshRequest}});var Bd=hv();Object.defineProperty(v,"InlayHintRequest",{enumerable:!0,get:function(){return Bd.InlayHintRequest}});Object.defineProperty(v,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Bd.InlayHintResolveRequest}});Object.defineProperty(v,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Bd.InlayHintRefreshRequest}});var gs=gv();Object.defineProperty(v,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return gs.DiagnosticServerCancellationData}});Object.defineProperty(v,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return gs.DocumentDiagnosticReportKind}});Object.defineProperty(v,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return gs.DocumentDiagnosticRequest}});Object.defineProperty(v,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return gs.WorkspaceDiagnosticRequest}});Object.defineProperty(v,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return gs.DiagnosticRefreshRequest}});var rr=yv();Object.defineProperty(v,"NotebookCellKind",{enumerable:!0,get:function(){return rr.NotebookCellKind}});Object.defineProperty(v,"ExecutionSummary",{enumerable:!0,get:function(){return rr.ExecutionSummary}});Object.defineProperty(v,"NotebookCell",{enumerable:!0,get:function(){return rr.NotebookCell}});Object.defineProperty(v,"NotebookDocument",{enumerable:!0,get:function(){return rr.NotebookDocument}});Object.defineProperty(v,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return rr.NotebookDocumentSyncRegistrationType}});Object.defineProperty(v,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return rr.DidOpenNotebookDocumentNotification}});Object.defineProperty(v,"NotebookCellArrayChange",{enumerable:!0,get:function(){return rr.NotebookCellArrayChange}});Object.defineProperty(v,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return rr.DidChangeNotebookDocumentNotification}});Object.defineProperty(v,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return rr.DidSaveNotebookDocumentNotification}});Object.defineProperty(v,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return rr.DidCloseNotebookDocumentNotification}});var Dv;(function(n){function e(t){let r=t;return qt.string(r.language)||qt.string(r.scheme)||qt.string(r.pattern)}n.is=e})(Dv=v.TextDocumentFilter||(v.TextDocumentFilter={}));var Rv;(function(n){function e(t){let r=t;return qt.objectLiteral(r)&&(qt.string(r.notebookType)||qt.string(r.scheme)||qt.string(r.pattern))}n.is=e})(Rv=v.NotebookDocumentFilter||(v.NotebookDocumentFilter={}));var Sv;(function(n){function e(t){let r=t;return qt.objectLiteral(r)&&(qt.string(r.notebook)||Rv.is(r.notebook))&&(r.language===void 0||qt.string(r.language))}n.is=e})(Sv=v.NotebookCellTextDocumentFilter||(v.NotebookCellTextDocumentFilter={}));var Tv;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!qt.string(r)&&!Dv.is(r)&&!Sv.is(r))return!1;return!0}n.is=e})(Tv=v.DocumentSelector||(v.DocumentSelector={}));var MS;(function(n){n.method="client/registerCapability",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolRequestType(n.method)})(MS=v.RegistrationRequest||(v.RegistrationRequest={}));var jS;(function(n){n.method="client/unregisterCapability",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolRequestType(n.method)})(jS=v.UnregistrationRequest||(v.UnregistrationRequest={}));var AS;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(AS=v.ResourceOperationKind||(v.ResourceOperationKind={}));var LS;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(LS=v.FailureHandlingKind||(v.FailureHandlingKind={}));var HS;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(HS=v.PositionEncodingKind||(v.PositionEncodingKind={}));var $S;(function(n){function e(t){let r=t;return r&&qt.string(r.id)&&r.id.length>0}n.hasId=e})($S=v.StaticRegistrationOptions||(v.StaticRegistrationOptions={}));var WS;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||Tv.is(r.documentSelector))}n.is=e})(WS=v.TextDocumentRegistrationOptions||(v.TextDocumentRegistrationOptions={}));var US;(function(n){function e(r){let i=r;return qt.objectLiteral(i)&&(i.workDoneProgress===void 0||qt.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&qt.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(US=v.WorkDoneProgressOptions||(v.WorkDoneProgressOptions={}));var zS;(function(n){n.method="initialize",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(zS=v.InitializeRequest||(v.InitializeRequest={}));var KS;(function(n){n.unknownProtocolVersion=1})(KS=v.InitializeErrorCodes||(v.InitializeErrorCodes={}));var BS;(function(n){n.method="initialized",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(BS=v.InitializedNotification||(v.InitializedNotification={}));var GS;(function(n){n.method="shutdown",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType0(n.method)})(GS=v.ShutdownRequest||(v.ShutdownRequest={}));var VS;(function(n){n.method="exit",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType0(n.method)})(VS=v.ExitNotification||(v.ExitNotification={}));var XS;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(XS=v.DidChangeConfigurationNotification||(v.DidChangeConfigurationNotification={}));var JS;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4})(JS=v.MessageType||(v.MessageType={}));var QS;(function(n){n.method="window/showMessage",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolNotificationType(n.method)})(QS=v.ShowMessageNotification||(v.ShowMessageNotification={}));var YS;(function(n){n.method="window/showMessageRequest",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolRequestType(n.method)})(YS=v.ShowMessageRequest||(v.ShowMessageRequest={}));var ZS;(function(n){n.method="window/logMessage",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolNotificationType(n.method)})(ZS=v.LogMessageNotification||(v.LogMessageNotification={}));var eT;(function(n){n.method="telemetry/event",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolNotificationType(n.method)})(eT=v.TelemetryEventNotification||(v.TelemetryEventNotification={}));var tT;(function(n){n.None=0,n.Full=1,n.Incremental=2})(tT=v.TextDocumentSyncKind||(v.TextDocumentSyncKind={}));var nT;(function(n){n.method="textDocument/didOpen",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(nT=v.DidOpenTextDocumentNotification||(v.DidOpenTextDocumentNotification={}));var rT;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(rT=v.TextDocumentContentChangeEvent||(v.TextDocumentContentChangeEvent={}));var iT;(function(n){n.method="textDocument/didChange",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(iT=v.DidChangeTextDocumentNotification||(v.DidChangeTextDocumentNotification={}));var oT;(function(n){n.method="textDocument/didClose",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(oT=v.DidCloseTextDocumentNotification||(v.DidCloseTextDocumentNotification={}));var sT;(function(n){n.method="textDocument/didSave",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(sT=v.DidSaveTextDocumentNotification||(v.DidSaveTextDocumentNotification={}));var aT;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(aT=v.TextDocumentSaveReason||(v.TextDocumentSaveReason={}));var cT;(function(n){n.method="textDocument/willSave",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(cT=v.WillSaveTextDocumentNotification||(v.WillSaveTextDocumentNotification={}));var uT;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(uT=v.WillSaveTextDocumentWaitUntilRequest||(v.WillSaveTextDocumentWaitUntilRequest={}));var lT;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolNotificationType(n.method)})(lT=v.DidChangeWatchedFilesNotification||(v.DidChangeWatchedFilesNotification={}));var dT;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(dT=v.FileChangeType||(v.FileChangeType={}));var fT;(function(n){function e(t){let r=t;return qt.objectLiteral(r)&&(_v.URI.is(r.baseUri)||_v.WorkspaceFolder.is(r.baseUri))&&qt.string(r.pattern)}n.is=e})(fT=v.RelativePattern||(v.RelativePattern={}));var hT;(function(n){n.Create=1,n.Change=2,n.Delete=4})(hT=v.WatchKind||(v.WatchKind={}));var pT;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolNotificationType(n.method)})(pT=v.PublishDiagnosticsNotification||(v.PublishDiagnosticsNotification={}));var gT;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(gT=v.CompletionTriggerKind||(v.CompletionTriggerKind={}));var mT;(function(n){n.method="textDocument/completion",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(mT=v.CompletionRequest||(v.CompletionRequest={}));var vT;(function(n){n.method="completionItem/resolve",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(vT=v.CompletionResolveRequest||(v.CompletionResolveRequest={}));var yT;(function(n){n.method="textDocument/hover",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(yT=v.HoverRequest||(v.HoverRequest={}));var _T;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(_T=v.SignatureHelpTriggerKind||(v.SignatureHelpTriggerKind={}));var CT;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(CT=v.SignatureHelpRequest||(v.SignatureHelpRequest={}));var bT;(function(n){n.method="textDocument/definition",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(bT=v.DefinitionRequest||(v.DefinitionRequest={}));var wT;(function(n){n.method="textDocument/references",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(wT=v.ReferencesRequest||(v.ReferencesRequest={}));var DT;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(DT=v.DocumentHighlightRequest||(v.DocumentHighlightRequest={}));var RT;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(RT=v.DocumentSymbolRequest||(v.DocumentSymbolRequest={}));var ST;(function(n){n.method="textDocument/codeAction",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(ST=v.CodeActionRequest||(v.CodeActionRequest={}));var TT;(function(n){n.method="codeAction/resolve",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(TT=v.CodeActionResolveRequest||(v.CodeActionResolveRequest={}));var PT;(function(n){n.method="workspace/symbol",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(PT=v.WorkspaceSymbolRequest||(v.WorkspaceSymbolRequest={}));var qT;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(qT=v.WorkspaceSymbolResolveRequest||(v.WorkspaceSymbolResolveRequest={}));var xT;(function(n){n.method="textDocument/codeLens",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(xT=v.CodeLensRequest||(v.CodeLensRequest={}));var kT;(function(n){n.method="codeLens/resolve",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(kT=v.CodeLensResolveRequest||(v.CodeLensResolveRequest={}));var ET;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolRequestType0(n.method)})(ET=v.CodeLensRefreshRequest||(v.CodeLensRefreshRequest={}));var OT;(function(n){n.method="textDocument/documentLink",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(OT=v.DocumentLinkRequest||(v.DocumentLinkRequest={}));var FT;(function(n){n.method="documentLink/resolve",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(FT=v.DocumentLinkResolveRequest||(v.DocumentLinkResolveRequest={}));var NT;(function(n){n.method="textDocument/formatting",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(NT=v.DocumentFormattingRequest||(v.DocumentFormattingRequest={}));var IT;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(IT=v.DocumentRangeFormattingRequest||(v.DocumentRangeFormattingRequest={}));var MT;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(MT=v.DocumentOnTypeFormattingRequest||(v.DocumentOnTypeFormattingRequest={}));var jT;(function(n){n.Identifier=1})(jT=v.PrepareSupportDefaultBehavior||(v.PrepareSupportDefaultBehavior={}));var AT;(function(n){n.method="textDocument/rename",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(AT=v.RenameRequest||(v.RenameRequest={}));var LT;(function(n){n.method="textDocument/prepareRename",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(LT=v.PrepareRenameRequest||(v.PrepareRenameRequest={}));var HT;(function(n){n.method="workspace/executeCommand",n.messageDirection=A.MessageDirection.clientToServer,n.type=new A.ProtocolRequestType(n.method)})(HT=v.ExecuteCommandRequest||(v.ExecuteCommandRequest={}));var $T;(function(n){n.method="workspace/applyEdit",n.messageDirection=A.MessageDirection.serverToClient,n.type=new A.ProtocolRequestType("workspace/applyEdit")})($T=v.ApplyWorkspaceEditRequest||(v.ApplyWorkspaceEditRequest={}))});var xv=D(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.createProtocolConnection=void 0;var qv=ai();function WT(n,e,t,r){return qv.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,qv.createMessageConnection)(n,e,t,r)}Fa.createProtocolConnection=WT});var kv=D(Wt=>{"use strict";var UT=Wt&&Wt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Na=Wt&&Wt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&UT(e,n,t)};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.LSPErrorCodes=Wt.createProtocolConnection=void 0;Na(ai(),Wt);Na((Ta(),ia(Sa)),Wt);Na(Xe(),Wt);Na(Pv(),Wt);var zT=xv();Object.defineProperty(Wt,"createProtocolConnection",{enumerable:!0,get:function(){return zT.createProtocolConnection}});var KT;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(KT=Wt.LSPErrorCodes||(Wt.LSPErrorCodes={}))});var K=D(ir=>{"use strict";var BT=ir&&ir.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ev=ir&&ir.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&BT(e,n,t)};Object.defineProperty(ir,"__esModule",{value:!0});ir.createProtocolConnection=void 0;var GT=$l();Ev($l(),ir);Ev(kv(),ir);function VT(n,e,t,r){return(0,GT.createMessageConnection)(n,e,t,r)}ir.createProtocolConnection=VT});var Ov=D(lt=>{Object.defineProperty(lt,"__esModule",{value:!0});lt.ParseSFCRequest=lt.GetConvertAttrCasingEditsRequest=lt.GetConvertTagCasingEditsRequest=lt.DetectNameCasingRequest=lt.GetComponentMeta=lt.GetVueCompilerOptionsRequest=void 0;var ro=K(),XT;(function(n){n.type=new ro.RequestType("volar/vueCompilerOptions")})(XT=lt.GetVueCompilerOptionsRequest||(lt.GetVueCompilerOptionsRequest={}));var JT;(function(n){n.type=new ro.RequestType("volar/meta")})(JT=lt.GetComponentMeta||(lt.GetComponentMeta={}));var QT;(function(n){n.type=new ro.RequestType("volar/detectTagCasing")})(QT=lt.DetectNameCasingRequest||(lt.DetectNameCasingRequest={}));var YT;(function(n){n.type=new ro.RequestType("volar/convertTagNameCasing")})(YT=lt.GetConvertTagCasingEditsRequest||(lt.GetConvertTagCasingEditsRequest={}));var ZT;(function(n){n.type=new ro.RequestType("volar/convertAttrNameCasing")})(ZT=lt.GetConvertAttrCasingEditsRequest||(lt.GetConvertAttrCasingEditsRequest={}));var eP;(function(n){n.type=new ro.RequestType("volar/parseSfc")})(eP=lt.ParseSFCRequest||(lt.ParseSFCRequest={}))});var Nv=D(Fv=>{Object.defineProperty(Fv,"__esModule",{value:!0})});var Gd=D(he=>{Object.defineProperty(he,"__esModule",{value:!0});he.ReportStats=he.GetVirtualFileRequest=he.GetVirtualFileNamesRequest=he.ReloadProjectNotification=he.WriteVirtualFilesNotification=he.AutoInsertRequest=he.GetMatchTsConfigRequest=he.FindFileReferenceRequest=he.FsReadDirectoryRequest=he.FsReadFileRequest=he.FsStatRequest=he.ShowReferencesNotification=void 0;var bn=K(),tP;(function(n){n.type=new bn.NotificationType("volar/server/showReferences")})(tP=he.ShowReferencesNotification||(he.ShowReferencesNotification={}));var nP;(function(n){n.type=new bn.RequestType("volar/server/fs/stat")})(nP=he.FsStatRequest||(he.FsStatRequest={}));var rP;(function(n){n.type=new bn.RequestType("volar/server/fs/readFile")})(rP=he.FsReadFileRequest||(he.FsReadFileRequest={}));var iP;(function(n){n.type=new bn.RequestType("volar/server/fs/readDirectory")})(iP=he.FsReadDirectoryRequest||(he.FsReadDirectoryRequest={}));var oP;(function(n){n.type=new bn.RequestType("volar/client/findFileReference")})(oP=he.FindFileReferenceRequest||(he.FindFileReferenceRequest={}));var sP;(function(n){n.type=new bn.RequestType("volar/client/tsconfig")})(sP=he.GetMatchTsConfigRequest||(he.GetMatchTsConfigRequest={}));var aP;(function(n){n.type=new bn.RequestType("volar/client/autoInsert")})(aP=he.AutoInsertRequest||(he.AutoInsertRequest={}));var cP;(function(n){n.type=new bn.NotificationType("volar/client/writeVirtualFiles")})(cP=he.WriteVirtualFilesNotification||(he.WriteVirtualFilesNotification={}));var uP;(function(n){n.type=new bn.NotificationType("volar/client/reloadProject")})(uP=he.ReloadProjectNotification||(he.ReloadProjectNotification={}));var lP;(function(n){n.type=new bn.RequestType("volar/client/virtualFileNames")})(lP=he.GetVirtualFileNamesRequest||(he.GetVirtualFileNamesRequest={}));var dP;(function(n){n.type=new bn.RequestType("volar/client/virtualFile")})(dP=he.GetVirtualFileRequest||(he.GetVirtualFileRequest={}));var fP;(function(n){n.type=new bn.NotificationType0("volar/client/stats")})(fP=he.ReportStats||(he.ReportStats={}))});var Vd=D(Lr=>{Object.defineProperty(Lr,"__esModule",{value:!0});Lr.DiagnosticModel=Lr.ServerMode=void 0;var hP;(function(n){n[n.Semantic=0]="Semantic",n[n.Syntactic=2]="Syntactic"})(hP=Lr.ServerMode||(Lr.ServerMode={}));var pP;(function(n){n[n.None=0]="None",n[n.Push=1]="Push",n[n.Pull=2]="Pull"})(pP=Lr.DiagnosticModel||(Lr.DiagnosticModel={}))});var Xd=D(di=>{var gP=di&&di.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),mP=di&&di.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gP(e,n,t)};Object.defineProperty(di,"__esModule",{value:!0});mP(K(),di)});var Mv=D(Iv=>{Object.defineProperty(Iv,"__esModule",{value:!0})});var Av=D(Yt=>{var vP=Yt&&Yt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),jv=Yt&&Yt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&vP(e,n,t)};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.AttrNameCasing=Yt.TagNameCasing=void 0;var yP;(function(n){n[n.Kebab=0]="Kebab",n[n.Pascal=1]="Pascal"})(yP=Yt.TagNameCasing||(Yt.TagNameCasing={}));var _P;(function(n){n[n.Kebab=0]="Kebab",n[n.Camel=1]="Camel"})(_P=Yt.AttrNameCasing||(Yt.AttrNameCasing={}));jv(Xd(),Yt);jv(Mv(),Yt)});var Hr=D(Wn=>{var CP=Wn&&Wn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ms=Wn&&Wn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&CP(e,n,t)};Object.defineProperty(Wn,"__esModule",{value:!0});ms(Ov(),Wn);ms(Nv(),Wn);ms(Gd(),Wn);ms(Vd(),Wn);ms(Av(),Wn)});var wn=D(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.asPromise=nt.thenable=nt.typedArray=nt.stringArray=nt.array=nt.func=nt.error=nt.number=nt.string=nt.boolean=void 0;function bP(n){return n===!0||n===!1}nt.boolean=bP;function Lv(n){return typeof n=="string"||n instanceof String}nt.string=Lv;function wP(n){return typeof n=="number"||n instanceof Number}nt.number=wP;function DP(n){return n instanceof Error}nt.error=DP;function Hv(n){return typeof n=="function"}nt.func=Hv;function $v(n){return Array.isArray(n)}nt.array=$v;function RP(n){return $v(n)&&n.every(e=>Lv(e))}nt.stringArray=RP;function SP(n,e){return Array.isArray(n)&&n.every(e)}nt.typedArray=SP;function Wv(n){return n&&Hv(n.then)}nt.thenable=Wv;function TP(n){return n instanceof Promise?n:Wv(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}nt.asPromise=TP});var Ia=D(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.forEach=Ot.mapAsync=Ot.map=Ot.clearTestMode=Ot.setTestMode=Ot.Semaphore=Ot.Delayer=void 0;var ys=K(),Jd=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,ys.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Ot.Delayer=Jd;var Qd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,ys.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Ot.Semaphore=Qd;var Yd=!1;function PP(){Yd=!0}Ot.setTestMode=PP;function qP(){Yd=!1}Ot.clearTestMode=qP;var Uv=15,vs=class{constructor(e=Uv){this.yieldAfter=Yd===!0?Math.max(e,2):Math.max(e,Uv),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function xP(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new vs(r?.yieldAfter);function s(c){o.start();for(let u=c;u<n.length;u++)if(i[u]=e(n[u]),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,ys.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}Ot.map=xP;async function kP(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new vs(r?.yieldAfter);async function s(c){o.start();for(let u=c;u<n.length;u++)if(i[u]=await e(n[u],t),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let a=await s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,ys.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}Ot.mapAsync=kP;async function EP(n,e,t,r){if(n.length===0)return;let i=new vs(r?.yieldAfter);function o(a){i.start();for(let c=a;c<n.length;c++)if(e(n[c]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),c+1;return-1}let s=o(0);for(;s!==-1&&!(t!==void 0&&t.isCancellationRequested);)s=await new Promise(a=>{(0,ys.RAL)().timer.setImmediate(()=>{a(o(s))})})}Ot.forEach=EP});var tf=D(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var OP=require("vscode"),Zd=class extends OP.CompletionItem{constructor(e){super(e)}};ef.default=Zd});var of=D(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});var FP=require("vscode"),nf=class extends FP.CodeLens{constructor(e){super(e)}};rf.default=nf});var cf=D(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var NP=require("vscode"),sf=class extends NP.DocumentLink{constructor(e,t){super(e,t)}};af.default=sf});var df=D(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var IP=require("vscode"),uf=class extends IP.CodeAction{constructor(e,t){super(e),this.data=t}};lf.default=uf});var pf=D(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.ProtocolDiagnostic=fi.DiagnosticCode=void 0;var MP=require("vscode"),ff=wn(),jP;(function(n){function e(t){let r=t;return r!=null&&(ff.number(r.value)||ff.string(r.value))&&ff.string(r.target)}n.is=e})(jP=fi.DiagnosticCode||(fi.DiagnosticCode={}));var hf=class extends MP.Diagnostic{constructor(e,t,r,i){super(e,t,r),this.data=i,this.hasDiagnosticCode=!1}};fi.ProtocolDiagnostic=hf});var vf=D(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var AP=require("vscode"),gf=class extends AP.CallHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};mf.default=gf});var Cf=D(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var LP=require("vscode"),yf=class extends LP.TypeHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};_f.default=yf});var Df=D(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Ma=require("vscode"),bf=class extends Ma.SymbolInformation{constructor(e,t,r,i,o){let s=!(i instanceof Ma.Uri);super(e,t,r,s?i:new Ma.Location(i,new Ma.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}};wf.default=bf});var Tf=D(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var HP=require("vscode"),Rf=class extends HP.InlayHint{constructor(e,t,r){super(e,t,r)}};Sf.default=Rf});var Bv=D(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.createConverter=void 0;var dt=require("vscode"),ae=K(),io=wn(),zv=Ia(),$P=tf(),WP=of(),UP=cf(),zP=df(),Kv=pf(),KP=vf(),BP=Cf(),GP=Df(),VP=Tf(),Pf;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(Pf||(Pf={}));function XP(n){let t=n||(m=>m.toString());function r(m){return t(m)}function i(m){return{uri:t(m.uri)}}function o(m){return{uri:t(m.uri),languageId:m.languageId,version:m.version,text:m.getText()}}function s(m){return{uri:t(m.uri),version:m.version}}function a(m){return{textDocument:o(m)}}function c(m){let q=m;return!!q.document&&!!q.contentChanges}function u(m){let q=m;return!!q.uri&&!!q.version}function l(m,q,H){if(u(m))return{textDocument:{uri:t(m.uri),version:m.version},contentChanges:[{text:m.getText()}]};if(c(m)){let de=q,xe=H;return{textDocument:{uri:t(de),version:xe},contentChanges:m.contentChanges.map(cn=>{let Zn=cn.range;return{range:{start:{line:Zn.start.line,character:Zn.start.character},end:{line:Zn.end.line,character:Zn.end.character}},rangeLength:cn.rangeLength,text:cn.text}})}}else throw Error("Unsupported text document change parameter")}function f(m){return{textDocument:i(m)}}function h(m,q=!1){let H={textDocument:i(m)};return q&&(H.text=m.getText()),H}function p(m){switch(m){case dt.TextDocumentSaveReason.Manual:return ae.TextDocumentSaveReason.Manual;case dt.TextDocumentSaveReason.AfterDelay:return ae.TextDocumentSaveReason.AfterDelay;case dt.TextDocumentSaveReason.FocusOut:return ae.TextDocumentSaveReason.FocusOut}return ae.TextDocumentSaveReason.Manual}function g(m){return{textDocument:i(m.document),reason:p(m.reason)}}function C(m){return{files:m.files.map(q=>({uri:t(q)}))}}function b(m){return{files:m.files.map(q=>({oldUri:t(q.oldUri),newUri:t(q.newUri)}))}}function R(m){return{files:m.files.map(q=>({uri:t(q)}))}}function y(m){return{files:m.files.map(q=>({uri:t(q)}))}}function _(m){return{files:m.files.map(q=>({oldUri:t(q.oldUri),newUri:t(q.newUri)}))}}function T(m){return{files:m.files.map(q=>({uri:t(q)}))}}function N(m,q){return{textDocument:i(m),position:pt(q)}}function V(m){switch(m){case dt.CompletionTriggerKind.TriggerCharacter:return ae.CompletionTriggerKind.TriggerCharacter;case dt.CompletionTriggerKind.TriggerForIncompleteCompletions:return ae.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ae.CompletionTriggerKind.Invoked}}function U(m,q,H){return{textDocument:i(m),position:pt(q),context:{triggerKind:V(H.triggerKind),triggerCharacter:H.triggerCharacter}}}function re(m){switch(m){case dt.SignatureHelpTriggerKind.Invoke:return ae.SignatureHelpTriggerKind.Invoked;case dt.SignatureHelpTriggerKind.TriggerCharacter:return ae.SignatureHelpTriggerKind.TriggerCharacter;case dt.SignatureHelpTriggerKind.ContentChange:return ae.SignatureHelpTriggerKind.ContentChange}}function ee(m){return{label:m.label}}function Ne(m){return m.map(ee)}function ge(m){return{label:m.label,parameters:Ne(m.parameters)}}function st(m){return m.map(ge)}function On(m){return m===void 0?m:{signatures:st(m.signatures),activeSignature:m.activeSignature,activeParameter:m.activeParameter}}function yt(m,q,H){return{textDocument:i(m),position:pt(q),context:{isRetrigger:H.isRetrigger,triggerCharacter:H.triggerCharacter,triggerKind:re(H.triggerKind),activeSignatureHelp:On(H.activeSignatureHelp)}}}function pt(m){return{line:m.line,character:m.character}}function I(m){return m==null?m:{line:m.line>ae.uinteger.MAX_VALUE?ae.uinteger.MAX_VALUE:m.line,character:m.character>ae.uinteger.MAX_VALUE?ae.uinteger.MAX_VALUE:m.character}}function x(m,q){return zv.map(m,I,q)}function F(m){return m==null?m:{start:I(m.start),end:I(m.end)}}function j(m){return m==null?m:ae.Location.create(r(m.uri),F(m.range))}function Z(m){switch(m){case dt.DiagnosticSeverity.Error:return ae.DiagnosticSeverity.Error;case dt.DiagnosticSeverity.Warning:return ae.DiagnosticSeverity.Warning;case dt.DiagnosticSeverity.Information:return ae.DiagnosticSeverity.Information;case dt.DiagnosticSeverity.Hint:return ae.DiagnosticSeverity.Hint}}function se(m){if(!m)return;let q=[];for(let H of m){let de=J(H);de!==void 0&&q.push(de)}return q.length>0?q:void 0}function J(m){switch(m){case dt.DiagnosticTag.Unnecessary:return ae.DiagnosticTag.Unnecessary;case dt.DiagnosticTag.Deprecated:return ae.DiagnosticTag.Deprecated;default:return}}function kt(m){return{message:m.message,location:j(m.location)}}function gt(m){return m.map(kt)}function wt(m){if(m!=null)return io.number(m)||io.string(m)?m:{value:m.value,target:r(m.target)}}function vn(m){let q=ae.Diagnostic.create(F(m.range),m.message),H=m instanceof Kv.ProtocolDiagnostic?m:void 0;H!==void 0&&H.data!==void 0&&(q.data=H.data);let de=wt(m.code);return Kv.DiagnosticCode.is(de)?H!==void 0&&H.hasDiagnosticCode?q.code=de:(q.code=de.value,q.codeDescription={href:de.target}):q.code=de,io.number(m.severity)&&(q.severity=Z(m.severity)),Array.isArray(m.tags)&&(q.tags=se(m.tags)),m.relatedInformation&&(q.relatedInformation=gt(m.relatedInformation)),m.source&&(q.source=m.source),q}function Jt(m,q){return m==null?m:zv.map(m,vn,q)}function Uo(m,q){switch(m){case"$string":return q;case ae.MarkupKind.PlainText:return{kind:m,value:q};case ae.MarkupKind.Markdown:return{kind:m,value:q.value};default:return`Unsupported Markup content received. Kind is: ${m}`}}function Ni(m){switch(m){case dt.CompletionItemTag.Deprecated:return ae.CompletionItemTag.Deprecated}}function Ii(m){if(m===void 0)return m;let q=[];for(let H of m){let de=Ni(H);de!==void 0&&q.push(de)}return q}function zo(m,q){return q!==void 0?q:m+1}function Dt(m,q=!1){let H,de;io.string(m.label)?H=m.label:(H=m.label.label,q&&(m.label.detail!==void 0||m.label.description!==void 0)&&(de={detail:m.label.detail,description:m.label.description}));let xe={label:H};de!==void 0&&(xe.labelDetails=de);let _t=m instanceof $P.default?m:void 0;m.detail&&(xe.detail=m.detail),m.documentation&&(!_t||_t.documentationFormat==="$string"?xe.documentation=m.documentation:xe.documentation=Uo(_t.documentationFormat,m.documentation)),m.filterText&&(xe.filterText=m.filterText),Mi(xe,m),io.number(m.kind)&&(xe.kind=zo(m.kind,_t&&_t.originalItemKind)),m.sortText&&(xe.sortText=m.sortText),m.additionalTextEdits&&(xe.additionalTextEdits=ji(m.additionalTextEdits)),m.commitCharacters&&(xe.commitCharacters=m.commitCharacters.slice()),m.command&&(xe.command=yn(m.command)),(m.preselect===!0||m.preselect===!1)&&(xe.preselect=m.preselect);let cn=Ii(m.tags);if(_t){if(_t.data!==void 0&&(xe.data=_t.data),_t.deprecated===!0||_t.deprecated===!1){if(_t.deprecated===!0&&cn!==void 0&&cn.length>0){let Zn=cn.indexOf(dt.CompletionItemTag.Deprecated);Zn!==-1&&cn.splice(Zn,1)}xe.deprecated=_t.deprecated}_t.insertTextMode!==void 0&&(xe.insertTextMode=_t.insertTextMode)}return cn!==void 0&&cn.length>0&&(xe.tags=cn),xe.insertTextMode===void 0&&m.keepWhitespace===!0&&(xe.insertTextMode=ae.InsertTextMode.adjustIndentation),xe}function Mi(m,q){let H=ae.InsertTextFormat.PlainText,de,xe;q.textEdit?(de=q.textEdit.newText,xe=q.textEdit.range):q.insertText instanceof dt.SnippetString?(H=ae.InsertTextFormat.Snippet,de=q.insertText.value):de=q.insertText,q.range&&(xe=q.range),m.insertTextFormat=H,q.fromEdit&&de!==void 0&&xe!==void 0?m.textEdit=Fr(de,xe):m.insertText=de}function Fr(m,q){return Pf.is(q)?ae.InsertReplaceEdit.create(m,F(q.inserting),F(q.replacing)):{newText:m,range:F(q)}}function Yn(m){return{range:F(m.range),newText:m.newText}}function ji(m){return m==null?m:m.map(Yn)}function sn(m){return m<=dt.SymbolKind.TypeParameter?m+1:ae.SymbolKind.Property}function Zr(m){return m}function mt(m){return m.map(Zr)}function dr(m,q,H){return{textDocument:i(m),position:pt(q),context:{includeDeclaration:H.includeDeclaration}}}async function an(m,q){let H=ae.CodeAction.create(m.title);if(m instanceof zP.default&&m.data!==void 0&&(H.data=m.data),m.kind!==void 0&&(H.kind=ti(m.kind)),m.diagnostics!==void 0&&(H.diagnostics=await Jt(m.diagnostics,q)),m.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return m.command!==void 0&&(H.command=yn(m.command)),m.isPreferred!==void 0&&(H.isPreferred=m.isPreferred),m.disabled!==void 0&&(H.disabled={reason:m.disabled.reason}),H}async function ei(m,q){if(m==null)return m;let H;return m.only&&io.string(m.only.value)&&(H=[m.only.value]),ae.CodeActionContext.create(await Jt(m.diagnostics,q),H,fr(m.triggerKind))}function fr(m){switch(m){case dt.CodeActionTriggerKind.Invoke:return ae.CodeActionTriggerKind.Invoked;case dt.CodeActionTriggerKind.Automatic:return ae.CodeActionTriggerKind.Automatic;default:return}}function ti(m){if(m!=null)return m.value}function Ai(m){return m==null?m:ae.InlineValueContext.create(m.frameId,F(m.stoppedLocation))}function yn(m){let q=ae.Command.create(m.title,m.command);return m.arguments&&(q.arguments=m.arguments),q}function Li(m){let q=ae.CodeLens.create(F(m.range));return m.command&&(q.command=yn(m.command)),m instanceof WP.default&&m.data&&(q.data=m.data),q}function Fn(m,q){let H={tabSize:m.tabSize,insertSpaces:m.insertSpaces};return q.trimTrailingWhitespace&&(H.trimTrailingWhitespace=!0),q.trimFinalNewlines&&(H.trimFinalNewlines=!0),q.insertFinalNewline&&(H.insertFinalNewline=!0),H}function w(m){return{textDocument:i(m)}}function E(m){return{textDocument:i(m)}}function L(m){let q=ae.DocumentLink.create(F(m.range));m.target&&(q.target=r(m.target)),m.tooltip!==void 0&&(q.tooltip=m.tooltip);let H=m instanceof UP.default?m:void 0;return H&&H.data&&(q.data=H.data),q}function z(m){return{textDocument:i(m)}}function qe(m){let q={name:m.name,kind:sn(m.kind),uri:r(m.uri),range:F(m.range),selectionRange:F(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(q.detail=m.detail),m.tags!==void 0&&(q.tags=mt(m.tags)),m instanceof KP.default&&m.data!==void 0&&(q.data=m.data),q}function Se(m){let q={name:m.name,kind:sn(m.kind),uri:r(m.uri),range:F(m.range),selectionRange:F(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(q.detail=m.detail),m.tags!==void 0&&(q.tags=mt(m.tags)),m instanceof BP.default&&m.data!==void 0&&(q.data=m.data),q}function Ie(m){let q=m instanceof GP.default?{name:m.name,kind:sn(m.kind),location:m.hasRange?j(m.location):{uri:t(m.location.uri)},data:m.data}:{name:m.name,kind:sn(m.kind),location:j(m.location)};return m.tags!==void 0&&(q.tags=mt(m.tags)),m.containerName!==""&&(q.containerName=m.containerName),q}function We(m){let q=typeof m.label=="string"?m.label:m.label.map(fe),H=ae.InlayHint.create(I(m.position),q);return m.kind!==void 0&&(H.kind=m.kind),m.textEdits!==void 0&&(H.textEdits=ji(m.textEdits)),m.tooltip!==void 0&&(H.tooltip=Ee(m.tooltip)),m.paddingLeft!==void 0&&(H.paddingLeft=m.paddingLeft),m.paddingRight!==void 0&&(H.paddingRight=m.paddingRight),m instanceof VP.default&&m.data!==void 0&&(H.data=m.data),H}function fe(m){let q=ae.InlayHintLabelPart.create(m.value);return m.location!==void 0&&(q.location=j(m.location)),m.command!==void 0&&(q.command=yn(m.command)),m.tooltip!==void 0&&(q.tooltip=Ee(m.tooltip)),q}function Ee(m){return typeof m=="string"?m:{kind:ae.MarkupKind.Markdown,value:m.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:l,asCloseTextDocumentParams:f,asSaveTextDocumentParams:h,asWillSaveTextDocumentParams:g,asDidCreateFilesParams:C,asDidRenameFilesParams:b,asDidDeleteFilesParams:R,asWillCreateFilesParams:y,asWillRenameFilesParams:_,asWillDeleteFilesParams:T,asTextDocumentPositionParams:N,asCompletionParams:U,asSignatureHelpParams:yt,asWorkerPosition:pt,asRange:F,asPosition:I,asPositions:x,asLocation:j,asDiagnosticSeverity:Z,asDiagnosticTag:J,asDiagnostic:vn,asDiagnostics:Jt,asCompletionItem:Dt,asTextEdit:Yn,asSymbolKind:sn,asSymbolTag:Zr,asSymbolTags:mt,asReferenceParams:dr,asCodeAction:an,asCodeActionContext:ei,asInlineValueContext:Ai,asCommand:yn,asCodeLens:Li,asFormattingOptions:Fn,asDocumentSymbolParams:w,asCodeLensParams:E,asDocumentLink:L,asDocumentLinkParams:z,asCallHierarchyItem:qe,asTypeHierarchyItem:Se,asInlayHint:We,asWorkspaceSymbol:Ie}}ja.createConverter=XP});var Xv=D(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.createConverter=void 0;var W=require("vscode"),ne=K(),Dn=wn(),Te=Ia(),JP=tf(),QP=of(),YP=cf(),ZP=df(),Gv=pf(),eq=vf(),tq=Cf(),nq=Df(),rq=Tf(),Vv=K(),Aa;(function(n){function e(t){let r=t;return r&&Dn.string(r.language)&&Dn.string(r.value)}n.is=e})(Aa||(Aa={}));function iq(n,e,t){let i=n||(d=>W.Uri.parse(d));function o(d){return i(d)}function s(d){let S=[];for(let O of d)if(typeof O=="string")S.push(O);else if(Vv.NotebookCellTextDocumentFilter.is(O))if(typeof O.notebook=="string")S.push({notebookType:O.notebook,language:O.language});else{let Y=O.notebook.notebookType??"*";S.push({notebookType:Y,scheme:O.notebook.scheme,pattern:O.notebook.pattern,language:O.language})}else Vv.TextDocumentFilter.is(O)&&S.push({language:O.language,scheme:O.scheme,pattern:O.pattern});return S}async function a(d,S){return Te.map(d,u,S)}function c(d){let S=new Array(d.length);for(let O=0;O<d.length;O++)S[O]=u(d[O]);return S}function u(d){let S=new Gv.ProtocolDiagnostic(g(d.range),d.message,b(d.severity),d.data);if(d.code!==void 0){if(typeof d.code=="string"||typeof d.code=="number")ne.CodeDescription.is(d.codeDescription)?S.code={value:d.code,target:o(d.codeDescription.href)}:S.code=d.code;else if(Gv.DiagnosticCode.is(d.code)){S.hasDiagnosticCode=!0;let O=d.code;S.code={value:O.value,target:o(O.target)}}}return d.source&&(S.source=d.source),d.relatedInformation&&(S.relatedInformation=l(d.relatedInformation)),Array.isArray(d.tags)&&(S.tags=f(d.tags)),S}function l(d){let S=new Array(d.length);for(let O=0;O<d.length;O++){let Y=d[O];S[O]=new W.DiagnosticRelatedInformation(J(Y.location),Y.message)}return S}function f(d){if(!d)return;let S=[];for(let O of d){let Y=h(O);Y!==void 0&&S.push(Y)}return S.length>0?S:void 0}function h(d){switch(d){case ne.DiagnosticTag.Unnecessary:return W.DiagnosticTag.Unnecessary;case ne.DiagnosticTag.Deprecated:return W.DiagnosticTag.Deprecated;default:return}}function p(d){return d?new W.Position(d.line,d.character):void 0}function g(d){return d?new W.Range(d.start.line,d.start.character,d.end.line,d.end.character):void 0}async function C(d,S){return Te.map(d,O=>new W.Range(O.start.line,O.start.character,O.end.line,O.end.character),S)}function b(d){if(d==null)return W.DiagnosticSeverity.Error;switch(d){case ne.DiagnosticSeverity.Error:return W.DiagnosticSeverity.Error;case ne.DiagnosticSeverity.Warning:return W.DiagnosticSeverity.Warning;case ne.DiagnosticSeverity.Information:return W.DiagnosticSeverity.Information;case ne.DiagnosticSeverity.Hint:return W.DiagnosticSeverity.Hint}return W.DiagnosticSeverity.Error}function R(d){if(Dn.string(d))return _(d);if(Aa.is(d))return _().appendCodeblock(d.value,d.language);if(Array.isArray(d)){let S=[];for(let O of d){let Y=_();Aa.is(O)?Y.appendCodeblock(O.value,O.language):Y.appendMarkdown(O),S.push(Y)}return S}else return _(d)}function y(d){if(Dn.string(d))return d;switch(d.kind){case ne.MarkupKind.Markdown:return _(d.value);case ne.MarkupKind.PlainText:return d.value;default:return`Unsupported Markup content received. Kind is: ${d.kind}`}}function _(d){let S;if(d===void 0||typeof d=="string")S=new W.MarkdownString(d);else switch(d.kind){case ne.MarkupKind.Markdown:S=new W.MarkdownString(d.value);break;case ne.MarkupKind.PlainText:S=new W.MarkdownString,S.appendText(d.value);break;default:S=new W.MarkdownString,S.appendText(`Unsupported Markup content received. Kind is: ${d.kind}`);break}return S.isTrusted=e,S.supportHtml=t,S}function T(d){if(!!d)return new W.Hover(R(d.contents),g(d.range))}async function N(d,S,O){if(!d)return;if(Array.isArray(d))return Te.map(d,er=>Ne(er,S),O);let Y=d,{defaultRange:Qt,commitCharacters:Rt}=V(Y,S),Oe=await Te.map(Y.items,er=>Ne(er,Rt,Qt,Y.itemDefaults?.insertTextMode,Y.itemDefaults?.insertTextFormat,Y.itemDefaults?.data),O);return new W.CompletionList(Oe,Y.isIncomplete)}function V(d,S){let O=d.itemDefaults?.editRange,Y=d.itemDefaults?.commitCharacters??S;return ne.Range.is(O)?{defaultRange:g(O),commitCharacters:Y}:O!==void 0?{defaultRange:{inserting:g(O.insert),replacing:g(O.replace)},commitCharacters:Y}:{defaultRange:void 0,commitCharacters:Y}}function U(d){return ne.CompletionItemKind.Text<=d&&d<=ne.CompletionItemKind.TypeParameter?[d-1,void 0]:[W.CompletionItemKind.Text,d]}function re(d){switch(d){case ne.CompletionItemTag.Deprecated:return W.CompletionItemTag.Deprecated}}function ee(d){if(d==null)return[];let S=[];for(let O of d){let Y=re(O);Y!==void 0&&S.push(Y)}return S}function Ne(d,S,O,Y,Qt,Rt){let Oe=ee(d.tags),er=ge(d),Me=new JP.default(er);d.detail&&(Me.detail=d.detail),d.documentation&&(Me.documentation=y(d.documentation),Me.documentationFormat=Dn.string(d.documentation)?"$string":d.documentation.kind),d.filterText&&(Me.filterText=d.filterText);let ra=st(d,O,Qt);if(ra&&(Me.insertText=ra.text,Me.range=ra.range,Me.fromEdit=ra.fromEdit),Dn.number(d.kind)){let[SD,am]=U(d.kind);Me.kind=SD,am&&(Me.originalItemKind=am)}d.sortText&&(Me.sortText=d.sortText),d.additionalTextEdits&&(Me.additionalTextEdits=I(d.additionalTextEdits));let om=d.commitCharacters!==void 0?Dn.stringArray(d.commitCharacters)?d.commitCharacters:void 0:S;om&&(Me.commitCharacters=om.slice()),d.command&&(Me.command=mt(d.command)),(d.deprecated===!0||d.deprecated===!1)&&(Me.deprecated=d.deprecated,d.deprecated===!0&&Oe.push(W.CompletionItemTag.Deprecated)),(d.preselect===!0||d.preselect===!1)&&(Me.preselect=d.preselect);let sm=d.data??Rt;sm!==void 0&&(Me.data=sm),Oe.length>0&&(Me.tags=Oe);let qu=d.insertTextMode??Y;return qu!==void 0&&(Me.insertTextMode=qu,qu===ne.InsertTextMode.asIs&&(Me.keepWhitespace=!0)),Me}function ge(d){return ne.CompletionItemLabelDetails.is(d.labelDetails)?{label:d.label,detail:d.labelDetails.detail,description:d.labelDetails.description}:d.label}function st(d,S,O){let Y=d.insertTextFormat??O;if(d.textEdit!==void 0||S!==void 0){let[Qt,Rt]=d.textEdit!==void 0?On(d.textEdit):[S,d.textEditText??d.label];return Y===ne.InsertTextFormat.Snippet?{text:new W.SnippetString(Rt),range:Qt,fromEdit:!0}:{text:Rt,range:Qt,fromEdit:!0}}else return d.insertText?Y===ne.InsertTextFormat.Snippet?{text:new W.SnippetString(d.insertText),fromEdit:!1}:{text:d.insertText,fromEdit:!1}:void 0}function On(d){return ne.InsertReplaceEdit.is(d)?[{inserting:g(d.insert),replacing:g(d.replace)},d.newText]:[g(d.range),d.newText]}function yt(d){if(!!d)return new W.TextEdit(g(d.range),d.newText)}async function pt(d,S){if(!!d)return Te.map(d,yt,S)}function I(d){if(!d)return;let S=new Array(d.length);for(let O=0;O<d.length;O++)S[O]=yt(d[O]);return S}async function x(d,S){if(!d)return;let O=new W.SignatureHelp;return Dn.number(d.activeSignature)?O.activeSignature=d.activeSignature:O.activeSignature=0,Dn.number(d.activeParameter)?O.activeParameter=d.activeParameter:O.activeParameter=0,d.signatures&&(O.signatures=await F(d.signatures,S)),O}async function F(d,S){return Te.mapAsync(d,j,S)}async function j(d,S){let O=new W.SignatureInformation(d.label);return d.documentation!==void 0&&(O.documentation=y(d.documentation)),d.parameters!==void 0&&(O.parameters=await Z(d.parameters,S)),d.activeParameter!==void 0&&(O.activeParameter=d.activeParameter),O}function Z(d,S){return Te.map(d,se,S)}function se(d){let S=new W.ParameterInformation(d.label);return d.documentation&&(S.documentation=y(d.documentation)),S}function J(d){return d?new W.Location(i(d.uri),g(d.range)):void 0}async function kt(d,S){if(!!d)return vn(d,S)}async function gt(d,S){if(!!d)return vn(d,S)}function wt(d){if(!d)return;let S={targetUri:i(d.targetUri),targetRange:g(d.targetRange),originSelectionRange:g(d.originSelectionRange),targetSelectionRange:g(d.targetSelectionRange)};if(!S.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return S}async function vn(d,S){if(!!d)if(Dn.array(d)){if(d.length===0)return[];if(ne.LocationLink.is(d[0])){let O=d;return Te.map(O,wt,S)}else{let O=d;return Te.map(O,J,S)}}else return ne.LocationLink.is(d)?[wt(d)]:J(d)}async function Jt(d,S){if(!!d)return Te.map(d,J,S)}async function Uo(d,S){if(!!d)return Te.map(d,Ni,S)}function Ni(d){let S=new W.DocumentHighlight(g(d.range));return Dn.number(d.kind)&&(S.kind=Ii(d.kind)),S}function Ii(d){switch(d){case ne.DocumentHighlightKind.Text:return W.DocumentHighlightKind.Text;case ne.DocumentHighlightKind.Read:return W.DocumentHighlightKind.Read;case ne.DocumentHighlightKind.Write:return W.DocumentHighlightKind.Write}return W.DocumentHighlightKind.Text}async function zo(d,S){if(!!d)return Te.map(d,Yn,S)}function Dt(d){return d<=ne.SymbolKind.TypeParameter?d-1:W.SymbolKind.Property}function Mi(d){switch(d){case ne.SymbolTag.Deprecated:return W.SymbolTag.Deprecated;default:return}}function Fr(d){if(d==null)return;let S=[];for(let O of d){let Y=Mi(O);Y!==void 0&&S.push(Y)}return S.length===0?void 0:S}function Yn(d){let S=d.data,O=d.location,Y=O.range===void 0||S!==void 0?new nq.default(d.name,Dt(d.kind),d.containerName??"",O.range===void 0?i(O.uri):new W.Location(i(d.location.uri),g(O.range)),S):new W.SymbolInformation(d.name,Dt(d.kind),d.containerName??"",new W.Location(i(d.location.uri),g(O.range)));return Zr(Y,d),Y}async function ji(d,S){if(d!=null)return Te.map(d,sn,S)}function sn(d){let S=new W.DocumentSymbol(d.name,d.detail||"",Dt(d.kind),g(d.range),g(d.selectionRange));if(Zr(S,d),d.children!==void 0&&d.children.length>0){let O=[];for(let Y of d.children)O.push(sn(Y));S.children=O}return S}function Zr(d,S){d.tags=Fr(S.tags),S.deprecated&&(d.tags?d.tags.includes(W.SymbolTag.Deprecated)||(d.tags=d.tags.concat(W.SymbolTag.Deprecated)):d.tags=[W.SymbolTag.Deprecated])}function mt(d){let S={title:d.title,command:d.command};return d.arguments&&(S.arguments=d.arguments),S}async function dr(d,S){if(!!d)return Te.map(d,mt,S)}let an=new Map;an.set(ne.CodeActionKind.Empty,W.CodeActionKind.Empty),an.set(ne.CodeActionKind.QuickFix,W.CodeActionKind.QuickFix),an.set(ne.CodeActionKind.Refactor,W.CodeActionKind.Refactor),an.set(ne.CodeActionKind.RefactorExtract,W.CodeActionKind.RefactorExtract),an.set(ne.CodeActionKind.RefactorInline,W.CodeActionKind.RefactorInline),an.set(ne.CodeActionKind.RefactorRewrite,W.CodeActionKind.RefactorRewrite),an.set(ne.CodeActionKind.Source,W.CodeActionKind.Source),an.set(ne.CodeActionKind.SourceOrganizeImports,W.CodeActionKind.SourceOrganizeImports);function ei(d){if(d==null)return;let S=an.get(d);if(S)return S;let O=d.split(".");S=W.CodeActionKind.Empty;for(let Y of O)S=S.append(Y);return S}function fr(d){if(d!=null)return d.map(S=>ei(S))}async function ti(d,S){if(d==null)return;let O=new ZP.default(d.title,d.data);return d.kind!==void 0&&(O.kind=ei(d.kind)),d.diagnostics!==void 0&&(O.diagnostics=c(d.diagnostics)),d.edit!==void 0&&(O.edit=await Fn(d.edit,S)),d.command!==void 0&&(O.command=mt(d.command)),d.isPreferred!==void 0&&(O.isPreferred=d.isPreferred),d.disabled!==void 0&&(O.disabled={reason:d.disabled.reason}),O}function Ai(d,S){return Te.mapAsync(d,async O=>ne.Command.is(O)?mt(O):ti(O,S),S)}function yn(d){if(!d)return;let S=new QP.default(g(d.range));return d.command&&(S.command=mt(d.command)),d.data!==void 0&&d.data!==null&&(S.data=d.data),S}async function Li(d,S){if(!!d)return Te.map(d,yn,S)}async function Fn(d,S){if(!d)return;let O=new Map;if(d.changeAnnotations!==void 0){let Rt=d.changeAnnotations;await Te.forEach(Object.keys(Rt),Oe=>{let er=w(Rt[Oe]);O.set(Oe,er)},S)}let Y=Rt=>{if(Rt!==void 0)return O.get(Rt)},Qt=new W.WorkspaceEdit;if(d.documentChanges){let Rt=d.documentChanges;await Te.forEach(Rt,Oe=>{if(ne.CreateFile.is(Oe))Qt.createFile(i(Oe.uri),Oe.options,Y(Oe.annotationId));else if(ne.RenameFile.is(Oe))Qt.renameFile(i(Oe.oldUri),i(Oe.newUri),Oe.options,Y(Oe.annotationId));else if(ne.DeleteFile.is(Oe))Qt.deleteFile(i(Oe.uri),Oe.options,Y(Oe.annotationId));else if(ne.TextDocumentEdit.is(Oe)){let er=i(Oe.textDocument.uri);for(let Me of Oe.edits)ne.AnnotatedTextEdit.is(Me)?Qt.replace(er,g(Me.range),Me.newText,Y(Me.annotationId)):Qt.replace(er,g(Me.range),Me.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Oe,void 0,4)}`)},S)}else if(d.changes){let Rt=d.changes;await Te.forEach(Object.keys(Rt),Oe=>{Qt.set(i(Oe),I(Rt[Oe]))},S)}return Qt}function w(d){if(d!==void 0)return{label:d.label,needsConfirmation:!!d.needsConfirmation,description:d.description}}function E(d){let S=g(d.range),O=d.target?o(d.target):void 0,Y=new YP.default(S,O);return d.tooltip!==void 0&&(Y.tooltip=d.tooltip),d.data!==void 0&&d.data!==null&&(Y.data=d.data),Y}async function L(d,S){if(!!d)return Te.map(d,E,S)}function z(d){return new W.Color(d.red,d.green,d.blue,d.alpha)}function qe(d){return new W.ColorInformation(g(d.range),z(d.color))}async function Se(d,S){if(!!d)return Te.map(d,qe,S)}function Ie(d){let S=new W.ColorPresentation(d.label);return S.additionalTextEdits=I(d.additionalTextEdits),d.textEdit&&(S.textEdit=yt(d.textEdit)),S}async function We(d,S){if(!!d)return Te.map(d,Ie,S)}function fe(d){if(d)switch(d){case ne.FoldingRangeKind.Comment:return W.FoldingRangeKind.Comment;case ne.FoldingRangeKind.Imports:return W.FoldingRangeKind.Imports;case ne.FoldingRangeKind.Region:return W.FoldingRangeKind.Region}}function Ee(d){return new W.FoldingRange(d.startLine,d.endLine,fe(d.kind))}async function m(d,S){if(!!d)return Te.map(d,Ee,S)}function q(d){return new W.SelectionRange(g(d.range),d.parent?q(d.parent):void 0)}async function H(d,S){return Array.isArray(d)?Te.map(d,q,S):[]}function de(d){return ne.InlineValueText.is(d)?new W.InlineValueText(g(d.range),d.text):ne.InlineValueVariableLookup.is(d)?new W.InlineValueVariableLookup(g(d.range),d.variableName,d.caseSensitiveLookup):new W.InlineValueEvaluatableExpression(g(d.range),d.expression)}async function xe(d,S){return Array.isArray(d)?Te.map(d,de,S):[]}async function _t(d,S){let O=typeof d.label=="string"?d.label:await Te.map(d.label,cn,S),Y=new rq.default(p(d.position),O);return d.kind!==void 0&&(Y.kind=d.kind),d.textEdits!==void 0&&(Y.textEdits=await pt(d.textEdits,S)),d.tooltip!==void 0&&(Y.tooltip=Zn(d.tooltip)),d.paddingLeft!==void 0&&(Y.paddingLeft=d.paddingLeft),d.paddingRight!==void 0&&(Y.paddingRight=d.paddingRight),d.data!==void 0&&(Y.data=d.data),Y}function cn(d){let S=new W.InlayHintLabelPart(d.value);return d.location!==void 0&&(S.location=J(d.location)),d.tooltip!==void 0&&(S.tooltip=Zn(d.tooltip)),d.command!==void 0&&(S.command=mt(d.command)),S}function Zn(d){return typeof d=="string"?d:_(d)}async function pD(d,S){if(!!Array.isArray(d))return Te.mapAsync(d,_t,S)}function na(d){if(d===null)return;let S=new eq.default(Dt(d.kind),d.name,d.detail||"",o(d.uri),g(d.range),g(d.selectionRange),d.data);return d.tags!==void 0&&(S.tags=Fr(d.tags)),S}async function gD(d,S){if(d!==null)return Te.map(d,na,S)}async function tm(d,S){return new W.CallHierarchyIncomingCall(na(d.from),await C(d.fromRanges,S))}async function mD(d,S){if(d!==null)return Te.mapAsync(d,tm,S)}async function nm(d,S){return new W.CallHierarchyOutgoingCall(na(d.to),await C(d.fromRanges,S))}async function vD(d,S){if(d!==null)return Te.mapAsync(d,nm,S)}async function yD(d,S){if(d!=null)return new W.SemanticTokens(new Uint32Array(d.data),d.resultId)}function rm(d){return new W.SemanticTokensEdit(d.start,d.deleteCount,d.data!==void 0?new Uint32Array(d.data):void 0)}async function _D(d,S){if(d!=null)return new W.SemanticTokensEdits(d.edits.map(rm),d.resultId)}function CD(d){return d}async function bD(d,S){if(d!=null)return new W.LinkedEditingRanges(await C(d.ranges,S),wD(d.wordPattern))}function wD(d){if(d!=null)return new RegExp(d)}function im(d){if(d===null)return;let S=new tq.default(Dt(d.kind),d.name,d.detail||"",o(d.uri),g(d.range),g(d.selectionRange),d.data);return d.tags!==void 0&&(S.tags=Fr(d.tags)),S}async function DD(d,S){if(d!==null)return Te.map(d,im,S)}function RD(d){if(Dn.string(d))return d;if(ne.RelativePattern.is(d)){if(ne.URI.is(d.baseUri))return new W.RelativePattern(o(d.baseUri),d.pattern);if(ne.WorkspaceFolder.is(d.baseUri)){let S=W.workspace.getWorkspaceFolder(o(d.baseUri.uri));return S!==void 0?new W.RelativePattern(S,d.pattern):void 0}}}return{asUri:o,asDocumentSelector:s,asDiagnostics:a,asDiagnostic:u,asRange:g,asRanges:C,asPosition:p,asDiagnosticSeverity:b,asDiagnosticTag:h,asHover:T,asCompletionResult:N,asCompletionItem:Ne,asTextEdit:yt,asTextEdits:pt,asSignatureHelp:x,asSignatureInformations:F,asSignatureInformation:j,asParameterInformations:Z,asParameterInformation:se,asDeclarationResult:kt,asDefinitionResult:gt,asLocation:J,asReferences:Jt,asDocumentHighlights:Uo,asDocumentHighlight:Ni,asDocumentHighlightKind:Ii,asSymbolKind:Dt,asSymbolTag:Mi,asSymbolTags:Fr,asSymbolInformations:zo,asSymbolInformation:Yn,asDocumentSymbols:ji,asDocumentSymbol:sn,asCommand:mt,asCommands:dr,asCodeAction:ti,asCodeActionKind:ei,asCodeActionKinds:fr,asCodeActionResult:Ai,asCodeLens:yn,asCodeLenses:Li,asWorkspaceEdit:Fn,asDocumentLink:E,asDocumentLinks:L,asFoldingRangeKind:fe,asFoldingRange:Ee,asFoldingRanges:m,asColor:z,asColorInformation:qe,asColorInformations:Se,asColorPresentation:Ie,asColorPresentations:We,asSelectionRange:q,asSelectionRanges:H,asInlineValue:de,asInlineValues:xe,asInlayHint:_t,asInlayHints:pD,asSemanticTokensLegend:CD,asSemanticTokens:yD,asSemanticTokensEdit:rm,asSemanticTokensEdits:_D,asCallHierarchyItem:na,asCallHierarchyItems:gD,asCallHierarchyIncomingCall:tm,asCallHierarchyIncomingCalls:mD,asCallHierarchyOutgoingCall:nm,asCallHierarchyOutgoingCalls:vD,asLinkedEditingRanges:bD,asTypeHierarchyItem:im,asTypeHierarchyItems:DD,asGlobPattern:RD}}La.createConverter=iq});var Qe=D(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.generateUuid=Rn.parse=Rn.isUUID=Rn.v4=Rn.empty=void 0;var _s=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ce=class extends _s{constructor(){super([ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),"-",ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),"-","4",ce._randomHex(),ce._randomHex(),ce._randomHex(),"-",ce._oneOf(ce._timeHighBits),ce._randomHex(),ce._randomHex(),ce._randomHex(),"-",ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex(),ce._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return ce._oneOf(ce._chars)}};ce._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ce._timeHighBits=["8","9","a","b"];Rn.empty=new _s("00000000-0000-0000-0000-000000000000");function Jv(){return new ce}Rn.v4=Jv;var oq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Qv(n){return oq.test(n)}Rn.isUUID=Qv;function sq(n){if(!Qv(n))throw new Error("invalid uuid");return new _s(n)}Rn.parse=sq;function aq(){return Jv().asHex()}Rn.generateUuid=aq});var xf=D(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.ProgressPart=void 0;var Yv=require("vscode"),Zv=K(),ey=wn(),qf=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Zv.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Yv.window.withProgress({location:Yv.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Zv.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=>{this._resolve=i,this._reject=o})})}report(e){if(this._infinite&&ey.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(ey.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Ha.ProgressPart=qf});var we=D(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.WorkspaceFeature=ft.TextDocumentLanguageFeature=ft.TextDocumentEventFeature=ft.DynamicDocumentFeature=ft.DynamicFeature=ft.StaticFeature=ft.ensure=ft.LSPCancellationError=void 0;var hi=require("vscode"),kf=K(),Ut=wn(),ty=Qe(),Ef=class extends hi.CancellationError{constructor(e){super(),this.data=e}};ft.LSPCancellationError=Ef;function cq(n,e){return n[e]===void 0&&(n[e]={}),n[e]}ft.ensure=cq;var uq;(function(n){function e(t){let r=t;return r!=null&&Ut.func(r.fillClientCapabilities)&&Ut.func(r.initialize)&&Ut.func(r.getState)&&Ut.func(r.dispose)&&(r.fillInitializeParams===void 0||Ut.func(r.fillInitializeParams))}n.is=e})(uq=ft.StaticFeature||(ft.StaticFeature={}));var lq;(function(n){function e(t){let r=t;return r!=null&&Ut.func(r.fillClientCapabilities)&&Ut.func(r.initialize)&&Ut.func(r.getState)&&Ut.func(r.dispose)&&(r.fillInitializeParams===void 0||Ut.func(r.fillInitializeParams))&&Ut.func(r.register)&&Ut.func(r.unregister)&&r.registrationType!==void 0}n.is=e})(lq=ft.DynamicFeature||(ft.DynamicFeature={}));var Cs=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let o of hi.workspace.textDocuments)if(hi.languages.match(i,o)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};ft.DynamicDocumentFeature=Cs;var Of=class extends Cs{constructor(e,t,r,i,o,s,a){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new hi.EventEmitter}static textDocumentFilter(e,t){for(let r of e)if(hi.languages.match(r,t)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(hi.languages.match(t,e)>0)return{send:r=>this.callback(r)}}};ft.TextDocumentEventFeature=Of;var Ff=class extends Cs{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(kf.TextDocumentRegistrationOptions.is(t)){let r=kf.StaticRegistrationOptions.hasId(t)?t.id:ty.generateUuid(),i=t.documentSelector??e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(Ut.boolean(t)&&t===!0||kf.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=Ut.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[ty.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return Ut.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&hi.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};ft.TextDocumentLanguageFeature=Ff;var Nf=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};ft.WorkspaceFeature=Nf});var ry=D((R1,ny)=>{var dq=typeof process=="object"&&process&&process.platform==="win32";ny.exports=dq?{sep:"\\"}:{sep:"/"}});var cy=D((S1,ay)=>{"use strict";ay.exports=oy;function oy(n,e,t){n instanceof RegExp&&(n=iy(n,t)),e instanceof RegExp&&(e=iy(e,t));var r=sy(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function iy(n,e){var t=e.match(n);return t?t[0]:null}oy.range=sy;function sy(n,e,t){var r,i,o,s,a,c=t.indexOf(n),u=t.indexOf(e,c+1),l=c;if(c>=0&&u>0){if(n===e)return[c,u];for(r=[],o=t.length;l>=0&&!a;)l==c?(r.push(l),c=t.indexOf(n,l+1)):r.length==1?a=[r.pop(),u]:(i=r.pop(),i<o&&(o=i,s=u),u=t.indexOf(e,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}});var my=D((T1,gy)=>{var uy=cy();gy.exports=pq;var ly="\0SLASH"+Math.random()+"\0",dy="\0OPEN"+Math.random()+"\0",Mf="\0CLOSE"+Math.random()+"\0",fy="\0COMMA"+Math.random()+"\0",hy="\0PERIOD"+Math.random()+"\0";function If(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function fq(n){return n.split("\\\\").join(ly).split("\\{").join(dy).split("\\}").join(Mf).split("\\,").join(fy).split("\\.").join(hy)}function hq(n){return n.split(ly).join("\\").split(dy).join("{").split(Mf).join("}").split(fy).join(",").split(hy).join(".")}function py(n){if(!n)return[""];var e=[],t=uy("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,o=t.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=py(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function pq(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),bs(fq(n),!0).map(hq)):[]}function gq(n){return"{"+n+"}"}function mq(n){return/^-?0\d/.test(n)}function vq(n,e){return n<=e}function yq(n,e){return n>=e}function bs(n,e){var t=[],r=uy("{","}",n);if(!r)return[n];var i=r.pre,o=r.post.length?bs(r.post,!1):[""];if(/\$$/.test(r.pre))for(var s=0;s<o.length;s++){var a=i+"{"+r.body+"}"+o[s];t.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),l=c||u,f=r.body.indexOf(",")>=0;if(!l&&!f)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+Mf+r.post,bs(n)):[n];var h;if(l)h=r.body.split(/\.\./);else if(h=py(r.body),h.length===1&&(h=bs(h[0],!1).map(gq),h.length===1))return o.map(function(Ne){return r.pre+h[0]+Ne});var p;if(l){var g=If(h[0]),C=If(h[1]),b=Math.max(h[0].length,h[1].length),R=h.length==3?Math.abs(If(h[2])):1,y=vq,_=C<g;_&&(R*=-1,y=yq);var T=h.some(mq);p=[];for(var N=g;y(N,C);N+=R){var V;if(u)V=String.fromCharCode(N),V==="\\"&&(V="");else if(V=String(N),T){var U=b-V.length;if(U>0){var re=new Array(U+1).join("0");N<0?V="-"+re+V.slice(1):V=re+V}}p.push(V)}}else{p=[];for(var ee=0;ee<h.length;ee++)p.push.apply(p,bs(h[ee],!1))}for(var ee=0;ee<p.length;ee++)for(var s=0;s<o.length;s++){var a=i+p[ee]+o[s];(!e||l||a)&&t.push(a)}}return t}});var Wa=D((q1,$f)=>{var ln=$f.exports=(n,e,t={})=>($a(e),!t.nocomment&&e.charAt(0)==="#"?!1:new oo(e,t).match(n));$f.exports=ln;var Lf=ry();ln.sep=Lf.sep;var Un=Symbol("globstar **");ln.GLOBSTAR=Un;var _q=my(),vy={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Hf="[^/]",jf=Hf+"*?",Cq="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",bq="(?:(?!(?:\\/|^)\\.).)*?",Cy=n=>n.split("").reduce((e,t)=>(e[t]=!0,e),{}),yy=Cy("().*{}+?[]^$\\!"),wq=Cy("[.("),_y=/\/+/;ln.filter=(n,e={})=>(t,r,i)=>ln(t,n,e);var $r=(n,e={})=>{let t={};return Object.keys(n).forEach(r=>t[r]=n[r]),Object.keys(e).forEach(r=>t[r]=e[r]),t};ln.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return ln;let e=ln,t=(r,i,o)=>e(r,i,$r(n,o));return t.Minimatch=class extends e.Minimatch{constructor(i,o){super(i,$r(n,o))}},t.Minimatch.defaults=r=>e.defaults($r(n,r)).Minimatch,t.filter=(r,i)=>e.filter(r,$r(n,i)),t.defaults=r=>e.defaults($r(n,r)),t.makeRe=(r,i)=>e.makeRe(r,$r(n,i)),t.braceExpand=(r,i)=>e.braceExpand(r,$r(n,i)),t.match=(r,i,o)=>e.match(r,i,$r(n,o)),t};ln.braceExpand=(n,e)=>by(n,e);var by=(n,e={})=>($a(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:_q(n)),Dq=1024*64,$a=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>Dq)throw new TypeError("pattern is too long")},Af=Symbol("subparse");ln.makeRe=(n,e)=>new oo(n,e||{}).makeRe();ln.match=(n,e,t={})=>{let r=new oo(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};var Rq=n=>n.replace(/\\(.)/g,"$1"),Sq=n=>n.replace(/\\([^-\]])/g,"$1"),Tq=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Pq=n=>n.replace(/[[\]\\]/g,"\\$&"),oo=class{constructor(e,t){$a(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(_y)),this.debug(this.pattern,r),r=r.map((i,o,s)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u=t[s],l=e[o];if(this.debug(t,u,l),u===!1)return!1;if(u===Un){this.debug("GLOBSTAR",[t,u,l]);var f=o,h=s+1;if(h===c){for(this.debug("** at the end");o<a;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;f<a;){var p=e[f];if(this.debug(`
globstar while`,e,f,t,h,p),this.matchOne(e.slice(f),t.slice(h),r))return this.debug("globstar found match!",f,a,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,f,t,h);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,f,t,h),f===a))}var g;if(typeof u=="string"?(g=l===u,this.debug("string match",u,l,g)):(g=l.match(u),this.debug("pattern match",u,l,g)),!g)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return by(this.pattern,this.options)}parse(e,t){$a(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Un;if(e==="")return"";let i="",o=!1,s=!1,a=[],c=[],u,l=!1,f=-1,h=-1,p,g,C,b=e.charAt(0)===".",R=r.dot||b,y=()=>b?"":R?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",_=U=>U.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",T=()=>{if(u){switch(u){case"*":i+=jf,o=!0;break;case"?":i+=Hf,o=!0;break;default:i+="\\"+u;break}this.debug("clearStateChar %j %j",u,i),u=!1}};for(let U=0,re;U<e.length&&(re=e.charAt(U));U++){if(this.debug("%s	%s %s %j",e,U,i,re),s){if(re==="/")return!1;yy[re]&&(i+="\\"),i+=re,s=!1;continue}switch(re){case"/":return!1;case"\\":if(l&&e.charAt(U+1)==="-"){i+=re;continue}T(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,U,i,re),l){this.debug("  in class"),re==="!"&&U===h+1&&(re="^"),i+=re;continue}this.debug("call clearStateChar %j",u),T(),u=re,r.noext&&T();continue;case"(":{if(l){i+="(";continue}if(!u){i+="\\(";continue}let ee={type:u,start:U-1,reStart:i.length,open:vy[u].open,close:vy[u].close};this.debug(this.pattern,"	",ee),a.push(ee),i+=ee.open,ee.start===0&&ee.type!=="!"&&(b=!0,i+=_(e.slice(U+1))),this.debug("plType %j %j",u,i),u=!1;continue}case")":{let ee=a[a.length-1];if(l||!ee){i+="\\)";continue}a.pop(),T(),o=!0,g=ee,i+=g.close,g.type==="!"&&c.push(Object.assign(g,{reEnd:i.length}));continue}case"|":{let ee=a[a.length-1];if(l||!ee){i+="\\|";continue}T(),i+="|",ee.start===0&&ee.type!=="!"&&(b=!0,i+=_(e.slice(U+1)));continue}case"[":if(T(),l){i+="\\"+re;continue}l=!0,h=U,f=i.length,i+=re;continue;case"]":if(U===h+1||!l){i+="\\"+re;continue}p=e.substring(h+1,U);try{RegExp("["+Pq(Sq(p))+"]"),i+=re}catch{i=i.substring(0,f)+"(?:$.)"}o=!0,l=!1;continue;default:T(),yy[re]&&!(re==="^"&&l)&&(i+="\\"),i+=re;break}}for(l&&(p=e.slice(h+1),C=this.parse(p,Af),i=i.substring(0,f)+"\\["+C[0],o=o||C[1]),g=a.pop();g;g=a.pop()){let U;U=i.slice(g.reStart+g.open.length),this.debug("setting tail",i,g),U=U.replace(/((?:\\{2}){0,64})(\\?)\|/g,(ee,Ne,ge)=>(ge||(ge="\\"),Ne+Ne+ge+"|")),this.debug(`tail=%j
   %s`,U,U,g,i);let re=g.type==="*"?jf:g.type==="?"?Hf:"\\"+g.type;o=!0,i=i.slice(0,g.reStart)+re+"\\("+U}T(),s&&(i+="\\\\");let N=wq[i.charAt(0)];for(let U=c.length-1;U>-1;U--){let re=c[U],ee=i.slice(0,re.reStart),Ne=i.slice(re.reStart,re.reEnd-8),ge=i.slice(re.reEnd),st=i.slice(re.reEnd-8,re.reEnd)+ge,On=ee.split(")").length,yt=ee.split("(").length-On,pt=ge;for(let x=0;x<yt;x++)pt=pt.replace(/\)[+*?]?/,"");ge=pt;let I=ge===""&&t!==Af?"(?:$|\\/)":"";i=ee+Ne+ge+I+st}if(i!==""&&o&&(i="(?=.)"+i),N&&(i=y()+i),t===Af)return[i,o];if(r.nocase&&!o&&(o=e.toUpperCase()!==e.toLowerCase()),!o)return Rq(e);let V=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",V),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?jf:t.dot?Cq:bq,i=t.nocase?"i":"",o=e.map(s=>(s=s.map(a=>typeof a=="string"?Tq(a):a===Un?Un:a._src).reduce((a,c)=>(a[a.length-1]===Un&&c===Un||a.push(c),a),[]),s.forEach((a,c)=>{a!==Un||s[c-1]===Un||(c===0?s.length>1?s[c+1]="(?:\\/|"+r+"\\/)?"+s[c+1]:s[c]=r:c===s.length-1?s[c-1]+="(?:\\/|"+r+")?":(s[c-1]+="(?:\\/|\\/"+r+"\\/)"+s[c+1],s[c+1]=Un))}),s.filter(a=>a!==Un).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;Lf.sep!=="/"&&(e=e.split(Lf.sep).join("/")),e=e.split(_y),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let o;for(let s=e.length-1;s>=0&&(o=e[s],!o);s--);for(let s=0;s<i.length;s++){let a=i[s],c=e;if(r.matchBase&&a.length===1&&(c=[o]),this.matchOne(c,a,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return ln.defaults(e).Minimatch}};ln.Minimatch=oo});var Xf=D(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.DiagnosticFeature=or.DiagnosticPullMode=or.vsdiag=void 0;var qq=Wa(),Ce=require("vscode"),rt=K(),xq=Qe(),Wf=we();function Ua(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var zn;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(zn=or.vsdiag||(or.vsdiag={}));var Uf;(function(n){n.onType="onType",n.onSave="onSave"})(Uf=or.DiagnosticPullMode||(or.DiagnosticPullMode={}));var Ft;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})(Ft||(Ft={}));var pi=class{constructor(){this.open=new Set,this._onOpen=new Ce.EventEmitter,this._onClose=new Ce.EventEmitter,pi.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let r=this.open,i=new Set;pi.fillTabResources(i);let o=new Set,s=new Set(i);for(let a of r.values())i.has(a)?s.delete(a):o.add(a);if(this.open=i,o.size>0){let a=new Set;for(let c of o)a.add(Ce.Uri.parse(c));this._onClose.fire(a)}if(s.size>0){let a=new Set;for(let c of s)a.add(Ce.Uri.parse(c));this._onOpen.fire(a)}};Ce.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Ce.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Ce.Uri?Ce.window.activeTextEditor?.document.uri===e:Ce.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof Ce.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return pi.fillTabResources(new Set,e),e}static fillTabResources(e,t){let r=e??new Set;for(let i of Ce.window.tabGroups.all)for(let o of i.tabs){let s=o.input,a;s instanceof Ce.TabInputText?a=s.uri:s instanceof Ce.TabInputTextDiff&&(a=s.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),t!==void 0&&t.add(a))}}},vt;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(vt||(vt={}));var _r;(function(n){function e(t){return t instanceof Ce.Uri?t.toString():t.uri.toString()}n.asKey=e})(_r||(_r={}));var zf=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===vt.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=t instanceof Ce.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version],c=i.get(o);return c===void 0&&(c={document:s,pulledVersion:a,resultId:void 0},i.set(o,c)),c}update(e,t,r,i){let o=e===vt.document?this.documentPullStates:this.workspacePullStates,[s,a,c,u]=t instanceof Ce.Uri?[t.toString(),t,r,i]:[t.uri.toString(),t.uri,t.version,r],l=o.get(s);l===void 0?(l={document:a,pulledVersion:c,resultId:u},o.set(s,l)):(l.pulledVersion=c,l.resultId=u)}unTrack(e,t){let r=_r.asKey(t);(e===vt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){let r=_r.asKey(t);return(e===vt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){let r=_r.asKey(t);return(e===vt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),r.resultId!==void 0&&e.push({uri:t,value:r.resultId});return e}},Kf=class{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Ce.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Ce.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new zf,this.workspaceErrorCounter=0}knows(e,t){let r=t instanceof Ce.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let r=e instanceof Ce.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let r=e instanceof Ce.Uri,i=r?e:e.uri,o=i.toString();t=r?t:e.version;let s=this.openRequests.get(o),a=r?this.documentStates.track(vt.document,e,t):this.documentStates.track(vt.document,e);if(s===void 0){let c=new Ce.CancellationTokenSource;this.openRequests.set(o,{state:Ft.active,document:e,version:t,tokenSource:c});let u,l;try{u=await this.provider.provideDiagnostics(e,a.resultId,c.token)??{kind:zn.DocumentDiagnosticReportKind.full,items:[]}}catch(f){if(f instanceof Wf.LSPCancellationError&&rt.DiagnosticServerCancellationData.is(f.data)&&f.data.retriggerRequest===!1&&(l={state:Ft.outDated,document:e}),l===void 0&&f instanceof Ce.CancellationError)l={state:Ft.reschedule,document:e};else throw f}if(l=l??this.openRequests.get(o),l===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(o),!this.tabs.isVisible(e)){this.documentStates.unTrack(vt.document,e);return}if(l.state===Ft.outDated)return;u!==void 0&&(u.kind===zn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,u.items),a.pulledVersion=t,a.resultId=u.resultId),l.state===Ft.reschedule&&this.pull(e)}else s.state===Ft.active?(s.tokenSource.cancel(),this.openRequests.set(o,{state:Ft.reschedule,document:s.document})):s.state===Ft.outDated&&this.openRequests.set(o,{state:Ft.reschedule,document:s.document})}forgetDocument(e){let t=e instanceof Ce.Uri?e:e.uri,r=t.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:Ft.reschedule,document:e}):this.pull(e,()=>{this.forget(vt.document,e)}):(i!==void 0&&(i.state===Ft.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:Ft.outDated,document:e})),this.diagnostics.delete(t),this.forget(vt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,rt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Wf.LSPCancellationError)&&!rt.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,rt.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Ce.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===zn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(vt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(vt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=>{let o=(a,c,u)=>{let l={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof Ce.Uri?a:a.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:zn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(rt.DocumentDiagnosticRequest.type,l,u).then(async f=>f==null||this.isDisposed||u.isCancellationRequested?{kind:zn.DocumentDiagnosticReportKind.full,items:[]}:f.kind===rt.DocumentDiagnosticReportKind.Full?{kind:zn.DocumentDiagnosticReportKind.full,resultId:f.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(f.items,u)}:{kind:zn.DocumentDiagnosticReportKind.unChanged,resultId:f.resultId},f=>this.client.handleFailedRequest(rt.DocumentDiagnosticRequest.type,u,f,{kind:zn.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,r,i)=>{let o=async u=>u.kind===rt.DocumentDiagnosticReportKind.Full?{kind:zn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version,items:await this.client.protocol2CodeConverter.asDiagnostics(u.items,r)}:{kind:zn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(u.uri),resultId:u.resultId,version:u.version},s=u=>{let l=[];for(let f of u)l.push({uri:this.client.code2ProtocolConverter.asUri(f.uri),value:f.value});return l},a=(u,l)=>{let f=(0,xq.generateUuid)(),h=this.client.onProgress(rt.WorkspaceDiagnosticRequest.partialResult,f,async g=>{if(g==null){i(null);return}let C={items:[]};for(let b of g.items)try{C.items.push(await o(b))}catch(R){this.client.error("Converting workspace diagnostics failed.",R)}i(C)}),p={identifier:this.options.identifier,previousResultIds:s(u),partialResultToken:f};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(rt.WorkspaceDiagnosticRequest.type,p,l).then(async g=>{if(l.isCancellationRequested)return{items:[]};let C={items:[]};for(let b of g.items)C.items.push(await o(b));return h.dispose(),i(C),{items:[]}},g=>(h.dispose(),this.client.handleFailedRequest(rt.DocumentDiagnosticRequest.type,l,g,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===Ft.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:Ft.outDated,document:t.document});this.diagnostics.dispose()}},Bf=class{constructor(e){this.diagnosticRequestor=e,this.documents=new rt.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=_r.asKey(e);this.documents.has(t)||(this.documents.set(t,e,rt.Touch.Last),this.trigger())}remove(e){let t=_r.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,rt.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=_r.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,rt.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?_r.asKey(this.endDocument):void 0}},Gf=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),s=[],a=g=>{let C=r.documentSelector;if(i.match!==void 0)return i.match(C,g);for(let b of C)if(!!rt.TextDocumentFilter.is(b)){if(typeof b=="string"||b.language!==void 0&&b.language!=="*"||b.scheme!==void 0&&b.scheme!=="*"&&b.scheme!==g.scheme)return!1;if(b.pattern!==void 0){let R=new qq.Minimatch(b.pattern,{noext:!0});if(!R.makeRe()||!R.match(g.fsPath))return!1}}return!0},c=g=>g instanceof Ce.Uri?a(g):Ce.languages.match(o,g)>0&&t.isVisible(g),u=g=>g instanceof Ce.Uri?this.activeTextDocument?.uri.toString()===g.toString():this.activeTextDocument===g;this.diagnosticRequestor=new Kf(e,t,r),this.backgroundScheduler=new Bf(this.diagnosticRequestor);let l=g=>{!c(g)||!r.interFileDependencies||u(g)||this.backgroundScheduler.add(g)};this.activeTextDocument=Ce.window.activeTextEditor?.document,Ce.window.onDidChangeActiveTextEditor(g=>{let C=this.activeTextDocument;this.activeTextDocument=g?.document,C!==void 0&&l(C),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let f=e.getFeature(rt.DidOpenTextDocumentNotification.method);s.push(f.onNotificationSent(g=>{let C=g.textDocument;this.diagnosticRequestor.knows(vt.document,C)||c(C)&&this.diagnosticRequestor.pull(C,()=>{l(C)})})),t.onOpen(g=>{for(let C of g){if(this.diagnosticRequestor.knows(vt.document,C))continue;let b=C.toString(),R;for(let y of Ce.workspace.textDocuments)if(b===y.uri.toString()){R=y;break}R!==void 0&&c(R)?this.diagnosticRequestor.pull(R,()=>{l(R)}):c(C)&&this.diagnosticRequestor.pull(C,()=>{l(C)})}});let h=new Set;for(let g of Ce.workspace.textDocuments)c(g)&&(this.diagnosticRequestor.pull(g,()=>{l(g)}),h.add(g.uri.toString()));if(i.onTabs===!0)for(let g of t.getTabResources())!h.has(g.toString())&&c(g)&&this.diagnosticRequestor.pull(g,()=>{l(g)});if(i.onChange===!0){let g=e.getFeature(rt.DidChangeTextDocumentNotification.method);s.push(g.onNotificationSent(async C=>{let b=C.textDocument;(i.filter===void 0||!i.filter(b,Uf.onType))&&this.diagnosticRequestor.knows(vt.document,b)&&this.diagnosticRequestor.pull(b,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let g=e.getFeature(rt.DidSaveTextDocumentNotification.method);s.push(g.onNotificationSent(C=>{let b=C.textDocument;(i.filter===void 0||!i.filter(b,Uf.onSave))&&this.diagnosticRequestor.knows(vt.document,b)&&this.diagnosticRequestor.pull(C.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let p=e.getFeature(rt.DidCloseTextDocumentNotification.method);s.push(p.onNotificationSent(g=>{this.cleanUpDocument(g.textDocument)})),t.onClose(g=>{for(let C of g)this.cleanUpDocument(C)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let g of Ce.workspace.textDocuments)c(g)&&this.diagnosticRequestor.pull(g)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Ce.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(vt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Vf=class extends Wf.TextDocumentLanguageFeature{constructor(e){super(e,rt.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=Ua(Ua(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,Ua(Ua(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(rt.DiagnosticRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new pi);let t=new Gf(this._client,this.tabs,e);return[t.disposable,t]}};or.DiagnosticFeature=Vf});var Ry=D(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.NotebookDocumentSyncFeature=void 0;var Nt=require("vscode"),kq=Wa(),Cr=K(),Eq=Qe(),wy=wn();function Dy(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var so;(function(n){let e;(function(t){function r(h,p){return{version:h.version,uri:p.asUri(h.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(h,p,g){let C=Cr.NotebookDocument.create(g.asUri(h.uri),h.notebookType,h.version,o(p,g));return Object.keys(h.metadata).length>0&&(C.metadata=s(h.metadata)),C}t.asNotebookDocument=i;function o(h,p){return h.map(g=>a(g,p))}t.asNotebookCells=o;function s(h){return u(new Set,h)}t.asMetadata=s;function a(h,p){let g=Cr.NotebookCell.create(c(h.kind),p.asUri(h.document.uri));return Object.keys(h.metadata).length>0&&(g.metadata=s(h.metadata)),h.executionSummary!==void 0&&wy.number(h.executionSummary.executionOrder)&&wy.boolean(h.executionSummary.success)&&(g.executionSummary={executionOrder:h.executionSummary.executionOrder,success:h.executionSummary.success}),g}t.asNotebookCell=a;function c(h){switch(h){case Nt.NotebookCellKind.Markup:return Cr.NotebookCellKind.Markup;case Nt.NotebookCellKind.Code:return Cr.NotebookCellKind.Code}}function u(h,p){if(h.has(p))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(p)){let g=[];for(let C of p)if(C!==null&&typeof C=="object"||Array.isArray(C))g.push(u(h,C));else{if(C instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");g.push(C)}return g}else{let g=Object.keys(p),C=Object.create(null);for(let b of g){let R=p[b];if(R!==null&&typeof R=="object"||Array.isArray(R))C[b]=u(h,R);else{if(R instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");C[b]=R}}return C}}function l(h,p){let g=p.asChangeTextDocumentParams(h,h.document.uri,h.document.version);return{document:g.textDocument,changes:g.contentChanges}}t.asTextContentChange=l;function f(h,p){let g=Object.create(null);if(h.metadata&&(g.metadata=n.c2p.asMetadata(h.metadata)),h.cells!==void 0){let C=Object.create(null),b=h.cells;b.structure&&(C.structure={array:{start:b.structure.array.start,deleteCount:b.structure.array.deleteCount,cells:b.structure.array.cells!==void 0?b.structure.array.cells.map(R=>n.c2p.asNotebookCell(R,p)):void 0},didOpen:b.structure.didOpen!==void 0?b.structure.didOpen.map(R=>p.asOpenTextDocumentParams(R.document).textDocument):void 0,didClose:b.structure.didClose!==void 0?b.structure.didClose.map(R=>p.asCloseTextDocumentParams(R.document).textDocument):void 0}),b.data!==void 0&&(C.data=b.data.map(R=>n.c2p.asNotebookCell(R,p))),b.textContent!==void 0&&(C.textContent=b.textContent.map(R=>n.c2p.asTextContentChange(R,p))),Object.keys(C).length>0&&(g.cells=C)}return g}t.asNotebookDocumentChangeEvent=f})(e=n.c2p||(n.c2p={}))})(so||(so={}));var Jf;(function(n){function e(a,c,u){let l=a.length,f=c.length,h=0;for(;h<f&&h<l&&t(a[h],c[h],u);)h++;if(h<f&&h<l){let p=l-1,g=f-1;for(;p>=0&&g>=0&&t(a[p],c[g],u);)p--,g--;let C=p+1-h,b=h===g+1?void 0:c.slice(h,g+1);return b!==void 0?{start:h,deleteCount:C,cells:b}:{start:h,deleteCount:C}}else return h<f?{start:h,deleteCount:0,cells:c.slice(h)}:h<l?{start:h,deleteCount:l-h}:void 0}n.computeDiff=e;function t(a,c,u=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!r(a.executionSummary,c.executionSummary)?!1:!u||u&&o(a.metadata,c.metadata)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&i(a.timing,c.timing)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function o(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;let u=Array.isArray(a),l=Array.isArray(c);if(u!==l)return!1;if(u&&l){if(a.length!==c.length)return!1;for(let f=0;f<a.length;f++)if(!o(a[f],c[f]))return!1}if(s(a)&&s(c)){let f=Object.keys(a),h=Object.keys(c);if(f.length!==h.length||(f.sort(),h.sort(),!o(f,h)))return!1;for(let p=0;p<f.length;p++){let g=f[p];if(!o(a[g],c[g]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}n.isObjectLiteral=s})(Jf||(Jf={}));var Qf;(function(n){function e(t,r){if(typeof t=="string")return t==="*"||r.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new kq.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(Qf||(Qf={}));var za;(function(n){function e(r){let i=r.notebookSelector,o=[];for(let s of i){let a=(typeof s.notebook=="string"?s.notebook:s.notebook?.notebookType)??"*",c=typeof s.notebook=="string"?void 0:s.notebook?.scheme,u=typeof s.notebook=="string"?void 0:s.notebook?.pattern;if(s.cells!==void 0)for(let l of s.cells)o.push(t(a,c,u,l.language));else o.push(t(a,c,u,void 0))}return o}n.asDocumentSelector=e;function t(r,i,o,s){return i===void 0&&o===void 0?{notebook:r,language:s}:{notebook:{notebookType:r,scheme:i,pattern:o},language:s}}})(za||(za={}));var Ka;(function(n){function e(t){return{cells:t,uris:new Set(t.map(r=>r.document.uri.toString()))}}n.create=e})(Ka||(Ka={}));var ao=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(za.asDocumentSelector(t)),Nt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of Nt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);Nt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&Nt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),Nt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of Nt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Nt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(Nt.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(r!==void 0){let o=r.uris.has(t.document.uri.toString());if(i&&o||!i&&!o)return;if(i){let s=this.getMatchingCells(e);if(s!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){Nt.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=t.document.uri,o=r.cells.findIndex(s=>s.document.uri.toString()===i.toString());if(o!==-1)if(o===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let s=r.cells.slice(),a=s.splice(o,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:o,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,r)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,r);return}let o=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);o!==void 0&&this.doSendChange(o,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let r=async(o,s)=>{let a=so.c2p.asNotebookDocument(o,s,this.client.code2ProtocolConverter),c=s.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(Cr.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Ka.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let r=async o=>{try{await this.client.sendNotification(Cr.DidChangeNotebookDocumentNotification.type,{notebookDocument:so.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:so.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(s){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",s),s}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Ka.create(t??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification(Cr.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=async(o,s)=>{try{await this.client.sendNotification(Cr.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let o={notebook:e};t?.metadata!==void 0&&(o.metadata=so.c2p.asMetadata(t.metadata));let s;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let a=[];s=new Set(i.map(c=>c.document.uri.toString()));for(let c of t.cellChanges)s.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(o.cells=o.cells??{},o.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,c=i,u=Jf.computeDiff(a,c,!1),l,f;if(u!==void 0){l=u.cells===void 0?new Map:new Map(u.cells.map(g=>[g.document.uri.toString(),g])),f=u.deleteCount===0?new Map:new Map(a.slice(u.start,u.start+u.deleteCount).map(g=>[g.document.uri.toString(),g]));for(let g of Array.from(f.keys()))l.has(g)&&(f.delete(g),l.delete(g));o.cells=o.cells??{};let h=[],p=[];if(l.size>0||f.size>0){for(let g of l.values())h.push(g);for(let g of f.values())p.push(g)}o.cells.structure={array:u,didOpen:h,didClose:p}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Qf.matchNotebook(r.notebook,e)){let i=this.filterCells(e,t,r.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let r=this.getMatchingCells(e,[t]);return r!==void 0&&r[0]===t}filterCells(e,t,r){let i=r!==void 0?t.filter(o=>{let s=o.document.languageId;return r.some(a=>a.language==="*"||s===a.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},br=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Cr.NotebookDocumentSyncRegistrationType.type,Nt.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==br.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof ao&&o.didOpenNotebookCellTextDocument(r,i)}),Nt.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==br.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof ao&&o.didChangeNotebookCellTextDocument(i,t)}),Nt.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==br.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof ao&&o.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=Dy(Dy(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(za.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??Eq.generateUuid();this.register({id:r,registerOptions:t})}register(e){let t=new ao(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==br.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Nt.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let r of Nt.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}};Ba.NotebookDocumentSyncFeature=br;br.CellScheme="vscode-notebook-cell"});var Ty=D(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.SyncConfigurationFeature=Wr.toJSONObject=Wr.ConfigurationFeature=void 0;var co=require("vscode"),ws=K(),Oq=wn(),Fq=Qe(),Sy=we(),Yf=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(ws.ConfigurationRequest.type,(t,r)=>{let i=s=>{let a=[];for(let c of s.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},o=e.middleware.workspace;return o&&o.configuration?o.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=gi(co.workspace.getConfiguration(void 0,e).get(t));else{let o=co.workspace.getConfiguration(t.substr(0,i),e);o&&(r=gi(o.get(t.substr(i+1))))}}else{let i=co.workspace.getConfiguration(void 0,e);r={};for(let o of Object.keys(i))i.has(o)&&(r[o]=gi(i.get(o)))}return r===void 0&&(r=null),r}dispose(){}};Wr.ConfigurationFeature=Yf;function gi(n){if(n){if(Array.isArray(n))return n.map(gi);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=gi(n[t]));return e}}return n}Wr.toJSONObject=gi;var Zf=class{constructor(e){this._client=e,this.isDisposed=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ws.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Sy.ensure)((0,Sy.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:Fq.generateUuid(),registerOptions:{section:e}})}register(e){let t=co.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isDisposed=!0}onDidChangeConfiguration(e,t){if(this.isDisposed)return;let r;if(Oq.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(a=>t.affectsConfiguration(a)))return;let i=async s=>s===void 0?this._client.sendNotification(ws.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(ws.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}),o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(r,i):i(r)).catch(s=>{this._client.error(`Sending notification ${ws.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(e){function t(o,s){let a=o;for(let c=0;c<s.length-1;c++){let u=a[s[c]];u||(u=Object.create(null),a[s[c]]=u),a=u}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(a>=0?c=co.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):c=co.workspace.getConfiguration(void 0,r).get(s),c){let u=e[o].split(".");t(i,u)[u[u.length-1]]=gi(c)}}return i}};Wr.SyncConfigurationFeature=Zf});var Py=D(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.DidSaveTextDocumentFeature=Zt.WillSaveWaitUntilFeature=Zt.WillSaveFeature=Zt.DidChangeTextDocumentFeature=Zt.DidCloseTextDocumentFeature=Zt.DidOpenTextDocumentFeature=void 0;var dn=require("vscode"),je=K(),Ye=we(),uo=Qe(),eh=class extends Ye.TextDocumentEventFeature{constructor(e,t){super(e,dn.workspace.onDidOpenTextDocument,je.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,Ye.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:uo.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return je.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);dn.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&dn.languages.match(t,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(r,s):s(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}};Zt.DidOpenTextDocumentFeature=eh;var th=class extends Ye.TextDocumentEventFeature{constructor(e,t,r){super(e,dn.workspace.onDidCloseTextDocument,je.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,Ye.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return je.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:uo.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(dn.languages.match(t,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,s):s(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};Zt.DidCloseTextDocumentFeature=th;var nh=class extends Ye.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new dn.EventEmitter,this._onPendingChangeAdded=new dn.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=je.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return je.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==je.TextDocumentSyncKind.None&&this.register({id:uo.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=dn.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,r=e.document.version,i=[];for(let o of this._changeData.values())if(dn.languages.match(o.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let s=this._client.middleware;if(o.syncKind===je.TextDocumentSyncKind.Incremental){let a=async c=>{let u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,t,r);await this._client.sendNotification(je.DidChangeTextDocumentNotification.type,u),this.notificationSent(c.document,je.DidChangeTextDocumentNotification.type,u)};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}else if(o.syncKind===je.TextDocumentSyncKind.Full){let a=async c=>{let u=c.document.uri.toString();this._pendingTextDocumentChanges.set(u,c.document),this._onPendingChangeAdded.fire()};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}}return Promise.all(i).then(void 0,o=>{throw this._client.error(`Sending document notification ${je.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=je.TextDocumentSyncKind.None;else{this._syncKind=je.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===je.TextDocumentSyncKind.Full)break}}dispose(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=je.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(dn.languages.match(t.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==je.TextDocumentSyncKind.Full)switch(e){case je.TextDocumentSyncKind.Full:this._syncKind=e;break;case je.TextDocumentSyncKind.Incremental:this._syncKind===je.TextDocumentSyncKind.None&&(this._syncKind=je.TextDocumentSyncKind.Incremental);break}}};Zt.DidChangeTextDocumentFeature=nh;var rh=class extends Ye.TextDocumentEventFeature{constructor(e){super(e,dn.workspace.onWillSaveTextDocument,je.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,r)=>Ye.TextDocumentEventFeature.textDocumentFilter(t,r.document))}get registrationType(){return je.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:uo.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};Zt.WillSaveFeature=rh;var ih=class extends Ye.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return je.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:uo.generateUuid(),registerOptions:{documentSelector:t}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=dn.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(Ye.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=i=>this._client.sendRequest(je.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};Zt.WillSaveWaitUntilFeature=ih;var oh=class extends Ye.TextDocumentEventFeature{constructor(e){super(e,dn.workspace.onDidSaveTextDocument,je.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,Ye.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return je.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,Ye.ensure)((0,Ye.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:uo.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};Zt.DidSaveTextDocumentFeature=oh});var qy=D(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.CompletionItemFeature=void 0;var Nq=require("vscode"),me=K(),sh=we(),Iq=Qe(),Mq=[me.CompletionItemKind.Text,me.CompletionItemKind.Method,me.CompletionItemKind.Function,me.CompletionItemKind.Constructor,me.CompletionItemKind.Field,me.CompletionItemKind.Variable,me.CompletionItemKind.Class,me.CompletionItemKind.Interface,me.CompletionItemKind.Module,me.CompletionItemKind.Property,me.CompletionItemKind.Unit,me.CompletionItemKind.Value,me.CompletionItemKind.Enum,me.CompletionItemKind.Keyword,me.CompletionItemKind.Snippet,me.CompletionItemKind.Color,me.CompletionItemKind.File,me.CompletionItemKind.Reference,me.CompletionItemKind.Folder,me.CompletionItemKind.EnumMember,me.CompletionItemKind.Constant,me.CompletionItemKind.Struct,me.CompletionItemKind.Event,me.CompletionItemKind.Operator,me.CompletionItemKind.TypeParameter],ah=class extends sh.TextDocumentLanguageFeature{constructor(e){super(e,me.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,sh.ensure)((0,sh.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[me.MarkupKind.Markdown,me.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[me.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[me.InsertTextMode.asIs,me.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=me.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:Mq},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);!r||this.register({id:Iq.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,o=e.documentSelector,s={provideCompletionItems:(a,c,u,l)=>{let f=this._client,h=this._client.middleware,p=(g,C,b,R)=>f.sendRequest(me.CompletionRequest.type,f.code2ProtocolConverter.asCompletionParams(g,C,b),R).then(y=>R.isCancellationRequested?null:f.protocol2CodeConverter.asCompletionResult(y,i,R),y=>f.handleFailedRequest(me.CompletionRequest.type,R,y,null));return h.provideCompletionItem?h.provideCompletionItem(a,c,l,u,p):p(a,c,l,u)},resolveCompletionItem:e.resolveProvider?(a,c)=>{let u=this._client,l=this._client.middleware,f=(h,p)=>u.sendRequest(me.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(h,!!this.labelDetailsSupport.get(t)),p).then(g=>p.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(g),g=>u.handleFailedRequest(me.CompletionResolveRequest.type,p,g,h));return l.resolveCompletionItem?l.resolveCompletionItem(a,c,f):f(a,c)}:void 0};return[Nq.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...r),s]}};Ga.CompletionItemFeature=ah});var xy=D(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.HoverFeature=void 0;var jq=require("vscode"),Ds=K(),ch=we(),Aq=Qe(),uh=class extends ch.TextDocumentLanguageFeature{constructor(e){super(e,Ds.HoverRequest.type)}fillClientCapabilities(e){let t=(0,ch.ensure)((0,ch.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[Ds.MarkupKind.Markdown,Ds.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);!r||this.register({id:Aq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,o,s)=>{let a=this._client,c=(l,f,h)=>a.sendRequest(Ds.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asHover(p),p=>a.handleFailedRequest(Ds.HoverRequest.type,h,p,null)),u=a.middleware;return u.provideHover?u.provideHover(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return jq.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Va.HoverFeature=uh});var ky=D(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.DefinitionFeature=void 0;var Lq=require("vscode"),lh=K(),dh=we(),Hq=Qe(),fh=class extends dh.TextDocumentLanguageFeature{constructor(e){super(e,lh.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,dh.ensure)((0,dh.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);!r||this.register({id:Hq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,o,s)=>{let a=this._client,c=(l,f,h)=>a.sendRequest(lh.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,h),p=>a.handleFailedRequest(lh.DefinitionRequest.type,h,p,null)),u=a.middleware;return u.provideDefinition?u.provideDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return Lq.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Xa.DefinitionFeature=fh});var Oy=D(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.SignatureHelpFeature=void 0;var Ey=require("vscode"),Rs=K(),hh=we(),$q=Qe(),ph=class extends hh.TextDocumentLanguageFeature{constructor(e){super(e,Rs.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,hh.ensure)((0,hh.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Rs.MarkupKind.Markdown,Rs.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);!r||this.register({id:$q.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(r,i,o,s)=>{let a=this._client,c=(l,f,h,p)=>a.sendRequest(Rs.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(l,f,h),p).then(g=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(g,p),g=>a.handleFailedRequest(Rs.SignatureHelpRequest.type,p,g,null)),u=a.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(r,i,s,o,c):c(r,i,s,o)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return Ey.languages.registerSignatureHelpProvider(r,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return Ey.languages.registerSignatureHelpProvider(r,t,i)}}};Ja.SignatureHelpFeature=ph});var Fy=D(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.DocumentHighlightFeature=void 0;var Wq=require("vscode"),gh=K(),mh=we(),Uq=Qe(),vh=class extends mh.TextDocumentLanguageFeature{constructor(e){super(e,gh.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,mh.ensure)((0,mh.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);!r||this.register({id:Uq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,o,s)=>{let a=this._client,c=(l,f,h)=>a.sendRequest(gh.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(p,h),p=>a.handleFailedRequest(gh.DocumentHighlightRequest.type,h,p,null)),u=a.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(i,o,s,c):c(i,o,s)}};return[Wq.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Qa.DocumentHighlightFeature=vh});var Ch=D(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.DocumentSymbolFeature=sr.SupportedSymbolTags=sr.SupportedSymbolKinds=void 0;var zq=require("vscode"),Pe=K(),yh=we(),Kq=Qe();sr.SupportedSymbolKinds=[Pe.SymbolKind.File,Pe.SymbolKind.Module,Pe.SymbolKind.Namespace,Pe.SymbolKind.Package,Pe.SymbolKind.Class,Pe.SymbolKind.Method,Pe.SymbolKind.Property,Pe.SymbolKind.Field,Pe.SymbolKind.Constructor,Pe.SymbolKind.Enum,Pe.SymbolKind.Interface,Pe.SymbolKind.Function,Pe.SymbolKind.Variable,Pe.SymbolKind.Constant,Pe.SymbolKind.String,Pe.SymbolKind.Number,Pe.SymbolKind.Boolean,Pe.SymbolKind.Array,Pe.SymbolKind.Object,Pe.SymbolKind.Key,Pe.SymbolKind.Null,Pe.SymbolKind.EnumMember,Pe.SymbolKind.Struct,Pe.SymbolKind.Event,Pe.SymbolKind.Operator,Pe.SymbolKind.TypeParameter];sr.SupportedSymbolTags=[Pe.SymbolTag.Deprecated];var _h=class extends yh.TextDocumentLanguageFeature{constructor(e){super(e,Pe.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,yh.ensure)((0,yh.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:sr.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:sr.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);!r||this.register({id:Kq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(o,s)=>{let a=this._client,c=async(l,f)=>{try{let h=await a.sendRequest(Pe.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(l),f);if(f.isCancellationRequested||h===void 0||h===null)return null;if(h.length===0)return[];{let p=h[0];return Pe.DocumentSymbol.is(p)?await a.protocol2CodeConverter.asDocumentSymbols(h,f):await a.protocol2CodeConverter.asSymbolInformations(h,f)}}catch(h){return a.handleFailedRequest(Pe.DocumentSymbolRequest.type,f,h,null)}},u=a.middleware;return u.provideDocumentSymbols?u.provideDocumentSymbols(o,s,c):c(o,s)}},i=e.label!==void 0?{label:e.label}:void 0;return[zq.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,i),r]}};sr.DocumentSymbolFeature=_h});var Iy=D(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.WorkspaceSymbolFeature=void 0;var Bq=require("vscode"),Ss=K(),bh=we(),Ny=Ch(),Gq=Qe(),wh=class extends bh.WorkspaceFeature{constructor(e){super(e,Ss.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,bh.ensure)((0,bh.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Ny.SupportedSymbolKinds},t.tagSupport={valueSet:Ny.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:Gq.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let o=this._client,s=(c,u)=>o.sendRequest(Ss.WorkspaceSymbolRequest.type,{query:c},u).then(l=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(l,u),l=>o.handleFailedRequest(Ss.WorkspaceSymbolRequest.type,u,l,null)),a=o.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,s):s(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let o=this._client,s=(c,u)=>o.sendRequest(Ss.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(l=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(l),l=>o.handleFailedRequest(Ss.WorkspaceSymbolResolveRequest.type,u,l,null)),a=o.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,s):s(r,i)}:void 0};return[Bq.languages.registerWorkspaceSymbolProvider(t),t]}};Ya.WorkspaceSymbolFeature=wh});var My=D(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.ReferencesFeature=void 0;var Vq=require("vscode"),Dh=K(),Rh=we(),Xq=Qe(),Sh=class extends Rh.TextDocumentLanguageFeature{constructor(e){super(e,Dh.ReferencesRequest.type)}fillClientCapabilities(e){(0,Rh.ensure)((0,Rh.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);!r||this.register({id:Xq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,o,s,a)=>{let c=this._client,u=(f,h,p,g)=>c.sendRequest(Dh.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(f,h,p),g).then(C=>g.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(C,g),C=>c.handleFailedRequest(Dh.ReferencesRequest.type,g,C,null)),l=c.middleware;return l.provideReferences?l.provideReferences(i,o,s,a,u):u(i,o,s,a)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return Vq.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Za.ReferencesFeature=Sh});var jy=D(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.CodeActionFeature=void 0;var Jq=require("vscode"),fn=K(),Qq=Qe(),Th=we(),Ph=class extends Th.TextDocumentLanguageFeature{constructor(e){super(e,fn.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,Th.ensure)((0,Th.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[fn.CodeActionKind.Empty,fn.CodeActionKind.QuickFix,fn.CodeActionKind.Refactor,fn.CodeActionKind.RefactorExtract,fn.CodeActionKind.RefactorInline,fn.CodeActionKind.RefactorRewrite,fn.CodeActionKind.Source,fn.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);!r||this.register({id:Qq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,o,s,a)=>{let c=this._client,u=async(f,h,p,g)=>{let C={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(f),range:c.code2ProtocolConverter.asRange(h),context:await c.code2ProtocolConverter.asCodeActionContext(p,g)};return c.sendRequest(fn.CodeActionRequest.type,C,g).then(b=>g.isCancellationRequested||b===null||b===void 0?null:c.protocol2CodeConverter.asCodeActionResult(b,g),b=>c.handleFailedRequest(fn.CodeActionRequest.type,g,b,null))},l=c.middleware;return l.provideCodeActions?l.provideCodeActions(i,o,s,a,u):u(i,o,s,a)},resolveCodeAction:e.resolveProvider?(i,o)=>{let s=this._client,a=this._client.middleware,c=async(u,l)=>s.sendRequest(fn.CodeActionResolveRequest.type,await s.code2ProtocolConverter.asCodeAction(u,l),l).then(f=>l.isCancellationRequested?u:s.protocol2CodeConverter.asCodeAction(f,l),f=>s.handleFailedRequest(fn.CodeActionResolveRequest.type,l,f,u));return a.resolveCodeAction?a.resolveCodeAction(i,o,c):c(i,o)}:void 0};return[Jq.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};ec.CodeActionFeature=Ph});var Ly=D(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.CodeLensFeature=void 0;var Ay=require("vscode"),lo=K(),Yq=Qe(),Ts=we(),qh=class extends Ts.TextDocumentLanguageFeature{constructor(e){super(e,lo.CodeLensRequest.type)}fillClientCapabilities(e){(0,Ts.ensure)((0,Ts.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Ts.ensure)((0,Ts.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(lo.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);!i||this.register({id:Yq.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Ay.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,s)=>{let a=this._client,c=(l,f)=>a.sendRequest(lo.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(l),f).then(h=>f.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(h,f),h=>a.handleFailedRequest(lo.CodeLensRequest.type,f,h,null)),u=a.middleware;return u.provideCodeLenses?u.provideCodeLenses(o,s,c):c(o,s)},resolveCodeLens:e.resolveProvider?(o,s)=>{let a=this._client,c=(l,f)=>a.sendRequest(lo.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(l),f).then(h=>f.isCancellationRequested?l:a.protocol2CodeConverter.asCodeLens(h),h=>a.handleFailedRequest(lo.CodeLensResolveRequest.type,f,h,l)),u=a.middleware;return u.resolveCodeLens?u.resolveCodeLens(o,s,c):c(o,s)}:void 0};return[Ay.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};tc.CodeLensFeature=qh});var Hy=D(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.DocumentOnTypeFormattingFeature=Ur.DocumentRangeFormattingFeature=Ur.DocumentFormattingFeature=void 0;var nc=require("vscode"),wr=K(),Oh=Qe(),Dr=we(),Ps;(function(n){function e(t){let r=nc.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(Ps||(Ps={}));var xh=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,wr.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);!r||this.register({id:Oh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,o,s)=>{let a=this._client,c=(l,f,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),options:a.code2ProtocolConverter.asFormattingOptions(f,Ps.fromConfiguration(l))};return a.sendRequest(wr.DocumentFormattingRequest.type,p,h).then(g=>h.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(g,h),g=>a.handleFailedRequest(wr.DocumentFormattingRequest.type,h,g,null))},u=a.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(i,o,s,c):c(i,o,s)}};return[nc.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Ur.DocumentFormattingFeature=xh;var kh=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,wr.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);!r||this.register({id:Oh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,o,s,a)=>{let c=this._client,u=(f,h,p,g)=>{let C={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(f),range:c.code2ProtocolConverter.asRange(h),options:c.code2ProtocolConverter.asFormattingOptions(p,Ps.fromConfiguration(f))};return c.sendRequest(wr.DocumentRangeFormattingRequest.type,C,g).then(b=>g.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(b,g),b=>c.handleFailedRequest(wr.DocumentRangeFormattingRequest.type,g,b,null))},l=c.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(i,o,s,a,u):u(i,o,s,a)}};return[nc.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Ur.DocumentRangeFormattingFeature=kh;var Eh=class extends Dr.TextDocumentLanguageFeature{constructor(e){super(e,wr.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Dr.ensure)((0,Dr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);!r||this.register({id:Oh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(o,s,a,c,u)=>{let l=this._client,f=(p,g,C,b,R)=>{let y={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(p),position:l.code2ProtocolConverter.asPosition(g),ch:C,options:l.code2ProtocolConverter.asFormattingOptions(b,Ps.fromConfiguration(p))};return l.sendRequest(wr.DocumentOnTypeFormattingRequest.type,y,R).then(_=>R.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(_,R),_=>l.handleFailedRequest(wr.DocumentOnTypeFormattingRequest.type,R,_,null))},h=l.middleware;return h.provideOnTypeFormattingEdits?h.provideOnTypeFormattingEdits(o,s,a,c,u,f):f(o,s,a,c,u)}},i=e.moreTriggerCharacter||[];return[nc.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...i),r]}};Ur.DocumentOnTypeFormattingFeature=Eh});var Wy=D(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.RenameFeature=void 0;var Zq=require("vscode"),mi=K(),e0=Qe(),$y=wn(),Fh=we(),Nh=class extends Fh.TextDocumentLanguageFeature{constructor(e){super(e,mi.RenameRequest.type)}fillClientCapabilities(e){let t=(0,Fh.ensure)((0,Fh.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=mi.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);!r||($y.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:e0.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,o,s,a)=>{let c=this._client,u=(f,h,p,g)=>{let C={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(f),position:c.code2ProtocolConverter.asPosition(h),newName:p};return c.sendRequest(mi.RenameRequest.type,C,g).then(b=>g.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(b,g),b=>c.handleFailedRequest(mi.RenameRequest.type,g,b,null,!1))},l=c.middleware;return l.provideRenameEdits?l.provideRenameEdits(i,o,s,a,u):u(i,o,s,a)},prepareRename:e.prepareProvider?(i,o,s)=>{let a=this._client,c=(l,f,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),position:a.code2ProtocolConverter.asPosition(f)};return a.sendRequest(mi.PrepareRenameRequest.type,p,h).then(g=>h.isCancellationRequested?null:mi.Range.is(g)?a.protocol2CodeConverter.asRange(g):this.isDefaultBehavior(g)?g.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):g&&mi.Range.is(g.range)?{range:a.protocol2CodeConverter.asRange(g.range),placeholder:g.placeholder}:Promise.reject(new Error("The element can't be renamed.")),g=>{throw typeof g.message=="string"?new Error(g.message):new Error("The element can't be renamed.")})},u=a.middleware;return u.prepareRename?u.prepareRename(i,o,s,c):c(i,o,s)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return Zq.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&$y.boolean(t.defaultBehavior)}};rc.RenameFeature=Nh});var Uy=D(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.DocumentLinkFeature=void 0;var t0=require("vscode"),qs=K(),Ih=we(),n0=Qe(),Mh=class extends Ih.TextDocumentLanguageFeature{constructor(e){super(e,qs.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,Ih.ensure)((0,Ih.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);!r||this.register({id:n0.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,o)=>{let s=this._client,a=(u,l)=>s.sendRequest(qs.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(u),l).then(f=>l.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(f,l),f=>s.handleFailedRequest(qs.DocumentLinkRequest.type,l,f,null)),c=s.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,o,a):a(i,o)},resolveDocumentLink:e.resolveProvider?(i,o)=>{let s=this._client,a=(u,l)=>s.sendRequest(qs.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(u),l).then(f=>l.isCancellationRequested?u:s.protocol2CodeConverter.asDocumentLink(f),f=>s.handleFailedRequest(qs.DocumentLinkResolveRequest.type,l,f,u)),c=s.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,o,a):a(i,o)}:void 0};return[t0.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};ic.DocumentLinkFeature=Mh});var Ky=D(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.ExecuteCommandFeature=void 0;var r0=require("vscode"),jh=K(),i0=Qe(),zy=we(),Ah=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return jh.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,zy.ensure)((0,zy.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:i0.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.middleware,i=(o,s)=>{let a={command:o,arguments:s};return t.sendRequest(jh.ExecuteCommandRequest.type,a).then(void 0,c=>t.handleFailedRequest(jh.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(r0.commands.registerCommand(s,(...a)=>r.executeCommand?r.executeCommand(s,a,i):i(s,a)));this._commands.set(e.id,o)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};oc.ExecuteCommandFeature=Ah});var By=D(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.FileSystemWatcherFeature=void 0;var o0=require("vscode"),vi=K(),sc=we(),Lh=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return vi.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,sc.ensure)((0,sc.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,sc.ensure)((0,sc.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let o=!0,s=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(o=(r.kind&vi.WatchKind.Create)!==0,s=(r.kind&vi.WatchKind.Change)!==0,a=(r.kind&vi.WatchKind.Delete)!==0);let c=o0.workspace.createFileSystemWatcher(i,!o,!s,!a);this.hookListeners(c,o,s,a,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,o){t&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:vi.FileChangeType.Created}),null,o),r&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:vi.FileChangeType.Changed}),null,o),i&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:vi.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};ac.FileSystemWatcherFeature=Lh});var Gy=D(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.ColorProviderFeature=void 0;var s0=require("vscode"),xs=K(),Hh=we(),$h=class extends Hh.TextDocumentLanguageFeature{constructor(e){super(e,xs.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Hh.ensure)((0,Hh.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=>{let a=this._client,c=(l,f,h)=>{let p={color:l,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f.document),range:a.code2ProtocolConverter.asRange(f.range)};return a.sendRequest(xs.ColorPresentationRequest.type,p,h).then(g=>h.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(g,h),g=>a.handleFailedRequest(xs.ColorPresentationRequest.type,h,g,null))},u=a.middleware;return u.provideColorPresentations?u.provideColorPresentations(i,o,s,c):c(i,o,s)},provideDocumentColors:(i,o)=>{let s=this._client,a=(u,l)=>{let f={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(u)};return s.sendRequest(xs.DocumentColorRequest.type,f,l).then(h=>l.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(h,l),h=>s.handleFailedRequest(xs.DocumentColorRequest.type,l,h,null))},c=s.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,o,a):a(i,o)}};return[s0.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};cc.ColorProviderFeature=$h});var Vy=D(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.ImplementationFeature=void 0;var a0=require("vscode"),Wh=K(),Uh=we(),zh=class extends Uh.TextDocumentLanguageFeature{constructor(e){super(e,Wh.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,Uh.ensure)((0,Uh.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=>{let a=this._client,c=(l,f,h)=>a.sendRequest(Wh.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,h),p=>a.handleFailedRequest(Wh.ImplementationRequest.type,h,p,null)),u=a.middleware;return u.provideImplementation?u.provideImplementation(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return a0.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};uc.ImplementationFeature=zh});var Xy=D(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.TypeDefinitionFeature=void 0;var c0=require("vscode"),Kh=K(),ks=we(),Bh=class extends ks.TextDocumentLanguageFeature{constructor(e){super(e,Kh.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,ks.ensure)((0,ks.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,ks.ensure)((0,ks.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=>{let a=this._client,c=(l,f,h)=>a.sendRequest(Kh.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,h),p=>a.handleFailedRequest(Kh.TypeDefinitionRequest.type,h,p,null)),u=a.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return c0.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};lc.TypeDefinitionFeature=Bh});var Jy=D(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.WorkspaceFoldersFeature=fo.arrayDiff=void 0;var u0=Qe(),dc=require("vscode"),Es=K();function Gh(n,e){if(n!=null)return n[e]}function Vh(n,e){return n.filter(t=>e.indexOf(t)<0)}fo.arrayDiff=Vh;var Xh=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Es.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=dc.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Es.WorkspaceFoldersRequest.type,o=>{let s=()=>{let c=dc.workspace.workspaceFolders;return c===void 0?null:c.map(l=>this.asProtocol(l))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Gh(Gh(Gh(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=u0.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let r=Vh(this._initialFolders,e),i=Vh(e,this._initialFolders);(i.length>0||r.length>0)&&(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(r=>{this._client.error(`Sending notification ${Es.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(Es.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=dc.workspace.onDidChangeWorkspaceFolders(o=>{let s=u=>this.doSendEvent(u.added,u.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(u=>{this._client.error(`Sending notification ${Es.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(t,i),this.sendInitialEvent(dc.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};fo.WorkspaceFoldersFeature=Xh});var Qy=D(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.FoldingRangeFeature=void 0;var l0=require("vscode"),ho=K(),Jh=we(),Qh=class extends Jh.TextDocumentLanguageFeature{constructor(e){super(e,ho.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Jh.ensure)((0,Jh.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[ho.FoldingRangeKind.Comment,ho.FoldingRangeKind.Imports,ho.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=>{let a=this._client,c=(l,f,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l)};return a.sendRequest(ho.FoldingRangeRequest.type,p,h).then(g=>h.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(g,h),g=>a.handleFailedRequest(ho.FoldingRangeRequest.type,h,g,null))},u=a.middleware;return u.provideFoldingRanges?u.provideFoldingRanges(i,o,s,c):c(i,o,s)}};return[l0.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};fc.FoldingRangeFeature=Qh});var Yy=D(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.DeclarationFeature=void 0;var d0=require("vscode"),Yh=K(),Zh=we(),ep=class extends Zh.TextDocumentLanguageFeature{constructor(e){super(e,Yh.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,Zh.ensure)((0,Zh.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=>{let a=this._client,c=(l,f,h)=>a.sendRequest(Yh.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(p,h),p=>a.handleFailedRequest(Yh.DeclarationRequest.type,h,p,null)),u=a.middleware;return u.provideDeclaration?u.provideDeclaration(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return d0.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};hc.DeclarationFeature=ep});var Zy=D(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.SelectionRangeFeature=void 0;var f0=require("vscode"),tp=K(),np=we(),rp=class extends np.TextDocumentLanguageFeature{constructor(e){super(e,tp.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,np.ensure)((0,np.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=>{let a=this._client,c=async(l,f,h)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:await a.code2ProtocolConverter.asPositions(f,h)};return a.sendRequest(tp.SelectionRangeRequest.type,p,h).then(g=>h.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(g,h),g=>a.handleFailedRequest(tp.SelectionRangeRequest.type,h,g,null))},u=a.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return f0.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};pc.SelectionRangeFeature=rp});var t_=D(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.ProgressFeature=void 0;var e_=K(),h0=xf();function p0(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var ip=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:e_.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){p0(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new h0.ProgressPart(this._client,i.token,t))};e.onRequest(e_.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};gc.ProgressFeature=ip});var n_=D(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.CallHierarchyFeature=void 0;var g0=require("vscode"),yi=K(),op=we(),sp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(yi.CallHierarchyPrepareRequest.type,l,u).then(f=>u.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(f,u),f=>i.handleFailedRequest(yi.CallHierarchyPrepareRequest.type,u,f,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(yi.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,a),u=>r.handleFailedRequest(yi.CallHierarchyIncomingCallsRequest.type,a,u,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(yi.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,a),u=>r.handleFailedRequest(yi.CallHierarchyOutgoingCallsRequest.type,a,u,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},ap=class extends op.TextDocumentLanguageFeature{constructor(e){super(e,yi.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,r=(0,op.ensure)((0,op.ensure)(t,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new sp(t);return[g0.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};mc.CallHierarchyFeature=ap});var r_=D(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.SemanticTokensFeature=void 0;var vc=require("vscode"),oe=K(),Os=we(),m0=wn(),cp=class extends Os.TextDocumentLanguageFeature{constructor(e){super(e,oe.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,Os.ensure)((0,Os.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[oe.SemanticTokenTypes.namespace,oe.SemanticTokenTypes.type,oe.SemanticTokenTypes.class,oe.SemanticTokenTypes.enum,oe.SemanticTokenTypes.interface,oe.SemanticTokenTypes.struct,oe.SemanticTokenTypes.typeParameter,oe.SemanticTokenTypes.parameter,oe.SemanticTokenTypes.variable,oe.SemanticTokenTypes.property,oe.SemanticTokenTypes.enumMember,oe.SemanticTokenTypes.event,oe.SemanticTokenTypes.function,oe.SemanticTokenTypes.method,oe.SemanticTokenTypes.macro,oe.SemanticTokenTypes.keyword,oe.SemanticTokenTypes.modifier,oe.SemanticTokenTypes.comment,oe.SemanticTokenTypes.string,oe.SemanticTokenTypes.number,oe.SemanticTokenTypes.regexp,oe.SemanticTokenTypes.operator,oe.SemanticTokenTypes.decorator],t.tokenModifiers=[oe.SemanticTokenModifiers.declaration,oe.SemanticTokenModifiers.definition,oe.SemanticTokenModifiers.readonly,oe.SemanticTokenModifiers.static,oe.SemanticTokenModifiers.deprecated,oe.SemanticTokenModifiers.abstract,oe.SemanticTokenModifiers.async,oe.SemanticTokenModifiers.modification,oe.SemanticTokenModifiers.documentation,oe.SemanticTokenModifiers.defaultLibrary],t.formats=[oe.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,Os.ensure)((0,Os.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(oe.SemanticTokensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=m0.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,o=new vc.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(p,g)=>{let C=this._client,b=C.middleware,R=(y,_)=>{let T={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(y)};return C.sendRequest(oe.SemanticTokensRequest.type,T,_).then(N=>_.isCancellationRequested?null:C.protocol2CodeConverter.asSemanticTokens(N,_),N=>C.handleFailedRequest(oe.SemanticTokensRequest.type,_,N,null))};return b.provideDocumentSemanticTokens?b.provideDocumentSemanticTokens(p,g,R):R(p,g)},provideDocumentSemanticTokensEdits:i?(p,g,C)=>{let b=this._client,R=b.middleware,y=(_,T,N)=>{let V={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(_),previousResultId:T};return b.sendRequest(oe.SemanticTokensDeltaRequest.type,V,N).then(async U=>N.isCancellationRequested?null:oe.SemanticTokens.is(U)?await b.protocol2CodeConverter.asSemanticTokens(U,N):await b.protocol2CodeConverter.asSemanticTokensEdits(U,N),U=>b.handleFailedRequest(oe.SemanticTokensDeltaRequest.type,N,U,null))};return R.provideDocumentSemanticTokensEdits?R.provideDocumentSemanticTokensEdits(p,g,C,y):y(p,g,C)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(p,g,C)=>{let b=this._client,R=b.middleware,y=(_,T,N)=>{let V={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(_),range:b.code2ProtocolConverter.asRange(T)};return b.sendRequest(oe.SemanticTokensRangeRequest.type,V,N).then(U=>N.isCancellationRequested?null:b.protocol2CodeConverter.asSemanticTokens(U,N),U=>b.handleFailedRequest(oe.SemanticTokensRangeRequest.type,N,U,null))};return R.provideDocumentRangeSemanticTokens?R.provideDocumentRangeSemanticTokens(p,g,C,y):y(p,g,C)}}:void 0,u=[],l=this._client,f=l.protocol2CodeConverter.asSemanticTokensLegend(e.legend),h=l.protocol2CodeConverter.asDocumentSelector(t);return s!==void 0&&u.push(vc.languages.registerDocumentSemanticTokensProvider(h,s,f)),c!==void 0&&u.push(vc.languages.registerDocumentRangeSemanticTokensProvider(h,c,f)),[new vc.Disposable(()=>u.forEach(p=>p.dispose())),{range:c,full:s,onDidChangeSemanticTokensEmitter:o}]}};yc.SemanticTokensFeature=cp});var s_=D(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.WillDeleteFilesFeature=en.WillRenameFilesFeature=en.WillCreateFilesFeature=en.DidDeleteFilesFeature=en.DidRenameFilesFeature=en.DidCreateFilesFeature=void 0;var Sn=require("vscode"),v0=Wa(),Rr=K(),y0=Qe();function i_(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function _0(n,e){return n[e]}function o_(n,e,t){n[e]=t}var Sr=class{constructor(e,t,r,i,o){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=i_(i_(e,"workspace"),"fileOperations");o_(t,"dynamicRegistration",!0),o_(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?_0(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:y0.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new v0.Minimatch(r.pattern.glob,Sr.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return Sr.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=>{let s=t(o),a=s.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let u of c)if(!(u.scheme!==void 0&&u.scheme!==s.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;let l=await this.getFileType(s);if(l===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(l===Sn.FileType.File&&u.kind===Rr.FileOperationPatternKind.file||l===Sn.FileType.Directory&&u.kind===Rr.FileOperationPatternKind.folder)return!0}else if(u.kind===Rr.FileOperationPatternKind.folder&&await Sr.getFileType(s)===Sn.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=>r[s]);return{...e,files:i}}static async getFileType(e){try{return(await Sn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},_c=class extends Sr{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},Cc=class extends _c{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await Sr.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},up=class extends _c{constructor(e){super(e,Sn.workspace.onDidCreateFiles,Rr.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};en.DidCreateFilesFeature=up;var lp=class extends Cc{constructor(e){super(e,Sn.workspace.onDidRenameFiles,Rr.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Sn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};en.DidRenameFilesFeature=lp;var dp=class extends Cc{constructor(e){super(e,Sn.workspace.onDidDeleteFiles,Rr.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Sn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};en.DidDeleteFilesFeature=dp;var Fs=class extends Sr{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},fp=class extends Fs{constructor(e){super(e,Sn.workspace.onWillCreateFiles,Rr.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};en.WillCreateFilesFeature=fp;var hp=class extends Fs{constructor(e){super(e,Sn.workspace.onWillRenameFiles,Rr.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};en.WillRenameFilesFeature=hp;var pp=class extends Fs{constructor(e){super(e,Sn.workspace.onWillDeleteFiles,Rr.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};en.WillDeleteFilesFeature=pp});var a_=D(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.LinkedEditingFeature=void 0;var C0=require("vscode"),gp=K(),mp=we(),vp=class extends mp.TextDocumentLanguageFeature{constructor(e){super(e,gp.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,mp.ensure)((0,mp.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=>{let a=this._client,c=(l,f,h)=>a.sendRequest(gp.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,f),h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(p,h),p=>a.handleFailedRequest(gp.LinkedEditingRangeRequest.type,h,p,null)),u=a.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return C0.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};bc.LinkedEditingFeature=vp});var c_=D(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.TypeHierarchyFeature=void 0;var b0=require("vscode"),_i=K(),yp=we(),_p=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,u)=>{let l=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(_i.TypeHierarchyPrepareRequest.type,l,u).then(f=>u.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(f,u),f=>i.handleFailedRequest(_i.TypeHierarchyPrepareRequest.type,u,f,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(_i.TypeHierarchySupertypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(_i.TypeHierarchySupertypesRequest.type,a,u,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(_i.TypeHierarchySubtypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>r.handleFailedRequest(_i.TypeHierarchySubtypesRequest.type,a,u,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},Cp=class extends yp.TextDocumentLanguageFeature{constructor(e){super(e,_i.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,yp.ensure)((0,yp.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new _p(t);return[b0.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};wc.TypeHierarchyFeature=Cp});var l_=D(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.InlineValueFeature=void 0;var u_=require("vscode"),Dc=K(),Ns=we(),bp=class extends Ns.TextDocumentLanguageFeature{constructor(e){super(e,Dc.InlineValueRequest.type)}fillClientCapabilities(e){(0,Ns.ensure)((0,Ns.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Ns.ensure)((0,Ns.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(Dc.InlineValueRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new u_.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,c)=>{let u=this._client,l=(h,p,g,C)=>{let b={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(h),range:u.code2ProtocolConverter.asRange(p),context:u.code2ProtocolConverter.asInlineValueContext(g)};return u.sendRequest(Dc.InlineValueRequest.type,b,C).then(R=>C.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(R,C),R=>u.handleFailedRequest(Dc.InlineValueRequest.type,C,R,null))},f=u.middleware;return f.provideInlineValues?f.provideInlineValues(o,s,a,c,l):l(o,s,a,c)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,t){return u_.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Rc.InlineValueFeature=bp});var f_=D(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.InlayHintsFeature=void 0;var d_=require("vscode"),po=K(),Is=we(),wp=class extends Is.TextDocumentLanguageFeature{constructor(e){super(e,po.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,Is.ensure)((0,Is.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Is.ensure)((0,Is.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(po.InlayHintRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(t,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new d_.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(o,s,a)=>{let c=this._client,u=async(f,h,p)=>{let g={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(f),range:c.code2ProtocolConverter.asRange(h)};try{let C=await c.sendRequest(po.InlayHintRequest.type,g,p);return p.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(C,p)}catch(C){return c.handleFailedRequest(po.InlayHintRequest.type,p,C,null)}},l=c.middleware;return l.provideInlayHints?l.provideInlayHints(o,s,a,u):u(o,s,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(o,s)=>{let a=this._client,c=async(l,f)=>{try{let h=await a.sendRequest(po.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(l),f);if(f.isCancellationRequested)return null;let p=a.protocol2CodeConverter.asInlayHint(h,f);return f.isCancellationRequested?null:p}catch(h){return a.handleFailedRequest(po.InlayHintResolveRequest.type,f,h,null)}},u=a.middleware;return u.resolveInlayHint?u.resolveInlayHint(o,s,c):c(o,s)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,t){return d_.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Sc.InlayHintsFeature=wp});var Tp=D(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.ProposedFeatures=ze.BaseLanguageClient=ze.MessageTransports=ze.SuspendMode=ze.State=ze.CloseAction=ze.ErrorAction=ze.RevealOutputChannelOn=void 0;var ke=require("vscode"),M=K(),w0=Bv(),D0=Xv(),ar=wn(),Tc=Ia(),h_=Qe(),R0=xf(),Kn=we(),S0=Xf(),p_=Ry(),g_=Ty(),go=Py(),T0=qy(),P0=xy(),q0=ky(),x0=Oy(),k0=Fy(),E0=Ch(),O0=Iy(),F0=My(),N0=jy(),I0=Ly(),Dp=Hy(),M0=Wy(),j0=Uy(),A0=Ky(),L0=By(),H0=Gy(),$0=Vy(),W0=Xy(),U0=Jy(),z0=Qy(),K0=Yy(),B0=Zy(),G0=t_(),V0=n_(),X0=r_(),mo=s_(),J0=a_(),Q0=c_(),Y0=l_(),Z0=f_(),Ms;(function(n){n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(Ms=ze.RevealOutputChannelOn||(ze.RevealOutputChannelOn={}));var qc;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(qc=ze.ErrorAction||(ze.ErrorAction={}));var Ci;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(Ci=ze.CloseAction||(ze.CloseAction={}));var Pc;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(Pc=ze.State||(ze.State={}));var ex;(function(n){n.off="off",n.on="on"})(ex=ze.SuspendMode||(ze.SuspendMode={}));var Rp=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:qc.Continue}:{action:qc.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Ci.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Ci.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Ci.Restart})}},pe;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(pe||(pe={}));var tx;(function(n){function e(t){return t&&M.MessageReader.is(t.reader)&&M.MessageWriter.is(t.writer)}n.is=e})(tx=ze.MessageTransports||(ze.MessageTransports={}));var Tr=class{constructor(e,t,r){this._traceFormat=M.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new Tc.Semaphore(1),this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??Ms.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=pe.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new Tc.Semaphore(1),this._pendingChangeDelayer=new Tc.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new Tc.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new M.Emitter,this._stateChangeEmitter=new M.Emitter,this._trace=M.Trace.Off,this._tracer={log:(o,s)=>{ar.string(o)?this.logTrace(o,s):this.logObjectTrace(o)}},this._c2p=w0.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=D0.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=ke.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case pe.Starting:return Pc.Starting;case pe.Running:return Pc.Running;default:return Pc.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===pe.StartFailed||this.$state===pe.Stopping||this.$state===pe.Stopped)return Promise.reject(new M.ResponseError(M.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();return this._didChangeTextDocumentFeature.syncKind===M.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r),r.sendRequest(e,...t)}onRequest(e,t){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,t)),o={dispose:()=>{let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),o={dispose:()=>{this._pendingRequestHandlers.delete(r);let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),o.dispose()}}}async sendNotification(e,t){if(this.$state===pe.StartFailed||this.$state===pe.Stopping||this.$state===pe.Stopped)return Promise.reject(new M.ResponseError(M.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===M.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===M.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let o=await this.$start();return r&&await this.sendPendingFullTextDocumentChanges(o),i!==void 0&&this._pendingOpenNotifications.delete(i),o.sendNotification(e,t)}onNotification(e,t){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,t)),o={dispose:()=>{let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),o={dispose:()=>{this._pendingNotificationHandlers.delete(r);let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),o.dispose()}}}async sendProgress(e,t,r){if(this.$state===pe.StartFailed||this.$state===pe.Stopping||this.$state===pe.Stopped)return Promise.reject(new M.ResponseError(M.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});let i=this.activeConnection(),o,s=this._clientOptions.middleware?.handleWorkDoneProgress,a=M.WorkDoneProgress.is(e)&&s!==void 0?c=>{s(t,c,()=>r(c))}:r;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,a)),o={dispose:()=>{let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Rp(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof M.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?ar.string(e.stack)?e.stack:e.message:ar.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=Ms.Info&&this.showNotificationMessage(M.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=Ms.Warn&&this.showNotificationMessage(M.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=Ms.Error)&&this.showNotificationMessage(M.MessageType.Error,e)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===M.MessageType.Error?ke.window.showErrorMessage:e===M.MessageType.Warning?ke.window.showWarningMessage:ke.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===pe.Initial||this.$state===pe.Stopping||this.$state===pe.Stopped}needsStop(){return this.$state===pe.Starting||this.$state===pe.Running}activeConnection(){return this.$state===pe.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===pe.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===pe.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?ke.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):ke.languages.createDiagnosticCollection());for(let[i,o]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,o);for(let[i,o]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,o);for(let[i,o]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,o);this.$state=pe.Starting;try{let i=await this.createConnection();i.onNotification(M.LogMessageNotification.type,o=>{switch(o.type){case M.MessageType.Error:this.error(o.message,void 0,!1);break;case M.MessageType.Warning:this.warn(o.message,void 0,!1);break;case M.MessageType.Info:this.info(o.message,void 0,!1);break;default:this.outputChannel.appendLine(o.message)}}),i.onNotification(M.ShowMessageNotification.type,o=>{switch(o.type){case M.MessageType.Error:ke.window.showErrorMessage(o.message);break;case M.MessageType.Warning:ke.window.showWarningMessage(o.message);break;case M.MessageType.Info:ke.window.showInformationMessage(o.message);break;default:ke.window.showInformationMessage(o.message)}}),i.onRequest(M.ShowMessageRequest.type,o=>{let s;switch(o.type){case M.MessageType.Error:s=ke.window.showErrorMessage;break;case M.MessageType.Warning:s=ke.window.showWarningMessage;break;case M.MessageType.Info:s=ke.window.showInformationMessage;break;default:s=ke.window.showInformationMessage}let a=o.actions||[];return s(o.message,...a)}),i.onNotification(M.TelemetryEventNotification.type,o=>{this._telemetryEmitter.fire(o)}),i.onRequest(M.ShowDocumentRequest.type,async o=>{let s=async c=>{let u=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await ke.env.openExternal(u)};{let l={};return c.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?l.preserveFocus=!0:c.takeFocus===!0&&(l.preserveFocus=!1),await ke.window.showTextDocument(u,l),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(o,s):s(o)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=pe.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,o)=>{e=i,t=o}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:ke.env.appName,version:ke.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(ke.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ar.func(t)?t():t,trace:M.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=h_.generateUuid(),a=new R0.ProgressPart(e,s);o.workDoneToken=s;try{let c=await this.doInitialize(e,o);return a.done(),c}catch(c){throw a.cancel(),c}}else return this.doInitialize(e,o)}async doInitialize(e,t){try{let r=await e.initialize(t);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==M.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=pe.Running;let i;ar.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===M.TextDocumentSyncKind.None?i={openClose:!1,change:M.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(M.PublishDiagnosticsNotification.type,o=>this.handleDiagnostics(o)),e.onRequest(M.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(M.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(M.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o));for(let[o,s]of this._pendingNotificationHandlers)this._notificationDisposables.set(o,e.onNotification(o,s));this._pendingNotificationHandlers.clear();for(let[o,s]of this._pendingRequestHandlers)this._requestDisposables.set(o,e.onRequest(o,s));this._pendingRequestHandlers.clear();for(let[o,s]of this._pendingProgressHandlers)this._progressDisposables.set(o,e.onProgress(s.type,o,s.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(M.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof M.ResponseError&&r.data&&r.data.retry?ke.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&ke.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=ke.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===pe.Stopped||this.$state===pe.Initial)return;if(this.$state===pe.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==pe.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=pe.Stopping,this.cleanUp(e);let i=new Promise(s=>{(0,M.RAL)().timer.setTimeout(s,t)}),o=(async s=>(await s.shutdown(),await s.exit(),s))(r);return this._onStop=Promise.race([i,o]).then(s=>{if(s!==void 0)s.end(),s.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},s=>{throw this.error("Stopping server failed",s,!1),s}).finally(()=>{this.$state=pe.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let r of t)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=>{await t.sendNotification(M.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=>{t.error("Notify file events failed.",o)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let r of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(M.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,M.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,M.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,r]=e.value;this._diagnosticQueue.delete(t);let i=new ke.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(o=>{if(!i.token.isCancellationRequested){let s=this._p2c.asUri(t),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(s,o,(c,u)=>this.setDiagnostics(c,u)):this.setDiagnostics(s,o)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}getLocale(){return ke.env.language}async $start(){if(this.$state===pe.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,o,s)=>{this.handleConnectionError(i,o,s).catch(a=>this.error("Handling connection error failed",a))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=nx(r.reader,r.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===pe.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Ci.DoNotRestart};if(this.$state!==pe.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Ci.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===pe.Starting?this.$state=pe.StartFailed:this.$state=pe.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Ci.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=pe.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,r){let i=await this._clientOptions.errorHandler.error(e,t,r);i.action===qc.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)}))}hookConfigurationChanged(e){this._listeners.push(ke.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let r=ke.workspace.getConfiguration(this._id),i=M.Trace.Off,o=M.TraceFormat.Text;if(r){let s=r.get("trace.server","off");typeof s=="string"?i=M.Trace.fromString(s):(i=M.Trace.fromString(r.get("trace.server.verbosity","off")),o=M.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(s=>{this.error("Updating trace failed with error",s,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;ar.array(t)?r=t:r=[t],r&&this._dynamicFeatures.get(M.DidChangeWatchedFilesNotification.type.method).registerRaw(h_.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),Kn.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(M.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof p_.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new g_.ConfigurationFeature(this)),this.registerFeature(new go.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new go.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new go.WillSaveFeature(this)),this.registerFeature(new go.WillSaveWaitUntilFeature(this)),this.registerFeature(new go.DidSaveTextDocumentFeature(this)),this.registerFeature(new go.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new L0.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new T0.CompletionItemFeature(this)),this.registerFeature(new P0.HoverFeature(this)),this.registerFeature(new x0.SignatureHelpFeature(this)),this.registerFeature(new q0.DefinitionFeature(this)),this.registerFeature(new F0.ReferencesFeature(this)),this.registerFeature(new k0.DocumentHighlightFeature(this)),this.registerFeature(new E0.DocumentSymbolFeature(this)),this.registerFeature(new O0.WorkspaceSymbolFeature(this)),this.registerFeature(new N0.CodeActionFeature(this)),this.registerFeature(new I0.CodeLensFeature(this)),this.registerFeature(new Dp.DocumentFormattingFeature(this)),this.registerFeature(new Dp.DocumentRangeFormattingFeature(this)),this.registerFeature(new Dp.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new M0.RenameFeature(this)),this.registerFeature(new j0.DocumentLinkFeature(this)),this.registerFeature(new A0.ExecuteCommandFeature(this)),this.registerFeature(new g_.SyncConfigurationFeature(this)),this.registerFeature(new W0.TypeDefinitionFeature(this)),this.registerFeature(new $0.ImplementationFeature(this)),this.registerFeature(new H0.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new U0.WorkspaceFoldersFeature(this)),this.registerFeature(new z0.FoldingRangeFeature(this)),this.registerFeature(new K0.DeclarationFeature(this)),this.registerFeature(new B0.SelectionRangeFeature(this)),this.registerFeature(new G0.ProgressFeature(this)),this.registerFeature(new V0.CallHierarchyFeature(this)),this.registerFeature(new X0.SemanticTokensFeature(this)),this.registerFeature(new J0.LinkedEditingFeature(this)),this.registerFeature(new mo.DidCreateFilesFeature(this)),this.registerFeature(new mo.DidRenameFilesFeature(this)),this.registerFeature(new mo.DidDeleteFilesFeature(this)),this.registerFeature(new mo.WillCreateFilesFeature(this)),this.registerFeature(new mo.WillRenameFilesFeature(this)),this.registerFeature(new mo.WillDeleteFilesFeature(this)),this.registerFeature(new Q0.TypeHierarchyFeature(this)),this.registerFeature(new Y0.InlineValueFeature(this)),this.registerFeature(new Z0.InlayHintsFeature(this)),this.registerFeature(new S0.DiagnosticFeature(this)),this.registerFeature(new p_.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(m_.createAll(this))}fillInitializeParams(e){for(let t of this._features)ar.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Kn.ensure)(e,"workspace").applyEdit=!0;let t=(0,Kn.ensure)((0,Kn.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[M.ResourceOperationKind.Create,M.ResourceOperationKind.Rename,M.ResourceOperationKind.Delete],t.failureHandling=M.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,Kn.ensure)((0,Kn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[M.DiagnosticTag.Unnecessary,M.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,Kn.ensure)(e,"window"),o=(0,Kn.ensure)(i,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let s=(0,Kn.ensure)(i,"showDocument");s.support=!0;let a=(0,Kn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Tr.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)ar.func(r.preInitialize)&&r.preInitialize(this._capabilities,t);for(let r of this._features)r.initialize(this._capabilities,t)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let r=this._dynamicFeatures.get(t.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let o={id:t.id,registerOptions:i};try{r.register(o)}catch(s){return Promise.reject(s)}}}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let r=this._dynamicFeatures.get(t.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));r.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;ke.workspace.textDocuments.forEach(s=>i.set(s.uri.toString(),s));let o=!1;if(t.documentChanges){for(let s of t.documentChanges)if(M.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let a=this._p2c.asUri(s.textDocument.uri).toString(),c=i.get(a);if(c&&c.version!==s.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):ar.asPromise(ke.workspace.applyEdit(r).then(s=>({applied:s})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof M.ResponseError){if(r.code===M.ErrorCodes.PendingResponseRejected||r.code===M.ErrorCodes.ConnectionInactive)return i;if(r.code===M.LSPErrorCodes.RequestCancelled||r.code===M.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw r.data!==void 0?new Kn.LSPCancellationError(r.data):new ke.CancellationError}else if(r.code===M.LSPErrorCodes.ContentModified){if(Tr.RequestsToCancelOnContentModified.has(e.method)||Tr.CancellableResolveCalls.has(e.method))throw new ke.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};ze.BaseLanguageClient=Tr;Tr.RequestsToCancelOnContentModified=new Set([M.SemanticTokensRequest.method,M.SemanticTokensRangeRequest.method,M.SemanticTokensDeltaRequest.method]);Tr.CancellableResolveCalls=new Set([M.CompletionResolveRequest.method,M.CodeLensResolveRequest.method,M.CodeActionResolveRequest.method,M.InlayHintResolveRequest.method,M.DocumentLinkResolveRequest.method,M.WorkspaceSymbolResolveRequest.method]);var Sp=class{error(e){(0,M.RAL)().console.error(e)}warn(e){(0,M.RAL)().console.warn(e)}info(e){(0,M.RAL)().console.info(e)}log(e){(0,M.RAL)().console.log(e)}};function nx(n,e,t,r,i){let o=new Sp,s=(0,M.createProtocolConnection)(n,e,o,i);return s.onError(c=>{t(c[0],c[1],c[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:s.sendRequest,onRequest:s.onRequest,hasPendingResponse:s.hasPendingResponse,sendNotification:s.sendNotification,onNotification:s.onNotification,onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(c,u,l)=>{let f={sendNotification:!1,traceFormat:M.TraceFormat.Text};return l===void 0?s.trace(c,u,f):(ar.boolean(l),s.trace(c,u,l))},initialize:c=>s.sendRequest(M.InitializeRequest.type,c),shutdown:()=>s.sendRequest(M.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(M.ExitNotification.type),end:()=>s.end(),dispose:()=>s.dispose()}}var m_;(function(n){function e(t){return[]}n.createAll=e})(m_=ze.ProposedFeatures||(ze.ProposedFeatures={}))});var y_=D(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.terminate=void 0;var v_=require("child_process"),rx=require("path"),ix=process.platform==="win32",ox=process.platform==="darwin",sx=process.platform==="linux";function ax(n,e){if(ix)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),v_.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],i),!0}catch{return!1}else if(sx||ox)try{var t=(0,rx.join)(__dirname,"terminateProcess.sh"),r=v_.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill("SIGKILL"),!0}xc.terminate=ax});var js=D((dM,__)=>{"use strict";__.exports=K()});var As=D((fM,C_)=>{var cx="2.0.0",ux=Number.MAX_SAFE_INTEGER||9007199254740991,lx=16;C_.exports={SEMVER_SPEC_VERSION:cx,MAX_LENGTH:256,MAX_SAFE_INTEGER:ux,MAX_SAFE_COMPONENT_LENGTH:lx}});var Ls=D((hM,b_)=>{var dx=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};b_.exports=dx});var bi=D((zr,w_)=>{var{MAX_SAFE_COMPONENT_LENGTH:Pp}=As(),fx=Ls();zr=w_.exports={};var hx=zr.re=[],B=zr.src=[],G=zr.t={},px=0,ue=(n,e,t)=>{let r=px++;fx(n,r,e),G[n]=r,B[r]=e,hx[r]=new RegExp(e,t?"g":void 0)};ue("NUMERICIDENTIFIER","0|[1-9]\\d*");ue("NUMERICIDENTIFIERLOOSE","[0-9]+");ue("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ue("MAINVERSION",`(${B[G.NUMERICIDENTIFIER]})\\.(${B[G.NUMERICIDENTIFIER]})\\.(${B[G.NUMERICIDENTIFIER]})`);ue("MAINVERSIONLOOSE",`(${B[G.NUMERICIDENTIFIERLOOSE]})\\.(${B[G.NUMERICIDENTIFIERLOOSE]})\\.(${B[G.NUMERICIDENTIFIERLOOSE]})`);ue("PRERELEASEIDENTIFIER",`(?:${B[G.NUMERICIDENTIFIER]}|${B[G.NONNUMERICIDENTIFIER]})`);ue("PRERELEASEIDENTIFIERLOOSE",`(?:${B[G.NUMERICIDENTIFIERLOOSE]}|${B[G.NONNUMERICIDENTIFIER]})`);ue("PRERELEASE",`(?:-(${B[G.PRERELEASEIDENTIFIER]}(?:\\.${B[G.PRERELEASEIDENTIFIER]})*))`);ue("PRERELEASELOOSE",`(?:-?(${B[G.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${B[G.PRERELEASEIDENTIFIERLOOSE]})*))`);ue("BUILDIDENTIFIER","[0-9A-Za-z-]+");ue("BUILD",`(?:\\+(${B[G.BUILDIDENTIFIER]}(?:\\.${B[G.BUILDIDENTIFIER]})*))`);ue("FULLPLAIN",`v?${B[G.MAINVERSION]}${B[G.PRERELEASE]}?${B[G.BUILD]}?`);ue("FULL",`^${B[G.FULLPLAIN]}$`);ue("LOOSEPLAIN",`[v=\\s]*${B[G.MAINVERSIONLOOSE]}${B[G.PRERELEASELOOSE]}?${B[G.BUILD]}?`);ue("LOOSE",`^${B[G.LOOSEPLAIN]}$`);ue("GTLT","((?:<|>)?=?)");ue("XRANGEIDENTIFIERLOOSE",`${B[G.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ue("XRANGEIDENTIFIER",`${B[G.NUMERICIDENTIFIER]}|x|X|\\*`);ue("XRANGEPLAIN",`[v=\\s]*(${B[G.XRANGEIDENTIFIER]})(?:\\.(${B[G.XRANGEIDENTIFIER]})(?:\\.(${B[G.XRANGEIDENTIFIER]})(?:${B[G.PRERELEASE]})?${B[G.BUILD]}?)?)?`);ue("XRANGEPLAINLOOSE",`[v=\\s]*(${B[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[G.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[G.XRANGEIDENTIFIERLOOSE]})(?:${B[G.PRERELEASELOOSE]})?${B[G.BUILD]}?)?)?`);ue("XRANGE",`^${B[G.GTLT]}\\s*${B[G.XRANGEPLAIN]}$`);ue("XRANGELOOSE",`^${B[G.GTLT]}\\s*${B[G.XRANGEPLAINLOOSE]}$`);ue("COERCE",`(^|[^\\d])(\\d{1,${Pp}})(?:\\.(\\d{1,${Pp}}))?(?:\\.(\\d{1,${Pp}}))?(?:$|[^\\d])`);ue("COERCERTL",B[G.COERCE],!0);ue("LONETILDE","(?:~>?)");ue("TILDETRIM",`(\\s*)${B[G.LONETILDE]}\\s+`,!0);zr.tildeTrimReplace="$1~";ue("TILDE",`^${B[G.LONETILDE]}${B[G.XRANGEPLAIN]}$`);ue("TILDELOOSE",`^${B[G.LONETILDE]}${B[G.XRANGEPLAINLOOSE]}$`);ue("LONECARET","(?:\\^)");ue("CARETTRIM",`(\\s*)${B[G.LONECARET]}\\s+`,!0);zr.caretTrimReplace="$1^";ue("CARET",`^${B[G.LONECARET]}${B[G.XRANGEPLAIN]}$`);ue("CARETLOOSE",`^${B[G.LONECARET]}${B[G.XRANGEPLAINLOOSE]}$`);ue("COMPARATORLOOSE",`^${B[G.GTLT]}\\s*(${B[G.LOOSEPLAIN]})$|^$`);ue("COMPARATOR",`^${B[G.GTLT]}\\s*(${B[G.FULLPLAIN]})$|^$`);ue("COMPARATORTRIM",`(\\s*)${B[G.GTLT]}\\s*(${B[G.LOOSEPLAIN]}|${B[G.XRANGEPLAIN]})`,!0);zr.comparatorTrimReplace="$1$2$3";ue("HYPHENRANGE",`^\\s*(${B[G.XRANGEPLAIN]})\\s+-\\s+(${B[G.XRANGEPLAIN]})\\s*$`);ue("HYPHENRANGELOOSE",`^\\s*(${B[G.XRANGEPLAINLOOSE]})\\s+-\\s+(${B[G.XRANGEPLAINLOOSE]})\\s*$`);ue("STAR","(<|>)?=?\\s*\\*");ue("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ue("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Hs=D((pM,D_)=>{var gx=["includePrerelease","loose","rtl"],mx=n=>n?typeof n!="object"?{loose:!0}:gx.filter(e=>n[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};D_.exports=mx});var qp=D((gM,T_)=>{var R_=/^[0-9]+$/,S_=(n,e)=>{let t=R_.test(n),r=R_.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},vx=(n,e)=>S_(e,n);T_.exports={compareIdentifiers:S_,rcompareIdentifiers:vx}});var It=D((mM,k_)=>{var kc=Ls(),{MAX_LENGTH:P_,MAX_SAFE_INTEGER:Ec}=As(),{re:q_,t:x_}=bi(),yx=Hs(),{compareIdentifiers:vo}=qp(),hn=class{constructor(e,t){if(t=yx(t),e instanceof hn){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>P_)throw new TypeError(`version is longer than ${P_} characters`);kc("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?q_[x_.LOOSE]:q_[x_.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ec||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ec||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ec||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<Ec)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(kc("SemVer.compare",this.version,this.options,e),!(e instanceof hn)){if(typeof e=="string"&&e===this.version)return 0;e=new hn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof hn||(e=new hn(e,this.options)),vo(this.major,e.major)||vo(this.minor,e.minor)||vo(this.patch,e.patch)}comparePre(e){if(e instanceof hn||(e=new hn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(kc("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vo(r,i)}while(++t)}compareBuild(e){e instanceof hn||(e=new hn(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(kc("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vo(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(vo(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};k_.exports=hn});var Kr=D((vM,N_)=>{var{MAX_LENGTH:_x}=As(),{re:E_,t:O_}=bi(),F_=It(),Cx=Hs(),bx=(n,e)=>{if(e=Cx(e),n instanceof F_)return n;if(typeof n!="string"||n.length>_x||!(e.loose?E_[O_.LOOSE]:E_[O_.FULL]).test(n))return null;try{return new F_(n,e)}catch{return null}};N_.exports=bx});var M_=D((yM,I_)=>{"use strict";I_.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var A_=D((_M,j_)=>{"use strict";j_.exports=Re;Re.Node=wi;Re.create=Re;function Re(n){var e=this;if(e instanceof Re||(e=new Re),e.tail=null,e.head=null,e.length=0,n&&typeof n.forEach=="function")n.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}Re.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var e=n.next,t=n.prev;return e&&(e.prev=t),t&&(t.next=e),n===this.head&&(this.head=e),n===this.tail&&(this.tail=t),n.list.length--,n.next=null,n.prev=null,n.list=null,e};Re.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&&(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};Re.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&&(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};Re.prototype.push=function(){for(var n=0,e=arguments.length;n<e;n++)Dx(this,arguments[n]);return this.length};Re.prototype.unshift=function(){for(var n=0,e=arguments.length;n<e;n++)Rx(this,arguments[n]);return this.length};Re.prototype.pop=function(){if(!!this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};Re.prototype.shift=function(){if(!!this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};Re.prototype.forEach=function(n,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)n.call(e,t.value,r,this),t=t.next};Re.prototype.forEachReverse=function(n,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)n.call(e,t.value,r,this),t=t.prev};Re.prototype.get=function(n){for(var e=0,t=this.head;t!==null&&e<n;e++)t=t.next;if(e===n&&t!==null)return t.value};Re.prototype.getReverse=function(n){for(var e=0,t=this.tail;t!==null&&e<n;e++)t=t.prev;if(e===n&&t!==null)return t.value};Re.prototype.map=function(n,e){e=e||this;for(var t=new Re,r=this.head;r!==null;)t.push(n.call(e,r.value,this)),r=r.next;return t};Re.prototype.mapReverse=function(n,e){e=e||this;for(var t=new Re,r=this.tail;r!==null;)t.push(n.call(e,r.value,this)),r=r.prev;return t};Re.prototype.reduce=function(n,e){var t,r=this.head;if(arguments.length>1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)t=n(t,r.value,i),r=r.next;return t};Re.prototype.reduceReverse=function(n,e){var t,r=this.tail;if(arguments.length>1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)t=n(t,r.value,i),r=r.prev;return t};Re.prototype.toArray=function(){for(var n=new Array(this.length),e=0,t=this.head;t!==null;e++)n[e]=t.value,t=t.next;return n};Re.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,t=this.tail;t!==null;e++)n[e]=t.value,t=t.prev;return n};Re.prototype.slice=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new Re;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)t.push(i.value);return t};Re.prototype.sliceReverse=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new Re;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>n;r--,i=i.prev)t.push(i.value);return t};Re.prototype.splice=function(n,e,...t){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(var o=[],r=0;i&&r<e;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<t.length;r++)i=wx(this,i,t[r]);return o};Re.prototype.reverse=function(){for(var n=this.head,e=this.tail,t=n;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=n,this};function wx(n,e,t){var r=e===n.head?new wi(t,null,e,n):new wi(t,e,e.next,n);return r.next===null&&(n.tail=r),r.prev===null&&(n.head=r),n.length++,r}function Dx(n,e){n.tail=new wi(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function Rx(n,e){n.head=new wi(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function wi(n,e,t,r){if(!(this instanceof wi))return new wi(n,e,t,r);this.list=r,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{M_()(Re)}catch{}});var U_=D((CM,W_)=>{"use strict";var Sx=A_(),Di=Symbol("max"),qr=Symbol("length"),yo=Symbol("lengthCalculator"),Ws=Symbol("allowStale"),Ri=Symbol("maxAge"),Pr=Symbol("dispose"),L_=Symbol("noDisposeOnSet"),bt=Symbol("lruList"),Bn=Symbol("cache"),$_=Symbol("updateAgeOnGet"),xp=()=>1,Ep=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[Di]=e.max||1/0,r=e.length||xp;if(this[yo]=typeof r!="function"?xp:r,this[Ws]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ri]=e.maxAge||0,this[Pr]=e.dispose,this[L_]=e.noDisposeOnSet||!1,this[$_]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Di]=e||1/0,$s(this)}get max(){return this[Di]}set allowStale(e){this[Ws]=!!e}get allowStale(){return this[Ws]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Ri]=e,$s(this)}get maxAge(){return this[Ri]}set lengthCalculator(e){typeof e!="function"&&(e=xp),e!==this[yo]&&(this[yo]=e,this[qr]=0,this[bt].forEach(t=>{t.length=this[yo](t.value,t.key),this[qr]+=t.length})),$s(this)}get lengthCalculator(){return this[yo]}get length(){return this[qr]}get itemCount(){return this[bt].length}rforEach(e,t){t=t||this;for(let r=this[bt].tail;r!==null;){let i=r.prev;H_(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[bt].head;r!==null;){let i=r.next;H_(this,e,r,t),r=i}}keys(){return this[bt].toArray().map(e=>e.key)}values(){return this[bt].toArray().map(e=>e.value)}reset(){this[Pr]&&this[bt]&&this[bt].length&&this[bt].forEach(e=>this[Pr](e.key,e.value)),this[Bn]=new Map,this[bt]=new Sx,this[qr]=0}dump(){return this[bt].map(e=>Oc(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[bt]}set(e,t,r){if(r=r||this[Ri],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[yo](t,e);if(this[Bn].has(e)){if(o>this[Di])return _o(this,this[Bn].get(e)),!1;let c=this[Bn].get(e).value;return this[Pr]&&(this[L_]||this[Pr](e,c.value)),c.now=i,c.maxAge=r,c.value=t,this[qr]+=o-c.length,c.length=o,this.get(e),$s(this),!0}let s=new Op(e,t,o,i,r);return s.length>this[Di]?(this[Pr]&&this[Pr](e,t),!1):(this[qr]+=s.length,this[bt].unshift(s),this[Bn].set(e,this[bt].head),$s(this),!0)}has(e){if(!this[Bn].has(e))return!1;let t=this[Bn].get(e).value;return!Oc(this,t)}get(e){return kp(this,e,!0)}peek(e){return kp(this,e,!1)}pop(){let e=this[bt].tail;return e?(_o(this,e),e.value):null}del(e){_o(this,this[Bn].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-t;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Bn].forEach((e,t)=>kp(this,t,!1))}},kp=(n,e,t)=>{let r=n[Bn].get(e);if(r){let i=r.value;if(Oc(n,i)){if(_o(n,r),!n[Ws])return}else t&&(n[$_]&&(r.value.now=Date.now()),n[bt].unshiftNode(r));return i.value}},Oc=(n,e)=>{if(!e||!e.maxAge&&!n[Ri])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:n[Ri]&&t>n[Ri]},$s=n=>{if(n[qr]>n[Di])for(let e=n[bt].tail;n[qr]>n[Di]&&e!==null;){let t=e.prev;_o(n,e),e=t}},_o=(n,e)=>{if(e){let t=e.value;n[Pr]&&n[Pr](t.key,t.value),n[qr]-=t.length,n[Bn].delete(t.key),n[bt].removeNode(e)}},Op=class{constructor(e,t,r,i,o){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=o||0}},H_=(n,e,t,r)=>{let i=t.value;Oc(n,i)&&(_o(n,t),n[Ws]||(i=void 0)),i&&e.call(r,i.value,i.key,n)};W_.exports=Ep});var Tn=D((bM,K_)=>{var z_=It(),Tx=(n,e,t)=>new z_(n,t).compare(new z_(e,t));K_.exports=Tx});var Fc=D((wM,B_)=>{var Px=Tn(),qx=(n,e,t)=>Px(n,e,t)===0;B_.exports=qx});var Fp=D((DM,G_)=>{var xx=Tn(),kx=(n,e,t)=>xx(n,e,t)!==0;G_.exports=kx});var Us=D((RM,V_)=>{var Ex=Tn(),Ox=(n,e,t)=>Ex(n,e,t)>0;V_.exports=Ox});var Nc=D((SM,X_)=>{var Fx=Tn(),Nx=(n,e,t)=>Fx(n,e,t)>=0;X_.exports=Nx});var Ic=D((TM,J_)=>{var Ix=Tn(),Mx=(n,e,t)=>Ix(n,e,t)<0;J_.exports=Mx});var Mc=D((PM,Q_)=>{var jx=Tn(),Ax=(n,e,t)=>jx(n,e,t)<=0;Q_.exports=Ax});var Np=D((qM,Y_)=>{var Lx=Fc(),Hx=Fp(),$x=Us(),Wx=Nc(),Ux=Ic(),zx=Mc(),Kx=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Lx(n,t,r);case"!=":return Hx(n,t,r);case">":return $x(n,t,r);case">=":return Wx(n,t,r);case"<":return Ux(n,t,r);case"<=":return zx(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Y_.exports=Kx});var Ks=D((xM,rC)=>{var zs=Symbol("SemVer ANY"),Co=class{static get ANY(){return zs}constructor(e,t){if(t=Bx(t),e instanceof Co){if(e.loose===!!t.loose)return e;e=e.value}Mp("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===zs?this.value="":this.value=this.operator+this.semver.version,Mp("comp",this)}parse(e){let t=this.options.loose?Z_[eC.COMPARATORLOOSE]:Z_[eC.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new tC(r[2],this.options.loose):this.semver=zs}toString(){return this.value}test(e){if(Mp("Comparator.test",e,this.options.loose),this.semver===zs||e===zs)return!0;if(typeof e=="string")try{e=new tC(e,this.options)}catch{return!1}return Ip(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Co))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new nC(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new nC(this.value,t).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Ip(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Ip(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||o&&s||a||c}};rC.exports=Co;var Bx=Hs(),{re:Z_,t:eC}=bi(),Ip=Np(),Mp=Ls(),tC=It(),nC=Pn()});var Pn=D((kM,aC)=>{var Si=class{constructor(e,t){if(t=Vx(t),e instanceof Si)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Si(e.raw,t);if(e instanceof jp)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!oC(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Zx(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=iC.get(r);if(i)return i;let o=this.options.loose,s=o?tn[zt.HYPHENRANGELOOSE]:tn[zt.HYPHENRANGE];e=e.replace(s,uk(this.options.includePrerelease)),Ze("hyphen replace",e),e=e.replace(tn[zt.COMPARATORTRIM],Jx),Ze("comparator trim",e),e=e.replace(tn[zt.TILDETRIM],Qx),e=e.replace(tn[zt.CARETTRIM],Yx),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(f=>ek(f,this.options)).join(" ").split(/\s+/).map(f=>ck(f,this.options));o&&(a=a.filter(f=>(Ze("loose invalid filter",f,this.options),!!f.match(tn[zt.COMPARATORLOOSE])))),Ze("range list",a);let c=new Map,u=a.map(f=>new jp(f,this.options));for(let f of u){if(oC(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return iC.set(r,l),l}intersects(e,t){if(!(e instanceof Si))throw new TypeError("a Range is required");return this.set.some(r=>sC(r,t)&&e.set.some(i=>sC(i,t)&&r.every(o=>i.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Xx(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(lk(this.set[t],e,this.options))return!0;return!1}};aC.exports=Si;var Gx=U_(),iC=new Gx({max:1e3}),Vx=Hs(),jp=Ks(),Ze=Ls(),Xx=It(),{re:tn,t:zt,comparatorTrimReplace:Jx,tildeTrimReplace:Qx,caretTrimReplace:Yx}=bi(),oC=n=>n.value==="<0.0.0-0",Zx=n=>n.value==="",sC=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(o=>i.intersects(o,e)),i=r.pop();return t},ek=(n,e)=>(Ze("comp",n,e),n=rk(n,e),Ze("caret",n),n=tk(n,e),Ze("tildes",n),n=ok(n,e),Ze("xrange",n),n=ak(n,e),Ze("stars",n),n),Kt=n=>!n||n.toLowerCase()==="x"||n==="*",tk=(n,e)=>n.trim().split(/\s+/).map(t=>nk(t,e)).join(" "),nk=(n,e)=>{let t=e.loose?tn[zt.TILDELOOSE]:tn[zt.TILDE];return n.replace(t,(r,i,o,s,a)=>{Ze("tilde",n,r,i,o,s,a);let c;return Kt(i)?c="":Kt(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Kt(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ze("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ze("tilde return",c),c})},rk=(n,e)=>n.trim().split(/\s+/).map(t=>ik(t,e)).join(" "),ik=(n,e)=>{Ze("caret",n,e);let t=e.loose?tn[zt.CARETLOOSE]:tn[zt.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,o,s,a,c)=>{Ze("caret",n,i,o,s,a,c);let u;return Kt(o)?u="":Kt(s)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Kt(a)?o==="0"?u=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(Ze("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ze("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ze("caret return",u),u})},ok=(n,e)=>(Ze("replaceXRanges",n,e),n.split(/\s+/).map(t=>sk(t,e)).join(" ")),sk=(n,e)=>{n=n.trim();let t=e.loose?tn[zt.XRANGELOOSE]:tn[zt.XRANGE];return n.replace(t,(r,i,o,s,a,c)=>{Ze("xRange",n,r,i,o,s,a,c);let u=Kt(o),l=u||Kt(s),f=l||Kt(a),h=f;return i==="="&&h&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&h?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):l?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:f&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ze("xRange return",r),r})},ak=(n,e)=>(Ze("replaceStars",n,e),n.trim().replace(tn[zt.STAR],"")),ck=(n,e)=>(Ze("replaceGTE0",n,e),n.trim().replace(tn[e.includePrerelease?zt.GTE0PRE:zt.GTE0],"")),uk=n=>(e,t,r,i,o,s,a,c,u,l,f,h,p)=>(Kt(r)?t="":Kt(i)?t=`>=${r}.0.0${n?"-0":""}`:Kt(o)?t=`>=${r}.${i}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,Kt(u)?c="":Kt(l)?c=`<${+u+1}.0.0-0`:Kt(f)?c=`<${u}.${+l+1}.0-0`:h?c=`<=${u}.${l}.${f}-${h}`:n?c=`<${u}.${l}.${+f+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),lk=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(Ze(n[r].semver),n[r].semver!==jp.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var bo=D((EM,cC)=>{var dk=Pn(),fk=(n,e,t)=>{try{e=new dk(e,t)}catch{return!1}return e.test(n)};cC.exports=fk});var lC=D(pn=>{"use strict";var hk=pn&&pn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ap=pn&&pn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&hk(e,n,t)};Object.defineProperty(pn,"__esModule",{value:!0});pn.DiagnosticPullMode=pn.vsdiag=void 0;Ap(K(),pn);Ap(we(),pn);var uC=Xf();Object.defineProperty(pn,"vsdiag",{enumerable:!0,get:function(){return uC.vsdiag}});Object.defineProperty(pn,"DiagnosticPullMode",{enumerable:!0,get:function(){return uC.DiagnosticPullMode}});Ap(Tp(),pn)});var Ti=D(Bt=>{"use strict";var pk=Bt&&Bt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),hC=Bt&&Bt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pk(e,n,t)};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.SettingMonitor=Bt.LanguageClient=Bt.TransportKind=void 0;var xr=require("child_process"),Lp=require("fs"),Hp=require("path"),Gr=require("vscode"),Be=wn(),dC=Tp(),gk=y_(),et=js(),mk=Kr(),vk=bo();hC(js(),Bt);hC(lC(),Bt);var fC="^1.67.0",it;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(it=Bt.TransportKind||(Bt.TransportKind={}));var Br;(function(n){function e(t){let r=t;return r&&r.kind===it.socket&&Be.number(r.port)}n.isSocket=e})(Br||(Br={}));var $p;(function(n){function e(t){return Be.string(t.command)}n.is=e})($p||($p={}));var Wp;(function(n){function e(t){return Be.string(t.module)}n.is=e})(Wp||(Wp={}));var Up;(function(n){function e(t){let r=t;return r&&r.writer!==void 0&&r.reader!==void 0}n.is=e})(Up||(Up={}));var zp;(function(n){function e(t){let r=t;return r&&r.process!==void 0&&typeof r.detached=="boolean"}n.is=e})(zp||(zp={}));var Kp=class extends dC.BaseLanguageClient{constructor(e,t,r,i,o){let s,a,c,u,l;Be.string(t)?(s=e,a=t,c=r,u=i,l=!!o):(s=e.toLowerCase(),a=e,c=t,u=r,l=i),l===void 0&&(l=!1),super(s,a,u),this._serverOptions=c,this._forceDebug=l,this._isInDebugMode=l;try{this.checkVersion()}catch(f){throw Be.string(f.message)&&this.outputChannel.appendLine(f.message),f}}checkVersion(){let e=mk(Gr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Gr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!vk(e,fC))throw new Error(`The language client requires VS Code version ${fC} but received version ${Gr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,gk.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(l,f){if(!l&&!f)return;let h=Object.create(null);return Object.keys(process.env).forEach(p=>h[p]=process.env[p]),f&&(h.ELECTRON_RUN_AS_NODE="1",h.ELECTRON_NO_ASAR="1"),l&&Object.keys(l).forEach(p=>h[p]=l[p]),h}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let l=process.execArgv;return l?l.some(f=>r.some(h=>f.startsWith(h))||i.some(h=>f===h)):!1}function s(l){if(l.stdin===null||l.stdout===null||l.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Be.func(a))return a().then(l=>{if(dC.MessageTransports.is(l))return this._isDetached=!!l.detached,l;if(Up.is(l))return this._isDetached=!!l.detached,{reader:new et.StreamMessageReader(l.reader),writer:new et.StreamMessageWriter(l.writer)};{let f;return zp.is(l)?(f=l.process,this._isDetached=l.detached):(f=l,this._isDetached=!1),f.stderr.on("data",h=>this.outputChannel.append(Be.string(h)?h:h.toString(e))),{reader:new et.StreamMessageReader(f.stdout),writer:new et.StreamMessageWriter(f.stdin)}}});let c,u=a;return u.run||u.debug?this._forceDebug||o()?(c=u.debug,this._isInDebugMode=!0):(c=u.run,this._isInDebugMode=!1):c=a,this._getServerWorkingDir(c.options).then(l=>{if(Wp.is(c)&&c.module){let f=c,h=f.transport||it.stdio;if(f.runtime){let p=[],g=f.options??Object.create(null);g.execArgv&&g.execArgv.forEach(y=>p.push(y)),p.push(f.module),f.args&&f.args.forEach(y=>p.push(y));let C=Object.create(null);C.cwd=l,C.env=t(g.env,!1);let b=this._getRuntimePath(f.runtime,l),R;if(h===it.ipc?(C.stdio=[null,null,null,"ipc"],p.push("--node-ipc")):h===it.stdio?p.push("--stdio"):h===it.pipe?(R=(0,et.generateRandomPipeName)(),p.push(`--pipe=${R}`)):Br.isSocket(h)&&p.push(`--socket=${h.port}`),p.push(`--clientProcessId=${process.pid.toString()}`),h===it.ipc||h===it.stdio){let y=xr.spawn(b,p,C);return!y||!y.pid?wo(y,`Launching server using runtime ${b} failed.`):(this._serverProcess=y,y.stderr.on("data",_=>this.outputChannel.append(Be.string(_)?_:_.toString(e))),h===it.ipc?(y.stdout.on("data",_=>this.outputChannel.append(Be.string(_)?_:_.toString(e))),Promise.resolve({reader:new et.IPCMessageReader(y),writer:new et.IPCMessageWriter(y)})):Promise.resolve({reader:new et.StreamMessageReader(y.stdout),writer:new et.StreamMessageWriter(y.stdin)}))}else{if(h===it.pipe)return(0,et.createClientPipeTransport)(R).then(y=>{let _=xr.spawn(b,p,C);return!_||!_.pid?wo(_,`Launching server using runtime ${b} failed.`):(this._serverProcess=_,_.stderr.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),_.stdout.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),y.onConnected().then(T=>({reader:T[0],writer:T[1]})))});if(Br.isSocket(h))return(0,et.createClientSocketTransport)(h.port).then(y=>{let _=xr.spawn(b,p,C);return!_||!_.pid?wo(_,`Launching server using runtime ${b} failed.`):(this._serverProcess=_,_.stderr.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),_.stdout.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),y.onConnected().then(T=>({reader:T[0],writer:T[1]})))})}}else{let p;return new Promise((g,C)=>{let b=(f.args&&f.args.slice())??[];h===it.ipc?b.push("--node-ipc"):h===it.stdio?b.push("--stdio"):h===it.pipe?(p=(0,et.generateRandomPipeName)(),b.push(`--pipe=${p}`)):Br.isSocket(h)&&b.push(`--socket=${h.port}`),b.push(`--clientProcessId=${process.pid.toString()}`);let R=f.options??Object.create(null);if(R.env=t(R.env,!0),R.execArgv=R.execArgv||[],R.cwd=l,R.silent=!0,h===it.ipc||h===it.stdio){let y=xr.fork(f.module,b||[],R);s(y),this._serverProcess=y,y.stderr.on("data",_=>this.outputChannel.append(Be.string(_)?_:_.toString(e))),h===it.ipc?(y.stdout.on("data",_=>this.outputChannel.append(Be.string(_)?_:_.toString(e))),g({reader:new et.IPCMessageReader(this._serverProcess),writer:new et.IPCMessageWriter(this._serverProcess)})):g({reader:new et.StreamMessageReader(y.stdout),writer:new et.StreamMessageWriter(y.stdin)})}else h===it.pipe?(0,et.createClientPipeTransport)(p).then(y=>{let _=xr.fork(f.module,b||[],R);s(_),this._serverProcess=_,_.stderr.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),_.stdout.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),y.onConnected().then(T=>{g({reader:T[0],writer:T[1]})},C)},C):Br.isSocket(h)&&(0,et.createClientSocketTransport)(h.port).then(y=>{let _=xr.fork(f.module,b||[],R);s(_),this._serverProcess=_,_.stderr.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),_.stdout.on("data",T=>this.outputChannel.append(Be.string(T)?T:T.toString(e))),y.onConnected().then(T=>{g({reader:T[0],writer:T[1]})},C)},C)})}}else if($p.is(c)&&c.command){let f=c,h=c.args!==void 0?c.args.slice(0):[],p,g=c.transport;if(g===it.stdio)h.push("--stdio");else if(g===it.pipe)p=(0,et.generateRandomPipeName)(),h.push(`--pipe=${p}`);else if(Br.isSocket(g))h.push(`--socket=${g.port}`);else if(g===it.ipc)throw new Error("Transport kind ipc is not support for command executable");let C=Object.assign({},f.options);if(C.cwd=C.cwd||l,g===void 0||g===it.stdio){let b=xr.spawn(f.command,h,C);return!b||!b.pid?wo(b,`Launching server using command ${f.command} failed.`):(b.stderr.on("data",R=>this.outputChannel.append(Be.string(R)?R:R.toString(e))),this._serverProcess=b,this._isDetached=!!C.detached,Promise.resolve({reader:new et.StreamMessageReader(b.stdout),writer:new et.StreamMessageWriter(b.stdin)}))}else{if(g===it.pipe)return(0,et.createClientPipeTransport)(p).then(b=>{let R=xr.spawn(f.command,h,C);return!R||!R.pid?wo(R,`Launching server using command ${f.command} failed.`):(this._serverProcess=R,this._isDetached=!!C.detached,R.stderr.on("data",y=>this.outputChannel.append(Be.string(y)?y:y.toString(e))),R.stdout.on("data",y=>this.outputChannel.append(Be.string(y)?y:y.toString(e))),b.onConnected().then(y=>({reader:y[0],writer:y[1]})))});if(Br.isSocket(g))return(0,et.createClientSocketTransport)(g.port).then(b=>{let R=xr.spawn(f.command,h,C);return!R||!R.pid?wo(R,`Launching server using command ${f.command} failed.`):(this._serverProcess=R,this._isDetached=!!C.detached,R.stderr.on("data",y=>this.outputChannel.append(Be.string(y)?y:y.toString(e))),R.stdout.on("data",y=>this.outputChannel.append(Be.string(y)?y:y.toString(e))),b.onConnected().then(y=>({reader:y[0],writer:y[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Hp.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Hp.join(r,e);if(Lp.existsSync(i))return i}if(t!==void 0){let i=Hp.join(t,e);if(Lp.existsSync(i))return i}return e}_mainGetRootPath(){let e=Gr.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=>{Lp.lstat(t,(i,o)=>{r(!i&&o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};Bt.LanguageClient=Kp;var Bp=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return Gr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Gr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Gr.workspace.getConfiguration(t).get(r,!1):Gr.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch(o=>this._client.error("Start failed after configuration change",o,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(o=>this._client.error("Stop failed after configuration change",o,"force"))}};Bt.SettingMonitor=Bp;function wo(n,e){return n===null?Promise.reject(e):new Promise((t,r)=>{n.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var gC=D((NM,pC)=>{"use strict";pC.exports=Ti()});var jc=D(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.thenable=ht.typedArray=ht.stringArray=ht.array=ht.func=ht.error=ht.number=ht.string=ht.boolean=void 0;function yk(n){return n===!0||n===!1}ht.boolean=yk;function mC(n){return typeof n=="string"||n instanceof String}ht.string=mC;function _k(n){return typeof n=="number"||n instanceof Number}ht.number=_k;function Ck(n){return n instanceof Error}ht.error=Ck;function vC(n){return typeof n=="function"}ht.func=vC;function yC(n){return Array.isArray(n)}ht.array=yC;function bk(n){return yC(n)&&n.every(e=>mC(e))}ht.stringArray=bk;function wk(n,e){return Array.isArray(n)&&n.every(e)}ht.typedArray=wk;function Dk(n){return n&&vC(n.then)}ht.thenable=Dk});var Gp=D(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.generateUuid=qn.parse=qn.isUUID=qn.v4=qn.empty=void 0;var Bs=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},le=class extends Bs{constructor(){super([le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),"-",le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),"-","4",le._randomHex(),le._randomHex(),le._randomHex(),"-",le._oneOf(le._timeHighBits),le._randomHex(),le._randomHex(),le._randomHex(),"-",le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex(),le._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return le._oneOf(le._chars)}};le._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];le._timeHighBits=["8","9","a","b"];qn.empty=new Bs("00000000-0000-0000-0000-000000000000");function _C(){return new le}qn.v4=_C;var Rk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function CC(n){return Rk.test(n)}qn.isUUID=CC;function Sk(n){if(!CC(n))throw new Error("invalid uuid");return new Bs(n)}qn.parse=Sk;function Tk(){return _C().asHex()}qn.generateUuid=Tk});var bC=D(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.attachPartialResult=Xr.ProgressFeature=Xr.attachWorkDone=void 0;var Vr=K(),Pk=Gp(),cr=class{constructor(e,t){this._connection=e,this._token=t,cr.Instances.set(this._token,this)}begin(e,t,r,i){let o={kind:"begin",title:e,percentage:t,message:r,cancellable:i};this._connection.sendProgress(Vr.WorkDoneProgress.type,this._token,o)}report(e,t){let r={kind:"report"};typeof e=="number"?(r.percentage=e,t!==void 0&&(r.message=t)):r.message=e,this._connection.sendProgress(Vr.WorkDoneProgress.type,this._token,r)}done(){cr.Instances.delete(this._token),this._connection.sendProgress(Vr.WorkDoneProgress.type,this._token,{kind:"end"})}};cr.Instances=new Map;var Ac=class extends cr{constructor(e,t){super(e,t),this._source=new Vr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Gs=class{constructor(){}begin(){}report(){}done(){}},Lc=class extends Gs{constructor(){super(),this._source=new Vr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function qk(n,e){if(e===void 0||e.workDoneToken===void 0)return new Gs;let t=e.workDoneToken;return delete e.workDoneToken,new cr(n,t)}Xr.attachWorkDone=qk;var xk=n=>class extends n{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Vr.WorkDoneProgressCancelNotification.type,t=>{let r=cr.Instances.get(t.token);(r instanceof Ac||r instanceof Lc)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Gs:new cr(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Pk.generateUuid)();return this.connection.sendRequest(Vr.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Ac(this.connection,e))}else return Promise.resolve(new Lc)}};Xr.ProgressFeature=xk;var Vp;(function(n){n.type=new Vr.ProgressType})(Vp||(Vp={}));var Xp=class{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(Vp.type,this._token,e)}};function kk(n,e){if(e===void 0||e.partialResultToken===void 0)return;let t=e.partialResultToken;return delete e.partialResultToken,new Xp(n,t)}Xr.attachPartialResult=kk});var wC=D(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.ConfigurationFeature=void 0;var Ek=K(),Ok=jc(),Fk=n=>class extends n{getConfiguration(e){return e?Ok.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Ek.ConfigurationRequest.type,t).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};Hc.ConfigurationFeature=Fk});var DC=D(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.WorkspaceFoldersFeature=void 0;var $c=K(),Nk=n=>class extends n{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new $c.Emitter,this.connection.onNotification($c.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=t===!0||typeof t=="string"}getWorkspaceFolders(){return this.connection.sendRequest($c.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register($c.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Wc.WorkspaceFoldersFeature=Nk});var RC=D(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.CallHierarchyFeature=void 0;var Jp=K(),Ik=n=>class extends n{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Jp.CallHierarchyPrepareRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0)),onIncomingCalls:e=>{let t=Jp.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onOutgoingCalls:e=>{let t=Jp.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Uc.CallHierarchyFeature=Ik});var Yp=D(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.SemanticTokensBuilder=Jr.SemanticTokensDiff=Jr.SemanticTokensFeature=void 0;var zc=K(),Mk=n=>class extends n{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(zc.SemanticTokensRefreshRequest.type),on:e=>{let t=zc.SemanticTokensRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onDelta:e=>{let t=zc.SemanticTokensDeltaRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onRange:e=>{let t=zc.SemanticTokensRangeRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Jr.SemanticTokensFeature=Mk;var Kc=class{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){let e=this.originalSequence.length,t=this.modifiedSequence.length,r=0;for(;r<t&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<t&&r<e){let i=e-1,o=t-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let s=i-r+1,a=this.modifiedSequence.slice(r,o+1);return a.length===1&&a[0]===this.originalSequence[i]?[{start:r,deleteCount:s-1}]:[{start:r,deleteCount:s,data:a}]}else return r<t?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};Jr.SemanticTokensDiff=Kc;var Qp=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,r,i,o){let s=e,a=t;this._dataLen>0&&(s-=this._prevLine,s===0&&(a-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=a,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Kc(this._prevData,this._data).computeDiff()}:this.build()}};Jr.SemanticTokensBuilder=Qp});var SC=D(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.ShowDocumentFeature=void 0;var jk=K(),Ak=n=>class extends n{showDocument(e){return this.connection.sendRequest(jk.ShowDocumentRequest.type,e)}};Bc.ShowDocumentFeature=Ak});var TC=D(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.FileOperationsFeature=void 0;var Do=K(),Lk=n=>class extends n{onDidCreateFiles(e){return this.connection.onNotification(Do.DidCreateFilesNotification.type,t=>{e(t)})}onDidRenameFiles(e){return this.connection.onNotification(Do.DidRenameFilesNotification.type,t=>{e(t)})}onDidDeleteFiles(e){return this.connection.onNotification(Do.DidDeleteFilesNotification.type,t=>{e(t)})}onWillCreateFiles(e){return this.connection.onRequest(Do.WillCreateFilesRequest.type,(t,r)=>e(t,r))}onWillRenameFiles(e){return this.connection.onRequest(Do.WillRenameFilesRequest.type,(t,r)=>e(t,r))}onWillDeleteFiles(e){return this.connection.onRequest(Do.WillDeleteFilesRequest.type,(t,r)=>e(t,r))}};Gc.FileOperationsFeature=Lk});var PC=D(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.LinkedEditingRangeFeature=void 0;var Hk=K(),$k=n=>class extends n{onLinkedEditingRange(e){return this.connection.onRequest(Hk.LinkedEditingRangeRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0))}};Vc.LinkedEditingRangeFeature=$k});var qC=D(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.TypeHierarchyFeature=void 0;var Zp=K(),Wk=n=>class extends n{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(Zp.TypeHierarchyPrepareRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0)),onSupertypes:e=>{let t=Zp.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onSubtypes:e=>{let t=Zp.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Xc.TypeHierarchyFeature=Wk});var kC=D(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.InlineValueFeature=void 0;var xC=K(),Uk=n=>class extends n{get inlineValue(){return{refresh:()=>this.connection.sendRequest(xC.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(xC.InlineValueRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t)))}}};Jc.InlineValueFeature=Uk});var EC=D(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.InlayHintFeature=void 0;var eg=K(),zk=n=>class extends n{get inlayHint(){return{refresh:()=>this.connection.sendRequest(eg.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(eg.InlayHintRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t))),resolve:e=>this.connection.onRequest(eg.InlayHintResolveRequest.type,(t,r)=>e(t,r))}}};Qc.InlayHintFeature=zk});var OC=D(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.DiagnosticFeature=void 0;var Vs=K(),Kk=n=>class extends n{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Vs.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(Vs.DocumentDiagnosticRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(Vs.DocumentDiagnosticRequest.partialResult,t))),onWorkspace:e=>this.connection.onRequest(Vs.WorkspaceDiagnosticRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(Vs.WorkspaceDiagnosticRequest.partialResult,t)))}}};Yc.DiagnosticFeature=Kk});var ng=D(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.TextDocuments=void 0;var Pi=K(),tg=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Pi.Emitter,this._onDidOpen=new Pi.Emitter,this._onDidClose=new Pi.Emitter,this._onDidSave=new Pi.Emitter,this._onWillSave=new Pi.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Pi.TextDocumentSyncKind.Incremental;let t=[];return t.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let s=Object.freeze({document:o});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)})),t.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:s}=i;if(s==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let a=this._syncedDocuments.get(i.uri);a!==void 0&&(a=this._configuration.update(a,o,s),this._syncedDocuments.set(i.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a})))})),t.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),t.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),t.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),t.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Pi.Disposable.create(()=>{t.forEach(r=>r.dispose())})}};Zc.TextDocuments=tg});var ig=D(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.NotebookDocuments=Ro.NotebookSyncFeature=void 0;var xn=K(),FC=ng(),Bk=n=>class extends n{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(xn.DidOpenNotebookDocumentNotification.type,t=>{e(t)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(xn.DidChangeNotebookDocumentNotification.type,t=>{e(t)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(xn.DidSaveNotebookDocumentNotification.type,t=>{e(t)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(xn.DidCloseNotebookDocumentNotification.type,t=>{e(t)})}}};Ro.NotebookSyncFeature=Bk;var Qr=class{onDidOpenTextDocument(e){return this.openHandler=e,xn.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,xn.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,xn.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return Qr.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return Qr.NULL_DISPOSE}onDidSaveTextDocument(){return Qr.NULL_DISPOSE}};Qr.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var rg=class{constructor(e){e instanceof FC.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new FC.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new xn.Emitter,this._onDidChange=new xn.Emitter,this._onDidSave=new xn.Emitter,this._onDidClose=new xn.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){let t=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(t);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let t=new Qr,r=[];return r.push(this.cellTextDocuments.listen(t)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)t.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let s=o.metadata,a=!1,c=i.change;c.metadata!==void 0&&(a=!0,o.metadata=c.metadata);let u=[],l=[],f=[],h=[];if(c.cells!==void 0){let R=c.cells;if(R.structure!==void 0){let y=R.structure.array;if(o.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),R.structure.didOpen!==void 0)for(let _ of R.structure.didOpen)t.openTextDocument({textDocument:_}),u.push(_.uri);if(R.structure.didClose)for(let _ of R.structure.didClose)t.closeTextDocument({textDocument:_}),l.push(_.uri)}if(R.data!==void 0){let y=new Map(R.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let T=y.get(o.cells[_].document);if(T!==void 0){let N=o.cells.splice(_,1,T);if(f.push({old:N[0],new:T}),y.delete(T.document),y.size===0)break}}}if(R.textContent!==void 0)for(let y of R.textContent)t.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),h.push(y.document.uri)}this.updateCellMap(o);let p={notebookDocument:o};a&&(p.metadata={old:s,new:o.metadata});let g=[];for(let R of u)g.push(this.getNotebookCell(R));let C=[];for(let R of l)C.push(this.getNotebookCell(R));let b=[];for(let R of h)b.push(this.getNotebookCell(R));(g.length>0||C.length>0||f.length>0||b.length>0)&&(p.cells={added:g,removed:C,changed:{data:f,textContent:b}}),(p.metadata!==void 0||p.cells!==void 0)&&this._onDidChange.fire(p)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let s of i.cellTextDocuments)t.closeTextDocument({textDocument:s});this.notebookDocuments.delete(i.notebookDocument.uri);for(let s of o.cells)this.notebookCellMap.delete(s.document)}})),xn.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let t of e.cells)this.notebookCellMap.set(t.document,[t,e])}};Ro.NotebookDocuments=rg});var NC=D(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.MonikerFeature=void 0;var Gk=K(),Vk=n=>class extends n{get moniker(){return{on:e=>{let t=Gk.MonikerRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};eu.MonikerFeature=Vk});var lg=D(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.createConnection=be.combineFeatures=be.combineNotebooksFeatures=be.combineLanguagesFeatures=be.combineWorkspaceFeatures=be.combineWindowFeatures=be.combineClientFeatures=be.combineTracerFeatures=be.combineTelemetryFeatures=be.combineConsoleFeatures=be._NotebooksImpl=be._LanguagesImpl=be.BulkUnregistration=be.BulkRegistration=be.ErrorMessageTracker=void 0;var $=K(),kn=jc(),sg=Gp(),ie=bC(),Xk=wC(),Jk=DC(),Qk=RC(),Yk=Yp(),Zk=SC(),eE=TC(),tE=PC(),nE=qC(),rE=kC(),iE=EC(),oE=OC(),sE=ig(),aE=NC();function og(n){if(n!==null)return n}var ag=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};be.ErrorMessageTracker=ag;var tu=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($.MessageType.Error,e)}warn(e){this.send($.MessageType.Warning,e)}info(e){this.send($.MessageType.Info,e)}log(e){this.send($.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification($.LogMessageNotification.type,{type:e,message:t}).catch(()=>{(0,$.RAL)().console.error("Sending log message failed")})}},cg=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let r={type:$.MessageType.Error,message:e,actions:t};return this.connection.sendRequest($.ShowMessageRequest.type,r).then(og)}showWarningMessage(e,...t){let r={type:$.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest($.ShowMessageRequest.type,r).then(og)}showInformationMessage(e,...t){let r={type:$.MessageType.Info,message:e,actions:t};return this.connection.sendRequest($.ShowMessageRequest.type,r).then(og)}},IC=(0,Zk.ShowDocumentFeature)((0,ie.ProgressFeature)(cg)),cE;(function(n){function e(){return new nu}n.create=e})(cE=be.BulkRegistration||(be.BulkRegistration={}));var nu=class{constructor(){this._registrations=[],this._registered=new Set}add(e,t){let r=kn.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=sg.generateUuid();this._registrations.push({id:i,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},uE;(function(n){function e(){return new Xs(void 0,[])}n.create=e})(uE=be.BulkUnregistration||(be.BulkUnregistration={}));var Xs=class{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let t={unregisterations:e};this._connection.sendRequest($.UnregistrationRequest.type,t).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let t=kn.string(e)?e:e.method,r=this._unregistrations.get(t);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest($.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(t)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},ru=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,r){return e instanceof nu?this.registerMany(e):e instanceof Xs?this.registerSingle1(e,t,r):this.registerSingle2(e,t)}registerSingle1(e,t,r){let i=kn.string(t)?t:t.method,o=sg.generateUuid(),s={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($.RegistrationRequest.type,s).then(a=>(e.add({id:o,method:i}),e),a=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(a)))}registerSingle2(e,t){let r=kn.string(e)?e:e.method,i=sg.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:t||{}}]};return this.connection.sendRequest($.RegistrationRequest.type,o).then(s=>$.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),s=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(s)))}unregisterSingle(e,t){let r={unregisterations:[{id:e,method:t}]};return this.connection.sendRequest($.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest($.RegistrationRequest.type,t).then(()=>new Xs(this._connection,t.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},ug=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function t(i){return i&&!!i.edit}let r=t(e)?e:{edit:e};return this.connection.sendRequest($.ApplyWorkspaceEditRequest.type,r)}},MC=(0,eE.FileOperationsFeature)((0,Jk.WorkspaceFoldersFeature)((0,Xk.ConfigurationFeature)(ug))),iu=class{constructor(){this._trace=$.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==$.Trace.Off&&this.connection.sendNotification($.LogTraceNotification.type,{message:e,verbose:this._trace===$.Trace.Verbose?t:void 0}).catch(()=>{})}},ou=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},su=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,ie.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,ie.attachPartialResult)(this.connection,t)}};be._LanguagesImpl=su;var jC=(0,aE.MonikerFeature)((0,oE.DiagnosticFeature)((0,iE.InlayHintFeature)((0,rE.InlineValueFeature)((0,nE.TypeHierarchyFeature)((0,tE.LinkedEditingRangeFeature)((0,Yk.SemanticTokensFeature)((0,Qk.CallHierarchyFeature)(su)))))))),au=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,ie.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,ie.attachPartialResult)(this.connection,t)}};be._NotebooksImpl=au;var AC=(0,sE.NotebookSyncFeature)(au);function LC(n,e){return function(t){return e(n(t))}}be.combineConsoleFeatures=LC;function HC(n,e){return function(t){return e(n(t))}}be.combineTelemetryFeatures=HC;function $C(n,e){return function(t){return e(n(t))}}be.combineTracerFeatures=$C;function WC(n,e){return function(t){return e(n(t))}}be.combineClientFeatures=WC;function UC(n,e){return function(t){return e(n(t))}}be.combineWindowFeatures=UC;function zC(n,e){return function(t){return e(n(t))}}be.combineWorkspaceFeatures=zC;function KC(n,e){return function(t){return e(n(t))}}be.combineLanguagesFeatures=KC;function BC(n,e){return function(t){return e(n(t))}}be.combineNotebooksFeatures=BC;function lE(n,e){function t(i,o,s){return i&&o?s(i,o):i||o}return{__brand:"features",console:t(n.console,e.console,LC),tracer:t(n.tracer,e.tracer,$C),telemetry:t(n.telemetry,e.telemetry,HC),client:t(n.client,e.client,WC),window:t(n.window,e.window,UC),workspace:t(n.workspace,e.workspace,zC),languages:t(n.languages,e.languages,KC),notebooks:t(n.notebooks,e.notebooks,BC)}}be.combineFeatures=lE;function dE(n,e,t){let r=t&&t.console?new(t.console(tu)):new tu,i=n(r);r.rawAttach(i);let o=t&&t.tracer?new(t.tracer(iu)):new iu,s=t&&t.telemetry?new(t.telemetry(ou)):new ou,a=t&&t.client?new(t.client(ru)):new ru,c=t&&t.window?new(t.window(IC)):new IC,u=t&&t.workspace?new(t.workspace(MC)):new MC,l=t&&t.languages?new(t.languages(jC)):new jC,f=t&&t.notebooks?new(t.notebooks(AC)):new AC,h=[r,o,s,a,c,u,l,f];function p(y){return y instanceof Promise?y:kn.thenable(y)?new Promise((_,T)=>{y.then(N=>_(N),N=>T(N))}):Promise.resolve(y)}let g,C,b,R={listen:()=>i.listen(),sendRequest:(y,..._)=>i.sendRequest(kn.string(y)?y:y.method,..._),onRequest:(y,_)=>i.onRequest(y,_),sendNotification:(y,_)=>{let T=kn.string(y)?y:y.method;return arguments.length===1?i.sendNotification(T):i.sendNotification(T,_)},onNotification:(y,_)=>i.onNotification(y,_),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(C=y,{dispose:()=>{C=void 0}}),onInitialized:y=>i.onNotification($.InitializedNotification.type,y),onShutdown:y=>(g=y,{dispose:()=>{g=void 0}}),onExit:y=>(b=y,{dispose:()=>{b=void 0}}),get console(){return r},get telemetry(){return s},get tracer(){return o},get client(){return a},get window(){return c},get workspace(){return u},get languages(){return l},get notebooks(){return f},onDidChangeConfiguration:y=>i.onNotification($.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification($.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification($.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification($.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification($.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification($.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest($.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification($.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification($.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest($.HoverRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),void 0)),onCompletion:y=>i.onRequest($.CompletionRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onCompletionResolve:y=>i.onRequest($.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest($.SignatureHelpRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),void 0)),onDeclaration:y=>i.onRequest($.DeclarationRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onDefinition:y=>i.onRequest($.DefinitionRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onTypeDefinition:y=>i.onRequest($.TypeDefinitionRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onImplementation:y=>i.onRequest($.ImplementationRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onReferences:y=>i.onRequest($.ReferencesRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onDocumentHighlight:y=>i.onRequest($.DocumentHighlightRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onDocumentSymbol:y=>i.onRequest($.DocumentSymbolRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onWorkspaceSymbol:y=>i.onRequest($.WorkspaceSymbolRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onWorkspaceSymbolResolve:y=>i.onRequest($.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest($.CodeActionRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onCodeActionResolve:y=>i.onRequest($.CodeActionResolveRequest.type,(_,T)=>y(_,T)),onCodeLens:y=>i.onRequest($.CodeLensRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onCodeLensResolve:y=>i.onRequest($.CodeLensResolveRequest.type,(_,T)=>y(_,T)),onDocumentFormatting:y=>i.onRequest($.DocumentFormattingRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),void 0)),onDocumentRangeFormatting:y=>i.onRequest($.DocumentRangeFormattingRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest($.DocumentOnTypeFormattingRequest.type,(_,T)=>y(_,T)),onRenameRequest:y=>i.onRequest($.RenameRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),void 0)),onPrepareRename:y=>i.onRequest($.PrepareRenameRequest.type,(_,T)=>y(_,T)),onDocumentLinks:y=>i.onRequest($.DocumentLinkRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onDocumentLinkResolve:y=>i.onRequest($.DocumentLinkResolveRequest.type,(_,T)=>y(_,T)),onDocumentColor:y=>i.onRequest($.DocumentColorRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onColorPresentation:y=>i.onRequest($.ColorPresentationRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onFoldingRanges:y=>i.onRequest($.FoldingRangeRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onSelectionRanges:y=>i.onRequest($.SelectionRangeRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),(0,ie.attachPartialResult)(i,_))),onExecuteCommand:y=>i.onRequest($.ExecuteCommandRequest.type,(_,T)=>y(_,T,(0,ie.attachWorkDone)(i,_),void 0)),dispose:()=>i.dispose()};for(let y of h)y.attach(R);return i.onRequest($.InitializeRequest.type,y=>{e.initialize(y),kn.string(y.trace)&&(o.trace=$.Trace.fromString(y.trace));for(let _ of h)_.initialize(y.capabilities);if(C){let _=C(y,new $.CancellationTokenSource().token,(0,ie.attachWorkDone)(i,y),void 0);return p(_).then(T=>{if(T instanceof $.ResponseError)return T;let N=T;N||(N={capabilities:{}});let V=N.capabilities;V||(V={},N.capabilities=V),V.textDocumentSync===void 0||V.textDocumentSync===null?V.textDocumentSync=kn.number(R.__textDocumentSync)?R.__textDocumentSync:$.TextDocumentSyncKind.None:!kn.number(V.textDocumentSync)&&!kn.number(V.textDocumentSync.change)&&(V.textDocumentSync.change=kn.number(R.__textDocumentSync)?R.__textDocumentSync:$.TextDocumentSyncKind.None);for(let U of h)U.fillServerCapabilities(V);return N})}else{let _={capabilities:{textDocumentSync:$.TextDocumentSyncKind.None}};for(let T of h)T.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $.CancellationTokenSource().token)}),i.onNotification($.ExitNotification.type,()=>{try{b&&b()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($.SetTraceNotification.type,y=>{o.trace=$.Trace.fromString(y.value)}),R}be.createConnection=dE});var VC=D(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.resolveModulePath=Gt.FileSystem=Gt.resolveGlobalYarnPath=Gt.resolveGlobalNodePath=Gt.resolve=Gt.uriToFilePath=void 0;var fE=require("url"),Gn=require("path"),dg=require("fs"),pg=require("child_process");function hE(n){let e=fE.parse(n);if(e.protocol!=="file:"||!e.path)return;let t=e.path.split("/");for(var r=0,i=t.length;r<i;r++)t[r]=decodeURIComponent(t[r]);if(process.platform==="win32"&&t.length>1){let o=t[0],s=t[1];o.length===0&&s.length>1&&s[1]===":"&&t.shift()}return Gn.normalize(t.join("/"))}Gt.uriToFilePath=hE;function fg(){return process.platform==="win32"}function cu(n,e,t,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((s,a)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(l=>u[l]=c[l]),e&&dg.existsSync(e)&&(u[i]?u[i]=e+Gn.delimiter+u[i]:u[i]=e,r&&r(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let l=(0,pg.fork)("",[],{cwd:t,env:u,execArgv:["-e",o]});if(l.pid===void 0){a(new Error(`Starting process to resolve node module  ${n} failed`));return}l.on("error",h=>{a(h)}),l.on("message",h=>{h.c==="r"&&(l.send({c:"e"}),h.s?s(h.r):a(new Error(`Failed to resolve module: ${n}`)))});let f={c:"rs",a:n};l.send(f)}catch(l){a(l)}})}Gt.resolve=cu;function hg(n){let e="npm",t=Object.create(null);Object.keys(process.env).forEach(o=>t[o]=process.env[o]),t.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:t};fg()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let o=(0,pg.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){n&&n("'npm config get prefix' didn't return a value.");return}let s=o.trim();return n&&n(`'npm config get prefix' value is: ${s}`),s.length>0?fg()?Gn.join(s,"node_modules"):Gn.join(s,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Gt.resolveGlobalNodePath=hg;function pE(n){let e="yarn",t={encoding:"utf8"};fg()&&(e="yarn.cmd",t.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,pg.spawnSync)(e,["global","dir","--json"],t),o=i.stdout;if(!o){n&&(n("'yarn global dir' didn't return a value."),i.stderr&&n(i.stderr));return}let s=o.trim().split(/\r?\n/);for(let a of s)try{let c=JSON.parse(a);if(c.type==="log")return Gn.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Gt.resolveGlobalYarnPath=pE;var GC;(function(n){let e;function t(){return e!==void 0||(process.platform==="win32"?e=!1:e=!dg.existsSync(__filename.toUpperCase())||!dg.existsSync(__filename.toLowerCase())),e}n.isCaseSensitive=t;function r(i,o){return t()?Gn.normalize(o).indexOf(Gn.normalize(i))===0:Gn.normalize(o).toLowerCase().indexOf(Gn.normalize(i).toLowerCase())===0}n.isParent=r})(GC=Gt.FileSystem||(Gt.FileSystem={}));function gE(n,e,t,r){return t?(Gn.isAbsolute(t)||(t=Gn.join(n,t)),cu(e,t,t,r).then(i=>GC.isParent(t,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>cu(e,hg(r),n,r))):cu(e,hg(r),n,r)}Gt.resolveModulePath=gE});var JC=D(xt=>{"use strict";var mE=xt&&xt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),XC=xt&&xt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&mE(e,n,t)};Object.defineProperty(xt,"__esModule",{value:!0});xt.ProposedFeatures=xt.NotebookDocuments=xt.TextDocuments=xt.SemanticTokensBuilder=void 0;var vE=Yp();Object.defineProperty(xt,"SemanticTokensBuilder",{enumerable:!0,get:function(){return vE.SemanticTokensBuilder}});XC(K(),xt);var yE=ng();Object.defineProperty(xt,"TextDocuments",{enumerable:!0,get:function(){return yE.TextDocuments}});var _E=ig();Object.defineProperty(xt,"NotebookDocuments",{enumerable:!0,get:function(){return _E.NotebookDocuments}});XC(lg(),xt);var CE;(function(n){n.all={__brand:"features"}})(CE=xt.ProposedFeatures||(xt.ProposedFeatures={}))});var eb=D(gn=>{"use strict";var bE=gn&&gn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),YC=gn&&gn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&bE(e,n,t)};Object.defineProperty(gn,"__esModule",{value:!0});gn.createConnection=gn.Files=void 0;var gg=jc(),wE=lg(),Js=VC(),qi=js();YC(js(),gn);YC(JC(),gn);var DE;(function(n){n.uriToFilePath=Js.uriToFilePath,n.resolveGlobalNodePath=Js.resolveGlobalNodePath,n.resolveGlobalYarnPath=Js.resolveGlobalYarnPath,n.resolve=Js.resolve,n.resolveModulePath=Js.resolveModulePath})(DE=gn.Files||(gn.Files={}));var QC;function uu(){if(QC!==void 0)try{QC.end()}catch{}}var So=!1,ZC;function RE(){let n="--clientProcessId";function e(t){try{let r=parseInt(t);isNaN(r)||(ZC=setInterval(()=>{try{process.kill(r,0)}catch{uu(),process.exit(So?0:1)}},3e3))}catch{}}for(let t=2;t<process.argv.length;t++){let r=process.argv[t];if(r===n&&t+1<process.argv.length){e(process.argv[t+1]);return}else{let i=r.split("=");i[0]===n&&e(i[1])}}}RE();var SE={initialize:n=>{let e=n.processId;gg.number(e)&&ZC===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(So?0:1)}},3e3)},get shutdownReceived(){return So},set shutdownReceived(n){So=n},exit:n=>{uu(),process.exit(n)}};function TE(n,e,t,r){let i,o,s,a;return n!==void 0&&n.__brand==="features"&&(i=n,n=e,e=t,t=r),qi.ConnectionStrategy.is(n)||qi.ConnectionOptions.is(n)?a=n:(o=n,s=e,a=t),PE(o,s,a,i)}gn.createConnection=TE;function PE(n,e,t,r){if(!n&&!e&&process.argv.length>2){let a,c,u=process.argv.slice(2);for(let l=0;l<u.length;l++){let f=u[l];if(f==="--node-ipc"){n=new qi.IPCMessageReader(process),e=new qi.IPCMessageWriter(process);break}else if(f==="--stdio"){n=process.stdin,e=process.stdout;break}else if(f==="--socket"){a=parseInt(u[l+1]);break}else if(f==="--pipe"){c=u[l+1];break}else{var i=f.split("=");if(i[0]==="--socket"){a=parseInt(i[1]);break}else if(i[0]==="--pipe"){c=i[1];break}}}if(a){let l=(0,qi.createServerSocketTransport)(a);n=l[0],e=l[1]}else if(c){let l=(0,qi.createServerPipeTransport)(c);n=l[0],e=l[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!n)throw new Error("Connection input stream is not set. "+o);if(!e)throw new Error("Connection output stream is not set. "+o);if(gg.func(n.read)&&gg.func(n.on)){let a=n;a.on("end",()=>{uu(),process.exit(So?0:1)}),a.on("close",()=>{uu(),process.exit(So?0:1)})}let s=a=>(0,qi.createProtocolConnection)(n,e,a,t);return(0,wE.createConnection)(s,SE,r)}});var tb=D(nn=>{Object.defineProperty(nn,"__esModule",{value:!0});nn.FileKind=nn.MirrorBehaviorCapabilities=nn.FileRangeCapabilities=nn.FileCapabilities=void 0;var qE;(function(n){n.full={diagnostic:!0,foldingRange:!0,documentFormatting:!0,documentSymbol:!0,codeAction:!0,inlayHint:!0}})(qE=nn.FileCapabilities||(nn.FileCapabilities={}));var xE;(function(n){n.full={hover:!0,references:!0,definition:!0,rename:!0,completion:!0,diagnostic:!0,semanticTokens:!0}})(xE=nn.FileRangeCapabilities||(nn.FileRangeCapabilities={}));var kE;(function(n){n.full={references:!0,definition:!0,rename:!0}})(kE=nn.MirrorBehaviorCapabilities||(nn.MirrorBehaviorCapabilities={}));var EE;(function(n){n[n.TextFile=0]="TextFile",n[n.TypeScriptHostFile=1]="TypeScriptHostFile"})(EE=nn.FileKind||(nn.FileKind={}))});var ur=D(Vn=>{var OE=Vn&&Vn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Qs=Vn&&Vn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&OE(e,n,t)};Object.defineProperty(Vn,"__esModule",{value:!0});Qs(Gd(),Vn);Qs(Vd(),Vn);Qs(eb(),Vn);Qs(tb(),Vn);Qs(Xd(),Vn)});var rb=D(To=>{var nb=To&&To.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(To,"__esModule",{value:!0});To.register=void 0;var mn=require("vscode"),FE=ur();function NE(n,e){return nb(this,void 0,void 0,function*(){let t=!1,r;s();let i=mn.workspace.onDidChangeTextDocument(a,null),o=mn.window.onDidChangeActiveTextEditor(s,null);return mn.Disposable.from(i,o);function s(){t=!1;let u=mn.window.activeTextEditor;if(!u)return;let l=u.document;!e(l)||(t=!0)}function a({document:u,contentChanges:l,reason:f}){var h;if(!t||l.length===0||f===mn.TextDocumentChangeReason.Undo||f===mn.TextDocumentChangeReason.Redo)return;let p=(h=mn.window.activeTextEditor)===null||h===void 0?void 0:h.document;if(u!==p)return;r&&(clearTimeout(r),r=void 0);let g=l[l.length-1];c(u,g,(C,b,R,y)=>nb(this,void 0,void 0,function*(){for(let _ of n){let T=Object.assign(Object.assign({},_.code2ProtocolConverter.asTextDocumentPositionParams(C,b)),{options:{lastChange:Object.assign(Object.assign({},R),{range:_.code2ProtocolConverter.asRange(R.range)})}});if(y())return;let N=yield _.sendRequest(FE.AutoInsertRequest.type,T);if(N!=null)return typeof N=="string"?N:_.protocol2CodeConverter.asTextEdit(N)}}))}function c(u,l,f){let h=l.range.start,p=u.version;r=setTimeout(()=>{let g=new mn.Position(h.line,h.character+l.text.length);f(u,g,l,()=>{var C;return((C=mn.window.activeTextEditor)===null||C===void 0?void 0:C.document.version)!==p}).then(C=>{if(C&&t){let b=mn.window.activeTextEditor;if(b){let R=b.document;if(u===R&&R.version===p)if(typeof C=="string"){let y=b.selections;y.length&&y.some(_=>_.active.isEqual(g))?b.insertSnippet(new mn.SnippetString(C),y.map(_=>_.active)):b.insertSnippet(new mn.SnippetString(C),g)}else b.insertSnippet(new mn.SnippetString(C.newText),C.range)}}}),r=void 0},100)}})}To.register=NE});var ib=D(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.binarySearch=void 0;function IE(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=Math.floor((t+r)/2),o=n[i];if(o<e)t=i+1;else if(o>e)r=i-1;else{t=i,r=i;break}}return Math.max(Math.min(t,r,n.length-1),0)}lu.binarySearch=IE});var lb=D(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.replaceRange=Mt.replaceSourceRange=Mt.replaceAll=Mt.replace=Mt.create=Mt.toString=Mt.getLength=void 0;var ob=ib(),Cj=Symbol();function sb(n){let e=0;for(let t of n)e+=typeof t=="string"?t.length:t[0].length;return e}Mt.getLength=sb;function mg(n){return n.map(e=>typeof e=="string"?e:e[0]).join("")}Mt.toString=mg;function ME(n){return[[n,void 0,0]]}Mt.create=ME;function jE(n,e,...t){let i=mg(n).match(e);if(i&&i.index!==void 0){let o=i.index,s=o+i[0].length;vg(n,o,s,...t.map(a=>typeof a=="function"?a(i[0]):a))}}Mt.replace=jE;function AE(n,e,...t){let r=mg(n),i=r.matchAll(e),o=r.length,s=0;for(let a of i)if(a.index!==void 0){let c=a.index+s,u=c+a[0].length;vg(n,c,u,...t.map(f=>typeof f=="function"?f(a[0]):f));let l=sb(n);s+=l-o,o=l}}Mt.replaceAll=AE;function LE(n,e,t,r,...i){for(let o of n)if(typeof o!="string"&&o[1]===e){let s=typeof o[2]=="number"?o[2]:o[2][0],a=typeof o[2]=="number"?o[2]+o[0].length:o[2][1];if(s<=t&&a>=r){let c=[];t>s&&c.push(cb(o,t-s));for(let u of i)c.push(u);return r<a&&c.push(ub(o,r-a)),ab(c),n.splice(n.indexOf(o),1,...c),!0}}return!1}Mt.replaceSourceRange=LE;function vg(n,e,t,...r){let i=HE(n),o=(0,ob.binarySearch)(i,e),s=(0,ob.binarySearch)(i,t),a=n[o],c=n[s],u=i[o],l=i[s],f=i[s]+(typeof c=="string"?c.length:c[0].length),h=[];e>u&&h.push(cb(a,e-u));for(let p of r)h.push(p);t<f&&h.push(ub(c,t-l)),ab(h),n.splice(o,s-o+1,...h)}Mt.replaceRange=vg;function ab(n){for(let e=n.length-1;e>=1;e--)typeof n[e]=="string"&&typeof n[e-1]=="string"&&(n[e-1]=n[e-1]+n[e],n.splice(e,1))}function cb(n,e){if(typeof n=="string")return n.slice(0,e);let t=n[0],r=n[2],i=t.slice(0,e),o=typeof r=="number"?r:[r[0],r[1]-(t.length-i.length)];return[i,n[1],o,...n.slice(3)]}function ub(n,e){if(typeof n=="string")return n.slice(e);let t=n[0],r=n[2],i=t.slice(e);e<0&&(e+=t.length);let o=typeof r=="number"?r+e:[r[0]+e,r[1]];return[i,n[1],o,...n.slice(3)]}function HE(n){let e=[],t=0;for(let r of n)e.push(t),t+=typeof r=="string"?r.length:r[0].length;return e}});var db=D(Xn=>{var $E=Xn&&Xn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),WE=Xn&&Xn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&$E(e,n,t)};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.buildMappings=Xn.SourceMap=void 0;WE(lb(),Xn);var yg=class{get memo(){if(!this._memo){let r=function(i){let o=new Set;for(let c of t.mappings)o.add(c[i][0]),o.add(c[i][1]);let s=[...o].sort((c,u)=>c-u).map(c=>({offset:c,mappings:new Set}));for(let c of t.mappings){let u=a(c[i][0]),l=a(c[i][1]);for(let f=u;f<=l;f++)s[f].mappings.add(c)}return s;function a(c){let u=0,l=s.length-1;for(;u<=l;){let f=Math.floor((u+l)/2),h=s[f];if(h.offset<c)u=f+1;else if(h.offset>c)l=f-1;else return f}}};var e=r;let t=this;this._memo={sourceRange:r("sourceRange"),generatedRange:r("generatedRange")}}return this._memo}constructor(e){this.mappings=e}toSourceOffset(e,t=!1){for(let r of this.matching(e,"generatedRange","sourceRange",t))return r}toGeneratedOffset(e,t=!1){for(let r of this.matching(e,"sourceRange","generatedRange",t))return r}toSourceOffsets(e,t=!1){return this.matching(e,"generatedRange","sourceRange",t)}toGeneratedOffsets(e,t=!1){return this.matching(e,"sourceRange","generatedRange",t)}*matching(e,t,r,i){let o=this.memo[t];if(o.length===0)return;let{low:s,high:a}=this.binarySearchMemo(o,e),c=new Set;for(let u=s;u<=a;u++)for(let l of o[u].mappings){if(c.has(l))continue;c.add(l);let f=this.matchOffset(e,l[t],l[r],i);f!==void 0&&(yield[f,l])}}matchOffset(e,t,r,i){if(e>=t[0]&&e<=t[1]){let o=r[0]+e-t[0];return i&&(o+=r[1]-r[0]-(t[1]-t[0])),o}}binarySearchMemo(e,t){let r=0,i=e.length-1;for(;r<=i;){let o=Math.floor((r+i)/2),s=e[o];if(s.offset<t)r=o+1;else if(s.offset>t)i=o-1;else{r=o,i=o;break}}return{low:Math.max(Math.min(r,i,e.length-1),0),high:Math.min(Math.max(r,i,0),e.length-1)}}};Xn.SourceMap=yg;function UE(n){let e=0,t=[];for(let r of n)typeof r=="string"?e+=r.length:(t.push({generatedRange:[e,e+r[0].length],source:r[1],sourceRange:typeof r[2]=="number"?[r[2],r[2]+r[0].length]:r[2],data:r[3]}),e+=r[0].length);return t}Xn.buildMappings=UE});var hb=D(qo=>{var du=qo&&qo.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(qo,"__esModule",{value:!0});qo.register=void 0;var ve=require("vscode"),zE=Ti(),fb=ur(),KE=db(),_g="volar-virtual-file",Cg=ve.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",overviewRulerColor:"blue",overviewRulerLane:ve.OverviewRulerLane.Right,light:{borderColor:"darkblue"},dark:{borderColor:"lightblue"}}),Po=ve.window.createTextEditorDecorationType({cursor:"crosshair",light:{backgroundColor:"lightblue"},dark:{backgroundColor:"darkblue"}});function BE(n,e){return du(this,void 0,void 0,function*(){class t{provideHover(g,C,b){return du(this,void 0,void 0,function*(){let R=s.get(g.uri.toString());if(!R)return;let y=[];for(let[_,T,N]of R){let V=N.toSourceOffset(g.offsetAt(C));V&&y.push({uri:_,mapping:V})}if(y.length!==0)return new ve.Hover(y.map(_=>[_.uri,"","","```json",JSON.stringify(_.mapping,null,2),"```"].join(`
`)))})}}let r=[];r.push(ve.languages.registerHoverProvider({scheme:_g},new t));let i=new Map,o=new Map,s=new Map,a=new ve.EventEmitter,c=new Map,u,l;return r.push(ve.window.onDidChangeActiveTextEditor(f)),r.push(ve.window.onDidChangeTextEditorSelection(f)),r.push(ve.window.onDidChangeVisibleTextEditors(f)),r.push(ve.workspace.onDidChangeTextDocument(p=>{if(i.has(p.document.uri.toString())){let g=i.get(p.document.uri.toString());clearTimeout(u),u=setTimeout(()=>{g?.forEach(C=>{a.fire(ve.Uri.parse(C))})},100)}})),r.push(ve.workspace.registerTextDocumentContentProvider(_g,{onDidChange:a.event,provideTextDocumentContent(p){return du(this,void 0,void 0,function*(){let g=p.with({scheme:"file"}).fsPath,C=o.get(p.toString());if(C){let b=yield e.sendRequest(fb.GetVirtualFileRequest.type,{sourceFileUri:C.document.uri.toString(),virtualFileName:g});return s.set(p.toString(),[]),Object.entries(b.mappings).forEach(([R,y])=>{var _,T;let N=ve.window.visibleTextEditors.find(V=>V.document.uri.toString()===R);N&&((_=s.get(p.toString()))===null||_===void 0||_.push([N.document.uri.toString(),N.document.version,new KE.SourceMap(y)]),i.has(R)||i.set(R,new Set),(T=i.get(R))===null||T===void 0||T.add(p.toString()))}),c.set(p.toString(),zE.TextDocument.create("","",0,b.content)),clearTimeout(l),l=setTimeout(f,100),b.content}})}})),r.push(ve.commands.registerCommand(n,()=>du(this,void 0,void 0,function*(){let p=ve.window.activeTextEditor;if(p){let C=(yield e.sendRequest(fb.GetVirtualFileNamesRequest.type,e.code2ProtocolConverter.asTextDocumentIdentifier(p.document))).map(b=>ve.Uri.file(b).with({scheme:_g}));i.set(p.document.uri.toString(),new Set(C.map(b=>b.toString())));for(let b of C)o.set(b.toString(),p),ve.window.showTextDocument(b,{viewColumn:ve.ViewColumn.Two,preview:!1})}}))),ve.Disposable.from(...r);function f(){for(let[p,g]of s){let C=ve.window.visibleTextEditors.find(y=>y.document.uri.toString()===p),b=[],R=[];if(C){for(let[y,_,T]of g){let N=ve.window.visibleTextEditors.find(V=>V.document.uri.toString()===y);if(N&&N.document.version===_){let V=T.mappings.map(U=>new ve.Range(N.document.positionAt(U.sourceRange[0]),N.document.positionAt(U.sourceRange[1])));if(N.setDecorations(Cg,V),b=b.concat(T.mappings.map(U=>new ve.Range(h(p,U.generatedRange[0]),h(p,U.generatedRange[1])))),ve.window.activeTextEditor){let U=ve.window.activeTextEditor.selection,re=ve.window.activeTextEditor.document.offsetAt(U.start);if(N.setDecorations(Po,[]),ve.window.activeTextEditor===N){let ee=[...T.toGeneratedOffsets(re)];N.setDecorations(Po,ee.map(ge=>new ve.Range(N.document.positionAt(ge[1].sourceRange[0]),N.document.positionAt(ge[1].sourceRange[1])))),R=R.concat(ee.map(ge=>new ve.Range(h(p,ge[1].generatedRange[0]),h(p,ge[1].generatedRange[1]))));let Ne=ee.sort((ge,st)=>ge[1].generatedRange[0]-st[1].generatedRange[0])[0];Ne&&C.revealRange(new ve.Range(h(p,Ne[1].generatedRange[0]),h(p,Ne[1].generatedRange[1])))}else if(ve.window.activeTextEditor===C){let ee=[...T.toSourceOffsets(re)];N.setDecorations(Po,ee.map(ge=>new ve.Range(N.document.positionAt(ge[1].sourceRange[0]),N.document.positionAt(ge[1].sourceRange[1])))),R=R.concat(ee.map(ge=>new ve.Range(h(p,ge[1].generatedRange[0]),h(p,ge[1].generatedRange[1]))));let Ne=ee.sort((ge,st)=>ge[1].sourceRange[0]-st[1].sourceRange[0])[0];Ne&&N.revealRange(new ve.Range(N.document.positionAt(Ne[1].sourceRange[0]),N.document.positionAt(Ne[1].sourceRange[1])))}}else N.setDecorations(Po,[])}}C.setDecorations(Cg,b),C.setDecorations(Po,R)}else for(let[y]of g){let _=ve.window.visibleTextEditors.find(T=>T.document.uri.toString()===y);_&&(_.setDecorations(Cg,[]),_.setDecorations(Po,[]))}}}function h(p,g){let b=c.get(p).positionAt(g);return new ve.Position(b.line,b.character)}})}qo.register=BE});var pb=D(xo=>{var GE=xo&&xo.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(xo,"__esModule",{value:!0});xo.register=void 0;var bg=require("vscode"),VE=ur();function XE(n,e){return GE(this,void 0,void 0,function*(){return bg.commands.registerCommand(n,()=>{bg.window.activeTextEditor&&e.sendNotification(VE.WriteVirtualFilesNotification.type,e.code2ProtocolConverter.asTextDocumentIdentifier(bg.window.activeTextEditor.document))})})}xo.register=XE});var Sg=D(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});var wg;function Dg(){if(wg===void 0)throw new Error("No runtime abstraction layer installed");return wg}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");wg=t}n.install=e})(Dg||(Dg={}));Rg.default=Dg});var Pg=D(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.config=Ge.loadMessageBundle=Ge.localize=Ge.format=Ge.setPseudo=Ge.isPseudo=Ge.isDefined=Ge.BundleFormat=Ge.MessageFormat=void 0;var mb=Sg(),JE;(function(n){n.file="file",n.bundle="bundle",n.both="both"})(JE=Ge.MessageFormat||(Ge.MessageFormat={}));var QE;(function(n){n.standalone="standalone",n.languagePack="languagePack"})(QE=Ge.BundleFormat||(Ge.BundleFormat={}));var gb;(function(n){function e(t){var r=t;return r&&Tg(r.key)&&Tg(r.comment)}n.is=e})(gb||(gb={}));function Tg(n){return typeof n<"u"}Ge.isDefined=Tg;Ge.isPseudo=!1;function YE(n){Ge.isPseudo=n}Ge.setPseudo=YE;function vb(n,e){var t;return Ge.isPseudo&&(n="\uFF3B"+n.replace(/[aouei]/g,"$&$&")+"\uFF3D"),e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,function(r,i){var o=i[0],s=e[o],a=r;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),t}Ge.format=vb;function ZE(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return vb(e,t)}Ge.localize=ZE;function eO(n){return(0,mb.default)().loadMessageBundle(n)}Ge.loadMessageBundle=eO;function tO(n){return(0,mb.default)().config(n)}Ge.config=tO});var wb=D(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.config=lr.loadMessageBundle=lr.BundleFormat=lr.MessageFormat=void 0;var Jn=require("path"),En=require("fs"),nO=Sg(),rn=Pg(),_b=Pg();Object.defineProperty(lr,"MessageFormat",{enumerable:!0,get:function(){return _b.MessageFormat}});Object.defineProperty(lr,"BundleFormat",{enumerable:!0,get:function(){return _b.BundleFormat}});var Cb=Object.prototype.toString;function rO(n){return Cb.call(n)==="[object Number]"}function kr(n){return Cb.call(n)==="[object String]"}function iO(n){return n===!0||n===!1}function ko(n){return JSON.parse(En.readFileSync(n,"utf8"))}var fu,ye;function oO(){if(ye={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:rn.MessageFormat.bundle},kr(process.env.VSCODE_NLS_CONFIG))try{var n=JSON.parse(process.env.VSCODE_NLS_CONFIG),e=void 0;if(n.availableLanguages){var t=n.availableLanguages["*"];kr(t)&&(e=t)}if(kr(n.locale)&&(ye.locale=n.locale.toLowerCase()),e===void 0?ye.language=ye.locale:e!=="en"&&(ye.language=e),iO(n._languagePackSupport)&&(ye.languagePackSupport=n._languagePackSupport),kr(n._cacheRoot)&&(ye.cacheRoot=n._cacheRoot),kr(n._languagePackId)&&(ye.languagePackId=n._languagePackId),kr(n._translationsConfigFile)){ye.translationsConfigFile=n._translationsConfigFile;try{ye.translationsConfig=ko(ye.translationsConfigFile)}catch{if(n._corruptedFile){var r=Jn.dirname(n._corruptedFile);En.exists(r,function(o){o&&En.writeFile(n._corruptedFile,"corrupted","utf8",function(s){console.error(s)})})}}}}catch{}(0,rn.setPseudo)(ye.locale==="pseudo"),fu=Object.create(null)}oO();function sO(){return ye.languagePackSupport===!0&&ye.cacheRoot!==void 0&&ye.languagePackId!==void 0&&ye.translationsConfigFile!==void 0&&ye.translationsConfig!==void 0}function qg(n){return function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(rO(e)){if(e>=n.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack));return}return(0,rn.format)(n[e],r)}else{if(kr(t))return console.warn("Message ".concat(t," didn't get externalized correctly.")),(0,rn.format)(t,r);console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}}function aO(n){var e;if(ye.cacheLanguageResolution&&e)e=e;else{if(rn.isPseudo||!ye.language)e=".nls.json";else for(var t=ye.language;t;){var r=".nls."+t+".json";if(En.existsSync(n+r)){e=r;break}else{var i=t.lastIndexOf("-");i>0?t=t.substring(0,i):(e=".nls.json",t=null)}}ye.cacheLanguageResolution&&(e=e)}return n+e}function cO(n){for(var e=ye.language;e;){var t=Jn.join(n,"nls.bundle.".concat(e,".json"));if(En.existsSync(t))return t;var r=e.lastIndexOf("-");r>0?e=e.substring(0,r):e=void 0}if(e===void 0){var t=Jn.join(n,"nls.bundle.json");if(En.existsSync(t))return t}}function uO(n){var e=ko(Jn.join(n,"nls.metadata.json")),t=Object.create(null);for(var r in e){var i=e[r];t[r]=i.messages}return t}function lO(n,e){var t=ye.translationsConfig[n.id];if(!!t){var r=ko(t).contents,i=ko(Jn.join(e,"nls.metadata.json")),o=Object.create(null);for(var s in i){var a=i[s],c=r["".concat(n.outDir,"/").concat(s)];if(c){for(var u=[],l=0;l<a.keys.length;l++){var f=a.keys[l],h=kr(f)?f:f.key,p=c[h];p===void 0&&(p=a.messages[l]),u.push(p)}o[s]=u}else o[s]=a.messages}return o}}function dO(n){var e=new Date;En.utimes(n,e,e,function(){})}function xg(n,e){return fu[n]=e,e}function fO(n,e){var t,r=Jn.join(ye.cacheRoot,"".concat(n.id,"-").concat(n.hash,".json")),i=!1,o=!1;try{return t=JSON.parse(En.readFileSync(r,{encoding:"utf8",flag:"r"})),dO(r),t}catch(s){if(s.code==="ENOENT")o=!0;else if(s instanceof SyntaxError)console.log("Syntax error parsing message bundle: ".concat(s.message,".")),En.unlink(r,function(a){a&&console.error("Deleting corrupted bundle ".concat(r," failed."))}),i=!0;else throw s}if(t=lO(n,e),!t||i)return t;if(o)try{En.writeFileSync(r,JSON.stringify(t),{encoding:"utf8",flag:"wx"})}catch(s){if(s.code==="EEXIST")return t;throw s}return t}function yb(n){try{return uO(n)}catch(e){console.log("Generating default bundle from meta data failed.",e);return}}function hO(n,e){var t;if(sO())try{t=fO(n,e)}catch(i){console.log("Load or create bundle failed ",i)}if(!t){if(ye.languagePackSupport)return yb(e);var r=cO(e);if(r)try{return ko(r)}catch(i){console.log("Loading in the box message bundle failed.",i)}t=yb(e)}return t}function pO(n){for(var e,t=Jn.dirname(n);e=Jn.join(t,"nls.metadata.header.json"),!En.existsSync(e);){var r=Jn.dirname(t);if(r===t){e=void 0;break}else t=r}return e}function kg(n){if(!n)return rn.localize;var e=Jn.extname(n);if(e&&(n=n.substr(0,n.length-e.length)),ye.messageFormat===rn.MessageFormat.both||ye.messageFormat===rn.MessageFormat.bundle){var t=pO(n);if(t){var r=Jn.dirname(t),i=fu[r];if(i===void 0)try{var o=JSON.parse(En.readFileSync(t,"utf8"));try{var s=hO(o,r);i=xg(r,s?{header:o,nlsBundle:s}:null)}catch(l){console.error("Failed to load nls bundle",l),i=xg(r,null)}}catch(l){console.error("Failed to read header file",l),i=xg(r,null)}if(i){var a=n.substr(r.length+1).replace(/\\/g,"/"),c=i.nlsBundle[a];return c===void 0?(console.error("Messages for file ".concat(n," not found. See console for details.")),function(){return"Messages not found."}):qg(c)}}}if(ye.messageFormat===rn.MessageFormat.both||ye.messageFormat===rn.MessageFormat.file)try{var u=ko(aO(n));return Array.isArray(u)?qg(u):(0,rn.isDefined)(u.messages)&&(0,rn.isDefined)(u.keys)?qg(u.messages):(console.error("String bundle '".concat(n,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(l){l.code!=="ENOENT"&&console.error("Failed to load single file bundle",l)}return console.error("Failed to load message bundle for file ".concat(n)),function(){return"Failed to load message bundle. See console for details."}}lr.loadMessageBundle=kg;function bb(n){return n&&(kr(n.locale)&&(ye.locale=n.locale.toLowerCase(),ye.language=ye.locale,fu=Object.create(null)),n.messageFormat!==void 0&&(ye.messageFormat=n.messageFormat),n.bundleFormat===rn.BundleFormat.standalone&&ye.languagePackSupport===!0&&(ye.languagePackSupport=!1)),(0,rn.setPseudo)(ye.locale==="pseudo"),kg}lr.config=bb;nO.default.install(Object.freeze({loadMessageBundle:kg,config:bb}))});var Db=D(Eo=>{var Eg=Eo&&Eo.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.register=void 0;var xi=require("vscode"),gO=wb(),mO=ur(),vO=gO.loadMessageBundle();function yO(n,e){return Eg(this,void 0,void 0,function*(){return xi.commands.registerCommand(n,t=>Eg(this,void 0,void 0,function*(){yield xi.window.withProgress({location:xi.ProgressLocation.Window,title:vO("progress.title","Finding file references")},r=>Eg(this,void 0,void 0,function*(){var i;if(!t){let u=xi.window.activeTextEditor;if(!u)return;t=u.document.uri}let o=yield e.sendRequest(mO.FindFileReferenceRequest.type,{textDocument:{uri:t.toString()}});if(!o)return;let s=o.map(u=>e.protocol2CodeConverter.asLocation(u)),a=xi.workspace.getConfiguration("references"),c=a.inspect("preferredLocation");yield a.update("preferredLocation","view");try{yield xi.commands.executeCommand("editor.action.showReferences",t,new xi.Position(0,0),s)}finally{yield a.update("preferredLocation",(i=c?.workspaceFolderValue)!==null&&i!==void 0?i:c?.workspaceValue)}}))}))})}Eo.register=yO});var Rb=D(Oo=>{var _O=Oo&&Oo.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.register=void 0;var Og=require("vscode"),CO=ur();function bO(n,e){return _O(this,void 0,void 0,function*(){return Og.commands.registerCommand(n,()=>{if(Og.window.activeTextEditor)for(let t of e)t.sendNotification(CO.ReloadProjectNotification.type,t.code2ProtocolConverter.asTextDocumentIdentifier(Og.window.activeTextEditor.document))})})}Oo.register=bO});var Tb=D(Fo=>{var Sb=Fo&&Fo.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.register=void 0;var wO=require("vscode"),DO=ur();function RO(n,e){return Sb(this,void 0,void 0,function*(){return wO.commands.registerCommand(n,()=>Sb(this,void 0,void 0,function*(){for(let t of e)yield t.sendNotification(DO.ReportStats.type),t.outputChannel.show()}))})}Fo.register=RO});var Fg=D((Ej,Pb)=>{Pb.exports=require("path")});var qb=D(No=>{var Ng=No&&No.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(No,"__esModule",{value:!0});No.register=void 0;var Qn=require("vscode"),SO=ur(),TO=Fg();function PO(n,e,t){return Ng(this,void 0,void 0,function*(){let r=[],i=Qn.window.createStatusBarItem(Qn.StatusBarAlignment.Right),o;s(),Qn.window.onDidChangeActiveTextEditor(s,void 0,r),r.push(Qn.commands.registerCommand(n,()=>Ng(this,void 0,void 0,function*(){if(o){let a=yield Qn.workspace.openTextDocument(o);yield Qn.window.showTextDocument(a)}}))),r.push(...r);function s(){return Ng(this,void 0,void 0,function*(){if(!Qn.window.activeTextEditor||!t(Qn.window.activeTextEditor.document))i.hide();else{let a=yield e.sendRequest(SO.GetMatchTsConfigRequest.type,e.code2ProtocolConverter.asTextDocumentIdentifier(Qn.window.activeTextEditor.document));a?.uri?(o=Qn.Uri.parse(a.uri),i.text=TO.relative(Qn.workspace.rootPath||"/",o.fsPath),i.command=n):(i.text="No tsconfig",i.command=void 0),i.show()}})}})}No.register=PO});var xb=D(Io=>{var qO=Io&&Io.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Io,"__esModule",{value:!0});Io.register=void 0;var ki=require("vscode"),xO=Ti(),kO=ur();function EO(n){return qO(this,void 0,void 0,function*(){let e=[];return t(),e.push(n.onDidChangeState(()=>{n.state===xO.State.Running&&t()})),ki.Disposable.from(...e);function t(){e.push(n.onNotification(kO.ShowReferencesNotification.type,r=>{let i=r.textDocument.uri,o=r.position,s=r.references;ki.commands.executeCommand("editor.action.showReferences",ki.Uri.parse(i),new ki.Position(o.line,o.character),s.map(a=>new ki.Location(ki.Uri.parse(a.uri),new ki.Range(a.range.start.line,a.range.start.character,a.range.end.line,a.range.end.character))))}))}})}Io.register=EO});var kb=D(Mo=>{var hu=Mo&&Mo.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.register=void 0;var pu=require("vscode"),OO=Ti(),Ig=ur();function FO(n){return hu(this,void 0,void 0,function*(){let e=[];return t(),e.push(n.onDidChangeState(()=>{n.state===OO.State.Running&&t()})),pu.Disposable.from(...e);function t(){e.push(n.onRequest(Ig.FsStatRequest.type,r=>hu(this,void 0,void 0,function*(){try{return yield pu.workspace.fs.stat(n.protocol2CodeConverter.asUri(r))}catch{return}}))),e.push(n.onRequest(Ig.FsReadFileRequest.type,r=>hu(this,void 0,void 0,function*(){try{let i=yield pu.workspace.fs.readFile(n.protocol2CodeConverter.asUri(r));return new TextDecoder("utf8").decode(i)}catch{return}}))),e.push(n.onRequest(Ig.FsReadDirectoryRequest.type,r=>hu(this,void 0,void 0,function*(){try{return yield pu.workspace.fs.readDirectory(n.protocol2CodeConverter.asUri(r))}catch{return[]}})))}})}Mo.register=FO});var Mg=D(gu=>{Object.defineProperty(gu,"__esModule",{value:!0});gu.quickPick=void 0;var Eb=require("vscode");function NO(n,e){return new Promise(t=>{let r=Eb.window.createQuickPick(),i=[];for(let o of Array.isArray(n)?n:[n]){let s=Object.values(o);if(s.length){i.length&&i.push({label:"",kind:Eb.QuickPickItemKind.Separator});for(let a of s)a&&i.push(a)}}r.items=i,r.placeholder=e,r.onDidChangeSelection(o=>{if(o[0])for(let s of Array.isArray(n)?n:[n])for(let a in s){let c=s[a];if(o[0]===c){t(a),r.hide();break}}}),r.onDidHide(()=>{r.dispose(),t(void 0)}),r.show()})}gu.quickPick=NO});var Fb={};um(Fb,{URI:()=>IO,Utils:()=>MO});var Ob,IO,MO,Nb=cm(()=>{(()=>{"use strict";var n={470:i=>{function o(c){if(typeof c!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(c))}function s(c,u){for(var l,f="",h=0,p=-1,g=0,C=0;C<=c.length;++C){if(C<c.length)l=c.charCodeAt(C);else{if(l===47)break;l=47}if(l===47){if(!(p===C-1||g===1))if(p!==C-1&&g===2){if(f.length<2||h!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var b=f.lastIndexOf("/");if(b!==f.length-1){b===-1?(f="",h=0):h=(f=f.slice(0,b)).length-1-f.lastIndexOf("/"),p=C,g=0;continue}}else if(f.length===2||f.length===1){f="",h=0,p=C,g=0;continue}}u&&(f.length>0?f+="/..":f="..",h=2)}else f.length>0?f+="/"+c.slice(p+1,C):f=c.slice(p+1,C),h=C-p-1;p=C,g=0}else l===46&&g!==-1?++g:g=-1}return f}var a={resolve:function(){for(var c,u="",l=!1,f=arguments.length-1;f>=-1&&!l;f--){var h;f>=0?h=arguments[f]:(c===void 0&&(c=process.cwd()),h=c),o(h),h.length!==0&&(u=h+"/"+u,l=h.charCodeAt(0)===47)}return u=s(u,!l),l?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(c){if(o(c),c.length===0)return".";var u=c.charCodeAt(0)===47,l=c.charCodeAt(c.length-1)===47;return(c=s(c,!u)).length!==0||u||(c="."),c.length>0&&l&&(c+="/"),u?"/"+c:c},isAbsolute:function(c){return o(c),c.length>0&&c.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var c,u=0;u<arguments.length;++u){var l=arguments[u];o(l),l.length>0&&(c===void 0?c=l:c+="/"+l)}return c===void 0?".":a.normalize(c)},relative:function(c,u){if(o(c),o(u),c===u||(c=a.resolve(c))===(u=a.resolve(u)))return"";for(var l=1;l<c.length&&c.charCodeAt(l)===47;++l);for(var f=c.length,h=f-l,p=1;p<u.length&&u.charCodeAt(p)===47;++p);for(var g=u.length-p,C=h<g?h:g,b=-1,R=0;R<=C;++R){if(R===C){if(g>C){if(u.charCodeAt(p+R)===47)return u.slice(p+R+1);if(R===0)return u.slice(p+R)}else h>C&&(c.charCodeAt(l+R)===47?b=R:R===0&&(b=0));break}var y=c.charCodeAt(l+R);if(y!==u.charCodeAt(p+R))break;y===47&&(b=R)}var _="";for(R=l+b+1;R<=f;++R)R!==f&&c.charCodeAt(R)!==47||(_.length===0?_+="..":_+="/..");return _.length>0?_+u.slice(p+b):(p+=b,u.charCodeAt(p)===47&&++p,u.slice(p))},_makeLong:function(c){return c},dirname:function(c){if(o(c),c.length===0)return".";for(var u=c.charCodeAt(0),l=u===47,f=-1,h=!0,p=c.length-1;p>=1;--p)if((u=c.charCodeAt(p))===47){if(!h){f=p;break}}else h=!1;return f===-1?l?"/":".":l&&f===1?"//":c.slice(0,f)},basename:function(c,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(c);var l,f=0,h=-1,p=!0;if(u!==void 0&&u.length>0&&u.length<=c.length){if(u.length===c.length&&u===c)return"";var g=u.length-1,C=-1;for(l=c.length-1;l>=0;--l){var b=c.charCodeAt(l);if(b===47){if(!p){f=l+1;break}}else C===-1&&(p=!1,C=l+1),g>=0&&(b===u.charCodeAt(g)?--g==-1&&(h=l):(g=-1,h=C))}return f===h?h=C:h===-1&&(h=c.length),c.slice(f,h)}for(l=c.length-1;l>=0;--l)if(c.charCodeAt(l)===47){if(!p){f=l+1;break}}else h===-1&&(p=!1,h=l+1);return h===-1?"":c.slice(f,h)},extname:function(c){o(c);for(var u=-1,l=0,f=-1,h=!0,p=0,g=c.length-1;g>=0;--g){var C=c.charCodeAt(g);if(C!==47)f===-1&&(h=!1,f=g+1),C===46?u===-1?u=g:p!==1&&(p=1):u!==-1&&(p=-1);else if(!h){l=g+1;break}}return u===-1||f===-1||p===0||p===1&&u===f-1&&u===l+1?"":c.slice(u,f)},format:function(c){if(c===null||typeof c!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof c);return function(u,l){var f=l.dir||l.root,h=l.base||(l.name||"")+(l.ext||"");return f?f===l.root?f+h:f+"/"+h:h}(0,c)},parse:function(c){o(c);var u={root:"",dir:"",base:"",ext:"",name:""};if(c.length===0)return u;var l,f=c.charCodeAt(0),h=f===47;h?(u.root="/",l=1):l=0;for(var p=-1,g=0,C=-1,b=!0,R=c.length-1,y=0;R>=l;--R)if((f=c.charCodeAt(R))!==47)C===-1&&(b=!1,C=R+1),f===46?p===-1?p=R:y!==1&&(y=1):p!==-1&&(y=-1);else if(!b){g=R+1;break}return p===-1||C===-1||y===0||y===1&&p===C-1&&p===g+1?C!==-1&&(u.base=u.name=g===0&&h?c.slice(1,C):c.slice(g,C)):(g===0&&h?(u.name=c.slice(1,p),u.base=c.slice(1,C)):(u.name=c.slice(g,p),u.base=c.slice(g,C)),u.ext=c.slice(p,C)),g>0?u.dir=c.slice(0,g-1):h&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,i.exports=a}},e={};function t(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return n[i](s,s.exports,t),s.exports}t.d=(i,o)=>{for(var s in o)t.o(o,s)&&!t.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},t.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),t.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{var i;if(t.r(r),t.d(r,{URI:()=>b,Utils:()=>ge}),typeof process=="object")i=process.platform==="win32";else if(typeof navigator=="object"){var o=navigator.userAgent;i=o.indexOf("Windows")>=0}var s,a,c=(s=function(I,x){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,j){F.__proto__=j}||function(F,j){for(var Z in j)Object.prototype.hasOwnProperty.call(j,Z)&&(F[Z]=j[Z])},s(I,x)},function(I,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function F(){this.constructor=I}s(I,x),I.prototype=x===null?Object.create(x):(F.prototype=x.prototype,new F)}),u=/^\w[\w\d+.-]*$/,l=/^\//,f=/^\/\//;function h(I,x){if(!I.scheme&&x)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(I.authority,'", path: "').concat(I.path,'", query: "').concat(I.query,'", fragment: "').concat(I.fragment,'"}'));if(I.scheme&&!u.test(I.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(I.path){if(I.authority){if(!l.test(I.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(f.test(I.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var p="",g="/",C=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,b=function(){function I(x,F,j,Z,se,J){J===void 0&&(J=!1),typeof x=="object"?(this.scheme=x.scheme||p,this.authority=x.authority||p,this.path=x.path||p,this.query=x.query||p,this.fragment=x.fragment||p):(this.scheme=function(kt,gt){return kt||gt?kt:"file"}(x,J),this.authority=F||p,this.path=function(kt,gt){switch(kt){case"https":case"http":case"file":gt?gt[0]!==g&&(gt=g+gt):gt=g}return gt}(this.scheme,j||p),this.query=Z||p,this.fragment=se||p,h(this,J))}return I.isUri=function(x){return x instanceof I||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="string"&&typeof x.with=="function"&&typeof x.toString=="function"},Object.defineProperty(I.prototype,"fsPath",{get:function(){return V(this,!1)},enumerable:!1,configurable:!0}),I.prototype.with=function(x){if(!x)return this;var F=x.scheme,j=x.authority,Z=x.path,se=x.query,J=x.fragment;return F===void 0?F=this.scheme:F===null&&(F=p),j===void 0?j=this.authority:j===null&&(j=p),Z===void 0?Z=this.path:Z===null&&(Z=p),se===void 0?se=this.query:se===null&&(se=p),J===void 0?J=this.fragment:J===null&&(J=p),F===this.scheme&&j===this.authority&&Z===this.path&&se===this.query&&J===this.fragment?this:new y(F,j,Z,se,J)},I.parse=function(x,F){F===void 0&&(F=!1);var j=C.exec(x);return j?new y(j[2]||p,Ne(j[4]||p),Ne(j[5]||p),Ne(j[7]||p),Ne(j[9]||p),F):new y(p,p,p,p,p)},I.file=function(x){var F=p;if(i&&(x=x.replace(/\\/g,g)),x[0]===g&&x[1]===g){var j=x.indexOf(g,2);j===-1?(F=x.substring(2),x=g):(F=x.substring(2,j),x=x.substring(j)||g)}return new y("file",F,x,p,p)},I.from=function(x){var F=new y(x.scheme,x.authority,x.path,x.query,x.fragment);return h(F,!0),F},I.prototype.toString=function(x){return x===void 0&&(x=!1),U(this,x)},I.prototype.toJSON=function(){return this},I.revive=function(x){if(x){if(x instanceof I)return x;var F=new y(x);return F._formatted=x.external,F._fsPath=x._sep===R?x.fsPath:null,F}return x},I}(),R=i?1:void 0,y=function(I){function x(){var F=I!==null&&I.apply(this,arguments)||this;return F._formatted=null,F._fsPath=null,F}return c(x,I),Object.defineProperty(x.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=V(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),x.prototype.toString=function(F){return F===void 0&&(F=!1),F?U(this,!0):(this._formatted||(this._formatted=U(this,!1)),this._formatted)},x.prototype.toJSON=function(){var F={$mid:1};return this._fsPath&&(F.fsPath=this._fsPath,F._sep=R),this._formatted&&(F.external=this._formatted),this.path&&(F.path=this.path),this.scheme&&(F.scheme=this.scheme),this.authority&&(F.authority=this.authority),this.query&&(F.query=this.query),this.fragment&&(F.fragment=this.fragment),F},x}(b),_=((a={})[58]="%3A",a[47]="%2F",a[63]="%3F",a[35]="%23",a[91]="%5B",a[93]="%5D",a[64]="%40",a[33]="%21",a[36]="%24",a[38]="%26",a[39]="%27",a[40]="%28",a[41]="%29",a[42]="%2A",a[43]="%2B",a[44]="%2C",a[59]="%3B",a[61]="%3D",a[32]="%20",a);function T(I,x,F){for(var j=void 0,Z=-1,se=0;se<I.length;se++){var J=I.charCodeAt(se);if(J>=97&&J<=122||J>=65&&J<=90||J>=48&&J<=57||J===45||J===46||J===95||J===126||x&&J===47||F&&J===91||F&&J===93||F&&J===58)Z!==-1&&(j+=encodeURIComponent(I.substring(Z,se)),Z=-1),j!==void 0&&(j+=I.charAt(se));else{j===void 0&&(j=I.substr(0,se));var kt=_[J];kt!==void 0?(Z!==-1&&(j+=encodeURIComponent(I.substring(Z,se)),Z=-1),j+=kt):Z===-1&&(Z=se)}}return Z!==-1&&(j+=encodeURIComponent(I.substring(Z))),j!==void 0?j:I}function N(I){for(var x=void 0,F=0;F<I.length;F++){var j=I.charCodeAt(F);j===35||j===63?(x===void 0&&(x=I.substr(0,F)),x+=_[j]):x!==void 0&&(x+=I[F])}return x!==void 0?x:I}function V(I,x){var F;return F=I.authority&&I.path.length>1&&I.scheme==="file"?"//".concat(I.authority).concat(I.path):I.path.charCodeAt(0)===47&&(I.path.charCodeAt(1)>=65&&I.path.charCodeAt(1)<=90||I.path.charCodeAt(1)>=97&&I.path.charCodeAt(1)<=122)&&I.path.charCodeAt(2)===58?x?I.path.substr(1):I.path[1].toLowerCase()+I.path.substr(2):I.path,i&&(F=F.replace(/\//g,"\\")),F}function U(I,x){var F=x?N:T,j="",Z=I.scheme,se=I.authority,J=I.path,kt=I.query,gt=I.fragment;if(Z&&(j+=Z,j+=":"),(se||Z==="file")&&(j+=g,j+=g),se){var wt=se.indexOf("@");if(wt!==-1){var vn=se.substr(0,wt);se=se.substr(wt+1),(wt=vn.lastIndexOf(":"))===-1?j+=F(vn,!1,!1):(j+=F(vn.substr(0,wt),!1,!1),j+=":",j+=F(vn.substr(wt+1),!1,!0)),j+="@"}(wt=(se=se.toLowerCase()).lastIndexOf(":"))===-1?j+=F(se,!1,!0):(j+=F(se.substr(0,wt),!1,!0),j+=se.substr(wt))}if(J){if(J.length>=3&&J.charCodeAt(0)===47&&J.charCodeAt(2)===58)(Jt=J.charCodeAt(1))>=65&&Jt<=90&&(J="/".concat(String.fromCharCode(Jt+32),":").concat(J.substr(3)));else if(J.length>=2&&J.charCodeAt(1)===58){var Jt;(Jt=J.charCodeAt(0))>=65&&Jt<=90&&(J="".concat(String.fromCharCode(Jt+32),":").concat(J.substr(2)))}j+=F(J,!0,!1)}return kt&&(j+="?",j+=F(kt,!1,!1)),gt&&(j+="#",j+=x?gt:T(gt,!1,!1)),j}function re(I){try{return decodeURIComponent(I)}catch{return I.length>3?I.substr(0,3)+re(I.substr(3)):I}}var ee=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ne(I){return I.match(ee)?I.replace(ee,function(x){return re(x)}):I}var ge,st=t(470),On=function(I,x,F){if(F||arguments.length===2)for(var j,Z=0,se=x.length;Z<se;Z++)!j&&Z in x||(j||(j=Array.prototype.slice.call(x,0,Z)),j[Z]=x[Z]);return I.concat(j||Array.prototype.slice.call(x))},yt=st.posix||st,pt="/";(function(I){I.joinPath=function(x){for(var F=[],j=1;j<arguments.length;j++)F[j-1]=arguments[j];return x.with({path:yt.join.apply(yt,On([x.path],F,!1))})},I.resolvePath=function(x){for(var F=[],j=1;j<arguments.length;j++)F[j-1]=arguments[j];var Z=x.path,se=!1;Z[0]!==pt&&(Z=pt+Z,se=!0);var J=yt.resolve.apply(yt,On([Z],F,!1));return se&&J[0]===pt&&!x.authority&&(J=J.substring(1)),x.with({path:J})},I.dirname=function(x){if(x.path.length===0||x.path===pt)return x;var F=yt.dirname(x.path);return F.length===1&&F.charCodeAt(0)===46&&(F=""),x.with({path:F})},I.basename=function(x){return yt.basename(x.path)},I.extname=function(x){return yt.extname(x.path)}})(ge||(ge={}))})(),Ob=r})();({URI:IO,Utils:MO}=Ob)});var Ab=D(on=>{Object.defineProperty(on,"__esModule",{value:!0});on.notEmpty=on.sleep=on.syntaxToLanguageId=on.fileNameToUri=on.uriToFileName=on.normalizeFileName=void 0;var Ib=(Nb(),ia(Fb));function jO(n){return Mb(jb(n))}on.normalizeFileName=jO;function Mb(n){if(n.startsWith("https://unpkg.com/"))return"/__uri__/node_modules/"+n.replace("https://unpkg.com/","");let e=Ib.URI.parse(n);return e.scheme==="file"?e.fsPath.replace(/\\/g,"/"):"/__uri__/"+n.replace("://","__uri_scheme__")}on.uriToFileName=Mb;function jb(n){return n.startsWith("/__uri__/node_modules/")?n.replace("/__uri__/node_modules/","https://unpkg.com/"):n.startsWith("/__uri__/")?n.replace("/__uri__/","").replace("__uri_scheme__","://"):Ib.URI.file(n).toString()}on.fileNameToUri=jb;function AO(n){switch(n){case"js":return"javascript";case"cjs":return"javascript";case"mjs":return"javascript";case"ts":return"typescript";case"cts":return"typescript";case"mts":return"typescript";case"jsx":return"javascriptreact";case"tsx":return"typescriptreact";case"pug":return"jade";case"md":return"markdown"}return n}on.syntaxToLanguageId=AO;function LO(n){return new Promise(e=>setTimeout(e,n))}on.sleep=LO;function HO(n){return n!=null}on.notEmpty=HO});var $b=D(Yr=>{var jo=Yr&&Yr.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.getTsdk=Yr.register=void 0;var jg=Fg(),Ke=require("vscode"),$O=Mg(),WO=Ab(),Ys="node_modules/typescript/lib";function UO(n,e,t,r,i){return jo(this,void 0,void 0,function*(){let o=[],s=Ke.window.createStatusBarItem(Ke.StatusBarAlignment.Right);return s.command=n,o.push({dispose:()=>s.dispose()}),o.push(Ke.commands.registerCommand(n,a)),Ke.workspace.onDidChangeConfiguration(c,void 0,o),Ke.window.onDidChangeActiveTextEditor(u,void 0,o),u(),Ke.Disposable.from(...o);function a(){var f,h,p,g;return jo(this,void 0,void 0,function*(){let C=vu(e),b=Hb(),R=Lb(),y=R.scheme!=="file",_=yield(0,$O.quickPick)([{useVSCodeTsdk:{label:(C.isWorkspacePath?"":"\u2022 ")+"Use VS Code's Version",description:yield mu(R),detail:y?R.toString(!0):void 0},useConfigWorkspaceTsdk:b&&!y?{label:(C.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:(h=yield mu(Ke.Uri.file((f=Ag(b))!==null&&f!==void 0?f:"/")))!==null&&h!==void 0?h:"Could not load the TypeScript version at this path",detail:b}:void 0,useDefaultWorkspaceTsdk:b!==Ys&&!y?{label:(C.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:(g=yield mu(Ke.Uri.file((p=Ag(Ys))!==null&&p!==void 0?p:"/")))!==null&&g!==void 0?g:"Could not load the TypeScript version at this path",detail:Ys}:void 0},{takeover:{label:"What is Takeover Mode?"}}]);if(_===void 0)return;if(_==="takeover"){Ke.env.openExternal(Ke.Uri.parse("https://vuejs.org/guide/typescript/overview.html#volar-takeover-mode"));return}_==="useDefaultWorkspaceTsdk"&&(yield Ke.workspace.getConfiguration("typescript").update("tsdk",Ys));let T=_==="useConfigWorkspaceTsdk"||_==="useDefaultWorkspaceTsdk";T!==Lg(e)&&(e.workspaceState.update("typescript.useWorkspaceTsdk",T),l()),u()})}function c(f){f.affectsConfiguration("typescript.tsdk")&&Lg(e)&&l()}function u(){return jo(this,void 0,void 0,function*(){if(!Ke.window.activeTextEditor||!r(Ke.window.activeTextEditor.document))s.hide();else{let f=yield mu(vu(e).uri);s.text=f??"x.x.x",s.text=i(s.text),s.show()}})}function l(){return jo(this,void 0,void 0,function*(){let f=vu(e),h=Object.assign(Object.assign({},t.clientOptions.initializationOptions),{typescript:f});t.clientOptions.initializationOptions=h,Ke.commands.executeCommand("volar.action.restartServer")})}})}Yr.register=UO;function vu(n){if(Lg(n)){let t=Ag(Hb()||Ys);if(t)return{tsdk:t,uri:Ke.Uri.file(t),isWorkspacePath:!0}}let e=Lb();return{tsdk:WO.uriToFileName(e.toString()),uri:e,isWorkspacePath:!1}}Yr.getTsdk=vu;function Ag(n){var e;if(jg.isAbsolute(n))try{if(require.resolve("./typescript.js",{paths:[n]}))return n}catch{}let t=((e=Ke.workspace.workspaceFolders)!==null&&e!==void 0?e:[]).map(r=>r.uri.fsPath);for(let r of t){let i=jg.join(r,n);try{if(require.resolve("./typescript.js",{paths:[i]}))return i}catch{}}}function Lb(){let n=Ke.extensions.getExtension("ms-vscode.vscode-typescript-next");if(n)return Ke.Uri.parse(n.extensionUri.toString()+"/node_modules/typescript/lib");if(Ke.env.appRoot)return Ke.Uri.file(jg.join(Ke.env.appRoot,"extensions/node_modules/typescript/lib"));let e=require("typescript/package.json").version;return Ke.Uri.parse(`https://unpkg.com/typescript@${e}/lib`)}function Hb(){return Ke.workspace.getConfiguration("typescript").get("tsdk")}function Lg(n){return n.workspaceState.get("typescript.useWorkspaceTsdk",!1)}function mu(n){return jo(this,void 0,void 0,function*(){if(n.scheme!=="file")return require("typescript/package.json").version;let i=n.toString().split("/").slice(0,-1).join("/"),o=Ke.Uri.parse(i+"/package.json"),s=yield zO(o);if(s===void 0)return;let a=null;try{a=JSON.parse(s)}catch{return}if(!(!a||!a.version))return a.version})}function zO(n){return jo(this,void 0,void 0,function*(){try{let e=yield Ke.workspace.fs.readFile(n);return new TextDecoder("utf8").decode(e)}catch{}})}});var zb=D(Le=>{Object.defineProperty(Le,"__esModule",{value:!0});Le.takeOverModeActive=Le.getTsdk=Le.activateTsVersionStatusItem=Le.activateServerSys=Le.activateShowReferences=Le.activateTsConfigStatusItem=Le.activateServerStats=Le.activateReloadProjects=Le.activateFindFileReferences=Le.activateWriteVirtualFiles=Le.activateShowVirtualFiles=Le.activateAutoInsertion=void 0;var Wb=require("vscode"),KO=rb();Object.defineProperty(Le,"activateAutoInsertion",{enumerable:!0,get:function(){return KO.register}});var BO=hb();Object.defineProperty(Le,"activateShowVirtualFiles",{enumerable:!0,get:function(){return BO.register}});var GO=pb();Object.defineProperty(Le,"activateWriteVirtualFiles",{enumerable:!0,get:function(){return GO.register}});var VO=Db();Object.defineProperty(Le,"activateFindFileReferences",{enumerable:!0,get:function(){return VO.register}});var XO=Rb();Object.defineProperty(Le,"activateReloadProjects",{enumerable:!0,get:function(){return XO.register}});var JO=Tb();Object.defineProperty(Le,"activateServerStats",{enumerable:!0,get:function(){return JO.register}});var QO=qb();Object.defineProperty(Le,"activateTsConfigStatusItem",{enumerable:!0,get:function(){return QO.register}});var YO=xb();Object.defineProperty(Le,"activateShowReferences",{enumerable:!0,get:function(){return YO.register}});var ZO=kb();Object.defineProperty(Le,"activateServerSys",{enumerable:!0,get:function(){return ZO.register}});var Ub=$b();Object.defineProperty(Le,"activateTsVersionStatusItem",{enumerable:!0,get:function(){return Ub.register}});Object.defineProperty(Le,"getTsdk",{enumerable:!0,get:function(){return Ub.getTsdk}});function eF(n){return Wb.workspace.getConfiguration("volar").get("takeOverMode.extension")===n.extension.id?!Wb.extensions.getExtension("vscode.typescript-language-features"):!1}Le.takeOverModeActive=eF});var Bb=D(Ao=>{var Hg=Ao&&Ao.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.register=void 0;var Er=require("vscode"),tF=Hr(),Kb="vue-component-meta";function nF(n,e){return Hg(this,void 0,void 0,function*(){let t=new Map,r=new Map,i=new Er.EventEmitter,o;n.subscriptions.push(Er.workspace.onDidChangeTextDocument(s=>{let a=t.get(s.document.uri.toString());a&&(clearTimeout(o),o=setTimeout(()=>{i.fire(Er.Uri.parse(a))},100))})),n.subscriptions.push(Er.workspace.registerTextDocumentContentProvider(Kb,{onDidChange:i.event,provideTextDocumentContent(s){return Hg(this,void 0,void 0,function*(){let a=r.get(s.toString());if(a){let c=yield e.sendRequest(tF.GetComponentMeta.type,{uri:a.document.uri.toString()});return JSON.stringify(c,void 0,"	")}})}})),n.subscriptions.push(Er.commands.registerCommand("volar.action.showComponentMeta",()=>Hg(this,void 0,void 0,function*(){let s=Er.window.activeTextEditor;if(s){let a=s.document.uri.with({scheme:Kb}).toString()+".meta.json";t.set(s.document.uri.toString(),a),r.set(a,s),Er.window.showTextDocument(Er.Uri.parse(a),{viewColumn:Er.ViewColumn.Two,preview:!1})}})))})}Ao.register=nF});var Vb=D((Hj,Gb)=>{var rF=Kr(),iF=(n,e)=>{let t=rF(n,e);return t?t.version:null};Gb.exports=iF});var Jb=D(($j,Xb)=>{var oF=Kr(),sF=(n,e)=>{let t=oF(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Xb.exports=sF});var Zb=D((Wj,Yb)=>{var Qb=It(),aF=(n,e,t,r)=>{typeof t=="string"&&(r=t,t=void 0);try{return new Qb(n instanceof Qb?n.version:n,t).inc(e,r).version}catch{return null}};Yb.exports=aF});var nw=D((Uj,tw)=>{var ew=Kr(),cF=Fc(),uF=(n,e)=>{if(cF(n,e))return null;{let t=ew(n),r=ew(e),i=t.prerelease.length||r.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in t)if((a==="major"||a==="minor"||a==="patch")&&t[a]!==r[a])return o+a;return s}};tw.exports=uF});var iw=D((zj,rw)=>{var lF=It(),dF=(n,e)=>new lF(n,e).major;rw.exports=dF});var sw=D((Kj,ow)=>{var fF=It(),hF=(n,e)=>new fF(n,e).minor;ow.exports=hF});var cw=D((Bj,aw)=>{var pF=It(),gF=(n,e)=>new pF(n,e).patch;aw.exports=gF});var lw=D((Gj,uw)=>{var mF=Kr(),vF=(n,e)=>{let t=mF(n,e);return t&&t.prerelease.length?t.prerelease:null};uw.exports=vF});var fw=D((Vj,dw)=>{var yF=Tn(),_F=(n,e,t)=>yF(e,n,t);dw.exports=_F});var pw=D((Xj,hw)=>{var CF=Tn(),bF=(n,e)=>CF(n,e,!0);hw.exports=bF});var yu=D((Jj,mw)=>{var gw=It(),wF=(n,e,t)=>{let r=new gw(n,t),i=new gw(e,t);return r.compare(i)||r.compareBuild(i)};mw.exports=wF});var yw=D((Qj,vw)=>{var DF=yu(),RF=(n,e)=>n.sort((t,r)=>DF(t,r,e));vw.exports=RF});var Cw=D((Yj,_w)=>{var SF=yu(),TF=(n,e)=>n.sort((t,r)=>SF(r,t,e));_w.exports=TF});var ww=D((Zj,bw)=>{var PF=It(),qF=Kr(),{re:_u,t:Cu}=bi(),xF=(n,e)=>{if(n instanceof PF)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(_u[Cu.COERCE]);else{let r;for(;(r=_u[Cu.COERCERTL].exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||r.index+r[0].length!==t.index+t[0].length)&&(t=r),_u[Cu.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;_u[Cu.COERCERTL].lastIndex=-1}return t===null?null:qF(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};bw.exports=xF});var Rw=D((eA,Dw)=>{var kF=Pn(),EF=(n,e)=>new kF(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));Dw.exports=EF});var Tw=D((tA,Sw)=>{var OF=It(),FF=Pn(),NF=(n,e,t)=>{let r=null,i=null,o=null;try{o=new FF(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new OF(r,t))}),r};Sw.exports=NF});var qw=D((nA,Pw)=>{var IF=It(),MF=Pn(),jF=(n,e,t)=>{let r=null,i=null,o=null;try{o=new MF(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new IF(r,t))}),r};Pw.exports=jF});var Ew=D((rA,kw)=>{var $g=It(),AF=Pn(),xw=Us(),LF=(n,e)=>{n=new AF(n,e);let t=new $g("0.0.0");if(n.test(t)||(t=new $g("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],o=null;i.forEach(s=>{let a=new $g(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||xw(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!t||xw(t,o))&&(t=o)}return t&&n.test(t)?t:null};kw.exports=LF});var Fw=D((iA,Ow)=>{var HF=Pn(),$F=(n,e)=>{try{return new HF(n,e).range||"*"}catch{return null}};Ow.exports=$F});var bu=D((oA,jw)=>{var WF=It(),Mw=Ks(),{ANY:UF}=Mw,zF=Pn(),KF=bo(),Nw=Us(),Iw=Ic(),BF=Mc(),GF=Nc(),VF=(n,e,t,r)=>{n=new WF(n,r),e=new zF(e,r);let i,o,s,a,c;switch(t){case">":i=Nw,o=BF,s=Iw,a=">",c=">=";break;case"<":i=Iw,o=GF,s=Nw,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(KF(n,e,r))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],f=null,h=null;if(l.forEach(p=>{p.semver===UF&&(p=new Mw(">=0.0.0")),f=f||p,h=h||p,i(p.semver,f.semver,r)?f=p:s(p.semver,h.semver,r)&&(h=p)}),f.operator===a||f.operator===c||(!h.operator||h.operator===a)&&o(n,h.semver))return!1;if(h.operator===c&&s(n,h.semver))return!1}return!0};jw.exports=VF});var Lw=D((sA,Aw)=>{var XF=bu(),JF=(n,e,t)=>XF(n,e,">",t);Aw.exports=JF});var $w=D((aA,Hw)=>{var QF=bu(),YF=(n,e,t)=>QF(n,e,"<",t);Hw.exports=YF});var zw=D((cA,Uw)=>{var Ww=Pn(),ZF=(n,e,t)=>(n=new Ww(n,t),e=new Ww(e,t),n.intersects(e));Uw.exports=ZF});var Bw=D((uA,Kw)=>{var eN=bo(),tN=Tn();Kw.exports=(n,e,t)=>{let r=[],i=null,o=null,s=n.sort((l,f)=>tN(l,f,t));for(let l of s)eN(l,e,t)?(o=l,i||(i=l)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[l,f]of r)l===f?a.push(l):!f&&l===s[0]?a.push("*"):f?l===s[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var Qw=D((lA,Jw)=>{var Gw=Pn(),wu=Ks(),{ANY:Wg}=wu,Zs=bo(),Ug=Tn(),nN=(n,e,t={})=>{if(n===e)return!0;n=new Gw(n,t),e=new Gw(e,t);let r=!1;e:for(let i of n.set){for(let o of e.set){let s=rN(i,o,t);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},rN=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Wg){if(e.length===1&&e[0].semver===Wg)return!0;t.includePrerelease?n=[new wu(">=0.0.0-0")]:n=[new wu(">=0.0.0")]}if(e.length===1&&e[0].semver===Wg){if(t.includePrerelease)return!0;e=[new wu(">=0.0.0")]}let r=new Set,i,o;for(let p of n)p.operator===">"||p.operator===">="?i=Vw(i,p,t):p.operator==="<"||p.operator==="<="?o=Xw(o,p,t):r.add(p.semver);if(r.size>1)return null;let s;if(i&&o){if(s=Ug(i.semver,o.semver,t),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of r){if(i&&!Zs(p,String(i),t)||o&&!Zs(p,String(o),t))return null;for(let g of e)if(!Zs(p,String(g),t))return!1;return!0}let a,c,u,l,f=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let p of e){if(l=l||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",i){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator===">"||p.operator===">="){if(a=Vw(i,p,t),a===p&&a!==i)return!1}else if(i.operator===">="&&!Zs(i.semver,String(p),t))return!1}if(o){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(c=Xw(o,p,t),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Zs(o.semver,String(p),t))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&l&&!i&&s!==0||h||f)},Vw=(n,e,t)=>{if(!n)return e;let r=Ug(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},Xw=(n,e,t)=>{if(!n)return e;let r=Ug(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};Jw.exports=nN});var eD=D((dA,Zw)=>{var zg=bi(),iN=As(),oN=It(),Yw=qp(),sN=Kr(),aN=Vb(),cN=Jb(),uN=Zb(),lN=nw(),dN=iw(),fN=sw(),hN=cw(),pN=lw(),gN=Tn(),mN=fw(),vN=pw(),yN=yu(),_N=yw(),CN=Cw(),bN=Us(),wN=Ic(),DN=Fc(),RN=Fp(),SN=Nc(),TN=Mc(),PN=Np(),qN=ww(),xN=Ks(),kN=Pn(),EN=bo(),ON=Rw(),FN=Tw(),NN=qw(),IN=Ew(),MN=Fw(),jN=bu(),AN=Lw(),LN=$w(),HN=zw(),$N=Bw(),WN=Qw();Zw.exports={parse:sN,valid:aN,clean:cN,inc:uN,diff:lN,major:dN,minor:fN,patch:hN,prerelease:pN,compare:gN,rcompare:mN,compareLoose:vN,compareBuild:yN,sort:_N,rsort:CN,gt:bN,lt:wN,eq:DN,neq:RN,gte:SN,lte:TN,cmp:PN,coerce:qN,Comparator:xN,Range:kN,satisfies:EN,toComparators:ON,maxSatisfying:FN,minSatisfying:NN,minVersion:IN,validRange:MN,outside:jN,gtr:AN,ltr:LN,intersects:HN,simplifyRange:$N,subset:WN,SemVer:oN,re:zg.re,src:zg.src,tokens:zg.t,SEMVER_SPEC_VERSION:iN.SEMVER_SPEC_VERSION,compareIdentifiers:Yw.compareIdentifiers,rcompareIdentifiers:Yw.rcompareIdentifiers}});var rD=D(Lo=>{var Du=Lo&&Lo.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.register=void 0;var jt=require("vscode"),Ei=eD(),Kg=Hr(),tD="vue-doctor",nD={postcss:["cpylua.language-postcss","vunguyentuan.vscode-postcss","csstools.postcss"],stylus:["sysoev.language-stylus"],sass:["Syler.sass-indented"]};function UN(n,e){return Du(this,void 0,void 0,function*(){let t=jt.window.createStatusBarItem(jt.StatusBarAlignment.Right);t.backgroundColor=new jt.ThemeColor("statusBarItem.warningBackground"),t.command="volar.action.doctor";let r=new jt.EventEmitter;o(jt.window.activeTextEditor),n.subscriptions.push(jt.window.onDidChangeActiveTextEditor(o)),n.subscriptions.push(jt.workspace.registerTextDocumentContentProvider(tD,{onDidChange:r.event,provideTextDocumentContent(a){return Du(this,void 0,void 0,function*(){let c=a.with({scheme:"file",path:a.path.substring(0,a.path.length-10)}),u=yield s(c),l=`# ${c.path.split("/").pop()} Doctor

`;for(let f of u)l+="## \u2757 "+f.title+`

`,l+=f.message+`

`;return l+=`---

`,l+=`> Have any questions about the report message? You can see how it is composed by inspecting the [source code](https://github.com/johnsoncodehk/volar/blob/master/packages/vscode-vue/src/features/doctor.ts).

`,l.trim()})}})),n.subscriptions.push(jt.commands.registerCommand("volar.action.doctor",()=>{var a;let c=(a=jt.window.activeTextEditor)===null||a===void 0?void 0:a.document;c?.languageId==="vue"&&c.uri.scheme==="file"&&jt.commands.executeCommand("markdown.showPreviewToSide",i(c.uri))}));function i(a){return a.with({scheme:tD,path:a.path+"/Doctor.md"})}function o(a){var c;return Du(this,void 0,void 0,function*(){if(jt.workspace.getConfiguration("volar").get("doctor.statusBarItem")&&a&&a.document.languageId==="vue"&&a.document.uri.scheme==="file"){let u=yield s(a.document.uri);u.length&&((c=jt.window.activeTextEditor)===null||c===void 0?void 0:c.document)===a.document&&(t.show(),t.text=u.length+(u.length===1?" known issue":" known issues"),r.fire(i(a.document.uri)))}else t.hide()})}function s(a){var c,u,l,f;return Du(this,void 0,void 0,function*(){let h=jt.workspace.textDocuments.find(N=>N.fileName===a.fsPath),[p,g,C]=yield Promise.all([e.sendRequest(Kg.GetMatchTsConfigRequest.type,{uri:a.toString()}),e.sendRequest(Kg.GetVueCompilerOptionsRequest.type,{uri:a.toString()}),h?e.sendRequest(Kg.ParseSFCRequest.type,h.getText()):void 0]),b=Ru(a.fsPath,"vue"),R=Ru(a.fsPath,"@vue/runtime-dom"),y=[];if(b){let N=Ei.gte(b.json.version,"3.0.0")?3:Ei.gte(b.json.version,"2.7.0")?2.7:2,V=(c=g?.target)!==null&&c!==void 0?c:3,U=[`Target version mismatch. You can specify the target version in \`vueCompilerOptions.target\` in tsconfig.json / jsconfig.json. (Expected \`"target": ${N}\`)`,"","- vue version: "+b.json.version,"- tsconfig target: "+V+(g?.target!==void 0?"":" (default)"),"- vue: "+b.path,"- tsconfig: "+((u=p?.uri)!==null&&u!==void 0?u:"Not found"),"- vueCompilerOptions:","  ```json",JSON.stringify(g,void 0,2).split(`
`).map(re=>"  "+re).join(`
`),"  ```"];N!==V&&y.push({title:"Incorrect Target",message:U.join(`
`)})}if(b&&Ei.lt(b.json.version,"2.7.0")&&!R&&y.push({title:"`@vue/runtime-dom` missing for Vue 2",message:["Vue 2 does not have JSX types definitions, so template type checking will not work correctly. You can resolve this problem by installing `@vue/runtime-dom` and adding it to your project's `devDependencies`.","","- vue: "+b.path].join(`
`)}),b&&Ei.gte(b.json.version,"2.7.0")&&Ei.lt(b.json.version,"3.0.0")&&R&&y.push({title:"Unnecessary `@vue/runtime-dom`",message:["Vue 2.7 already includes JSX type definitions. You can remove the `@vue/runtime-dom` dependency from package.json.","","- vue: "+b.path,"- @vue/runtime-dom: "+R.path].join(`
`)}),jt.workspace.getConfiguration("volar").get("doctor.checkVueTsc")){let N=Ru(a.fsPath,"vue-tsc");N&&N.json.version!==n.extension.packageJSON.version&&y.push({title:"Different `vue-tsc` version",message:[`The \`${n.extension.packageJSON.displayName}\`'s version is \`${n.extension.packageJSON.version}\`, but the workspace's \`vue-tsc\` version is \`${N.json.version}\`. This may produce different type checking behavior.`,"","- vue-tsc: "+N.path].join(`
`)})}let _=Ru(a.fsPath,"@types/node");_&&Ei.gte(_.json.version,"18.8.1")&&Ei.lte(_.json.version,"18.11.0")&&y.push({title:"Incompatible `@types/node` version",message:["`@types/node`'s version `"+_.json.version+"` is incompatible with Vue. It will cause broken DOM event types in template.","","You can update `@types/node` to `18.11.1` or later to resolve.","","- @types/node: "+_.path,"- Issue: https://github.com/johnsoncodehk/volar/issues/1985"].join(`
`)});let T=jt.extensions.getExtension("octref.vetur");if(T?.isActive&&y.push({title:"Use @volar-plugins/vetur instead of Vetur",message:"Detected Vetur enabled. Consider disabling Vetur and use [@volar-plugins/vetur](https://github.com/johnsoncodehk/volar-plugins/tree/master/packages/vetur) instead."}),((l=C?.descriptor.template)===null||l===void 0?void 0:l.lang)==="pug"&&!(!((f=g?.plugins)===null||f===void 0)&&f.some(N=>N.indexOf("vue-language-plugin-pug")>=0))&&y.push({title:"`@volar/vue-language-plugin-pug` missing",message:['For `<template lang="pug">`, the `@volar/vue-language-plugin-pug` plugin is required. Install it using `$ npm install -D @volar/vue-language-plugin-pug` and add it to `vueCompilerOptions.plugins` to support TypeScript intellisense in Pug templates.',"","- package.json","```json",JSON.stringify({devDependencies:{"@volar/vue-language-plugin-pug":"latest"}},void 0,2),"```","","- tsconfig.json / jsconfig.json","```jsonc",JSON.stringify({vueCompilerOptions:{plugins:["@volar/vue-language-plugin-pug"]}},void 0,2),"```"].join(`
`)}),C){let N=[C.descriptor.template,C.descriptor.script,C.descriptor.scriptSetup,...C.descriptor.styles,...C.descriptor.customBlocks];for(let V of N)if(!!V&&V.lang&&V.lang in nD){let U=nD[V.lang];U.some(ee=>!!jt.extensions.getExtension(ee))||y.push({title:"Syntax Highlighting for "+V.lang,message:`Did not find a valid syntax highlighter extension for ${V.lang} language block; you can choose to install one of the following:

`+U.map(ee=>`- [${ee}](https://marketplace.visualstudio.com/items?itemName=${ee})
`)})}}return y})}})}Lo.register=UN;function Ru(n,e){try{let t=require.resolve(e+"/package.json",{paths:[n]});return{path:t,json:require(t)}}catch{}}});var Bg=D($e=>{var ea=$e&&$e.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty($e,"__esModule",{value:!0});$e.activate=$e.tagNameCasings=$e.attrNameCasings=void 0;var Vt=require("vscode"),zN=Mg(),KN=Ti(),He=Hr(),iD=Gg();$e.attrNameCasings=new Map;$e.tagNameCasings=new Map;function BN(n,e){var t;return ea(this,void 0,void 0,function*(){yield e.start();let r=Vt.window.createStatusBarItem(Vt.StatusBarAlignment.Right);r.command="volar.action.nameCasing",u((t=Vt.window.activeTextEditor)===null||t===void 0?void 0:t.document);let i=Vt.window.onDidChangeActiveTextEditor(h=>{u(h?.document)}),o=Vt.workspace.onDidCloseTextDocument(h=>{$e.attrNameCasings.delete(h.uri.toString()),$e.tagNameCasings.delete(h.uri.toString())}),s=Vt.commands.registerCommand("volar.action.nameCasing",()=>ea(this,void 0,void 0,function*(){var h;if(!(!((h=Vt.window.activeTextEditor)===null||h===void 0)&&h.document))return;let p=Vt.window.activeTextEditor.document,g=$e.attrNameCasings.get(p.uri.toString()),C=$e.tagNameCasings.get(p.uri.toString()),b=yield(0,zN.quickPick)([{1:{label:(C===He.TagNameCasing.Kebab?"\u2022 ":"")+"Component Name Using kebab-case"},2:{label:(C===He.TagNameCasing.Pascal?"\u2022 ":"")+"Component Name Using PascalCase"},3:{label:"Convert Component Name to kebab-case"},4:{label:"Convert Component Name to PascalCase"}},{5:{label:(g===He.AttrNameCasing.Kebab?"\u2022 ":"")+"Prop Name Using kebab-case"},6:{label:(g===He.AttrNameCasing.Camel?"\u2022 ":"")+"Prop Name Using camelCase"},7:{label:"Convert Prop Name to kebab-case"},8:{label:"Convert Prop Name to camelCase"}}]);b!==void 0&&(b==="1"&&$e.tagNameCasings.set(p.uri.toString(),He.TagNameCasing.Kebab),b==="2"&&$e.tagNameCasings.set(p.uri.toString(),He.TagNameCasing.Pascal),b==="3"&&(yield a(Vt.window.activeTextEditor,He.TagNameCasing.Kebab)),b==="4"&&(yield a(Vt.window.activeTextEditor,He.TagNameCasing.Pascal)),b==="5"&&$e.attrNameCasings.set(p.uri.toString(),He.AttrNameCasing.Kebab),b==="6"&&$e.attrNameCasings.set(p.uri.toString(),He.AttrNameCasing.Camel),b==="7"&&(yield c(Vt.window.activeTextEditor,He.AttrNameCasing.Kebab)),b==="8"&&(yield c(Vt.window.activeTextEditor,He.AttrNameCasing.Camel)),f())}));e.onDidChangeState(h=>{h.newState===KN.State.Stopped&&(i.dispose(),o.dispose(),s.dispose(),r.dispose())});function a(h,p){return ea(this,void 0,void 0,function*(){let g=yield e.sendRequest(He.GetConvertTagCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(h.document),casing:p}),C=yield e.protocol2CodeConverter.asTextEdits(g);C&&h.edit(b=>{for(let R of C)b.replace(R.range,R.newText)}),$e.tagNameCasings.set(h.document.uri.toString(),p),f()})}function c(h,p){return ea(this,void 0,void 0,function*(){let g=yield e.sendRequest(He.GetConvertAttrCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(h.document),casing:p}),C=yield e.protocol2CodeConverter.asTextEdits(g);C&&h.edit(b=>{for(let R of C)b.replace(R.range,R.newText)}),$e.attrNameCasings.set(h.document.uri.toString(),p),f()})}function u(h){return ea(this,void 0,void 0,function*(){if(h?.languageId==="vue"||(0,iD.processMd)()&&h?.languageId==="markdown"||(0,iD.processHtml)()&&h?.languageId==="html"){let p,g=$e.attrNameCasings.get(h.uri.toString()),C=$e.tagNameCasings.get(h.uri.toString());if(!g){let b=Vt.workspace.getConfiguration("volar").get("completion.preferredAttrNameCase");b==="kebab"?g=He.AttrNameCasing.Kebab:b==="camel"?g=He.AttrNameCasing.Camel:(p??(p=yield l(h)),p?.attr.length===1?g=p.attr[0]:b==="auto-camel"?g=He.AttrNameCasing.Camel:g=He.AttrNameCasing.Kebab),$e.attrNameCasings.set(h.uri.toString(),g)}if(!C){let b=Vt.workspace.getConfiguration("volar").get("completion.preferredTagNameCase");b==="kebab"?C=He.TagNameCasing.Kebab:b==="pascal"?C=He.TagNameCasing.Pascal:(p??(p=yield l(h)),p?.tag.length===1?C=p.tag[0]:C=He.TagNameCasing.Pascal),$e.tagNameCasings.set(h.uri.toString(),C)}f(),r.show()}else r.hide()})}function l(h){return e.sendRequest(He.DetectNameCasingRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(h)})}function f(){var h;let p=(h=Vt.window.activeTextEditor)===null||h===void 0?void 0:h.document;if(!p)return;let g=$e.attrNameCasings.get(p.uri.toString()),C=$e.tagNameCasings.get(p.uri.toString()),b="<";C===He.TagNameCasing.Kebab?b+="tag-name ":C===He.TagNameCasing.Pascal?b+="TagName ":b+="? ",g===He.AttrNameCasing.Kebab?b+="prop-name":g===He.AttrNameCasing.Camel?b+="propName":b+="?",b+=" />",r.text=b}})}$e.activate=BN});var oD=D(Ho=>{var Vg=Ho&&Ho.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.register=void 0;var Xt=require("vscode"),GN=Hr();function VN(n,e){let t=i();n.subscriptions.push(Xt.commands.registerCommand("volar.action.splitEditors",r));function r(){var o;return Vg(this,void 0,void 0,function*(){let s=Xt.window.activeTextEditor;if(!s)return;let a=(o=yield Xt.workspace.getConfiguration("volar").get("splitEditors.layout"))!==null&&o!==void 0?o:{left:[],right:[]},c=s.document,{descriptor:u}=yield t(c.getText()),l=[],f=[];u.script&&(a.left.includes("script")&&l.push(u.script),a.right.includes("script")&&f.push(u.script)),u.scriptSetup&&(a.left.includes("scriptSetup")&&l.push(u.scriptSetup),a.right.includes("scriptSetup")&&f.push(u.scriptSetup)),u.template&&(a.left.includes("template")&&l.push(u.template),a.right.includes("template")&&f.push(u.template)),a.left.includes("styles")&&(l=l.concat(u.styles)),a.right.includes("styles")&&(f=f.concat(u.styles)),a.left.includes("customBlocks")&&(l=l.concat(u.customBlocks)),a.right.includes("customBlocks")&&(f=f.concat(u.customBlocks)),yield Xt.commands.executeCommand("workbench.action.joinEditorInGroup"),Xt.window.activeTextEditor===s?(yield h(l),yield Xt.commands.executeCommand("workbench.action.toggleSplitEditorInGroup"),yield h(f)):yield Xt.commands.executeCommand("editor.unfoldAll");function h(p){return Vg(this,void 0,void 0,function*(){let g=Xt.window.activeTextEditor;if(!g)return;g.selections=p.length?p.map(b=>new Xt.Selection(c.positionAt(b.loc.start.offset),c.positionAt(b.loc.start.offset))):[new Xt.Selection(c.positionAt(c.getText().length),c.positionAt(c.getText().length))],yield Xt.commands.executeCommand("editor.unfoldAll"),yield Xt.commands.executeCommand("editor.foldLevel1");let C=p.sort((b,R)=>b.loc.start.offset-R.loc.start.offset)[0];C&&g.revealRange(new Xt.Range(c.positionAt(C.loc.start.offset),new Xt.Position(g.document.lineCount,0)),Xt.TextEditorRevealType.AtTop)})}})}function i(){let o,s;return a;function a(c){return Vg(this,void 0,void 0,function*(){return c!==o&&(o=c,s=yield e.sendRequest(GN.ParseSFCRequest.type,c)),s})}}}Ho.register=VN});var Gg=D(ot=>{var ta=ot&&ot.__awaiter||function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};Object.defineProperty(ot,"__esModule",{value:!0});ot.diagnosticModel=ot.disableFileWatcher=ot.reverseConfigFilePriority=ot.noProjectReferences=ot.processMd=ot.processHtml=ot.getDocumentSelector=ot.deactivate=ot.activate=void 0;var At=zb(),Or=Hr(),at=require("vscode"),Su=Ti(),XN=Bb(),JN=rD(),QN=Bg(),YN=oD(),Fi;(function(n){n[n.Semantic=0]="Semantic",n[n.Syntactic=1]="Syntactic"})(Fi||(Fi={}));var Lt,Oi;function ZN(n,e){return ta(this,void 0,void 0,function*(){let t=at.window.onDidChangeActiveTextEditor(r);r();function r(){if(!at.window.activeTextEditor){Xg(n,e),t.dispose();return}let i=at.window.activeTextEditor.document.languageId;(i==="vue"||i==="markdown"&&Wo()||i==="html"&&$o())&&(Xg(n,e),t.dispose()),(0,At.takeOverModeActive)(n)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(i)&&(Xg(n,e),t.dispose())}})}ot.activate=ZN;function Xg(n,e){return ta(this,void 0,void 0,function*(){at.commands.executeCommand("setContext","volar.activated",!0),[Lt,Oi]=yield Promise.all([e("vue-semantic-server","Vue Semantic Server",Jg(n,Or.ServerMode.Semantic),aD(Or.ServerMode.Semantic,n),sD([Fi.Semantic]),6009),e("vue-syntactic-server","Vue Syntactic Server",Jg(n,Or.ServerMode.Syntactic),aD(Or.ServerMode.Syntactic,n),sD([Fi.Syntactic]),6011)]);let t=[Lt,Oi];o(),s(),a(),YN.register(n,Oi),JN.register(n,Lt),XN.register(n,Lt);let r={vue:!0,markdown:!0,javascript:!0,typescript:!0,javascriptreact:!0,typescriptreact:!0};(0,At.activateAutoInsertion)([Oi,Lt],c=>r[c.languageId]),(0,At.activateShowVirtualFiles)("volar.action.showVirtualFiles",Lt),(0,At.activateWriteVirtualFiles)("volar.action.writeVirtualFiles",Lt),(0,At.activateFindFileReferences)("volar.vue.findAllFileReferences",Lt),(0,At.activateTsConfigStatusItem)("volar.openTsconfig",Lt,c=>c.languageId==="vue"||Wo()&&c.languageId==="markdown"||$o()&&c.languageId==="html"||(0,At.takeOverModeActive)(n)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(c.languageId)),(0,At.activateReloadProjects)("volar.action.reloadProject",[Lt]),(0,At.activateServerStats)("volar.action.serverStats",[Lt]),(0,At.activateTsVersionStatusItem)("volar.selectTypeScriptVersion",n,Lt,c=>c.languageId==="vue"||Wo()&&c.languageId==="markdown"||$o()&&c.languageId==="html"||(0,At.takeOverModeActive)(n)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(c.languageId),c=>((0,At.takeOverModeActive)(n)&&(c+=" (takeover)"),Qg()&&(c+=" (noProjectReferences)"),c));for(let c of t)(0,At.activateShowReferences)(c),(0,At.activateServerSys)(c);function i(){return ta(this,void 0,void 0,function*(){(yield at.window.showInformationMessage("Please reload VSCode to restart language servers.","Reload Window"))!==void 0&&at.commands.executeCommand("workbench.action.reloadWindow")})}function o(){at.workspace.onDidChangeConfiguration(c=>{(c.affectsConfiguration("volar.vueserver.maxOldSpaceSize")||c.affectsConfiguration("volar.vueserver.diagnosticModel")||c.affectsConfiguration("volar.vueserver.noProjectReferences")||c.affectsConfiguration("volar.vueserver.reverseConfigFilePriority")||c.affectsConfiguration("volar.vueserver.disableFileWatcher")||c.affectsConfiguration("volar.vueserver.petiteVue.processHtmlFile")||c.affectsConfiguration("volar.vueserver.vitePress.processMdFile")||c.affectsConfiguration("volar.vueserver.additionalExtensions")||c.affectsConfiguration("volar.vueserver.maxFileSize")||c.affectsConfiguration("volar.vueserver.configFilePath")||c.affectsConfiguration("volar.vueserver.fullCompletionList"))&&i()})}function s(){return ta(this,void 0,void 0,function*(){n.subscriptions.push(at.commands.registerCommand("volar.action.restartServer",()=>ta(this,void 0,void 0,function*(){yield Promise.all(t.map(c=>c.stop())),yield Promise.all(t.map(c=>c.start())),a()})))})}function a(){QN.activate(n,Lt)}})}function eI(){return Promise.all([Lt?.stop(),Oi?.stop()])}ot.deactivate=eI;function Jg(n,e){let t=(0,At.takeOverModeActive)(n),r=t?["vue","javascript","typescript","javascriptreact","typescriptreact"]:["vue"];return t&&e===Or.ServerMode.Semantic&&r.push("json"),$o()&&r.push("html"),Wo()&&r.push("markdown"),r}ot.getDocumentSelector=Jg;function $o(){return!!at.workspace.getConfiguration("volar").get("vueserver.petiteVue.processHtmlFile")}ot.processHtml=$o;function Wo(){return!!at.workspace.getConfiguration("volar").get("vueserver.vitePress.processMdFile")}ot.processMd=Wo;function Qg(){return!!at.workspace.getConfiguration("volar").get("vueserver.noProjectReferences")}ot.noProjectReferences=Qg;function cD(){return!!at.workspace.getConfiguration("volar").get("vueserver.reverseConfigFilePriority")}ot.reverseConfigFilePriority=cD;function uD(){return!!at.workspace.getConfiguration("volar").get("vueserver.disableFileWatcher")}ot.disableFileWatcher=uD;function lD(){return at.workspace.getConfiguration("volar").get("vueserver.diagnosticModel")}ot.diagnosticModel=lD;function tI(){var n;return(n=at.workspace.getConfiguration("volar").get("vueserver.additionalExtensions"))!==null&&n!==void 0?n:[]}function nI(){return at.workspace.getConfiguration("volar").get("vueserver.fullCompletionList")}function sD(n){return function(e){e.locale=at.env.language,e.capabilities.textDocument&&(n.includes(Fi.Semantic)||(e.capabilities.textDocument.references=void 0,e.capabilities.textDocument.implementation=void 0,e.capabilities.textDocument.definition=void 0,e.capabilities.textDocument.typeDefinition=void 0,e.capabilities.textDocument.callHierarchy=void 0,e.capabilities.textDocument.hover=void 0,e.capabilities.textDocument.rename=void 0,e.capabilities.textDocument.signatureHelp=void 0,e.capabilities.textDocument.codeAction=void 0,e.capabilities.textDocument.completion=void 0,e.capabilities.textDocument.documentHighlight=void 0,e.capabilities.textDocument.documentLink=void 0,e.capabilities.textDocument.codeLens=void 0,e.capabilities.textDocument.semanticTokens=void 0,e.capabilities.textDocument.inlayHint=void 0,e.capabilities.textDocument.diagnostic=void 0),n.includes(Fi.Syntactic)||(e.capabilities.textDocument.selectionRange=void 0,e.capabilities.textDocument.foldingRange=void 0,e.capabilities.textDocument.linkedEditingRange=void 0,e.capabilities.textDocument.documentSymbol=void 0,e.capabilities.textDocument.colorProvider=void 0,e.capabilities.textDocument.formatting=void 0,e.capabilities.textDocument.rangeFormatting=void 0,e.capabilities.textDocument.onTypeFormatting=void 0)),e.capabilities.workspace&&(n.includes(Fi.Semantic)||(e.capabilities.workspace.symbol=void 0,e.capabilities.workspace.fileOperations=void 0))}}function aD(n,e){let t=at.workspace.getConfiguration("volar").get("vueserver.textDocumentSync");return{configFilePath:at.workspace.getConfiguration("volar").get("vueserver.configFilePath"),respectClientCapabilities:!0,serverMode:n,diagnosticModel:n===Or.ServerMode.Syntactic?Or.DiagnosticModel.None:lD()==="pull"?Or.DiagnosticModel.Pull:Or.DiagnosticModel.Push,textDocumentSync:t?{incremental:Su.TextDocumentSyncKind.Incremental,full:Su.TextDocumentSyncKind.Full,none:Su.TextDocumentSyncKind.None}[t]:Su.TextDocumentSyncKind.Incremental,typescript:{tsdk:(0,At.getTsdk)(e).tsdk},noProjectReferences:Qg(),reverseConfigFilePriority:cD(),disableFileWatcher:uD(),maxFileSize:at.workspace.getConfiguration("volar").get("vueserver.maxFileSize"),petiteVue:{processHtmlFile:$o()},vitePress:{processMdFile:Wo()},json:{customBlockSchemaUrls:at.workspace.getConfiguration("volar").get("vueserver.json.customBlockSchemaUrls")},additionalExtensions:tI(),semanticTokensLegend:{tokenTypes:["component"],tokenModifiers:[]},fullCompletionList:nI()}}});var hD=D(Pu=>{Object.defineProperty(Pu,"__esModule",{value:!0});Pu.middleware=void 0;var Tu=Hr(),dD=require("vscode"),fD=Bg();Pu.middleware={workspace:{configuration(n,e,t){return n.items.some(r=>r.section==="volar.completion.preferredAttrNameCase"||r.section==="volar.completion.preferredTagNameCase")?n.items.map(r=>{if(r.scopeUri){if(r.section==="volar.completion.preferredTagNameCase"){let i=fD.tagNameCasings.get(r.scopeUri);if(i===Tu.TagNameCasing.Kebab)return"kebab";if(i===Tu.TagNameCasing.Pascal)return"pascal"}if(r.section==="volar.completion.preferredAttrNameCase"){let i=fD.attrNameCasings.get(r.scopeUri);if(i===Tu.AttrNameCasing.Kebab)return"kebab";if(i===Tu.AttrNameCasing.Camel)return"camel"}}return dD.workspace.getConfiguration(r.section,r.scopeUri?dD.Uri.parse(r.scopeUri):void 0)}):t(n,e)}}}});Object.defineProperty(exports,"__esModule",{value:!0});exports.deactivate=exports.activate=void 0;var rI=Hr(),iI=require("fs"),oI=require("os"),sI=require("path"),Yg=require("vscode"),Zg=gC(),em=Gg(),aI=hD();function cI(n){let e=sI.join(oI.tmpdir(),`vscode-${n.extension.id}-cancellation-pipe.tmp`),t=(0,em.getDocumentSelector)(n,rI.ServerMode.Semantic),r;return Yg.workspace.onDidChangeTextDocument(i=>{let o=i.document.uri.toString()+"|"+i.document.version;if(r===void 0){r=o;return}t.includes(i.document.languageId)&&r!==o&&(r=o,iI.writeFileSync(e,""))}),(0,em.activate)(n,(i,o,s,a,c,u)=>{a.cancellationPipeName=e;class l extends Zg.LanguageClient{fillInitializeParams(_){c(_)}}let f=Yg.Uri.joinPath(n.extensionUri,"server.js"),h=Yg.workspace.getConfiguration("volar").get("vueserver.maxOldSpaceSize"),p={execArgv:[]};h&&p.execArgv.push("--max-old-space-size="+h);let g={execArgv:["--nolazy","--inspect="+u]},C={run:{module:f.fsPath,transport:Zg.TransportKind.ipc,options:p},debug:{module:f.fsPath,transport:Zg.TransportKind.ipc,options:g}},b={middleware:aI.middleware,documentSelector:s.map(y=>({language:y})),initializationOptions:a,progressOnInitialization:!0},R=new l(i,o,C,b);return R.start(),R})}exports.activate=cI;function uI(){return(0,em.deactivate)()}exports.deactivate=uI;
